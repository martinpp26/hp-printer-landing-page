//15.169.0-es2019 2026-01-22T13:03:01.051Z (5a24ef7efc2d3)
var CS_CONF={"collectionEnabled":true,"useSentry":false,"projectId":46448,"status":1,"hostnames":["hp.com","omen.com","myarize-orthotics.com","hyperx.com","login3.id.hp.com","printlearncenter.com","tms-interactive.com"],"crossDomainTracking":1,"crossDomainSingleIframeTracking":1,"consentRequired":0,"allowSubdomains":1,"visitorCookieTimeout":34164000000,"sampleRate":100,"replayRecordingRate":50,"validationRate":10,"lastTrackingDraw":1767734533,"trackerDomain":"c.contentsquare.net","recordingDomain":"r.contentsquare.net","useMalkaPipeline":1,"ed":"l.contentsquare.net/log/web","eMerchandisingEnabled":0,"mouseMoveHeatmapEnabled":1,"jsErrorsEnabled":1,"customErrorsEnabled":0,"jsCustomErrorsEnabled":0,"apiErrorsEnabled":1,"customHashIdEnabled":0,"recordingEncryptionEnabled":0,"recordingEncryptionPublicKey":null,"recordingEncryptionPublicKeyId":0,"secureCookiesEnabled":0,"triggerSessionReplayEnabled":0,"triggerSessionReplayRegex":null,"dynamicIdRegex":"((^[\\w-]{11}-[0-9]$)|(^fs-[\\w-]+))","whitelistedAttributes":[],"replayRecordingUnmaskedUrlRegex":null,"replayRecordingUnmaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegex":"^(?!.*uat).*support\\.hp\\.com.*|^(?!.*uat).*ppssupport.*|(https:\\/\\/h304\\d\\d.www3.hp.com(\\/)*)|.*(www.hp.com)(\\/us-en\\/shop\\/MyAccountFormView|\\/us-en\\/shop\\/AddressBookDashboard|\\/us-en\\/shop\\/AddAddress)(\\/?.*)?|.*(www.hp.com)(\\/us-en\\/shop\\/MyAccountFormView|\\/us-en\\/shop\\/AddressBookDashboard|\\/us-en\\/shop\\/AddAddress|\\/us-en\\/shop\\/MyOrdersView|\\/us-en\\/shop\\/MySubscriptionsView|\\/us-en\\/shop\\/UserRegistrationForm)(\\/?.*)?","anonymisationMethod":"replayRecordingMaskedUrlRegex","tagDeploymentMode":"CONTENTSQUARE","experimental":null,"iframesTracking":0,"textVisibilityEnabled":1,"cookielessTrackingEnabled":0,"malkaUrlEnabled":0,"malkaEtrEnabled":0,"pathComputationRules":{"reliableSelectors":[],"uniqueAttributes":[],"uniqueCssSelectors":[]},"asyncSerializerEnabled":1,"pendingInactivityTimeout":5000,"accessibilityEnabled":0,"uxaDomain":"app.contentsquare.com","webviewsTrackingEnabled":0,"useStaticResourceManager":1,"performanceTimingOptions":{"withNavigation":false,"withResource":false},"replayConsentRequiredForSession":0,"eventsApiEnabled":0,"clickedElementTextEnabled":0,"collectHierarchy":0,"collectSubmit":0,"collectTargetText":0,"apiErrors":{"collectStandardHeaders":0,"collectionRules":[{"bodyAttributePaths":[{"path":"errors[0].message","encrypted":0,"primary":0,"type":"response"}],"collectQueryParam":0,"collectRequestBody":0,"collectResponseBody":0,"customHeaders":[],"url":"graphql","statusCode":200,"bodyContent":"errors\":"},{"bodyAttributePaths":[],"collectQueryParam":0,"collectRequestBody":0,"collectResponseBody":0,"customHeaders":[{"headerName":"cf-cache-status","encrypted":0,"type":"request"},{"headerName":"cf-ray","encrypted":0,"type":"request"},{"headerName":"x-cache-enabled","encrypted":0,"type":"request"},{"headerName":"x-cache","encrypted":0,"type":"request"},{"headerName":"x-amz-cf-id","encrypted":0,"type":"request"},{"headerName":"x-ray","encrypted":0,"type":"request"},{"headerName":"upgrade","encrypted":0,"type":"request"},{"headerName":"X-Request-Id","encrypted":0,"type":"request"},{"headerName":"x-wix-request-id","encrypted":0,"type":"request"},{"headerName":"X-Pass-Why","encrypted":0,"type":"request"},{"headerName":"x-nginx-cache-status","encrypted":0,"type":"request"},{"headerName":"trace-id","encrypted":0,"type":"request"},{"headerName":"traceparent","encrypted":0,"type":"request"},{"headerName":"X-NewRelic-Transaction","encrypted":0,"type":"request"},{"headerName":"X-Datadog-Trace-ID","encrypted":0,"type":"request"}]}]},"displayAdOptions":null,"taskSchedulerOptions":{"enabled":1},"malkaQuotaServiceDomain":"q-aus1.contentsquare.net","malkaRecordingDomain":"k-aus1.contentsquare.net","staticResourceManagerDomain":"srm.bf.contentsquare.net","voc":{"siteId":null,"enabled":0},"implementations":[{"template":{"name":"PiiMasking","args":{"cssSelectors":["#wpr-signin .signin-button span p[name]"],"attributes":[]}},"triggers":[{"name":"BeforePageView","args":{"pageviewTypes":["natural","artificial"]}}]},{"template":{"name":"PiiMasking","args":{"cssSelectors":["#header > div.wps-header-wrapper > div.wps-mobile > nav > div.wpr-signin-menu.open > div"],"attributes":[]}},"triggers":[{"name":"BeforePageView","args":{"pageviewTypes":["natural","artificial"]}}]}],"anonymizeDigits":null,"dynamicConfDomain":"t.contentsquare.net/settings","tagVerificationDomain":"tcvsapi.contentsquare.com","startMode":1};
var CS_INTEGRATIONS_CONF = {"adobe-target":{},"demandbase":{"settings":["enableAccessType","enableAnnualSales","enableAudience","enableAudienceSegment","enableB2B","enableB2C","enableCity","enableCompanyName","enableCountryName","enableEmployeeCount","enableEmployeeRange","enableFortune1000","enableForbes2000","enableIndustry","enableInformationLevel","enableMarketingAlias","enableNAICS","enableSIC","enableRevenueRange","enableSubIndustry","enableState","enableStockTicker","enableTraffic","enableWatchListAccountStatus","enableWatchListAccountType","enableWebsite"]},"medallia":{},"optimizely":{},"usabilla":{},"youtube":{"settings":["enableVideoStarted","enableVideoPaused","enableVideoCompleted","enableVideoPlayDuration","enableVideoQuality","enableVideoMuted"]},"namogoo":{"settings":["probabilityAbandonment","adBlocker","aff_id","Amazon_Loyal_Customer","isAutoTranslated","batteryIsCharging","batteryPercentage","isBot","isCameraApproved","Capital_One_Loyal_Customer","cashbackVisitors","Cashback_Visitor","isCopiedText","couponsVisitors","Coupoun_Lovers","cpuStrengthScore","isCustomer","darkMode","Engaged_Visitor","English_Speakers","French_Speakers","German_Speakers","High_Probability_Abandonment","High_Probability_Purchase","Honey_Loyal_Customer","honeyVisitors","isIncognitoSession","campaignName","Italian_Speakers","isLocationApproved","lowBattery","Low_Probability_Abandonment","Low_Probability_Purchase","areMultipleTabsOpen","networkStrengthScore","areNotificationsApproved","numOfOpenTabs","Online_Shopper","pref_language","Price_Conscious_Visitor","probabilityPurchase","rakuteneBatesVisitors","feelsLike_c","feelsLike_f","recommendedConversionIncentive","RetailMeNot_Loyal_Customer","probabilityRetention","scrollSpeed","scrollBelowTheFold","isShopperExtensions","Spanish_Speakers","Strong_Web_Visitor","isTabInFocus","tempCValue","tempFValue","The_Trendy_Customers","Thrifty_Shoppers","timeOffTabScore","timeOnPageScore","timeOnSiteScore","Visitor_Browsing_From_Cloudy_Weather_Condition","Visitor_Browsing_From_Cold_Weather","Visitor_Browsing_From_Hot_Weather","Visitor_Browsing_From_Rainy_Weather_Condition","Visitor_Browsing_From_Snowy_Weather_Condition","Visitor_Browsing_From_Sunny_Weather_Condition","Visitor_Browsing_Using_VPN","Visitor_Having_Slow_Wifi","Visitor_Having_Strong_Device","Visitor_Having_Strong_Wifi","Visitor_Having_Weak_Device","vpnProbability","weatherCondition"]}};
/* integration-adobe-target 3.8.1 */
(()=>{"use strict";function e(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold"),console.log(e))}}function n(e,n,t){if((t=t||window)&&n&&e){let o=!1,i=t[e];i?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return i},set:function(e){i=e,o||(o=!0,n())}})}}const t=JSON.parse('{"Q":"Adobe Target","M":"AB_AT_"}'),o=function(n){let t,o,i,c;if(e(function(){const e=n.name;t=n.version;const a=e.replace("@contentsquare/integration-","");o=a+"-"+t;let r="-contentsquare";c=new RegExp(r+"$").test(a),i=a.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),c||(r="-cap",c=new RegExp(r+"$").test(a),i=a.replace(/-cap([^-cap]*)$/,"$1"))},"Shared-Function-readPackageJSON"),c)return{snippetBuildName:o,parameterName:i,snippetVersion:t}}(JSON.parse('{"name":"@contentsquare/integration-adobe-target-contentsquare","version":"3.8.1","scripts":{"build:snippet":"npx webpack"}}')),i=o.parameterName,c=o.snippetBuildName,a=o.snippetVersion;e(function(){const o=t.Q,r=t.M;var u,s;u=o,s=a,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(u+" - v"+s);const l=function(e){function n(e){return"object"==typeof e&&null!==e}if(n(window.CS_INTEGRATIONS_CONF)&&n(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e].customObjectName}(i),d=l?l.trim():"ttMETA";function p(e,n){var t,o;(function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])})(e=r+e,n),function(e,n,t){(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(t?"warn"===t&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color:rgb(255, 86, 2); font-weight: bold"):console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold"))}(c,(t=e,o=n,document.getElementById("csKey")&&document.getElementById("csValue")&&(document.getElementById("csKey").textContent=t,document.getElementById("csValue").textContent=o),`Dynamic variable with ${t} and value ${o} sent`))}const g=[];function f(e){if(e&&function(e){return Array.isArray(e)}(e))for(const n of e){let e,t;n.CampaignName&&n.RecipeName?(e=n.CampaignName,t=n.RecipeName):n.campaign&&n.experience?(e=n.campaign,t=n.experience):n["activity.name"]&&n["experience.name"]&&(e=n["activity.name"],t=n["experience.name"]),g.length&&g.includes(e+"~~~~"+t)&&(e="",t=""),e&&t&&(g.push(e+"~~~~"+t),p(e,t))}}document.addEventListener("at-request-succeeded",function(n){e(function(){n&&n.detail&&n.detail.responseTokens&&f(n.detail.responseTokens)},c)}),function(e,t,o){o=o||window;const i=e.split(".");if(1==i.length)n(e,t,o);else{let e=o,c=0;const a=function(){e=c>0?e[i[c-1]]:window,c++,c>=i.length?n(i[c-1],t,e):n(i[c-1],a,e)};a()}}(d,function(){setTimeout(function(){e(function(){f(window[d])},c)},500)})},c)})();
/* integration-demandbase 2.9.0 */
!function(e){var n={};function t(a){if(n[a])return n[a].exports;var i=n[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:a})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(t.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(a,i,function(n){return e[n]}.bind(null,i));return a},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e){e.exports=JSON.parse('{"displayName":"Demandbase","dvarPrefix":"ABM_DB_"}')},function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-demandbase-contentsquare","version":"2.9.0","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function a(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e.message]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold")}}function i(e,n){function t(e){return"object"==typeof e&&null!==e}if(t(window.CS_INTEGRATIONS_CONF)&&t(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][n]}t.r(n);function o(e,n,t){if((t=t||window)&&n&&e){let a=!1,i=t[e];i?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return i},set:function(e){i=e,a||(a=!0,n())}})}}function r(e,n){!!(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold")}var c=t(0);const u=function(e){let n,t,i,o;if(a((function(){const a=e.name;n=e.version;const r=a.replace("@contentsquare/integration-","");t=r+"-"+n;let c="-contentsquare";o=new RegExp(c+"$").test(r),i=r.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),o||(c="-cap",o=new RegExp(c+"$").test(r),i=r.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),o)return{snippetBuildName:t,parameterName:i,snippetVersion:n}}(t(1)),s=u.parameterName,l=u.snippetBuildName,d=u.snippetVersion;a((function(){const e=c.displayName,n=c.dvarPrefix;var t,u;t=e,u=d,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(t+" - v"+u);const f=i(s,"settings"),b=(p=f,Array.isArray(p)?f:[]);var p;const _=b.includes("enableAccessType"),y=b.includes("enableAnnualSales"),m=b.includes("enableAudience"),g=b.includes("enableAudienceSegment"),w=b.includes("enableB2B"),S=b.includes("enableB2C"),N=b.includes("enableCity"),C=b.includes("enableCompanyName"),v=b.includes("enableCountryName"),O=b.includes("enableEmployeeCount"),A=b.includes("enableEmployeeRange"),I=b.includes("enableFortune1000"),h=b.includes("enableForbes2000"),T=b.includes("enableIndustry"),x=b.includes("enableInformationLevel"),E=b.includes("enableMarketingAlias"),k=b.includes("enableNAICS"),R=b.includes("enableSIC"),$=b.includes("enableRevenueRange"),P=b.includes("enableSubIndustry"),j=b.includes("enableState"),F=b.includes("enableStockTicker"),q=b.includes("enableTraffic"),B=b.includes("enableWatchListAccountStatus"),D=b.includes("enableWatchListAccountType"),M=b.includes("enableWebsite"),L=i(s,"customObjectName"),W=L&&L.trim()||"Demandbase.IpApi.CompanyProfile";function G(e,t){(function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])})(e=n+e,t),r(l,`Dynamic variable with ${e} and value ${t} sent`)}!function(e,n,t){t=t||window;const a=e.split(".");if(1==a.length)o(e,n,t);else{let e=t,i=0;const r=function(){e=i>0?e[a[i-1]]:window,i++,i>=a.length?o(a[i-1],n,e):o(a[i-1],r,e)};r()}}(W,(function(){setTimeout((function(){a((function(){const e=function(e,n){const t=(n=(n=n.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split(".");for(let n=0,a=t.length;n<a;++n){const a=t[n];if(!(a in e))return;e=e[a]}return e}(window,W);"object"==typeof e&&(_&&e.access_type&&G("Access Type",e.access_type),y&&e.annual_sales&&!isNaN(e.annual_sales)&&G("Annual Sales",parseInt(e.annual_sales)),m&&e.audience&&G("Audience",e.audience),g&&e.audience_segment&&G("Audience Segment",e.audience_segment),w&&("boolean"!=typeof e.b2b&&"true"!==e.b2b&&"false"!==e.b2b||G("B2B",e.b2b.toString())),S&&("boolean"!=typeof e.b2c&&"true"!==e.b2c&&"false"!==e.b2c||G("B2C",e.b2c.toString())),N&&e.city&&G("City",e.city),C&&e.company_name&&G("Company Name",e.company_name),v&&e.country_name&&G("Country Name",e.country_name),O&&e.employee_count&&!isNaN(e.employee_count)&&G("Employee Count",parseInt(e.employee_count)),A&&e.employee_range&&G("Employee Range",e.employee_range),I&&("boolean"!=typeof e.fortune_1000&&"true"!==e.fortune_1000&&"false"!==e.fortune_1000||G("Fortune 1000",e.fortune_1000.toString())),h&&("boolean"!=typeof e.forbes_2000&&"true"!==e.forbes_2000&&"false"!==e.forbes_2000||G("Forbes 2000",e.forbes_2000.toString())),T&&e.industry&&G("Industry",e.industry),x&&e.information_level&&G("Information Level",e.information_level),E&&e.marketing_alias&&G("Marketing Alias",e.marketing_alias),k&&e.primary_naics&&G("Primary NAICS",e.primary_naics.toString()),R&&e.primary_sic&&G("Primary SIC",e.primary_sic.toString()),$&&e.revenue_range&&G("Revenue Range",e.revenue_range),P&&e.sub_industry&&G("Sub Industry",e.sub_industry),j&&e.state&&G("State",e.state),F&&e.stock_ticker&&G("Stock Ticker",e.stock_ticker),q&&e.traffic&&G("Traffic",e.traffic),B&&e.watch_list_account_status&&G("Watch List Account Status",e.watch_list_account_status),D&&e.watch_list_account_type&&G("Watch List Account Type",e.watch_list_account_type),M&&e.web_site&&G("Website",e.web_site))}),l)}),500)}))}),l)}]);
/* integration-medallia 3.2.1 */
!function(e){var n={};function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(i,o,function(n){return e[n]}.bind(null,o));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e){e.exports=JSON.parse('{"displayName":"Medallia","dvarPrefix":"FB_MD_","apvPrefix":"cs_medallia","replayKey":"md"}')},function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-medallia-contentsquare","version":"3.2.1","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function i(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold"),console.log(e))}}function o(e,n){function t(e){return"object"==typeof e&&null!==e}if(t(window.CS_INTEGRATIONS_CONF)&&t(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][n]}function a(e){return Array.isArray(e)}t.r(n);function r(e,n,t){if((t=t||window)&&n&&e){let i=!1,o=t[e];o?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return o},set:function(e){o=e,i||(i=!0,n())}})}}function c(e,n,t){!!(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(t?"warn"===t&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color:rgb(255, 86, 2); font-weight: bold"):console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold"))}var d=t(0);const u=function(e){let n,t,o,a;if(i((function(){const i=e.name;n=e.version;const r=i.replace("@contentsquare/integration-","");t=r+"-"+n;let c="-contentsquare";a=new RegExp(c+"$").test(r),o=r.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),a||(c="-cap",a=new RegExp(c+"$").test(r),o=r.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),a)return{snippetBuildName:t,parameterName:o,snippetVersion:n}}(t(1)),l=u.parameterName,s=u.snippetBuildName,f=u.snippetVersion;i((function(){const e=d.displayName,n=d.dvarPrefix,t=d.apvPrefix,u=d.replayKey;var p,w;p=e,w=f,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(p+" - v"+w);const _=o(l,"settings"),g=a(_)?_:[],m=g.includes("sendArtificialPageviews"),y=g.includes("setReplayLinkToCurrentPV"),b=g.includes("sendPageEvents"),I=g.includes("disallowOpenEndedQuestions"),v=g.includes("sendIDToCS");let S=!1;function D(e,t,i,o){if(function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])}(e=n+e,t),b){!function(e){window._uxa=window._uxa||[],window._uxa.push(["trackPageEvent",e])}(e+" | "+t)}var a,r;S&&"etr"===i&&function(e){window._uxa=window._uxa||[],window._uxa.push(["trackEventTriggerRecording","@ETS@"+e])}(e),o&&m&&function(e){window._uxa=window._uxa||[],window._uxa.push(["trackPageview",e])}(window.location.pathname+"?"+o),c(s,(a=e,r=t,document.getElementById("csKey")&&document.getElementById("csValue")&&(document.getElementById("csKey").textContent=a,document.getElementById("csValue").textContent=r),`Dynamic variable with ${a} and value ${r} sent`))}!function(e,n,t){t=t||window;const i=e.split(".");if(1==i.length)r(e,n,t);else{let e=t,o=0;const a=function(){e=o>0?e[i[o-1]]:window,o++,o>=i.length?r(i[o-1],n,e):r(i[o-1],a,e)};a()}}("MDIGITAL",(function(){i((function(){window.addEventListener("MDigital_Feedback_Button_Clicked",(function(e){i((function(){if(e&&e.detail&&e.detail.Form_ID){D("Feedback Button Clicked","Survey ID : "+e.detail.Form_ID.toString())}}),s+"-MDigital_Feedback_Button_Clicked")})),window.addEventListener("MDigital_Invite_Displayed",(function(e){i((function(){if(e&&e.detail&&e.detail.Form_ID){const n=e.detail.Form_ID.toString();D("Feedback Invite Displayed","Survey ID : "+n,0,t+"=feedback_invite_displayed_"+n)}}),s+"-MDigital_Invite_Displayed")})),window.addEventListener("MDigital_Invite_Accepted",(function(e){i((function(){if(e&&e.detail&&e.detail.Form_ID){D("Feedback Invite Accepted","Survey ID : "+e.detail.Form_ID.toString())}}),s+"-MDigital_Invite_Accepted")})),window.addEventListener("MDigital_Form_Displayed",(function(e){i((function(){if(e&&e.detail&&e.detail.Form_ID){const n=e.detail.Form_ID.toString();D("Feedback Displayed","Survey ID : "+n,0,t+"=feedback_displayed_"+n)}}),s+"-MDigital_Form_Displayed")})),window.addEventListener("MDigital_Submit_Feedback",(function(e){i((function(){if(e&&e.detail){const n=e.detail;if(n.Feedback_UUID&&n.Form_ID&&n.Form_Type){const e=n.Form_ID.toString(),i=n.Feedback_UUID,o=n.Form_Type;D("Feedback Submitted","Survey ID : "+e,"etr",t+"=feedback_submitted_"+e),D("Feedback UUID",i),D("Form Type",o)}if(a(n.Content))for(let e=0;e<n.Content.length;e++){const t=n.Content[e].value,i=n.Content[e].type,o=n.Content[e].unique_name,a=n.Content[e].id;let r=o;if(v&&(r=a),i)if(i.toLowerCase().indexOf("grading")>-1||i.toLowerCase().indexOf("nps")>-1){if(!isNaN(t)){const i=parseInt(t);isNaN(i)||(n.Content[e].type.toLowerCase().indexOf("nps")>-1?D("NPS Rating "+r,i):D("Rating "+r,i))}}else if("select"===i||"radio"===i){if("object"==typeof t){let e=t.label;v&&(e=t.selection_id.toString()),e&&D(r,e)}}else I||"textInput"!==i&&"textArea"!==i||t&&D(r,t)}}}),s+"-MDigital_Submit_Feedback")})),function(e,n,t,i){return new Promise((function(o,a){function r(){window._uxa.push(["replay:link:generate",{withTimestamp:t},c])}function c(i){if(i&&i.replayLink&&i.isRecording){let a="https://"+i.replayLink+"&vd="+e;if(!n&&!t){const e=new URLSearchParams(a);e.set("pvid",1);const n=e.toString();a=decodeURIComponent(n)}o(a)}}e||(e="missingFromDynamicSnippet"),t||(t=!1),i?r():(window._uxa=window._uxa||[],window._uxa.push(["onRecordingStateChange",function(e){e&&e.isRecording&&r()}]))}))}(u,y).then((function(e){i((function(){S=!0,e&&(window.ClickTale||(window.ClickTale={}),ClickTale.KampyleLink=e,CS_CONF.integrations_handler=CS_CONF.integrations_handler||{},CS_CONF.integrations_handler.medallia=e)}),s+"-generateReplayLink")}))}),s+"-startIntegration")}))}),s+"-main")}]);
/* integration-optimizely 2.9.2 */
(()=>{"use strict";function e(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold"),console.log(e))}}function n(e){window._uxa=window._uxa||[],window._uxa.push(["event",e])}function t(e,n,t){if((t=t||window)&&n&&e){let i=!1,o=t[e];o?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return o},set:function(e){o=e,i||(i=!0,n())}})}}function i(e){return e&&"string"==typeof e?e.replace(/[\W_]+/g,"-"):""}const o=JSON.parse('{"QC":"Optimizely","Mz":"AB_OP_","be":"OP_"}'),a=function(n){let t,i,o,a;if(e(function(){const e=n.name;t=n.version;const c=e.replace("@contentsquare/integration-","");i=c+"-"+t;let r="-contentsquare";a=new RegExp(r+"$").test(c),o=c.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),a||(r="-cap",a=new RegExp(r+"$").test(c),o=c.replace(/-cap([^-cap]*)$/,"$1"))},"Shared-Function-readPackageJSON"),a)return{snippetBuildName:i,parameterName:o,snippetVersion:t}}(JSON.parse('{"name":"@contentsquare/integration-optimizely-contentsquare","version":"2.9.2","scripts":{"build:snippet":"npx webpack"}}')),c=(a.parameterName,a.snippetBuildName),r=a.snippetVersion;e(function(){const a=o.QC,s=o.Mz,l=o.be;var u,p;function d(e,t){!function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])}(e=s+e,t);const o=t.endsWith(" [Holdback]");var a,r;n(`${o?"HB_":""}${i(e.replace(s,""))}/${o?t.replace(" [Holdback]",""):i(t)}`),n(`${l}${i(e.replace(s,""))}-${i(t)}`),function(e,n,t){(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&(t?"warn"===t&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color:rgb(255, 86, 2); font-weight: bold"):console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold"))}(c,(a=e,r=t,document.getElementById("csKey")&&document.getElementById("csValue")&&(document.getElementById("csKey").textContent=a,document.getElementById("csValue").textContent=r),`Dynamic variable with ${a} and value ${r} sent`))}u=a,p=r,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(u+" - v"+p);let m=!1;const g=[];!function(e,n,i){i=i||window;const o=e.split(".");if(1==o.length)t(e,n,i);else{let e=i,a=0;const c=function(){e=a>0?e[o[a-1]]:window,a++,a>=o.length?t(o[a-1],n,e):t(o[a-1],c,e)};c()}}("optimizely",function(){setTimeout(function(){e(function(){function n(){e(function(){const e=optimizely.get&&optimizely.get("state");if(e&&e.getCampaignStates&&"function"==typeof e.getCampaignStates&&"object"==typeof e.getCampaignStates()){const t=e.getCampaignStates({isActive:!0}),i=Object.keys(t);if(n=i,Array.isArray(n))for(let e=0;e<i.length;e++)if(-1===g.indexOf(i[e])){g.push(i[e]);const n=t[i[e]];if(n.experiment){let e,t;e=n.experiment.name?n.campaignName:n.experiment.id,t=n.experiment.campaignName&&n.experiment.name?n.experiment.name+" - "+n.variation.name:n.variation.name?n.variation.name:n.variation.id,n.isInCampaignHoldback&&(t+=" [Holdback]"),e&&t&&d(e,t)}}}var n},c)}n(),m||(m=!0,window.optimizely=window.optimizely||[],"function"==typeof optimizely.push&&optimizely.push({type:"addListener",filter:{type:"lifecycle",name:"campaignDecided"},handler:n}))},c)},500)})},c)})();
/* integration-usabilla 3.2.0 */
!function(e){var n={};function t(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var a in e)t.d(i,a,function(n){return e[n]}.bind(null,a));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e){e.exports=JSON.parse('{"displayName":"GetFeedback Digital (Usabilla)","dvarPrefix":"FB_UB_","apvPrefix":"cs_usabilla","replayKey":"ub"}')},function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-usabilla-contentsquare","version":"3.2.0","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function i(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e.message]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold")}}function a(e,n,t,i){return new Promise((function(a,o){function c(){window._uxa.push(["replay:link:generate",{withTimestamp:t},r])}function r(i){if(i&&i.replayLink&&i.isRecording){let o="https://"+i.replayLink+"&vd="+e;if(!n&&!t){const e=new URLSearchParams(o);e.set("pvid",1);const n=e.toString();o=decodeURIComponent(n)}a(o)}}e||(e="missingFromDynamicSnippet"),t||(t=!1),i?c():(window._uxa=window._uxa||[],window._uxa.push(["onRecordingStateChange",function(e){e&&e.isRecording&&c()}]))}))}function o(e,n){function t(e){return"object"==typeof e&&null!==e}if(t(window.CS_INTEGRATIONS_CONF)&&t(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][n]}t.r(n);function c(e,n,t){if((t=t||window)&&n&&e){let i=!1,a=t[e];a?n():Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return a},set:function(e){a=e,i||(i=!0,n())}})}}function r(e,n,t){t=t||window;const i=e.split(".");if(1==i.length)c(e,n,t);else{let e=t,a=0;const o=function(){e=a>0?e[i[a-1]]:window,a++,a>=i.length?c(i[a-1],n,e):c(i[a-1],o,e)};o()}}function s(e,n){!!(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold")}var u=t(0);const l=function(e){let n,t,a,o;if(i((function(){const i=e.name;n=e.version;const c=i.replace("@contentsquare/integration-","");t=c+"-"+n;let r="-contentsquare";o=new RegExp(r+"$").test(c),a=c.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),o||(r="-cap",o=new RegExp(r+"$").test(c),a=c.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),o)return{snippetBuildName:t,parameterName:a,snippetVersion:n}}(t(1)),d=l.parameterName,p=l.snippetBuildName,f=l.snippetVersion;i((function(){const e=u.displayName,n=u.dvarPrefix,t=u.apvPrefix,c=u.replayKey;var l,g;l=e,g=f,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(l+" - v"+g);const b=o(d,"settings"),w=(m=b,Array.isArray(m)?b:[]);var m;const _=w.includes("sendArtificialPageviews"),y=w.includes("setReplayLinkToCurrentPV"),N=w.includes("enableInPageWidgets"),S=w.includes("disableSendingDataToCS");let v=!1;function h(e,t,i,a){(function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])})(e=n+e,t),v&&"etr"===i&&function(e){window._uxa=window._uxa||[],window._uxa.push(["trackEventTriggerRecording","@ETS@"+e])}(e),a&&_&&function(e){window._uxa=window._uxa||[],window._uxa.push(["trackPageview",e])}(window.location.pathname+"?"+a),s(p,`Dynamic variable with ${e} and value ${t} sent`)}r("usabilla_live",(function(){setTimeout((function(){i((function(){const e=document.getElementById("lightningjs-frame-usabilla_live");if(e&&e.contentWindow&&e.contentWindow.usabilla_live_settings){const n=function(){const n=void i((function(){return e.contentWindow.usabilla_live_settings.eventCallback}),p);return function(o,r,s,u,l){i((function(){n&&n.apply(this,arguments);const o=l;if("Feedback:Open"!=r&&"Campaign:Open"!==r||a(c,y).then((function(n){v=!0,i((function(){n&&e.contentWindow.usabilla_live_settings.local_data&&e.contentWindow.usabilla_live_settings.local_data.custom&&(e.contentWindow.usabilla_live_settings.local_data.custom.ContentsquareReplay=n)}),p)})),"Feedback:Open"==r&&h("Feedback Displayed (All Surveys)","true",0,t+"=feedback_displayed"),"Feedback:Success"===r&&(h("Feedback Submitted (All Surveys)","true","etr",t+"=feedback_submitted"),!1===S&&o)){const e=Object.keys(o);for(let n=0;n<e.length;n++){const t=e[n];let i=o[e[n]],a="";"email"!=t&&"comment"!=t&&"custom"!=t&&("rating"===t?a="Feedback Mood Rating":"nps"===t?a="Feedback NPS Rating":"performance"===t&&(a="Feedback Performance Rating"),isNaN(i)||(i=parseInt(i)),a&&i&&h(a,i))}}if("Campaign:Open"===r&&h("Campaign Displayed",s,0,t+"=campaign_displayed_"+s),"Campaign:Page Switch"===r&&!1===S&&o&&o.data){const e=Object.keys(o.data);for(let n=0;n<e.length;n++){const t=e[n];let i=o.data[e[n]],a="";if("email"!=t)if(a="mood"===t?"Campaign Mood Rating":"nps"===t?"Campaign NPS Rating":t,"object"==typeof i){const e=Object.keys(i);for(let n=0;n<e.length;n++){const t=e[n];let o=i[e[n]];isNaN(o)||(o=parseInt(o)),isNaN(t)&&a&&t&&o&&h(a+" "+t,o)}}else isNaN(i)||(i=parseInt(i)),a&&i&&h(a,i)}}"Campaign:Success"===r&&h("Campaign Submitted",s,"etr",t+"=campaign_submitted_"+s)}),p)}}();window.usabilla_live("setEventCallback",n)}}),p)}),500)})),N&&r("usabilla",(function(){setTimeout((function(){i((function(){const e=[];let n="",o="",r="",s="";function u(n,t,i){e.length&&e.indexOf(n+"~~~~"+t)>-1?n="":(e.push(n+"~~~~"+t),n&&h("Widget "+n+" : "+t,i))}function l(e,n){const t=document.querySelectorAll("div[ub-in-page]");for(let i=0;i<t.length;i++){const a=t[i];if(!a.getAttribute("ub-in-page-contentsquare-replay")){const t=document.createAttribute("ub-in-page-"+e);if(t){t.value=n,a.setAttributeNode(t);h("Widget Displayed - ID: "+a.getAttribute("ub-in-page"),"true")}}}!function(){const e=document.querySelectorAll("div[ub-in-page]");for(let n=0;n<e.length;n++){e[n].innerHTML=""}const n=document.querySelectorAll('*[id^="usabilla-"]');if(n){const e=n[0];if(e){const n=e.getAttribute("id");if(n){const e=n.slice(9);e&&usabilla.load&&window.usabilla.load("w.usabilla.com",e)}}}}()}window.usabilla("setEventCallback",(function(e,a,c,l,d){i((function(){const e=d.data,i=e.widget_id;"In-Page:Page Switch"===a&&!1===S&&e.data&&(n=parseInt(e.data.nps),o=parseInt(e.data.rating),r=parseInt(e.data.mood),isNaN(n)||(s="NPS",u(s,i,n)),isNaN(o)||(s="Rating",u(s,i,o)),isNaN(r)||(s="Mood",u(s,i,r))),"In-Page:Success"===a&&(!1===S&&e.data&&(n=parseInt(e.data.nps),o=parseInt(e.data.rating),r=parseInt(e.data.mood),isNaN(n)||(s="NPS Rating",u(s,i,n)),isNaN(o)||(s="Rating",u(s,i,o)),isNaN(r)||(s="Mood",u(s,i,r))),h("Widget Submitted - ID: "+i,"true","etr",t+"=widget_submitted_"+i))}),p)})),a(c,y).then((function(e){i((function(){v=!0,e&&l("contentsquare-replay",e)}),p)}))}),p)}),1500)}))}),p)}]);
/* integration-youtube 2.6.1 */
!function(e){var n={};function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:o})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(o,i,function(n){return e[n]}.bind(null,i));return o},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=2)}([function(e){e.exports=JSON.parse('{"displayName":"Youtube","dvarPrefix":"VA_YT_"}')},function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-youtube-contentsquare","version":"2.6.1","scripts":{"build:snippet":"webpack"}}')},function(e,n,t){"use strict";function o(e,n){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",n,e.message]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION ERROR: [${n}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold")}}function i(e,n){function t(e){return"object"==typeof e&&null!==e}if(t(window.CS_INTEGRATIONS_CONF)&&t(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][n]}t.r(n);function u(e,n){!!(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION: [${e}] : ${n}`,"color: #2a9d8f; font-weight: bold")}var r=t(0);const a=function(e){let n,t,i,u;if(o((function(){const o=e.name;n=e.version;const r=o.replace("@contentsquare/integration-","");t=r+"-"+n;let a="-contentsquare";u=new RegExp(a+"$").test(r),i=r.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),u||(a="-cap",u=new RegExp(a+"$").test(r),i=r.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),u)return{snippetBuildName:t,parameterName:i,snippetVersion:n}}(t(1)),c=a.parameterName,d=a.snippetBuildName,l=a.snippetVersion;o((function(){const e=r.displayName,n=r.dvarPrefix;var t,a;t=e,a=l,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(t+" - v"+a);const s=i(c,"settings"),f=(p=s,Array.isArray(p)?s:[]);var p;const m=f.includes("enableVideoStarted"),w=f.includes("enableVideoPaused"),b=f.includes("enableVideoCompleted"),g=f.includes("enableVideoPlayDuration"),y=f.includes("enableVideoQuality"),v=f.includes("enableVolumeChanged"),h=f.includes("enableVideoMuted");function _(e,t){(function(e,n){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:n}])})(e=n+e,t),u(d,`Dynamic variable with ${e} and value ${t} sent`)}const O='iframe[src^="https://www.youtube.com/embed/"]',S='iframe[src^="https://www.youtube-nocookie.com/embed/"]';let N=!1,x=document.querySelectorAll(O);function V(){o((function(){const e=[];let n="",t=0,i="",u=0,r=0,a=0;window.addEventListener("message",(function(c){const l=c.data;"https://www.youtube.com"!==c.origin&&"https://www.youtube-nocookie.com"!==c.origin||!l||o((function(){const o=function(e){let n;try{n=JSON.parse(e)}catch(e){return!1}return n}(l);if(o&&o.info&&(o.info.videoData&&o.info.videoData.video_id&&(n=o.info.videoData.video_id),o.info.duration&&(t=o.info.duration),t&&n)){if(void 0!==o.info.playerState&&(i=o.info.playerState,!isNaN(i))){let t="",o="";if(b&&0===i?(t="complete_",o="Video completed"):m&&1===i?(t="play_",o="Video started"):w&&2===i&&(t="pause_",o="Video paused"),t&&o){const i=t+n;-1===e.indexOf(i)&&(e.push(i),_(o,"Video ID : "+n))}}if("infoDelivery"==o.event){if(y&&o.info.playbackQuality&&!o.info.duration){const e=o.info.playbackQuality;e&&_("Video quality","Video ID : "+n+" - Quality : "+e)}if(h&&o.info.muted){const t="muted_"+n;-1===e.indexOf(t)&&(e.push(t),_("Video muted","Video ID : "+n))}if(v&&void 0!==o.info.volume){const t="initialvolume_"+n;if(-1===e.indexOf(t)&&(e.push(t),r=o.info.volume),a=o.info.volume,a!=r){const t="volumechanged_"+n;-1===e.indexOf(t)&&(e.push(t),a=r,_("Video volume changed","Video ID : "+n))}}if(g&&o.info.currentTime&&(u=o.info.currentTime,!isNaN(u))){u=Math.round(u);const o=Math.round(u/t*100);let i="";if(o>=25&&(i="25"),o>=50&&(i="50"),o>=75&&(i="75"),100===o&&(i="100"),i){const t="videoduration_"+i+"_"+n;-1===e.indexOf(t)&&(e.push(t),_("Video play view duration","Video ID : "+n+" : "+i+"%"))}}}}}),d)}));for(let e=0;e<x.length;e++){const n=x[e];n.contentWindow&&"function"==typeof n.contentWindow.postMessage&&(N?n.contentWindow.postMessage('{"event":"listening"}',"https://www.youtube-nocookie.com"):n.contentWindow.postMessage('{"event":"listening"}',"https://www.youtube.com"))}}),d)}if(0===x.length&&(x=document.querySelectorAll(S),x.length>0&&(N=!0)),0===x.length){const e=new MutationObserver((function(){o((function(){if(document.querySelector(O)||document.querySelector(S)){x=document.querySelectorAll(O),0===x.length&&(x=document.querySelectorAll(S),x.length>0&&(N=!0)),e.disconnect();for(let e=0;e<x.length;e++)x[e].addEventListener("load",(function(e){V()}))}}),d)}));e.observe(document.documentElement,{childList:!0,subtree:!0})}else setTimeout((function(){V()}),500)}),d)}]);
/* integration-namogoo 2.6.1 */
!function(e){var i={};function n(o){if(i[o])return i[o].exports;var t=i[o]={i:o,l:!1,exports:{}};return e[o].call(t.exports,t,t.exports,n),t.l=!0,t.exports}n.m=e,n.c=i,n.d=function(e,i,o){n.o(e,i)||Object.defineProperty(e,i,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,i){if(1&i&&(e=n(e)),8&i)return e;if(4&i&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&i&&"string"!=typeof e)for(var t in e)n.d(o,t,function(i){return e[i]}.bind(null,t));return o},n.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(i,"a",i),i},n.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},n.p="",n(n.s=2)}([function(e){e.exports=JSON.parse('{"displayName":"Namogoo - Customer Journey OS","dvarPrefix":"AN_NG_"}')},function(e){e.exports=JSON.parse('{"name":"@contentsquare/integration-namogoo-contentsquare","version":"2.6.1","scripts":{"build:snippet":"webpack"}}')},function(e,i,n){"use strict";function o(e,i){try{e()}catch(e){window._uxa=window._uxa||[],window._uxa.push(["logSnippetError",i,e.message]),(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION ERROR: [${i}] : ${e.message}`,"color:rgb(228, 25, 45); font-weight: bold")}}function t(e,i){function n(e){return"object"==typeof e&&null!==e}if(n(window.CS_INTEGRATIONS_CONF)&&n(window.CS_INTEGRATIONS_CONF[e]))return window.CS_INTEGRATIONS_CONF[e][i]}n.r(i);function r(e,i,n){if((n=n||window)&&i&&e){let o=!1,t=n[e];t?i():Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){return t},set:function(e){t=e,o||(o=!0,i())}})}}function s(e,i){!!(window.csqDebuggerEnabled||document.location.href.indexOf("csqDebuggerEnabled=true")>-1)&&console.log(`%cCSQ INTEGRATION: [${e}] : ${i}`,"color: #2a9d8f; font-weight: bold")}var a=n(0);const c=function(e){let i,n,t,r;if(o((function(){const o=e.name;i=e.version;const s=o.replace("@contentsquare/integration-","");n=s+"-"+i;let a="-contentsquare";r=new RegExp(a+"$").test(s),t=s.replace(/-contentsquare([^-contentsquare]*)$/,"$1"),r||(a="-cap",r=new RegExp(a+"$").test(s),t=s.replace(/-cap([^-cap]*)$/,"$1"))}),"Shared-Function-readPackageJSON"),r)return{snippetBuildName:n,parameterName:t,snippetVersion:i}}(n(1)),u=c.parameterName,l=c.snippetBuildName,d=c.snippetVersion;o((function(){const e=a.displayName,i=a.dvarPrefix;var n,c;function _(e,n){(function(e,i){window._uxa=window._uxa||[],window._uxa.push(["trackDynamicVariable",{key:e,value:i}])})(e=i+e,n),s(l,`Dynamic variable with ${e} and value ${n} sent`)}n=e,c=d,CS_CONF.integrations=CS_CONF.integrations||[],CS_CONF.integrations.push(n+" - v"+c);const p=t(u,"settings"),g=(f=p,Array.isArray(f)?p:[]);var f;const m=g.includes("probabilityAbandonment"),b=g.includes("adBlocker"),S=g.includes("aff_id"),h=g.includes("Amazon_Loyal_Customer"),y=g.includes("isAutoTranslated"),C=g.includes("batteryIsCharging"),w=g.includes("batteryPercentage"),V=g.includes("isBot"),v=g.includes("isCameraApproved"),O=g.includes("Capital_One_Loyal_Customer"),P=g.includes("cashbackVisitors"),T=g.includes("Cashback_Visitor"),k=g.includes("isCopiedText"),N=g.includes("couponsVisitors"),B=g.includes("Coupoun_Lovers"),F=g.includes("cpuStrengthScore"),A=g.includes("isCustomer"),L=g.includes("darkMode"),x=g.includes("Engaged_Visitor"),W=g.includes("English_Speakers"),I=g.includes("French_Speakers"),E=g.includes("German_Speakers"),H=g.includes("Italian_Speakers"),R=g.includes("Spanish_Speakers"),D=g.includes("High_Probability_Abandonment"),M=g.includes("High_Probability_Purchase"),$=g.includes("Honey_Loyal_Customer"),q=g.includes("honeyVisitors"),j=g.includes("isIncognitoSession"),G=g.includes("campaignName"),J=g.includes("isLocationApproved"),U=g.includes("lowBattery"),z=g.includes("Low_Probability_Abandonment"),Q=g.includes("Low_Probability_Purchase"),K=g.includes("areMultipleTabsOpen"),X=g.includes("networkStrengthScore"),Y=g.includes("areNotificationsApproved"),Z=g.includes("numOfOpenTabs"),ee=g.includes("Online_Shopper"),ie=g.includes("pref_language"),ne=g.includes("Price_Conscious_Visitor"),oe=g.includes("probabilityPurchase"),te=g.includes("rakuteneBatesVisitors"),re=g.includes("feelsLike_c"),se=g.includes("feelsLike_f"),ae=g.includes("recommendedConversionIncentive"),ce=g.includes("RetailMeNot_Loyal_Customer"),ue=g.includes("probabilityRetention"),le=g.includes("scrollSpeed"),de=g.includes("scrollBelowTheFold"),_e=g.includes("isShopperExtensions"),pe=g.includes("Strong_Web_Visitor"),ge=g.includes("isTabInFocus"),fe=g.includes("tempCValue"),me=g.includes("tempFValue"),be=g.includes("The_Trendy_Customers"),Se=g.includes("Thrifty_Shoppers"),he=g.includes("timeOffTabScore"),ye=g.includes("timeOnPageScore"),Ce=g.includes("timeOnSiteScore"),we=g.includes("Visitor_Browsing_From_Cloudy_Weather_Condition"),Ve=g.includes("Visitor_Browsing_From_Cold_Weather"),ve=g.includes("Visitor_Browsing_From_Hot_Weather"),Oe=g.includes("Visitor_Browsing_From_Rainy_Weather_Condition"),Pe=g.includes("Visitor_Browsing_From_Snowy_Weather_Condition"),Te=g.includes("Visitor_Browsing_From_Sunny_Weather_Condition"),ke=g.includes("Visitor_Browsing_Using_VPN"),Ne=g.includes("Visitor_Having_Slow_Wifi"),Be=g.includes("Visitor_Having_Strong_Device"),Fe=g.includes("Visitor_Having_Strong_Wifi"),Ae=g.includes("Visitor_Having_Weak_Device"),Le=g.includes("vpnProbability"),xe=g.includes("weatherCondition");let We=0;!function(e,i,n){n=n||window;const o=e.split(".");if(1==o.length)r(e,i,n);else{let e=n,t=0;const s=function(){e=t>0?e[o[t-1]]:window,t++,t>=o.length?r(o[t-1],i,e):r(o[t-1],s,e)};s()}}("CJOS",(function(){setTimeout((function(){o((function(){function e(e,i){CJOS.push({action:"register",params:{dataPoint:e,callback:function(e){!function(e,i){o((function(){if("boolean"==typeof i||"string"==typeof i&&""!=i&&void 0!==i||"number"==typeof i){let n;"boolean"==typeof i&&(n="false",!0===i&&(n="true")),"string"==typeof i&&isNaN(i)&&(n=i),("number"==typeof i||"string"==typeof i&&!isNaN(i))&&(n=Math.round(i)),We++,We<=20&&_(e,n)}}),l)}(i,e)}}})}"function"==typeof CJOS.push&&(m&&e("probabilityAbandonment","Abandonment Likelihood"),b&&e("adBlocker","Ad Blocker Installed"),S&&e("aff_id","Affiliate ID"),h&&e("Amazon_Loyal_Customer","Amazon Loyal Customer"),y&&e("isAutoTranslated","Auto Translated"),C&&e("batteryIsCharging","Battery is Charging"),w&&e("batteryPercentage","Battery Percentage"),V&&e("isBot","Bot Session"),v&&e("isCameraApproved","Camera Approved"),O&&e("Capital_One_Loyal_Customer","Capital One Loyal Customer"),P&&e("cashbackVisitors","Cashback Extension Visitors"),T&&e("Cashback_Visitor","Cashback Visitor"),k&&e("isCopiedText","Copied Text"),N&&e("couponsVisitors","Coupon Extension Visitors"),B&&e("Coupoun_Lovers","Coupon Lovers"),F&&e("cpuStrengthScore(1to5)","CPU Strength Score"),A&&e("isCustomer","Customer"),L&&e("darkMode","Dark Mode"),x&&e("Engaged_Visitor","Engaged Visitor"),W&&e("English_Speakers","English Speakers"),I&&e("French_Speakers","French Speakers"),E&&e("German_Speakers","German Speakers"),D&&e("High_Probability_Abandonment","High Probability Abandonment"),M&&e("High_Probability_Purchase","High Probability Purchase"),$&&e("Honey_Loyal_Customer","Honey Loyal Customer"),q&&e("honeyVisitors","Honey Extension Visitors"),j&&e("isIncognitoSession","Incognito Session"),G&&e("campaignName","Intent-Based Promotions"),H&&e("Italian_Speakers","Italian Speakers"),J&&e("isLocationApproved","Location Approved"),U&&e("lowBattery","Low Battery"),z&&e("Low_Probability_Abandonment","Low Probability Abandonment"),Q&&e("Low_Probability_Purchase","Low Probability Purchase"),K&&e("areMultipleTabsOpen","Multiple Tabs Open"),X&&e("networkStrengthScore(1to5)","Network Strength Score"),Y&&e("areNotificationsApproved","Notifications Approved"),Z&&e("numOfOpenTabs","Number of Open Tabs"),ee&&e("Online_Shopper","Online Shopper"),ie&&e("pref_language","Preferred Language"),ne&&e("Price_Conscious_Visitor","Price Conscious Visitor"),oe&&e("probabilityPurchase","Purchase Likelihood"),te&&e("rakuteneBatesVisitors","Rakuten eBates Visitors"),re&&e("feelsLike_c","RealFeel Temperature (Celcius)"),se&&e("feelsLike_f","RealFeel Temperature (Fahrenheit)"),ae&&e("recommendedConversionIncentive","Recommended Conversion Incentive Level"),ce&&e("RetailMeNot_Loyal_Customer","RetailMeNot Loyal Customer"),ue&&e("probabilityRetention","Retention Intent"),le&&e("scrollSpeed","Scroll Speed"),de&&e("scrollBelowTheFold","Scrolled Below the Fold"),_e&&e("isShopperExtensions","Shopper Extension Installed"),R&&e("Spanish_Speakers","Spanish Speakers"),pe&&e("Strong_Web_Visitor","Strong Web Visitor"),ge&&e("isTabInFocus","Tab in Focus"),fe&&e("tempCValue","Temperature (Celcius)"),me&&e("tempFValue","Temperature (Fahrenheit)"),be&&e("The_Trendy_Customers","The Trendy Customers"),Se&&e("Thrifty_Shoppers","Thrifty Shoppers"),he&&e("timeOffTabScore(1to5)","Time Off Tab Score"),ye&&e("timeOnPageScore(1to5)","Time On Page Score"),Ce&&e("timeOnSiteScore(1to5)","Time On Site Score"),we&&e("Visitor_Browsing_From_Cloudy_Weather_Condition","Visitor Browsing From Cloudy Weather Condition"),Ve&&e("Visitor_Browsing_From_Cold_Weather","Visitors Browsing From Cold Weather"),ve&&e("Visitor_Browsing_From_Hot_Weather","Visitors Browsing From Hot Weather"),Oe&&e("Visitor_Browsing_From_Rainy_Weather_Condition","Visitor Browsing From Rainy Weather Condition"),Pe&&e("Visitor_Browsing_From_Snowy_Weather_Condition","Visitor Browsing From Snowy Weather Condition"),Te&&e("Visitor_Browsing_From_Sunny_Weather_Condition","Visitor Browsing From Sunny Weather Condition"),ke&&e("Visitor_Browsing_Using_VPN","Visitor Browsing Using VPN"),Ne&&e("Visitor_Having_Slow_Wifi","Visitor Having Slow Wifi"),Be&&e("Visitor_Having_Strong_Device","Visitor Having Strong Device"),Fe&&e("Visitor_Having_Strong_Wifi","Visitor Having Strong Wifi"),Ae&&e("Visitor_Having_Weak_Device","Visitor Having Weak Device"),Le&&e("vpnProbability(1to3)","VPN Probability Score"),xe&&e("condition","Weather Condition"))}),l)}),500)}));!function(e,i){let n=!1;window._uxa=window._uxa||[],window._uxa.push(["afterPageView",function(o){i?n||(e(o),n=!0):e(o)}])}((function(){We>0&&(We=0)}),!1)}),l)}]);
(()=>{var hd=Object.defineProperty;var ud=(s,r,t)=>r in s?hd(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t;var Ie=(s,r,t)=>ud(s,typeof r!="symbol"?r+"":r,t);var we={};we.d=(s,r)=>{for(var t in r)we.o(r,t)&&!we.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:r[t]})};we.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();we.o=(s,r)=>Object.prototype.hasOwnProperty.call(s,r);we.r=s=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var To={};we.r(To);we.d(To,{getRequestParameters:()=>cm});function Vs(s,r){let t;return window.Zone&&typeof window.Zone.__symbol__=="function"&&(t=s[window.Zone.__symbol__(r)]),t!=null?t:s[r]}var ft=(()=>{let s;return function(r){r.debug="debug",r.warn="warn",r.implementation="implementation",r.error="error",r.critical="critical"}(s||(s={})),s})();function _t(s){return X(s)&&(typeof s=="number"||s instanceof Number)&&!isNaN(s)}function Ns(s){return s===parseInt(s,10)}function C(s){return X(s)&&(typeof s=="string"||s instanceof csString)}function Cr(s){return typeof s=="boolean"}function fs(s){return typeof s=="object"}function X(s){return typeof s!="undefined"}function yt(s){return X(s)&&s!==null}function J(s){return typeof s=="object"&&s!==null}function dd(s,r,t){return Ns(s)&&s>=r&&s<=t}function Bn(s){for(let r in s)return!1;return!0}function Ae(s){return typeof s=="function"}function ps(s){return s instanceof Element}function Ue(s){return s instanceof Error}function jr(s){let r=s.length;for(let t=0;t<r;t++)switch(csString.prototype.charCodeAt.call(s,t)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0}var nn={[ft.debug]:0,[ft.warn]:1,[ft.implementation]:1,[ft.error]:2,[ft.critical]:3},at={debug(...s){},warn(...s){},implementation(...s){},error(...s){},critical(...s){},isPerfLoggingActive(){return!1}};function fd(s){at=s}var P=s=>(r,t,e)=>{let i=(t==null?void 0:t.toString())||"",n=s||`${r.constructor&&r.constructor.name}.${i}`;if(e){let o=e.value;e.value=function(...c){return gs(n,o.bind(this))(...c)}}};function gs(s,r){return function(...t){try{let e=r.apply(this,t);return X(self.Promise)&&e instanceof self.Promise?e.then(i=>i,i=>at.error(Ue(i)?i:new Error(i),s)):e}catch(e){try{at.error(Ue(e)?e:new Error(e),s)}catch{}}}}function st(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}var Vi=typeof window=="undefined";function pd(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof we.g!="undefined"?we.g:typeof process!="undefined"?process:Function("return this")()}var it=pd();function bo(s){let r=new ArrayBuffer(s.length),t=new Uint8Array(r);for(let e=0,i=s.length;e<i;e+=1)t[e]=csString.prototype.charCodeAt.call(s,e);return r}function Ca(s){let r=new Uint8Array(s),t="";for(let e=0;e<r.byteLength;e+=1)t+=csString.fromCodePoint(r[e]);return t}function Jc(s){let r=it.atob(s);return bo(r)}function Fn(s){let r=csArray.from(new Uint8Array(s));return csArray.prototype.join.call(csArray.prototype.map.call(r,t=>csString.prototype.padStart.call(t.toString(16),2,"0")),"")}function Ia(s){let r=csString.prototype.indexOf.call(s,";base64,")!==-1,t=csString.prototype.indexOf.call(s,","),e=r?[csString.prototype.substring.call(s,0,t-7),csString.prototype.substring.call(s,t+1)]:[csString.prototype.substring.call(s,0,t),csString.prototype.substring.call(s,t+1)];if(!r&&/^%3Csvg/i.test(e[1]))try{e[1]=decodeURIComponent(e[1])}catch(o){at.warn(`${o}, calling decodeURIComponent on: ${e[1]}`)}let n=r?Jc(e[1]):bo(e[1]);return new Blob([n],{type:csString.prototype.replace.call(e[0],"data:","")})}var Qc=typeof performance!="undefined"&&!!performance.now,Pa=Qc?()=>performance.now():()=>csDate.now(),gd=(()=>{var s,r;return Qc?(r=(s=performance.timing)===null||s===void 0?void 0:s.navigationStart)!==null&&r!==void 0?r:Math.floor(performance.timeOrigin):0})(),Ro=34164e6,M={now(){return Math.round(Pa()+gd)},elapsed(){return Pa()}};function Oa(){return Math.floor(M.now()/1e3)}function Zc(){return typeof it.Promise=="function"}function md(){var s;return typeof crypto!="undefined"&&Ae((s=crypto.subtle)===null||s===void 0?void 0:s.digest)}function Na(){var s,r;return typeof((s=window.navigation)===null||s===void 0?void 0:s.addEventListener)=="function"&&typeof((r=window.navigation)===null||r===void 0?void 0:r.removeEventListener)=="function"}function Rt(s,r){return csString.prototype.lastIndexOf.call(s,r,0)===0}function ri(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}var yd=Number.MAX_SAFE_INTEGER||9007199254740991,Ms={percentage(){return Math.floor(Math.random()*1e4)/100},boolean(s){return this.percentage()<s},integer(s=yd){return Math.floor(Math.random()*s)}};function Ci(s,r){let t,e,i,n,o,c=null,l=u=>{let p=M.elapsed();if(!u&&c!==null){let m=r-(p-c);if(m>=1){i=it.csSetTimeout(l,m);return}}let y=p-n;i=null,c=null,n=null,o=s.apply(t,[y,...e])},h=function(){if(t=this,e=arguments,n){c=M.elapsed();return}return n=M.elapsed(),i=it.csSetTimeout(l,r),o};return h.flushPending=()=>{i&&(it.csClearTimeout(i),l(!0))},h.cancel=()=>{c=null,n=null,i&&(it.csClearTimeout(i),i=null)},h}var Ds=(()=>{class s{static setGlobalService(t){s.globalService=t}constructor(t){this.name=t,this.values={}}reset(){this.values={}}flush(t=""){if(!s.globalService)return!1;let e=this.values,i=Object.keys(e);if(!i.length)return!1;let n=`${t===""?"":`${t}.`}${this.name}`,o=csArray.prototype.map.call(i,c=>({name:n,parameter:c,value:Math.round(e[c])}));return s.globalService.push(o),this.reset(),o.length>0}}return s.globalService=null,st([P()],s.prototype,"flush",null),s})(),Pt=(()=>{class s extends Ds{constructor(t,e=100){super(t),this.YE=e,this.values={},e&&(this.debouncedFlush=Ci(()=>this.flush(),this.YE))}count(t,e=1){Ds.globalService&&(this.values[t]=(this.values[t]||0)+e,this.debouncedFlush())}}return s})(),fr=(()=>{class s extends Ds{constructor(t,e=["max","average","total","count"]){super(t),this.collecting=e,this.values={average:0,count:0,max:0,total:0}}get average(){return this.values.average}get count(){return this.values.count}get max(){return this.values.max}get total(){return this.values.total}flush(t=""){if(this.count===0)return!1;let e=Object.keys(this.values);return csArray.prototype.forEach.call(csArray.prototype.filter.call(e,i=>!csArray.prototype.some.call(this.collecting,n=>i===n)),i=>{delete this.values[i]}),super.flush(t)}push(t){this.values.count++,this.values.total+=t,this.values.max=Math.max(this.values.max,t),this.values.average=this.values.total/this.values.count}reset(){this.values={count:0,total:0,max:0,average:0}}}return s})(),on=(()=>{class s extends Ds{constructor(t,e=["max","average","total","count"]){super(t),this.collecting=e}flush(t=""){let e=Object.keys(this.values);return csArray.prototype.forEach.call(csArray.prototype.filter.call(e,i=>!csArray.prototype.some.call(this.collecting,n=>csString.prototype.endsWith.call(i,`.${n}`))),i=>{delete this.values[i]}),super.flush(t)}add(t,e){var i,n,o,c,l,h,u;let p=y=>this.values[`${t}.${y}`];(i=(c=this.values)[l=`${t}.count`])!==null&&i!==void 0||(c[l]=0),(n=(h=this.values)[u=`${t}.total`])!==null&&n!==void 0||(h[u]=0),this.values[`${t}.count`]++,this.values[`${t}.total`]+=e,this.values[`${t}.max`]=Math.max((o=p("max"))!==null&&o!==void 0?o:0,e),this.values[`${t}.average`]=p("total")/p("count")}}return s})(),Ed=(()=>{class s extends Ds{constructor(){super(...arguments),this.values={}}set(t,e="flags"){var i,n;Ds.globalService&&((i=(n=this.values)[e])!==null&&i!==void 0||(n[e]=0),this.values[e]|=t,this.flush())}}return s})(),G={counters:{commandsFromIntegrations:new Pt("commands-from-integrations"),commandsFromCSTC:new Pt("commands-from-cstc"),commandsFromIframe:new Pt("commands-from-iframe"),commandApplied:new Pt("command-applied"),commandError:new Pt("command-error"),commandMisuse:new Pt("command-misuse"),CSTCSnippetUsed:new Pt("cstc-snippet-used"),redactedPII:new Pt("redacted-pii"),pageAnonymisation:new Pt("page-anonymisation"),patchedNativeFunctions:new Pt("patched-native-functions"),pureWindowState:new Pt("pure-window-state"),sensitiveElements:new Pt("sensitive-elements"),cspErrors:new Pt("csp-errors"),networkRequests:new Pt("network-requests"),webVitalsErrors:new Pt("web-vitals-errors"),trackedFeatures:new Pt("tracked-features"),longTasks:new fr("long-tasks"),errors:new Pt("errors"),methodPerformance:new on("perf"),transferSize:new fr("transfer-size",["max","average"]),downloadTime:new fr("download-time",["average"]),blockingTime:new fr("blocking-time"),inpContribution:new on("inp-contribution"),tasks:new on("tasks"),availableFeatures:new Ed("available-features"),requestTimeouts:new Pt("request-timeouts")},setService(s){Ds.setGlobalService(s)}},Ui=(()=>{class s{constructor(){this.oa=0}get length(){return this.oa}get isEmpty(){return!this.Js}pushAll(t){for(let e=0;e<t.length;e++)this.push(t[e])}push(t){this.oa++,this.wn?this.wn=this.wn[1]=[t,void 0]:this.wn=this.Js=[t,void 0]}pop(){if(!this.Js)return null;this.oa--;let t=this.Js[0];return this.Js=this.Js[1],this.Js||(this.wn=void 0),t}forEach(t){let e=this.Js;for(;e!=null&&e.length;)t(e[0]),e=e[1]}clear(){this.oa=0,this.Js=this.wn=void 0}}return s})(),$n=0,Co=s=>{$n++,csQueueMicrotask(()=>js(()=>{try{s()}finally{$n--}},[Te.MicroTask,"queueMicrotask"]))},Ir=new Ui,Pr=new Ui;function $t(s,r="high"){Ir.isEmpty&&Pr.isEmpty&&tl(vd),r==="high"?Pr.push(Ma(s)):Ir.push(Ma(s))}function tl(s,r=10){r===0?Co(s):csQueueMicrotask(()=>tl(s,r-1))}function vd(){for(;!Pr.isEmpty;)Pr.pop()();for(;!Ir.isEmpty;)Ir.pop()()}async function el(s=1){for(let r=0;r<s;r++)await new Promise(t=>$t(t))}function Ma(s){return function(){try{s.apply(window,arguments)}catch(r){at.critical(r)}}}var Tr="null",ns=null,sl=[],Sd=()=>{var s;return Vi||!!(!((s=document.body)===null||s===void 0)&&s.getAttribute("data-cs-tag-extension"))};!Vi&&Sd()&&(window._uxa?_uxa.push(["debugEvents",!0]):window._uxa=[["debugEvents",!0]],ns=new BroadcastChannel("cs-tag"),document.addEventListener("cs.tracking.recordingEvent",s=>{zn({type:"UXA_EVENT",event:s.detail})}),ns.addEventListener("message",s=>{if(s.data.type==="CONNECT"){if(s.data.sessionId===Tr)return;Tr=s.data.sessionId,csArray.prototype.forEach.call(sl,r=>r()),ns==null||ns.postMessage({type:"CONNECTED",sessionId:Tr})}}));function _d(s){Vi||(Tr!==null&&csSetTimeout(s),csSetTimeout(()=>csArray.prototype.push.call(sl,s)))}function zn(s){ns==null||ns.postMessage(s)}function ei(s){var r;let t=(r=s.length)!==null&&r!==void 0?r:0,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=s[i];return e}function Ve(s,r){let t=s.length,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=r(s[i]);return e}function wd(s,r,t){let e=[],i=0;for(let n=0;n<s.length;n+=1){let o=r(s[n]);for(let c=0;c<o.length;c++)t(o[c],i++)}return e}function Io(s,r){let t=[];return wd(s,r,e=>csArray.prototype.push.call(t,e)),t}function K(s,r){if(Ad(s)){let t=s.length;for(let e=0;e<t;e++)r(s[e],e)}else{let t=0,e=s.next();for(;!e.done;)r(e.value,t++),e=s.next()}}function Ad(s){return s.length>=0}function Us(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return s[e]}function Ii(s,r){let t=s.length;for(let e=0;e<t;e++)if(r(s[e],e))return!0;return!1}function Po(s,r){let t=s.length;for(let e=0;e<t;e++)if(!r(s[e],e))return!1;return!0}function Pi(s,r){let t=s.length,e=[];for(let i=0;i<t;i+=1){let n=s[i];r(n)&&csArray.prototype.push.call(e,n)}return e}function Td(s,r,t){let e=s.length+r.length+((t==null?void 0:t.length)||0),i=new csArray(e),n=0;for(let o=0;o<s.length;o++)i[n++]=s[o];for(let o=0;o<r.length;o++)i[n++]=r[o];if(!t)return i;for(let o=0;o<t.length;o++)i[n++]=t[o];return i}function Da(s,r){for(let t=0;t<s.length;t++)csArray.prototype.push.call(r,s[t])}function je(s){let r=s instanceof Map,t=[];return s.forEach((e,i)=>csArray.prototype.push.call(t,r?[i,e]:e)),t}function bd(s){return csArray.isArray(s)&&s.length>0}var ji=(()=>{class s{constructor(t,e=""){this.name=t,this.format=e}}return s})(),Pe=(()=>{class s extends ji{constructor(t){super(t,"Value: {count}"),this.count=0}increase(t=1){this.count+=t}decrease(){this.count>0&&this.count--}clear(){this.count=0}getData(){return{count:this.count}}}return s})();var ka=(()=>{class s extends ji{constructor(t){super(t,"Living intances: {instances}<br/>Added: {added}<br/>Removed: {removed}"),this.added=0,this.removed=0}get value(){return this.added-this.removed}increase(){this.added++}decrease(){this.removed++}getData(){return{added:this.added,removed:this.removed,instances:this.added-this.removed}}}return s})(),Oe=(()=>{class s extends ji{constructor(t){super(t,"Count: {count}<br/>Average: {average}ms<br/>Max: {max}ms<br/>Total: {total}ms"),this.total=0,this.count=0,this.max=0}get average(){return this.count?this.total/this.count:0}elapsed(t){return this.count++,this.max=Math.max(this.max,t),this.total+=t,t}measure(t){let e=M.elapsed();t(),this.count++;let i=M.elapsed()-e;return this.max=Math.max(this.max,i),this.total+=i,i}asyncMeasure(){let t=M.elapsed();return()=>{this.count++;let e=M.elapsed()-t;return this.max=Math.max(this.max,e),this.total+=e,e}}getData(){return{total:this.total,count:this.count,average:this.average,max:this.max}}}return s})(),Rd=(()=>{class s extends ji{constructor(){super("INP","Value: {value}")}getData(){return{value:St.tasks.eventListener.max}}}return s})(),St={general:{category:"General",nbEvents:new Pe("Nb of Events"),pendingTasks:new Pe("Pending Tasks"),pendingEvents:new Pe("Pending Tasks"),nbOfMutationObservers:new ka("Nb of Mutation Observers"),inp:new Rd},mutations:{category:"Mutations",initialDOM:new Oe("Initial DOM"),pendingMutations:new Pe("Nb of Mutations scheduled"),serializedMutations:new Oe("Serialized Mutations"),count:new Pe("Mutation Count"),elementMutationObserved:new ka("Nb of Elements Observed by MutationObserver"),unobserveGarbageCollection:new Oe("Unobserve GC")},visibilityObserver:{category:"Visibility Observer",hiddenElements:new Pe("Nb of Hidden Elements "),nbElements:new Pe("Nb of  Elements")},tasks:{category:"Tasks",tasks:new Pe("Tasks"),errors:new Pe("Errors"),timer:new Oe("Timers"),microtask:new Oe("Microtasks"),mutationObserver:new Oe("MutationObserver"),monkeyPatch:new Oe("MonkeyPatch"),eventListener:new Oe("EventListener"),intersectionObserver:new Oe("Intersection")}};function Cd(){let s=null;_d(()=>{let r=n=>Object.keys(n),t=csArray.prototype.map.call(r(St),n=>St[n]),e=csArray.prototype.map.call(t,n=>csArray.prototype.filter.call(csArray.prototype.map.call(r(n),o=>n[o]),o=>o instanceof ji));zn({type:"UXA_PERFORMANCE_COUNTER_SCHEMA",event:csArray.prototype.map.call(t,(n,o)=>({category:n.category,performanceCounters:csArray.prototype.map.call(e[o],c=>({name:c.name,format:c.format}))}))}),!s&&(s=csSetInterval(()=>{js(()=>{let n=Io(Ve(e,o=>Ve(o,c=>c.getData())),o=>o);zn({type:"UXA_PERFORMANCE_COUNTER",event:n})},[Te.Timer,"performance-counter-interval"])},1e3))})}var Te=(()=>{let s;return function(r){r.Timer="timer",r.MonkeyPatch="monkeyPatch",r.MutationObserver="mutationObserver",r.EventListener="eventListener",r.IntersectionObserver="intersectionObserver",r.MicroTask="microtask"}(s||(s={})),s})(),Gt=null,Id=["click","tap","keyup","keydown","pointerup","pointerdown"];async function js(s,r,t=null){if(Gt&&r[0]!==Te.MicroTask)return s();t&&(Gt=t),Gt||(Gt={type:r[0],elapsed:0},St.tasks.tasks.increase());try{Gt.elapsed+=Pd(s)}catch(e){St.tasks.errors.increase(),at.critical(new Error(`Task error:  ${r}/${s.name}.
${e.message}
${e.stack}`,e),"TASK_ERROR")}finally{$n<=0&&(St.tasks[Gt.type].elapsed(Gt.elapsed),Gt.elapsed>50&&(G.counters.longTasks.push(Gt.elapsed),G.counters.blockingTime.push(Gt.elapsed-50)),G.counters.tasks.add(r[0],Gt.elapsed),csArray.prototype.includes.call(Id,r[1])&&G.counters.inpContribution.add(r[1],Gt.elapsed),Gt=null)}}function Pd(s){let r=M.elapsed();return s(),M.elapsed()-r}var an,Od="cs-native-frame";var Je={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild","nodeType"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen",RegExp:"csRegExp"}};function il(s,r){let t=Vs(window,s);return function(e,i){return t(()=>js(e,[r,s]),i)}}window.csSetTimeout=il("setTimeout",Te.Timer);window.csSetInterval=il("setInterval",Te.Timer);window.csQueueMicrotask=(an=Vs(window,"queueMicrotask"))!==null&&an!==void 0?an:setTimeout;window.csClearTimeout=Vs(window,"clearTimeout");window.csClearInterval=Vs(window,"clearInterval");window.csFileReader=Vs(window,"FileReader");(()=>{var s;let r=0;function t(i){return"cs$Symbol_"+i}function e(i){return t(i)+ ++r}e.for=t,window.csSymbol=(s=window.Symbol)!==null&&s!==void 0?s:e})();function Nd(){let s=document.createElement("iframe");s.id=Od,s.setAttribute("hidden",""),s.setAttribute("title","Intentionally blank"),s.setAttribute("sandbox","allow-same-origin");let r=document.createElement("cs-native-frame-holder");if(r.setAttribute("hidden",""),document.body.appendChild(r),!!Element.prototype.attachShadow){let e=r.attachShadow({mode:"closed"});return e.innerHTML=s.outerHTML,e.firstElementChild.contentWindow}return r.innerHTML=s.outerHTML,r.firstElementChild.contentWindow}function Md(s,r){let t,e=s;for(;e&&!(t=Object.getOwnPropertyDescriptor(e,r));)e=Object.getPrototypeOf(e);return t}function Dd(s,r,t){let e=Md(s,r);if(!e)return function(){return this[r]};switch(t){case"get":return e.get;case"set":return e.set;case"value":return e.value}}function rl(s){var r,t;Object.keys(Je.constructors).forEach(i=>{window[Je.constructors[i]]=s[i]instanceof Function&&s[i].prototype==null?s[i].bind(window):s[i]}),Ld(s);let e=s.MutationObserver;("Prototype"in window||xd())&&(e=(t=(r=Vs(window,"MutationObserver"))!==null&&r!==void 0?r:window.WebKitMutationObserver)!==null&&t!==void 0?t:window.MutationObserver),window.csIntersectionObserver=xa(window.IntersectionObserver,Te.IntersectionObserver),window.csMutationObserver=xa(e,Te.MutationObserver),qs("csNode",Je.nodeProperties,s.Node.prototype,"get"),qs("csElement",Je.elementProperties,s.Element.prototype,"get"),qs("csElement",Je.elementPropertiesValues,s.Element.prototype,"value",!1),qs("csHTMLImageElement",Je.imageProperties,s.HTMLImageElement.prototype,"set"),qs("csEvent",Je.eventProperties,s.Event.prototype,"get"),qs("csNavigator",Je.navigatorProperties,s.navigator,"value")}function qs(s,r,t,e,i=!0){r.forEach(n=>{let o=typeof n!="string"&&"binding"in n,c=o?n.propertyName:n;(i||c in t)&&(window[`${s+c}`]=Dd(t,c,e),o&&(window[`${s+c}`]=window[`${s+c}`].bind(n.binding)))})}function Oo(s,r){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[s]=r}function kd(){try{let s=Nd();return s?(window.CSPureWindow=s,rl(window.CSPureWindow),!0):!1}catch(s){return Oo("Warning",`failed to copy references from pure iframe: ${s.message}`),!1}}if(!kd())try{rl(it)}catch(s){Oo("Critical",`failed to copy references from window: ${s.message}`)}function xd(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Ld(s){window.csquerySelector={1:s.Element.prototype.querySelector,9:s.Document.prototype.querySelector,11:s.DocumentFragment.prototype.querySelector},window.csquerySelectorAll={1:s.Element.prototype.querySelectorAll,9:s.Document.prototype.querySelectorAll,11:s.DocumentFragment.prototype.querySelectorAll}}function xa(s,r){try{let t=function(e,i){return new s((o,c)=>{js(()=>e(o,c),[r,s.name])},i)};return t.base=s,t}catch{return Oo("Warning",`failed to extends ${s.name}`),s}}var lt=(()=>{let s;return function(r){r.ELLIPSIS="\u2026";function t(o){return csString.prototype.replace.call(o,/[.*+?^${}()|[\]\\]/g,"\\$&")}function e(o){return csString.prototype.replace.call(o,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}r.escapeInvalidCharacters=e;function i(o,c,l){if("replaceAll"in csString.prototype)return csString.prototype.replaceAll.call(o,c,l);let h=new csRegExp(t(c),"g");return csString.prototype.replace.call(o,h,l)}r.stringReplaceAll=i;function n(o,c,l=""){return o.length<=c?o:csString.prototype.slice.call(o,0,c-l.length)+l}r.truncate=n}(s||(s={})),s})();function Gn(s){return lt.escapeInvalidCharacters(csString.prototype.toLowerCase.call(s.localName))}function Vd(s){let r=s.getAttribute("id");return r&&lt.escapeInvalidCharacters(r)}function dt(s){return csNodenodeType.apply(s)===1}function Or(s){return csNodenodeType.apply(s)===3}function Ud(s){return csNodenodeType.apply(s)===8}function nl(s){return dt(s)&&s.localName==="link"}function jd(s){return dt(s)&&s.localName==="source"}function ol(s){return dt(s)&&s.localName==="a"}function No(s){return nl(s)&&csString.prototype.indexOf.call(s.rel,"stylesheet")!==-1}function Hd(s){return dt(s)&&s.localName==="img"}function Hi(s){return dt(s)&&s.localName==="style"}function Hr(s){return dt(s)&&s.localName==="input"}function Br(s){return dt(s)&&s.localName==="textarea"}function Bi(s){return dt(s)&&s.localName==="script"}function Bd(s){return dt(s)&&s.localName==="button"}function ni(s){return dt(s)&&"ownerSVGElement"in s}function Mo(s){return dt(s)&&s.localName==="select"}function Fd(s){return dt(s)&&s.localName==="details"}function $d(s){return dt(s)&&s.localName==="summary"}function zd(s){return ni(s)&&s.localName==="image"}function Gd(s){return ni(s)&&s.localName==="use"}function qd(s){return ni(s)&&s.localName==="feImage"}function Wd(s){switch(csNodenodeType.apply(s)){case 9:case 11:return!0;default:return!1}}function Yd(s){switch(csNodenodeType.apply(s)){case 9:case 11:case 1:return!0;default:return!1}}function Nr(s){return csNodenodeType.apply(s)===9}function Oi(s){return Wd(s)&&"host"in s&&"mode"in s}function al(s){return dt(s)&&!!csElementshadowRoot.apply(s)&&Oi(csElementshadowRoot.apply(s))}var Xd=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];function Kd(s){return dt(s)&&yt(s.tagName)&&csString.prototype.indexOf.call(s.tagName,"-")>0&&csString.prototype.indexOf.call(s.tagName,":")===-1&&csString.prototype.indexOf.call(s.tagName,'"')===-1&&csString.prototype.indexOf.call(s.tagName,",")===-1&&csArray.prototype.indexOf.call(Xd,csString.prototype.toLocaleLowerCase.call(s.tagName))<0}var Fi="detached";function cl(s){let r=s,t=[r];for(;csNodeparentNode.apply(r)!==null;)r=csNodeparentNode.apply(r),csArray.prototype.push.call(t,r);return Mr(r)&&csArray.prototype.push.call(t,Fi),{ancestors:t,selectionRoot:r}}function Jd(s){let r=s,t=[r],e=null;for(;csNodeparentNode.apply(r)!==null;)e===null&&ol(r)&&(e=r),csArray.prototype.push.call(t,csNodeparentNode.apply(r)),r=csNodeparentNode.apply(r);return Mr(r)&&csArray.prototype.push.call(t,Fi),{firstAnchorParent:e,ancestors:t,selectionRoot:r}}function Mr(s){return cs.isValidElement(s)}var bs=(()=>{var s,r;return(r=(s=it.Element)===null||s===void 0?void 0:s.prototype)!==null&&r!==void 0?r:{}})(),Qt=bs.matches||bs.matchesSelector||bs.mozMatchesSelector||bs.msMatchesSelector||bs.oMatchesSelector||bs.webkitMatchesSelector,La=bs.closest,ll=9;function Qd(s,r){return r?csArray.prototype.some.call(r,t=>Qt.call(s,t)):!1}function Zd(s,r,t){if(s===Fi||csNodenodeType.apply(s)===ll)return 0;let e=t.dynamicElementNameRegex,i=!!(e!=null&&e.test(r.localName)),n=Gn(r),o=0,c=r.previousElementSibling;for(;c;)(Gn(c)===n||i&&(e!=null&&e.test(c.localName)))&&!Qd(c,t.reliableSelectors)&&(o+=1),c=c.previousElementSibling;return o}function tf(s,r,t){if(s===Fi||csNodenodeType.apply(s)===ll)return 0;let e=0,i=r.previousElementSibling;for(;i;)Qt.call(i,t)&&(e+=1),i=i.previousElementSibling;return e}var ef=[/\d{4}/,/^ember\d+$/],sf="@",Do="data-cs-override-id",rf="data-cs-dynamic-id";function hl(s,r,t,e){let i=e.dynamicIdRegex||null,n=e.dynamicElementNameRegex,o=Gn(s);if(n&&n.test(s.localName)&&(o=csString.prototype.replace.call(o,n,`$1${sf}`)),af(s,t)){let y=ko(s);return{hasUniqueIdentifier:!0,elementSelector:`${o}[${Do}="${y}"]`}}let c=pf(s,t,e);if(c.success)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UA[${c.attributeName}="${c.attributeValue}"]`};let l=nf(s,t,e);if(l)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UCS[${l}]`};let h=Vd(s);if(lf(s,h,t,i))return{hasUniqueIdentifier:!0,elementSelector:`${o}#${h}`};let u=of(s,e);if(u){let y=tf(r,s,u);return{hasUniqueIdentifier:!1,elementSelector:`${o}[${u}](${y})`}}let p=Zd(r,s,e);return{hasUniqueIdentifier:!1,elementSelector:`${o}:eq(${p})`}}function nf(s,r,t){if(t.uniqueCssSelectors){for(let e of t.uniqueCssSelectors)if(Qt.call(s,e)&&ff(e,r))return e}}function of(s,r){if(r.reliableSelectors){for(let t of r.reliableSelectors)if(Qt.call(s,t))return t}}function af(s,r){let t=ko(s);return t&&csString.prototype.match.call(t,/^[\w-]+$/)&&xo(Do,t,r)}function cf(s){return ko(s)!==null}function ko(s){return s.getAttribute(Do)}function lf(s,r,t,e){return r&&!cf(s)&&!hf(s,r,e)&&df(r,t)}function hf(s,r,t){return s.hasAttribute(rf)||uf(r,t)}function uf(s,r){let t=!1;return s&&r&&(t=r.test(s)),s&&(csArray.prototype.some.call(ef,e=>e.test(s))||t)}function df(s,r){return s&&xo("id",s,r)}function xo(s,r,t){try{return window.csquerySelectorAll[t.nodeType].call(t,`[${s}="${r}"]`).length===1}catch(e){if(e.name!=="SyntaxError")throw e}return!1}function ff(s,r){try{return window.csquerySelectorAll[r.nodeType].call(r,s).length===1}catch(t){if(t.name!=="SyntaxError")throw t}return!1}function pf(s,r,t){if(!t.uniqueAttributes)return{success:!1};for(let e of t.uniqueAttributes){let i=s.getAttribute(e);if(i!==null&&xo(e,i,r))return{attributeName:e,attributeValue:i,success:!0}}return{success:!1}}var qn=11;function Dr(s,r,t){let e=csArray.prototype.shift.call(s);if(s.length===0)return Va(e,t);let i=e,n=s[0],{elementSelector:o,hasUniqueIdentifier:c}=hl(i,n,r,t);if(!t.fullPath&&c){let h=s[s.length-1];return`${Va(h,t)}${o}`}let l=Dr(s,r,t);return`${l?`${l}>`:""}${o}`}function Va(s,r){if(s===Fi)return"|detached|";if(s.host){let{ancestors:t,selectionRoot:e}=cl(s.host);return`${Dr(t,e,r)}|shadow-root|`}return csNodenodeType.apply(s)===qn?"|fragment|":""}var ul=(()=>{class s{constructor(t){this.options=t,this.done=!1,this.path=null}getPath(){if(this.path===null)throw new Error("getPath was called before serializeElement");return this.path}isDone(){return this.done}}return s})(),gf=(()=>{class s extends ul{constructor(){super(...arguments),this.aa=!1,this.ca=!1,this.il=!1}XE(t,e){return this.aa&&!(e===null&&Mr(t))&&csNodenodeType.apply(t)!==qn&&!t.host}KE(t){return!t.localName}serializeElement(t,e,i){var n;if((n=this.path)!==null&&n!==void 0||(this.path=""),this.XE(t,e))return;let o=!1;e===null&&Mr(t)&&(o=!0,this.done=!0);let c=this.ca&&!this.options.fullPath?"":">",l=!!t.host;if(l&&this.path&&(this.path="|shadow-root|"+c+this.path,this.il=!0,this.aa=!1,this.ca=!1),!l&&e===null&&csNodenodeType.apply(t)===qn){this.path="|fragment|"+c+this.path,this.done=!0;return}if(this.KE(t))return;let h=e!=null?e:"detached",{elementSelector:u,hasUniqueIdentifier:p}=hl(t,h,i,this.options);p&&(this.ca=!0,this.aa=!this.options.fullPath);let y=`${o?`|detached|${c}`:""}${this.aa&&!p?"":u}`,v=!p&&this.ca&&!this.options.fullPath?"":this.path&&!this.il?">":"";this.il=!1,this.path=`${y}${v}${this.path}`}}return s})(),bt=(()=>{let s;return function(r){function t(){let p=[i()];return document.documentElement&&csArray.prototype.push.call(p,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(p,document.body.scrollHeight,document.body.offsetHeight),Math.max(...p)}r.documentHeight=t;function e(){return document.documentElement.scrollWidth}r.documentWidth=e;function i(){return window.innerHeight}r.windowHeight=i;function n(){return window.innerWidth}r.windowWidth=n;function o(){let p=window.csScreen.width;return Ns(p)&&p>0?p:window.screen.width}r.screenWidth=o;function c(){let p=window.csScreen.height;return Ns(p)&&p>0?p:window.screen.height}r.screenHeight=c;function l(){return window.pageXOffset}r.windowOffsetX=l;function h(){return window.pageYOffset}r.windowOffsetY=h;function u(){return{dw:`${e()}`,dh:`${t()}`,ww:`${n()}`,wh:`${i()}`,sw:`${o()}`,sh:`${c()}`}}r.getRequestParameters=u}(s||(s={})),s})();function qt(s,r=Bt.SHOW_ALL){let t=r|Bt.SHOW_ELEMENT,e=[document.createTreeWalker(s,t,null,!1)],i=Ua(s);i&&csArray.prototype.push.call(e,document.createTreeWalker(i,t,null,!1));let n=null;return{root:s,nextNode(){if(i){let o=i;return i=null,o}for(;e.length>0;){if(n){let h=n;return n=null,h}let c=e[e.length-1].nextNode();if(!c){csArray.prototype.pop.call(e);continue}let l=Ua(c);if(r&Bt.SHOW_DOCUMENT_FRAGMENT&&l&&(n=l),l&&csArray.prototype.push.call(e,document.createTreeWalker(l,t,null,!1)),(ln[csNodenodeType.apply(c)]&r)!==0)return c}return null},visitAll(o){ln[csNodenodeType.apply(s)]&r&&o(s);let c=this.nextNode();for(;c;){if((ln[csNodenodeType.apply(c)]&r)===0){c=this.nextNode();continue}o(c),c=this.nextNode()}},find(o){let c;return this.visitAll(l=>o(l)&&(c=l)),c},collectAll(o){let c=[];return this.visitAll(l=>csArray.prototype.push.call(c,o?o(l):l)),c}}}function Ua(s){return s&&al(s)?s.shadowRoot:null}var cn=(()=>{var s;return(s=it.Node)!==null&&s!==void 0?s:{}})(),Bt=(()=>{var s;return(s=it.NodeFilter)!==null&&s!==void 0?s:{}})(),ln={2:Bt.SHOW_ATTRIBUTE,4:Bt.SHOW_CDATA_SECTION,8:Bt.SHOW_COMMENT,11:Bt.SHOW_DOCUMENT_FRAGMENT,9:Bt.SHOW_DOCUMENT,10:Bt.SHOW_DOCUMENT_TYPE,1:Bt.SHOW_ELEMENT,[cn.ENTITY_NODE]:Bt.SHOW_ENTITY,[cn.ENTITY_REFERENCE_NODE]:Bt.SHOW_ENTITY_REFERENCE,[cn.NOTATION_NODE]:Bt.SHOW_NOTATION,7:Bt.SHOW_PROCESSING_INSTRUCTION,3:Bt.SHOW_TEXT},dl=!1,Wn=5,pr=50;function mf(s=5){dl=at.isPerfLoggingActive(),Wn=s}function Hs(s,r){return function(){if(!dl)return s.apply(this,arguments);let t=M.elapsed(),e=s.apply(this,arguments);if(e!=null&&e.then)e.then(()=>{let i=M.elapsed()-t;i>=Wn&&G.counters.methodPerformance.add(r,i),i>pr&&G.counters.blockingTime.push(i-pr)});else{let i=M.elapsed()-t;i>=Wn&&G.counters.methodPerformance.add(r,i),i>pr&&G.counters.blockingTime.push(i-pr)}return e}}var Nt=function(s){return function(r,t,e){let i=e.value;e.value=Hs(i,s)}},Ps=(()=>{let s;return function(r){function t(){return!!Element.prototype.attachShadow}r.isSupported=t;function e(n){return n&&al(n)?n.shadowRoot:null}r.getShadowRoot=e;function i(n){return qt(n,NodeFilter.SHOW_DOCUMENT_FRAGMENT).collectAll(o=>o.host)}r.getAllShadowHosts=Hs(i,"getAllShadowHosts")}(s||(s={})),s})(),hn=(()=>{var s;return(s=it.Node)!==null&&s!==void 0?s:Object})(),ot=(()=>{let s;return function(r){let t="isConnected"in hn.prototype?S=>S.isConnected:S=>!S.ownerDocument||!(S.ownerDocument.compareDocumentPosition(S)&S.DOCUMENT_POSITION_DISCONNECTED);function e(S,V){for(let j=S;j;j=csNodenextSibling.apply(j))V(S)}r.forEachChild=e;function i(S){return t(S)}r.isConnected=i;function n(S,V){let j=[];for(let z of l(S,V))csArray.prototype.push.call(j,z);return j}r.getAncestors=n;let o=(S,V)=>{var j;return(j=csNodeparentNode.apply(S))!==null&&j!==void 0?j:V&&Oi(S)?S.host:null};function c(S,V,j=!1){let z=S;for(;z;){if(V(z))return z;let pt=o(z,j);if(pt&&pt!==z)z=pt;else break}return null}r.findAncestor=c;function*l(S,V=!1){let j=S;for(;j;){yield j;let z=o(j,V);if(z&&z!==j)j=z;else break}}r.walkUp=l;function h(S,V){if(S===V||V.contains(S))return!0;let j=r.getParentElement(S);return j&&j!==S?h(j,V):!1}r.isDescendantOf=h;function u(S){var V;return S.parentElement?S.parentElement:r.getRootNode(S)?(V=r.getRootNode(S))===null||V===void 0?void 0:V.host:null}r.getParentElement=u;function p(S,V=document){let j=ei(window.csquerySelectorAll[V.nodeType].call(V,S)),z=Ps.getAllShadowHosts(V);for(let pt of z){let It=Ps.getShadowRoot(pt);if(!It)continue;let ae=ei(window.csquerySelectorAll[It.nodeType].call(It,S));csArray.prototype.push.call(j,...ae)}return j}r.findAllElements=p,r.getRootNode=(()=>{if("getRootNode"in hn.prototype)return(j,z)=>j.getRootNode(z);function S(j){let z=V(j);return Oi(z)?S(z.host):z}function V(j){return csNodeparentNode.apply(j)!=null?V(csNodeparentNode.apply(j)):j}return(j,z)=>typeof z=="object"&&!!z.composed?S(j):V(j)})();function y(S){return S==="transparent"||/^(rgba|hsla)\(\d+, \d+%?, \d+%?, 0\)$/.test(S)}function m(S){let V=S.getBoundingClientRect();return V.right+bt.windowOffsetX()<0||V.bottom+bt.windowOffsetY()<0}function v(S){var V,j;if(((V=S.checkVisibility)===null||V===void 0?void 0:V.call(S,{checkOpacity:!0,checkVisibilityCSS:!0}))===!1)return!0;if(!S.offsetParent){if(!S.getBoundingClientRect)return at.warn(`SUP-11432: Element doesn't have getBoundingClientRect. Node: ${S instanceof hn} Ctor: ${(j=S==null?void 0:S.constructor)===null||j===void 0?void 0:j.name}`),!1;let It=S.getBoundingClientRect();if(It.width===0&&It.height===0)return!0}let z=window.getComputedStyle(S);return z?z.display==="none"||z.visibility==="hidden"||z.visibility==="collapse"||z.opacity==="0"||z.filter==="opacity(0)"||z.width==="0px"&&z.height==="0px"||y(z.color):!0}r.isHiddenByCSS=v;function b(S){if(v(S))return!0;let j=u(S);return j!=null&&b(j)}r.areAncestorsHiddenByCSS=b;function I(S){let V=null,j=S;do if(v(j))V=j;else break;while(j=u(j));return V}r.getTopAncestorHiddenByCSS=I;function _(S){let V=A(S);return V!==null&&!S.contains(V)&&!V.contains(S)}function A(S){let V=S.getBoundingClientRect(),j=V.left+.5*V.width,z=V.top+.5*V.height;return N(document,j,z)}r.getTopElement=A;function x(S){if(!S.getBoundingClientRect)return null;let V=S.getBoundingClientRect(),j=V.x+V.width/2,z=V.y+V.height/2;return r.getTopElementFromPoint(document,j,z)}r.getElementOnTop=x;function N(S,V,j){let z=S.elementFromPoint(V,j);if(!z)return null;let pt=Ps.getShadowRoot(z);return pt&&pt!==r.getRootNode(document.body)&&pt!==S?N(pt,V,j):z}r.getTopElementFromPoint=N;function w(S){return!m(S)&&!v(S)&&!_(S)}r.isVisibleInDocument=w;function B(S){return v(S)?!1:F(S)}r.isVisibleInViewportInForeground=B;function F(S){let V=A(S);return V===null?!1:S===V?!0:Ht(S)?S.textContent!==""&&V.contains(S):S.contains(V)}r.isInViewPort=F;function Q(S,V,j){let z=S.getAttributeNS(V,j);return z===""?S.hasAttributeNS(V,j)?z:null:z}r.getAttributeNS=Q;function Ct(S){return!!(S.hasAttribute("tabIndex")||S.getAttribute("contentEditable")==="true"||ol(S)&&S.hasAttribute("href")||(Mo(S)||Br(S)||Hr(S)||Bd(S))&&!S.hasAttribute("disabled")||Fd(S)||$d(S))}r.isElementFocusable=Ct;function Ht(S){return S.localName==="span"||S.localName==="a"||S.localName==="b"||S.localName==="i"||S.localName==="button"||S.localName==="input"||S.localName==="label"||S.localName==="cite"||S.localName==="small"||S.localName==="strong"||S.localName==="code"||S.localName==="abbr"||S.localName==="em"||S.localName==="dfn"||S.localName==="time"||S.localName==="output"||S.localName==="object"||S.localName==="sub"}r.isInlineElement=Ht;function oe(S){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>S(),{once:!0}):csSetTimeout(S)}r.onDocumentLoaded=oe}(s||(s={})),s})(),yf=(()=>{class s{constructor(t){this.JE=t}run(t){let e=[...this.JE],i=ot.getAncestors(t,!1),n=i[i.length-1];for(;e.length>0&&i.length>0;){let o=csArray.prototype.shift.call(i),c=i[0]||null;if(this.QE(e,o,c,n),this.ZE(e),e.length===0)break;i.length===0&&o.host&&(i=ot.getAncestors(o.host,!1),n=i[i.length-1])}}QE(t,e,i,n){for(let o of t)o.serializeElement(e,i,n)}ZE(t){for(let e=0;e<t.length;e++)t[e].isDone()&&(csArray.prototype.splice.call(t,e,1),e--)}}return s})(),Ef=(()=>{class s extends ul{serializeElement(t){var e;if((e=this.path)!==null&&e!==void 0||(this.path=""),(t==="detached"||t.localName==="body")&&(this.done=!0,this.path.length>0))return;let i=this.sv(t);if(i+=i.length>0?"|":"",this.path.length+i.length>this.options.hierarchyMaxLength){this.done=!0;return}this.path=i+this.path}sv(t){if(!t.localName)return"";let e=`@${t.localName};`;return e+=this.iv(t.id),t.classList&&(e+=this.rv(csArray.from(t.classList))),t.attributes&&(e+=this.nv(t)),e}iv(t){return t?`#${t};`:""}rv(t){return t.length>0?`.${csArray.prototype.join.call(csArray.prototype.sort.call(t),";.")};`:""}ov(t,e){var i,n;return((n=(i=this.options).isAttributeSensitive)===null||n===void 0?void 0:n.call(i,t,e))||csArray.prototype.indexOf.call(this.options.attributeIgnoreTokens,e)!==-1||ni(t)&&csString.prototype.indexOf.call(e,"data-")===-1&&e!=="aria-label"||Hr(t)&&e==="value"}av(t,e){return this.options.useAnonymization&&!this.options.allWhitelistedAttributes.has(t)||e.length>this.options.attrMaxLength}cv(t){let e={};for(let i of csArray.from(t.attributes))this.ov(t,i.name)||(e[i.name]=i.value);return e}nv(t){var e,i;if(!((i=(e=this.options).isNodeSensitive)===null||i===void 0)&&i.call(e,t))return"";let n=Object.entries(this.cv(t));return csArray.prototype.join.call(csArray.prototype.sort.call(csArray.prototype.map.call(csArray.prototype.filter.call(n,([o])=>o.length<this.options.attrMaxLength),([o,c])=>this.av(o,c)?`[${o}]`:`[${o}=${c}]`)),";")+(n.length>0?";":"")}}return s})(),cs=(()=>{let s;return function(r){r.INVALID_ELEMENT="INVALID_ELEMENT";function t(c){return!!c&&"localName"in c&&"getAttribute"in c&&"hasAttribute"in c&&"parentNode"in c}r.isValidElement=t;function e(c,l,h={fullPath:!1,dynamicIdRegex:null}){let u=o(c);if(u===document)return{path:"",hierarchy:""};if(!t(u))return{path:r.INVALID_ELEMENT,hierarchy:r.INVALID_ELEMENT};let p=new gf(h),y=new Ef(l);return new yf([p,y]).run(u),{path:p.getPath(),hierarchy:y.getPath()}}r.getElementPathAndHierarchy=e;function i(c,l={fullPath:!1,dynamicIdRegex:null}){let h=o(c);if(h===document)return"";if(!t(h))return r.INVALID_ELEMENT;let{ancestors:u,selectionRoot:p}=cl(h);return Dr(u,p,l)}r.getElementPath=i;function n(c,l={fullPath:!1,dynamicIdRegex:null}){let h=o(c);if(h===document)return{path:"",firstAnchorParent:null};if(!t(h))return{path:r.INVALID_ELEMENT,firstAnchorParent:null};let{firstAnchorParent:u,ancestors:p,selectionRoot:y}=Jd(h);return{path:Dr(p,y,l),firstAnchorParent:u}}r.getElementPathAndFirstAnchorParent=n;function o(c){return c&&"jquery"in c&&c.length===1?c[0]:c}}(s||(s={})),s})();window.CSPathComputation=window.CSPathComputation||cs;var fl=["t.contentsquare.net","clicktale"],vf=s=>{var r;if(typeof s.filename=="string"&&csArray.prototype.some.call(fl,t=>csString.prototype.indexOf.call(s.filename,t)>-1)&&!(csString.prototype.indexOf.call(s.filename,"blob")>-1&&(s.message==null?void 0:csString.prototype.indexOf.call(s.message,"importScripts"))>-1)){let t=new Error(s.message);t.stack=(r=s.error)===null||r===void 0?void 0:r.stack,H.critical(t)}};window.addEventListener("error",vf);var H=(()=>{class s{constructor(){}static whiteListFilename(t){csArray.prototype.push.call(fl,t)}static setStrategy(t){s.pr=t}static computeIsActive(t){s.We=Ms.boolean(t),s.We?s.rl=Ms.boolean(10):s.rl=!1}static isLoggingActive(){return s.We}static getStrategy(){return s.pr}static debug(t,e=""){s.We&&this.pr.send(t,e,ft.debug)}static warn(t,e=!0,i=""){var n;G.counters.errors.count("warning"),s.We&&e&&this.pr.send(t,i,ft.warn),(n=window.UXAnalytics.Console)===null||n===void 0||n.warn(t)}static implementation(t,e=""){G.counters.errors.count("implementation"),s.We&&this.pr.send(t,e,ft.implementation)}static error(t,e=""){var i;G.counters.errors.count("error"),s.We&&this.pr.send(t,e,ft.error),(i=window.UXAnalytics.Console)===null||i===void 0||i.error(t)}static critical(t,e=""){G.counters.errors.count("critical"),this.pr.send(t,e,ft.critical)}static tryToExecute(t,e){return function(...i){try{let n=e.apply(this,i);return X(it.Promise)&&n instanceof it.Promise?n.then(o=>o,o=>s.error(Ue(o)?o:new Error(o),t)):n}catch(n){try{s.error(Ue(n)?n:new Error(n),t)}catch{}}}}static isPerfLoggingActive(){return s.rl}}return s.We=!1,s.rl=!1,s})();var Yn=!1;function Sf(){Yn=!0}function ut(){return(s,r,t)=>{if(t){let e=t.value;t.value=function(i,n){(i==null?void 0:i.isTrusted)===!1&&Yn||e.call(this,i,n)}}else{let e=s[r];if(typeof e!="function")return;s[r]=function(i,...n){(i==null?void 0:i.isTrusted)===!1&&Yn||e.call(this,i,n)}}}}function _f(s){if(document!=null&&document.prerendering){document.addEventListener("prerenderingchange",s,{once:!0});return}s()}var wf=(()=>{class s{constructor(t,e){this.ha=t,this.lf=e}init(){this.hf=this.ha!==this.ha.top,this.uf=this.lf.isWebView&&this.ha===this.ha.top,this.lf.iframesTracking&&this.hf||this.uf?this.df=!1:this.df=!0}isInIframeContext(){return this.hf}isTopWindowTracker(){return this.df}isInWebViewContext(){return this.uf}}return s})(),xt=!Vi&&document.createElement("a"),Af=/(:443|:80)$/;function ge(s){return xt?(xt.href=s,xt.href):""}function Tf(s,r){return new csURL(s,r).href}function bf(s,r){return csArray.prototype.some.call(r,t=>ri(s,`.${t}`)||s===t||t==="")}function Rf(s){return s[0]==="/"?s:`/${s}`}function ja(s){return csString.prototype.replace.call(s,Af,"")}function pl(s){return!xt||!Rt(s,"http://")&&!Rt(s,"https://")?null:(xt.href=s,{hash:xt.hash,host:ja(xt.host),hostname:xt.hostname,href:xt.href,origin:xt.origin?xt.origin:ja(`${xt.protocol}//${xt.host}`),pathname:Rf(xt.pathname),port:xt.port,protocol:xt.protocol,search:xt.search})}var kt=(()=>{let s;return function(r){r.Discovery="discovery",r.Stop="stop",r.RecordingContext="recordingContext",r.SensitiveStatus="sensitiveStatus",r.RecordingEvent="recordingEvent",r.EndOfBufferedMessages="endOfBufferedMessages",r.ChildLogMessage="childLogMessage",r.AnalysisEvent="analysisEvent",r.JavascriptError="javascriptError",r.ApiError="apiError",r.Assets="assets",r.DetailedApiError="detailedApiError",r.EmerchandisingMessage="emerchandisingMessage",r.Commands="commands",r.IntegrationCallback="integrationCallback",r.StaticResource="staticResource",r.TrackingContextResultMessage="trackingContextResultMessage",r.TrackingContextRequestMessage="trackingContextRequestMessage",r.CustomError="customError"}(s||(s={})),s})();var Cf=(()=>{class s{setContext(t,e){this.M=t,this.C=e}getVisitorService(){return this.M}getSessionService(){return this.C}}return s})();function kr(){}function xr(s,r){return csString.prototype.lastIndexOf.call(s,r,0)===0}function gl(s,r){return csString.prototype.indexOf.call(s,r,s.length-r.length)!==-1}var un=csSymbol("cachedJson");function If(s){if(s[un])return s[un];if(csArray.isArray(s)){if(s.length===0)return"[]";let r="["+ks(s[0]);for(let t=1;t<s.length;t++)r+=","+ks(s[t]);return r+="]"}return s[un]=csJSON.stringify(s)}var ks=typeof window.Symbol!="undefined"?If:csJSON.stringify;var Ni=(()=>{let s;return function(r){function t(e){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(e),i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`),"&")}r.toQuery=t}(s||(s={})),s})(),ml=(()=>{class s{constructor(t,e){this.domainUri=t,this.path=e,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}setRequestParametersProviders(...t){this.requestParametersProviders=t}before(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)}after(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)}retrieveParameters(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,t=>t.getRequestParameters()),(t,e)=>({...t,...e})):{}}}return s})(),Mi=(()=>{class s extends ml{constructor(t,e){super(t,e)}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,i=>i());let t=this.retrieveParameters();this.nl(t);let e=Ni.toQuery(t);this.lv(e),csArray.prototype.forEach.call(this.afterRequestCallbacks,i=>i())}lv(t){let e=new window.Image(1,1);e.onload=kr,e.onerror=kr,csHTMLImageElementsrc.call(e,`${this.domainUri}${this.path?`/${this.path}`:""}?${t}`)}nl(t){t.r=csString.prototype.slice.call(`${Math.random()}`,2,8)}}return s})(),Pf=(()=>{class s{constructor(t,e){this.Ts=t,this.hv=e}init(){this.bs=new Mi(this.Ts.getLoggerUri()),this.bs.setRequestParametersProviders(this,this.hv)}send(t){this.ua=t,this.bs.send()}getRequestParameters(){return{a:this.ua.app,l:this.ua.level,m:this.ua.message,s:this.ua.stacktrace}}}return s})(),Of=/[a-zA-Z0-9._%+-]+(?:@|%40|%2540)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,Nf=/[a-zA-Z0-9+_-](?:@|%40|%2540)/,Mf="CS_ANONYMIZED_EMAIL",dn="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",Df=new csRegExp(`(ey${dn}\\.ey${dn}\\.${dn})`,"g"),kf="CS_ANONYMIZED_JWT",xf=/[0-9]{4}/,Lf=/(^|[^a-zA-Z0-9*.,-])([45*][0-9*]{3}([ -]?)[0-9*]{4}\3[0-9*]{4}\3[0-9*]{4})($|[^a-zA-Z0-9*.,-])/g,Vf="CS_ANONYMIZED_PII",Uf="\u2022",jf=/\d/g,Hf=/([+(]{0,2}\d[-_ ()/]{0,4}){9,}/,Bf=/(?:\d{1,3}\.){3}\d{1,3}/,Ff=/(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}/,Qe=(()=>{let s;return function(r){function t(u){return csString.prototype.replace.call(u,Of,Mf)}r.replaceEmail=t;function e(u){return csString.prototype.replace.call(u,Df,kf)}r.replaceJWT=e;function i(u,p){return csString.prototype.replace.call(u,Lf,p)}r.replaceCreditCardNumber=i;function n(u){return csString.prototype.replace.call(u,jf,Uf)}r.replaceDigits=n;function o(u){return Bf.test(u)||Ff.test(u)}r.mayHaveIPAddress=o;function c(u){return Hf.test(u)}r.mayHaveNumberSequence=c;function l(u){return xf.test(u)}r.mayHaveCreditCardNumber=l;function h(u){return Nf.test(u)}r.mayHaveEmail=h}(s||(s={})),s})(),oi=(()=>{class s{hasPII(t,e){let i=this.checkAndAnonymizePII(t,e);return t!==i}checkAndAnonymizePII(t,e=null){let i=this.uv(this.ol(t));return e===!0?i=this.fv(i):e===!1&&(i=this.pv(i)),i}anonymizePII(t){return this.ol(t)}anonymizeJwt(t){return Qe.replaceJWT(t)}anonymizeFields(t,e){return csArray.prototype.forEach.call(e,i=>{t[i]=this.ol(t[i])}),t}ol(t){if(Qe.mayHaveEmail(t)){let e=Qe.replaceEmail(t);return e!==t&&G.counters.redactedPII.count("email"),e}return t}fv(t){return Qe.replaceDigits(t)}pv(t){return Qe.mayHaveNumberSequence(t)?Qe.replaceDigits(t):t}uv(t){return Qe.mayHaveCreditCardNumber(t)?Qe.replaceCreditCardNumber(t,(e,i,n,o,c)=>{if(csString.prototype.indexOf.call(n,"*")===-1){let h=o.length?csArray.prototype.join.call(csString.prototype.split.call(n,o),""):n;if(!this.gv(h))return e;G.counters.redactedPII.count("cc")}else G.counters.redactedPII.count("cc-partial");return`${i}${Vf}${c}`}):t}gv(t){let e=parseInt(t[t.length-1]),i=0;for(let n=t.length-2;n>=0;n--){let o=parseInt(t[n]);n%2===0&&(o*=2),i+=Math.floor(o/10)+o%10}return 10-i%10===e}}return s})(),yl="15.169.0";function Lo(){return{v:yl}}var $f=(()=>{class s{constructor(t,e){this.E=t,this.D=e}getRequestParameters(){return{d:`${M.now()}`,p:this.D.anonymizePII(window.location.href),...this.E.getRequestParameters(),...Lo()}}}return s})(),zf="uxa",Ha=5,Gf="No stacktrace",El="snippet-",vl="implementation-snippet-",Ba=(()=>{let s;return function(r){r.IMPLEMENTATION="implementation",r.DYNAMIC="dynamic"}(s||(s={})),s})(),qf=(()=>{class s{constructor(t,e,i){this.gr=e,this.D=new oi,this.ff=nn[ft.warn],this.ff=nn[t.minLogLevel||ft.warn],this.bs=i||new Pf(t,new $f(t,this.D)),this.pf={[ft.debug]:[],[ft.warn]:[],[ft.implementation]:[],[ft.error]:[],[ft.critical]:[]},this.da={implementation:{},dynamic:{}},this.bs.init()}send(t,e="",i=ft.warn){if(!this.mv(i,e))return;csArray.prototype.push.call(this.pf[i],e||"");let n={message:this.yv(t,e),stacktrace:this.Ev(t),app:zf,level:i};this.bs.send(n)}yv(t,e){let i=Ue(t)?this.D.anonymizePII(t.message||t.toString()):t;return e&&(i+=` ErrorCode: ${e}`),i}Ev(t){return Ue(t)?`${t.stack||Gf} ${this.gf()}`:this.gf()}gf(){let t=this.gr.getVisitorService(),e=t==null?void 0:t.getVisitor();if(!e)return"No context";let i=this.gr.getSessionService(),n=i&&i.getSession(),o={userId:e.id,sessionNumber:e.visitsCount,pageNumber:n&&n.pageNumber};return csJSON.stringify(o)}mv(t,e){if(nn[t]<this.ff)return!1;if((e==null?void 0:csString.prototype.indexOf.call(e,vl,0))===0)return this.mf(e,Ba.IMPLEMENTATION);if((e==null?void 0:csString.prototype.indexOf.call(e,El,0))===0)return this.mf(e,Ba.DYNAMIC);let i=this.pf[t];return i.length>=Ha?!1:!(e&&csArray.prototype.some.call(i,n=>n===e))}mf(t,e){return t in this.da[e]?this.da[e][t]>=Ha?!1:(this.da[e][t]+=1,!0):(this.da[e][t]=1,!0)}}return s})();var Wf=(()=>{let s;return function(r){function t(){return typeof window.CSJavascriptBridge=="object"&&typeof window.CSJavascriptBridge.optIn=="function"&&typeof window.CSJavascriptBridge.optOut=="function"&&typeof window.CSJavascriptBridge.sendEvent=="function"&&typeof window.CSJavascriptBridge.sendDynamicVar=="function"&&typeof window.CSJavascriptBridge.sendTransaction=="function"}r.isCSJavascriptBridgeDefined=t;function e(){if(typeof window.CSJavascriptBridge.getVersion=="function")try{let F=window.CSJavascriptBridge.getVersion();if(_t(F))return F}catch{H.warn("an error occurred when calling getVersion")}return null}r.getBridgeVersion=e;function i(){typeof window.CSJavascriptBridge.onWebviewTrackingReady=="function"&&window.CSJavascriptBridge.onWebviewTrackingReady()}r.notifyIsReadyForTracking=i;function n(F,Q){window.CSJavascriptBridge.identify&&window.CSJavascriptBridge.identify(F,csJSON.stringify(Q))}r.identify=n;function o(){window.CSJavascriptBridge.resetIdentity&&window.CSJavascriptBridge.resetIdentity()}r.resetIdentity=o;function c(F){window.CSJavascriptBridge.addUserProperties&&window.CSJavascriptBridge.addUserProperties(csJSON.stringify(F))}r.addUserProperties=c;function l(F){window.CSJavascriptBridge.addEventProperties&&window.CSJavascriptBridge.addEventProperties(csJSON.stringify(F))}r.addEventProperties=l;function h(F){window.CSJavascriptBridge.removeEventProperty&&window.CSJavascriptBridge.removeEventProperty(F)}r.removeEventProperty=h;function u(){window.CSJavascriptBridge.clearEventProperties&&window.CSJavascriptBridge.clearEventProperties()}r.clearEventProperties=u;function p(F){window.CSJavascriptBridge.addPageviewProperties&&window.CSJavascriptBridge.addPageviewProperties(csJSON.stringify(F))}r.addPageviewProperties=p;function y(F){window.CSJavascriptBridge.removePageviewProperty&&window.CSJavascriptBridge.removePageviewProperty(F)}r.removePageviewProperty=y;function m(){window.CSJavascriptBridge.clearPageviewProperties&&window.CSJavascriptBridge.clearPageviewProperties()}r.clearPageviewProperties=m;function v(F){window.CSJavascriptBridge.sendEvent(csJSON.stringify(F))}r.sendAnalysisEvent=v;function b(F){if(window.CSJavascriptBridge.sendSREvent)for(let Q of F.events)window.CSJavascriptBridge.sendSREvent(csJSON.stringify(Q))}r.sendSREvent=b;function I(F){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendLog&&window.CSJavascriptBridge.sendLog(csJSON.stringify(F))}r.sendLog=I;function _(){window.CSJavascriptBridge.optIn()}r.sendOptIn=_;function A(){window.CSJavascriptBridge.optOut()}r.sendOptOut=A;function x(F,Q){window.CSJavascriptBridge.sendDynamicVar(F,Q)}r.sendDynamicVariable=x;function N(F,Q,Ct){window.CSJavascriptBridge.sendTransaction(F,Q,Ct)}r.sendTransaction=N;function w(F,Q){if(window.CSJavascriptBridge.sendAssets){let Ct=csJSON.stringify(F);window.CSJavascriptBridge.sendAssets(Ct,Q||null)}else window.CSJavascriptBridge.sendSRAssets&&window.CSJavascriptBridge.sendSRAssets(csArray.prototype.map.call(F,Ct=>Ct.assetId))}r.sendAssets=w;function B(F){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendNativeSREvent&&window.CSJavascriptBridge.sendNativeSREvent(csJSON.stringify(F))}r.sendNativeSREvent=B}(s||(s={})),s})(),Yf=(()=>{class s{constructor(){}send(t,e,i=ft.warn){let n={message:t,errorCode:e,level:i};Wf.sendLog(n)}}return s})();function se(s){return Rt(s,"data:")}function Xf(s){return Rt(s,"#")}function Kf(s){return!!s&&(ri(s,".css")||Rt(s,"https://fonts.googleapis.com/css"))}var Jf=["id","class","style","srcset","sizes","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start","slot","data-cs-override-id"],Vo=s=>{let r=new Set(Jf);return csArray.prototype.forEach.call(s,t=>{r.add(t)}),r},Qf=["svg","slot"],Zf=(s,r,t)=>t==="radio"&&s==="input"&&r==="name"||csArray.prototype.indexOf.call(Qf,s)>-1,Sl={href:new Set(["a"]),src:new Set(["iframe"])},tp=s=>Sl.hasOwnProperty(s),ep=(s,r,t)=>{var e;return((e=Sl[r])===null||e===void 0?void 0:e.has(s))&&!se(t)},sp=(s,r,t)=>(t==="submit"||t==="button")&&s==="input"&&r==="value";function fn(s){return s?ip(s):null}function ip(s){try{let r=/^\/(.*)\/([gim]*)$/.exec(s);if(r){let[,t,e]=r;return new csRegExp(`^${t}$`,e)}return new csRegExp(`^${s}$`)}catch{return null}}var rp=/^\d+\.\d+(?:\.\d+)?$/,np=s=>{if(!rp.test(s))return;let[r,t,e]=csArray.prototype.map.call(csString.prototype.split.call(s,"."),Number);return{major:r,minor:t,patch:!e||Number.isNaN(e)?0:e}},op=(s,r)=>s.major!==r.major?s.major-r.major:s.minor!==r.minor?s.minor-r.minor:s.patch-r.patch,ap=(s,r)=>op(s,r)>=0,cp=1,Xn=(()=>{let s;return function(r){r[r.Disabled=0]="Disabled",r[r.ButtonAndLinkOnly=1]="ButtonAndLinkOnly",r[r.Enabled=2]="Enabled"}(s||(s={})),s})(),Lr=(()=>{let s;return function(r){r[r.Automatic=1]="Automatic",r[r.Manual=2]="Manual"}(s||(s={})),s})(),lp=(()=>{class s{constructor(t){var e,i,n,o,c,l,h,u,p,y,m,v,b;this.isChild=!1,this.useFastDOM=!!t.useFastDOM,this.isSMB=(e=t.isSMB)!==null&&e!==void 0?e:!1,this.trackerDomain=t.trackerDomain,this.dynamicConfDomain=t.dynamicConfDomain,this.settingsFileUri=t.settingsFileUri,this.tagDomain=t.tagDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.smbConfig=t.smbConfig,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||Ro,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.collectionEnabled=!!(!((o=(i=t.collectionEnabled)!==null&&i!==void 0?i:(n=t.smbConfig)===null||n===void 0?void 0:n.record)!==null&&o!==void 0)||o),this.apiErrors={enabled:(c=t.apiErrorsEnabled)!==null&&c!==void 0?c:0,...t.apiErrors},this.customErrors={enabled:(l=t.customErrorsEnabled)!==null&&l!==void 0?l:0,...t.customErrors},this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=fn(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new csRegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=fn(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=fn(t.replayRecordingMaskedUrlRegex),this.replayRecordingMaskedUrlRegexRules=t.replayRecordingMaskedUrlRegexRules||null,this.replayRecordingUnmaskedUrlRegexRules=t.replayRecordingUnmaskedUrlRegexRules||null,this.anonymisationMethod=t.anonymisationMethod||null,this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.staticResourceManagerDomain=t.staticResourceManagerDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.recordingUrlRules=(h=t.recordingUrlRules)!==null&&h!==void 0?h:[],this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex===""&&(this.pathComputationRules.dynamicElementNameRegex=null),t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new csRegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled,this.useStaticResourceManager=!!t.useStaticResourceManager,t.taskSchedulerOptions&&(this.taskSchedulerOptions={...t.taskSchedulerOptions,enabled:!!t.taskSchedulerOptions.enabled}),this.uxaDomain=t.uxaDomain,this.environment=((u=t.uxaDomain)===null||u===void 0?void 0:u.indexOf("staging"))>-1?"staging":"production",this.performanceTimingOptions=t.performanceTimingOptions,this.replayConsentRequiredForSession=!!t.replayConsentRequiredForSession,this.isWebView=!1,t.displayAdOptions&&t.displayAdOptions.length&&(this.displayAdOptions=t.displayAdOptions),t.voc&&(this.voc={...t.voc,enabled:!!t.voc.enabled}),this.vocData=t.vocData,t.heapEnvironment&&(this.heapEnvironment=t.heapEnvironment),t.implementations&&t.implementations.length&&(this.implementations=t.implementations),this.eventsApiEnabled=!!t.eventsApiEnabled,this.anonymizeDigits=(p=t.anonymizeDigits)!==null&&p!==void 0?p:null,this.isHeapPresent=window.heap!==void 0,this.recordTargetingRules=(y=t.recordTargetingRules)!==null&&y!==void 0?y:[],this.paProxyDomainUri=t.paProxyDomainUri||null,this.emitRecordInfoEvents=t.emitRecordInfoEvents!==!1,this.collectHierarchy=!!t.collectHierarchy,this.collectSubmit=!!t.collectSubmit,this.collectTargetText=(m=t.collectTargetText)!==null&&m!==void 0?m:Xn.Disabled,this.identityEncryptionKey=t.identityEncryptionKey||null,this.tagVerificationDomain=t.tagVerificationDomain,this.tagVerificationEnabled=!!t.tagVerificationEnabled,this.trackingCodeVerified=!!t.trackingCodeVerified,this.quotas=(v=t.quotas)!==null&&v!==void 0?v:null,this.startMode=(b=t.startMode)!==null&&b!==void 0?b:Lr.Automatic,this.eventEnricher=t.eventEnricher||null}getTrackerUri(){return`${this.Qs()}://${this.trackerDomain}`}getRecordingUri(){return`${this.Qs()}://${this.malkaRecordingDomain}`}getLoggerUri(){return`${this.Qs()}://${this.loggerDomain}`}getMetricsUri(){return`${this.Qs()}://${this.loggerDomain}/metrics`}getStaticResourceManagerUri(){return`${this.Qs()}://${this.staticResourceManagerDomain}`}getVerificationEndpoint(){return`${this.Qs()}://${this.tagVerificationDomain}`}getSettingsFileUri(){return this.settingsFileUri?this.settingsFileUri:`${this.Qs()}://${this.dynamicConfDomain}/${this.projectId}.json`}isQuotaEnabled(){return this.isSMB||this.quotas!==null}getPaProxyDomainUri(){return`${this.Qs()}://${this.paProxyDomainUri}`}Qs(){return this.useHttps?"https":"http"}isProjectActive(){return this.status===cp}processOptionOverrides(t){t&&t.forEach&&t.forEach(([e,...i])=>{if(e==="setOption"){let[n,o]=i;this.vv(n,o)}})}vv(t,e){t==="trackerDomain"&&(this.trackerDomain=e),t==="loggerDomain"&&(this.loggerDomain=e),t==="malkaRecordingDomain"&&(this.malkaRecordingDomain=e),t==="staticResourceManagerDomain"&&(this.staticResourceManagerDomain=e),t==="minLogLevel"&&(this.minLogLevel=e),t==="useHttps"&&(this.useHttps=!!e),t==="isWebView"&&(this.isWebView=e),t==="dynamicConfDomain"&&(this.dynamicConfDomain=e),t==="paProxyDomainUri"&&(this.paProxyDomainUri=e),t==="startMode"&&Ns(e)&&csArray.prototype.includes.call(Object.values(Lr),e)&&(this.startMode=e)}getRequestParameters(){return{pid:`${this.projectId}`}}updateDynamicFields(t,e){t==="emitDebugEvents"&&(this.emitDebugEvents=e),t==="minLogLevel"&&(this.minLogLevel=e)}isCsSideloadingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_sideloads_heap"&&!this.isHeapPresent}isHeapSideloadsCs(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"}isHeapSideloadsCsV5(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"&&this.yf()}isHeapSideloadsStartDataCollection(){if(this.isHeapSideloadsCs()){if(this.yf())return!0;let t=np(this.getHeapVersion()||"");if(t&&t.major===4&&ap(t,{major:4,minor:23,patch:5}))return!0}return!1}yf(){var t;return typeof((t=window.heap)===null||t===void 0?void 0:t.getUserId)=="function"}getHeapVersion(){var t,e,i,n,o,c;return typeof((t=window.heap)===null||t===void 0?void 0:t.getConfig)=="function"&&((n=(i=(e=window.heap)===null||e===void 0?void 0:e.getConfig())===null||i===void 0?void 0:i.sdk)===null||n===void 0?void 0:n.version)||((c=(o=window.heap)===null||o===void 0?void 0:o.version)===null||c===void 0?void 0:c.heapJsVersion)||void 0}isCsCrosswritingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_crosswrites_heap"}getHeapStorageLocation(){var t,e;return(e=(t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_storage_location)!==null&&e!==void 0?e:null}getHeapWebAppUri(){return this.getHeapStorageLocation()==="eu-west-1"?"https://eu.heapanalytics.com":"https://heapanalytics.com"}isCollectTargetTextEnabled(){return this.isSMB||this.collectTargetText!==Xn.Disabled}isNetworkDetailsEnabled(){return this.performanceTimingOptions?this.performanceTimingOptions.withResource||this.performanceTimingOptions.withNavigation:!1}hasRecordingUrlRules(){var t;return!!(!((t=this.recordingUrlRules)===null||t===void 0)&&t.length)}hasTargetingRules(){var t;return!!(!((t=this.recordTargetingRules)===null||t===void 0)&&t.length)}getHeapEnvId(){return this.heapEnvironment?this.heapEnvironment.env_id:""}}return s})();function U(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}function hp(){let s=new MutationObserver(r=>{r.forEach(t=>{K(t.removedNodes,e=>{e instanceof HTMLElement&&e.tagName==="CS-NATIVE-FRAME-HOLDER"&&(G.counters.pureWindowState.count("iframe-deletion"),at.warn("<cs-native-frame-holder> deleted"),s.disconnect())})})});s.observe(document.body,{childList:!0})}function Fa(s){return typeof s!="function"?!1:s.toString().indexOf("[native code]")!==-1}function up(){(!Fa(MutationObserver)||!Fa(MutationObserver.prototype.observe))&&G.counters.patchedNativeFunctions.count("MutationObserver")}function dp(){try{window.CSPureWindow&&hp(),up()}catch{}}var vt=(()=>{let s;return function(r){r.CURRENT_DOMAIN="CURRENT_DOMAIN";function t(l){let u=new csRegExp(`(^|;)[ ]*${l}=([^;]*)`).exec(document.cookie);return u?decodeURIComponent(u[2]):null}r.get=t;function e(l,h,u,p,y,m){let v=encodeURIComponent(`${h}`),b=u===r.CURRENT_DOMAIN?void 0:u,I=i(p),_=I?`;expires=${I.toUTCString()}`:"",A=";path=/",x=yt(b)?`;domain=${b}`:"",N=`${l}=${v}${_}${A}${x}`;return X(y)&&y!==pe.NotSet&&(N=`${N};SameSite=${y}`),X(m)&&m===ue.Yes&&(N=`${N};Secure`),document.cookie=N,!0}r.set=e;function i(l){return _t(l)?new csDate(M.now()+l):l}r.toExpireDate=i;function n(l,h){t(l)&&e(l,"",h,new csDate(0)),t(l)&&e(l,"",h,new csDate(0),pe.None,ue.Yes)}r.remove=n;function o(){return document.cookie.length>0}r.isCookiePresent=o;function c(l,h){let u="_cs_root-domain",p=t(u);if(p!==null&&p!=="1")return p;let y=csString.prototype.split.call(window.location.hostname,"."),m=csArray.prototype.pop.call(y);for(;y.length&&(p===null||p==="1");)m=csArray.prototype.join.call([csArray.prototype.pop.call(y),m],"."),e(u,m,m,void 0,l,h),p=t(u);return n(u,m),m}r.getRootDomain=c}(s||(s={})),s})(),fp=(()=>{let s;return function(r){function t(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}r.browserIsSafariV12=t}(s||(s={})),s})(),pe=(()=>{let s;return function(r){r.None="None",r.Lax="Lax",r.NotSet="X"}(s||(s={})),s})(),ue=(()=>{let s;return function(r){r[r.Yes=1]="Yes",r[r.No=0]="No"}(s||(s={})),s})(),Fr=(()=>{class s{constructor(t,e,i){this.E=t,this.A=e,this.Ni=i,this.al=!1,this.Ef=pe.NotSet,this.cl=ue.No}getSameSiteFlag(){return this.Ef}getSecureFlag(){return this.cl}getDomain(){return this.ll}getRootDomain(){return this.vf}init(){if(this.E.cookielessTrackingEnabled)return;let t=this.Sv(),e=this._v();this.al=this.wv(t,e),this.al?(this.Ef=t,this.cl=e):this.E.secureCookiesEnabled&&this.A.getUrlProtocol()==="https:"&&(this.cl=ue.Yes),this.vf=this.Av(),this.ll=this.Tv(this.vf)}wv(t,e){return fp.browserIsSafariV12()?!1:(vt.set(s.COOKIE_TEST_FOR_SAME_SITE,"Test same site",s.CURRENT_DOMAIN,void 0,t,e),vt.get(s.COOKIE_TEST_FOR_SAME_SITE)?(vt.remove(s.COOKIE_TEST_FOR_SAME_SITE,s.CURRENT_DOMAIN),!0):!1)}Sv(){return this.A.getUrlProtocol()==="http:"?pe.Lax:this.Ni.isSameSiteNoneSecureNeeded()||this.E.crossDomainTracking?pe.None:pe.Lax}_v(){return this.A.getUrlProtocol()==="http:"?ue.No:this.E.secureCookiesEnabled||this.E.crossDomainTracking||this.Ni.isSameSiteNoneSecureNeeded()?ue.Yes:ue.No}isSameSiteSupported(){return this.al}set(t,e,i,n){let o=vt.toExpireDate(i),c=n?ue.Yes:this.getSecureFlag();vt.set(t,e,this.ll,o,this.getSameSiteFlag(),c)}get(t){let i=new csRegExp(`(^|;)[ ]*${t}=([^;]*)`).exec(document.cookie);return i?decodeURIComponent(i[2]):null}delete(t,e){let i=e||this.ll;vt.remove(t,i)}Av(){let t=this.Ni.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),e=t?pe.None:void 0,i=t?ue.Yes:void 0;return vt.getRootDomain(e,i)}Tv(t){return this.E.allowSubdomains?t:vt.CURRENT_DOMAIN}}return s.CURRENT_DOMAIN="CURRENT_DOMAIN",s.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",s})(),Ws="_cs_t",$a="1",pp=(()=>{class s{constructor(t,e){this.Ct=t,this.E=e,this.fa=!1,this.pa=!1}init(){if(!this.E.cookielessTrackingEnabled&&this.Ct.isTopWindowTracker()&&"cookie"in document){if(!this.Ct.isInIframeContext()&&vt.isCookiePresent()){this.fa=!0,this.pa=!1;return}if(vt.set(Ws,$a,vt.CURRENT_DOMAIN),vt.get(Ws)!==null){this.fa=!0,this.pa=!1,vt.remove(Ws,vt.CURRENT_DOMAIN);return}vt.set(Ws,$a,vt.CURRENT_DOMAIN,void 0,pe.None,ue.Yes),vt.get(Ws)!==null&&(this.fa=!0,this.pa=!0,vt.remove(Ws,vt.CURRENT_DOMAIN))}}areCookiesEnabled(){return this.fa}isSameSiteNoneSecureNeeded(){return this.pa}}return s})();function gp(){let s="CSSessionStorageTest";try{return sessionStorage.setItem(s,s),sessionStorage.getItem(s)!==s?!1:(sessionStorage.removeItem(s),!0)}catch{return!1}}var mp=(()=>{class s{constructor(t,e){this.E=t,this.Ni=e}canTrack(){return this.E.isProjectActive()&&this.bv()&&this.Sf()&&this.Rv()}canTrackInChild(){return this.E.isProjectActive()&&this.Cv()&&(this.Sf()||this.Iv())}Rv(){return this.E.cookielessTrackingEnabled?gp():this.Ni.areCookiesEnabled()}Sf(){return bf(window.location.hostname,this.E.hostnames)}bv(){return!this._f()&&this.Pv()}Cv(){return!this._f()&&this.Ov()}Iv(){return window.location.protocol==="about:"&&window.location.hostname===""}_f(){return"visibilityState"in document&&document.visibilityState==="prerender"}Pv(){return this.wf()&&this.Nv()}Ov(){return this.wf()}Nv(){try{return!!window.localStorage}catch{return!1}}wf(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window}}return s})(),_l=":";function za(s){let r=[],t=yp(s),e=csString.prototype.split.call(t,"/");for(let i of e)Rt(i,_l)?csArray.prototype.push.call(r,{key:i,value:`CS_ANONYMIZED_${csString.prototype.toUpperCase.call(csString.prototype.slice.call(i,1))}`}):csArray.prototype.push.call(r,{key:i,value:null});return r}function yp(s){let r=s;return Rt(s,"/")&&(r=csString.prototype.substring.call(r,1)),ri(s,"/")&&(r=csString.prototype.slice.call(r,0,-1)),r}var Ep=/\b((?:profile|user|last|first|primary|primary(?:[/_+-]|%20)?last)(?:[/_+-]|%20)?(?:name)[/=])[^#;?&/]+/gi,vp="$1CS_ANONYMIZED_NAME",Sp=(()=>{class s{constructor(t){this.D=t}anonymizeUrl(t,e={}){let i=e.maskingPatterns||[],n=e.partialMaskingPatterns||[],o=this.D.anonymizePII(t);if(o=this.D.anonymizeJwt(o),e.maskNames){let h=o;o=this.An(o),o!==h&&(G.counters.redactedPII.count("name"),G.counters.redactedPII.count("name-in-url"))}let c=this.Mv(o,i);if(c!==o)return G.counters.redactedPII.count("url"),c;let l=this.Dv(o,n);return l!==o&&G.counters.redactedPII.count("url"),l}removeQueryString(t){let{path:e,queryString:i}=this.ul(t);return i!==""?`${e}?`:e}ul(t){let e=csString.prototype.indexOf.call(t,"?"),i,n="";return e!==-1?(i=csString.prototype.slice.call(t,0,e),n=csString.prototype.slice.call(t,e,t.length)):i=t,{path:i,queryString:n}}Mv(t,e){if(e.length===0)return t;let{path:i,queryString:n}=this.ul(t),o=csString.prototype.split.call(i,"/");for(let c of e){let l=this.kv(o,c);if(l!==null)return`${l}${n}`}return t}kv(t,e){if(t.length<e.length)return null;let i=[];for(let n=0;n<t.length;n++){let o=t[n];if(n>=e.length){csArray.prototype.push.call(i,o);continue}let c=e[n].key;if(this.Af(c)){let l=e[n].value;csArray.prototype.push.call(i,l);continue}if(o===c){csArray.prototype.push.call(i,o);continue}return null}return csArray.prototype.join.call(i,"/")}Dv(t,e){if(e.length===0)return t;let{path:i,queryString:n}=this.ul(t),o=csString.prototype.split.call(i,"/");for(let c of e)o=this.xv(o,c);return`${csArray.prototype.join.call(o,"/")}${n}`}xv(t,e){let i=[],n=0,c=t[0]==="http:"||t[0]==="https:"?2:0;for(let l=0;l<t.length;l++){let h=t[l],u=e[n].key;if(this.Af(u)&&l>=c){let p=e[n].value;csArray.prototype.push.call(i,h.length>0?p:""),n++,n===e.length&&(n=0);continue}if(h===u){csArray.prototype.push.call(i,h),n++,n===e.length&&(n=0);continue}for(let p=0;p<n;p++){let y=l-n+p;i[y]=t[y]}n=0,csArray.prototype.push.call(i,h)}for(let l=0;l<n;l++){let h=t.length-n+l;i[h]=t[h]}return i}Af(t){return Rt(t,_l)}An(t){return csString.prototype.replace.call(t,Ep,vp)}}return s})(),_p="spki",Ga="RSA-OAEP",wp="SHA-256",qa="AES-CTR",Ap="SHA-1",Wa=190,wi=(()=>{let s;return function(r){var t;let e=!1,i=null,n,o=typeof TextEncoder!="undefined"?new TextEncoder:null,c;r.crypto=(t=it.crypto)===null||t===void 0?void 0:t.subtle,r.MAX_DIGEST_INPUT_SIZE=100;function l(){return!e}r.isKeyImported=l;function h(){return i}r.getCryptoKey=h;function u(){var N,w;return((w=(N=it.self.crypto)===null||N===void 0?void 0:N.subtle)===null||w===void 0?void 0:w.encrypt)!=null&&it.self.CryptoKey!=null}r.isSupported=u;async function p(N){n=r.crypto.importKey(_p,Jc(N),{name:Ga,hash:wp},!1,["encrypt"]).catch(()=>(e=!0,null)),i=await n,n=void 0,i||at.warn(`Fail to import public key '${N}'`)}r.importKey=p;async function y(N){if(!u()||e)return null;await n;let w=bo(N);w.byteLength>Wa&&(w=w.slice(0,Wa));try{let B=await r.crypto.encrypt({name:Ga},i,w);return Ca(B)}catch{return null}}r.asymmetricEncrypt=y;async function m(N,w){if(!u()||e)return null;let B={counter:w.initializationVector,name:qa,length:64},F=o.encode(N);try{let Q=await r.crypto.encrypt(B,w.cryptoKey,F);return Ca(Q)}catch{return null}}r.symmetricEncrypt=m;async function v(N){let w=await b(N);if(!w)throw new Error("Export secret failed");let B=await y(w);if(!B)throw new Error("Encrypt secret failed");return B}r.encryptSecret=v;async function b(N){var w;if(!u())return null;try{return(w=(await r.crypto.exportKey("jwk",N)).k)!==null&&w!==void 0?w:null}catch{return null}}async function I(){if(!u()||e)return null;try{return{cryptoKey:await r.crypto.generateKey({name:qa,length:128},!0,["encrypt","decrypt"]),initializationVector:it.crypto.getRandomValues(new Uint8Array(16))}}catch{return null}}r.generateSymmetricKey=I;function _(N){c=N}r.setDigestSalt=_;async function A(N){N=csString.prototype.toLocaleLowerCase.call(csString.prototype.trim.call(N)),c&&(N=`${N}:${c}`);let w=o.encode(N);try{let B=await r.crypto.digest(Ap,w);return Fn(B)}catch{return null}}r.digest=A;function x(){return it.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"])}r.generateKeyPair=x}(s||(s={})),s})(),Ne=(()=>{let s;return function(r){r.REGEX="regex",r.START="start",r.NOT_START="not-start",r.END="end",r.NOT_END="not-end",r.CONTAIN="contain",r.NOT_CONTAIN="not-contain",r.EXACT="exact",r.NOT_EXACT="not-exact"}(s||(s={})),s})(),Ze=(()=>{let s;return function(r){r.START="start",r.NOT_START="not-start",r.END="end",r.NOT_END="not-end",r.CONTAIN="contain",r.NOT_CONTAIN="not-contain",r.EXACT="exact",r.NOT_EXACT="not-exact"}(s||(s={})),s})(),As=(()=>{let s;return function(r){r.replayRecordingUnmaskedUrlRegex="replayRecordingUnmaskedUrlRegex",r.replayRecordingMaskedUrlRegex="replayRecordingMaskedUrlRegex",r.replayRecordingUnmaskedUrlRegexRules="replayRecordingUnmaskedUrlRegexRules",r.replayRecordingMaskedUrlRegexRules="replayRecordingMaskedUrlRegexRules"}(s||(s={})),s})(),Uo=(()=>{class s{constructor(){this.dl=[]}setRegexRules(t){this.dl=csArray.prototype.filter.call(csArray.prototype.map.call(t,e=>this.Lv(e)),e=>e!==null)}evaluateUrl(t){return csArray.prototype.some.call(this.dl,e=>this.Tf(t,e))}getMatchingRules(t){return csArray.prototype.map.call(csArray.prototype.filter.call(this.dl,e=>this.Tf(t,e)),e=>e.ruleInput)}Tf(t,e){var i,n;let o=this.Uv(t,e);return!this.jv(e)||!this.Hv(e)?!1:!!(e!=null&&e.notOperator?!(!((i=e.regex)===null||i===void 0)&&i.test(o)):!((n=e.regex)===null||n===void 0)&&n.test(o))}jv(t){let e=new csDate,i=t.startDate&&t.startDate>e,n=t.endDate&&t.endDate<e;return!i&&!n}Hv(t){let e=t.samplingRate!==100,i=e&&Ms.boolean(t.samplingRate);return!e||i}ga(t){return!Rt(t,"http://")&&!Rt(t,"https://")?`https://${t}`:t}Uv(t,e){let i=pl(this.ga(t));return i?e.ignoreQueryParams&&e.ignoreURIFragments?`${i.origin}${i.pathname}`:e.ignoreQueryParams?`${i.origin}${i.pathname}${i.hash}`:e.ignoreURIFragments?`${i.origin}${i.pathname}${i.search}`:t:t}ma(t){return t!=null&&t.ignoreCaseSensitivity?"i":""}Lv(t){let e=null,i=!1;switch(t.operator){case Ze.NOT_START:case Ne.NOT_START:i=!0;case Ze.START:case Ne.START:e=new csRegExp(`^${t.value}`,this.ma(t));break;case Ze.NOT_END:case Ne.NOT_END:i=!0;case Ze.END:case Ne.END:e=new csRegExp(`${t.value}$`,this.ma(t));break;case Ze.NOT_CONTAIN:case Ne.NOT_CONTAIN:i=!0;case Ze.CONTAIN:case Ne.CONTAIN:case Ne.REGEX:e=new csRegExp(`${t.value}`,this.ma(t));break;case Ze.NOT_EXACT:case Ne.NOT_EXACT:i=!0;case Ze.EXACT:case Ne.EXACT:e=new csRegExp(`^${t.value}$`,this.ma(t));break;default:at.warn(`compileRegexRule, unknown operator: ${t.operator}`)}if(e===null)return null;let n=t.startDate?this.bf(t.startDate):void 0,o=t.endDate?this.bf(t.endDate):void 0;return{regex:e,ignoreQueryParams:t.ignoreQueryParams,ignoreURIFragments:t.ignoreURIFragments,notOperator:i,samplingRate:t.samplingRate!==void 0?t.samplingRate:100,startDate:n,endDate:o,ruleInput:t}}bf(t){let e=new csDate(t);return isNaN(e.getTime())?void 0:e}}return s})(),W=(()=>{let s;return function(r){r[r.RESIZE=0]="RESIZE",r[r.SCROLL=1]="SCROLL",r[r.MOUSEMOVE=2]="MOUSEMOVE",r[r.MOUSEDOWN=3]="MOUSEDOWN",r[r.MOUSEUP=4]="MOUSEUP",r[r.CLICK=5]="CLICK",r[r.MOUSEOVER=6]="MOUSEOVER",r[r.MOUSEOUT=7]="MOUSEOUT",r[r.CHANGE=10]="CHANGE",r[r.FOCUSIN=11]="FOCUSIN",r[r.FOCUSOUT=12]="FOCUSOUT",r[r.TAP=14]="TAP",r[r.KEYDOWN=15]="KEYDOWN",r[r.KEYUP=16]="KEYUP",r[r.COMMAND=17]="COMMAND",r[r.PERFORMANCE=19]="PERFORMANCE",r[r.DRAG=20]="DRAG",r[r.FLICK=21]="FLICK",r[r.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",r[r.ZOOM=23]="ZOOM",r[r.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",r[r.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",r[r.DEAD_CLICK=30]="DEAD_CLICK",r[r.DEAD_ZOOM=31]="DEAD_ZOOM",r[r.PAGE_RELOAD=32]="PAGE_RELOAD",r[r.THRASHED_CURSOR=33]="THRASHED_CURSOR",r[r.BLANK_PAGE=34]="BLANK_PAGE",r[r.EXTERNAL_EVENT=35]="EXTERNAL_EVENT",r[r.SUBMIT=36]="SUBMIT",r[r.CUSTOM_EVENT=37]="CUSTOM_EVENT"}(s||(s={})),s})(),De=(()=>{let s;return function(r){r.APPCUES="appcues",r.CHAMELEON="chameleon",r.CONTENTSQUARE="contentsquare",r.SEGMENT="segment",r.SHOPIFY="shopify",r.WEB="web"}(s||(s={})),s})();function Tp(s){return s.tgtHM!==void 0}function wl(s){return s.tgt!==void 0}function bp(s){return s.tgtLk!==void 0}function Rp(s){return s.x!==void 0&&s.y!==void 0}function Cp(s){return s===De.APPCUES||s===De.CHAMELEON||s===De.CONTENTSQUARE||s===De.SEGMENT||s===De.SHOPIFY||s===De.WEB}var Ip=Math.pow(2,31);function Pp(s,r=0){let l=r>>>0,h=s.length;for(let m=0;m<h-3;m+=4){let v=(csString.prototype.charCodeAt.call(s,m)&255|(csString.prototype.charCodeAt.call(s,m+1)&255)<<8|(csString.prototype.charCodeAt.call(s,m+2)&255)<<16|(csString.prototype.charCodeAt.call(s,m+3)&255)<<24)>>>0;v=Math.imul(v,3432918353),v=v<<15|v>>>17,v=Math.imul(v,461845907),l^=v,l=l<<13|l>>>19,l=Math.imul(l,5)+3864292196}let u=0,p=h&3,y=h-p;switch(p){case 3:u^=(csString.prototype.charCodeAt.call(s,y+2)&255)<<16;case 2:u^=(csString.prototype.charCodeAt.call(s,y+1)&255)<<8;case 1:u^=csString.prototype.charCodeAt.call(s,y)&255,u=Math.imul(u,3432918353),u=u<<15|u>>>17,u=Math.imul(u,461845907),l^=u}return l^=h,l^=l>>>16,l=Math.imul(l,2246822507),l^=l>>>13,l=Math.imul(l,3266489909),l^=l>>>16,l>>>0}function Al(s){return Pp(s)+Ip>>>0}var jo=(()=>{class s{constructor(){this.listeners=[]}addListener(t){csArray.prototype.push.call(this.listeners,t)}}return s})(),Ai="|iframe|",Op=(()=>{class s extends jo{constructor(t,e,i,n){super(),this.Bv=t,this.Fv=e,this.$v=i,this.zv=n}emitIframeEvent(t,e,i){if(this.Gv(e)&&t===null){H.error(`iframeEventEmitter received event ${e} with null iframe, content:${csJSON.stringify(i)}`);return}switch(e){case kt.ChildLogMessage:this.qv(i);break;case kt.AnalysisEvent:{let n=i,o=this.Bv.transformEvent(t,n);o.isUserEvent?this.Wv(o.event):this.Yv(o.event);break}case kt.RecordingEvent:{let n=i,o=this.zv.transformEvents(t,n);if(o.events.length===0)return;o.containsUserEvent?this.Xv(o.events):this.Kv(o.events);break}case kt.JavascriptError:this.Jv(i);break;case kt.ApiError:this.Qv(i);break;case kt.DetailedApiError:this.Zv(i);break;case kt.CustomError:this.tS(i);break;case kt.EmerchandisingMessage:{let n=this.$v.transformEvent(t,i);this.eS(n);break}case kt.Commands:{let n=this.Fv.transformEvent(t,i);this.sS(n);break}case kt.IntegrationCallback:this.iS(i);break;case kt.StaticResource:this.rS(i);break;case kt.TrackingContextRequestMessage:this.nS(i);break;default:H.error(`Parent received unknown data type from iframe : ${csJSON.stringify(i)}`)}}Gv(t){let e=[kt.AnalysisEvent,kt.RecordingEvent,kt.EmerchandisingMessage,kt.Commands];return csArray.prototype.indexOf.call(e,t)!==-1}qv(t){let{message:e,errorCode:i,level:n}=t;switch(n){case ft.debug:H.debug(e,i);break;case ft.warn:H.warn(e,!0,i);break;case ft.implementation:H.implementation(e,i);break;case ft.error:H.error(e,i);break;case ft.critical:H.critical(e,i);break}}Wv(t){for(let e of this.listeners)e.onIframeAnalysisUserEvent&&e.onIframeAnalysisUserEvent(t)}Yv(t){for(let e of this.listeners)e.onIframeAnalysisBrowserEvent&&e.onIframeAnalysisBrowserEvent(t)}Xv(t){for(let e of this.listeners)e.onIframeRecordingUserEvent&&e.onIframeRecordingUserEvent(t)}Kv(t){for(let e of this.listeners)e.onIframeRecordingBrowserEvent&&e.onIframeRecordingBrowserEvent(t)}Jv(t){for(let e of this.listeners)e.onIframeJavascriptError&&e.onIframeJavascriptError(t)}Qv(t){for(let e of this.listeners)e.onIframeApiError&&e.onIframeApiError(t)}Zv(t){for(let e of this.listeners)e.onIframeDetailedApiError&&e.onIframeDetailedApiError(t)}eS(t){for(let e of this.listeners)e.onIframeEmerchandisingMessage&&e.onIframeEmerchandisingMessage(t)}sS(t){for(let e of this.listeners)e.onIframeCommands&&e.onIframeCommands(t)}iS(t){for(let e of this.listeners)e.onIframeIntegrationCallback&&e.onIframeIntegrationCallback(t)}rS(t){for(let e of this.listeners)e.onIframeStaticResource&&e.onIframeStaticResource(t)}nS(t){for(let e of this.listeners)e.onTrackingContextRequestCallback&&e.onTrackingContextRequestCallback(t)}tS(t){for(let e of this.listeners)e.onIframeCustomError&&e.onIframeCustomError(t)}}return s})(),Np=(()=>{class s{constructor(t,e,i){this.et=t,this.Rf=e,this.Cf=i}transformEvent(t,e){this.oS(t,e.event);let i=this.et.getElementPath(t);return this.aS(i,e.event),this.cS(e.event),e}oS(t,e){if(Rp(e)){let i=t.getBoundingClientRect();e.x=Math.round(i.left+e.x+bt.windowOffsetX()),e.y=Math.round(i.top+e.y+bt.windowOffsetY())}}aS(t,e){wl(e)&&(e.tgt=`${t}${Ai}${e.tgt}`),Tp(e)&&(e.tgtHM=`${t}${Ai}${e.tgtHM}`,this.Rf||(e.tgtHMH=Al(e.tgtHM))),bp(e)&&(e.tgtLk=`${t}${Ai}${e.tgtLk}`)}cS(t){!this.Rf&&this.Cf&&this.Cf.enhanceAnalysisEvent(null,t)}}return s})(),Mp=(()=>{class s{constructor(t){this.et=t}transformEvent(t,e){let i=this.et.getElementPath(t);return{iframePath:e.iframePath?`${i}${Ai}${e.iframePath}`:i,commands:e.commands}}}return s})(),Dp=(()=>{class s{constructor(t){this.et=t}transformEvent(t,e){if(e.products.length===0)return e;let i=this.et.getElementPath(t),n=csArray.prototype.map.call(e.products,o=>({...o,targetPath:`${i}${Ai}${o.targetPath}`}));return{...e,products:n}}}return s})(),kp=1,Ya=csSymbol("nodeIdentifier");function q(s){let r=s[Ya];return r!=null?r:s[Ya]=kp++}var L=(()=>{let s;return function(r){r[r.MUTATION_INSERT=1]="MUTATION_INSERT",r[r.MUTATION_REMOVE=2]="MUTATION_REMOVE",r[r.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",r[r.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",r[r.INITIAL_DOM=5]="INITIAL_DOM",r[r.SCROLL=6]="SCROLL",r[r.CLICK=8]="CLICK",r[r.RESIZE=9]="RESIZE",r[r.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",r[r.INPUT_SELECT=11]="INPUT_SELECT",r[r.INPUT_TEXT=12]="INPUT_TEXT",r[r.HASH_CHANGE=13]="HASH_CHANGE",r[r.UNANONYMIZED_CONSENT_GRANTED=14]="UNANONYMIZED_CONSENT_GRANTED",r[r.UNANONYMIZED_CONSENT_WITHDRAWN=15]="UNANONYMIZED_CONSENT_WITHDRAWN",r[r.MOUSE_OVER=16]="MOUSE_OVER",r[r.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",r[r.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",r[r.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",r[r.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",r[r.ATTACH_SHADOW=22]="ATTACH_SHADOW",r[r.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",r[r.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",r[r.PAGE_EVENT=27]="PAGE_EVENT",r[r.API_ERROR=28]="API_ERROR",r[r.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",r[r.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",r[r.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",r[r.KEY_DOWN=32]="KEY_DOWN",r[r.KEY_UP=33]="KEY_UP",r[r.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",r[r.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",r[r.USER_IDENTIFIER=38]="USER_IDENTIFIER",r[r.TOUCH_START=41]="TOUCH_START",r[r.TOUCH_MOVE=42]="TOUCH_MOVE",r[r.TOUCH_END=43]="TOUCH_END",r[r.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",r[r.POINTER_DOWN=47]="POINTER_DOWN",r[r.POINTER_MOVE=48]="POINTER_MOVE",r[r.POINTER_UP=49]="POINTER_UP",r[r.CUSTOM_ERROR=50]="CUSTOM_ERROR",r[r.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",r[r.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",r[r.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",r[r.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",r[r.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE",r[r.SCREEN_RESIZE=65]="SCREEN_RESIZE",r[r.RESOURCE_HASHES=66]="RESOURCE_HASHES",r[r.PERFORMANCE_NAVIGATION_TIMING=67]="PERFORMANCE_NAVIGATION_TIMING",r[r.PERFORMANCE_RESOURCE_TIMING=68]="PERFORMANCE_RESOURCE_TIMING",r[r.RECORDING_INFO_EVENT=72]="RECORDING_INFO_EVENT",r[r.TEXT_REF=73]="TEXT_REF",r[r.TOUCH_CANCEL=74]="TOUCH_CANCEL",r[r.MUTATION_MOVE=75]="MUTATION_MOVE",r[r.STYLESHEET_RULE_UPDATE=76]="STYLESHEET_RULE_UPDATE",r[r.ADOPTED_STYLESHEET_RULE_UPDATE=77]="ADOPTED_STYLESHEET_RULE_UPDATE",r[r.VIDEO_PLAY=78]="VIDEO_PLAY",r[r.VIDEO_PAUSE=79]="VIDEO_PAUSE",r[r.VIDEO_SEEK=80]="VIDEO_SEEK",r[r.ADOPTED_STYLESHEET_DISABLED=98]="ADOPTED_STYLESHEET_DISABLED",r[r.STYLESHEET_DISABLED=99]="STYLESHEET_DISABLED",r[r.DOM_INITIAL_STATE=102]="DOM_INITIAL_STATE",r[r.DOM_PATCH_STATE=103]="DOM_PATCH_STATE",r[r.DEBUG=999]="DEBUG"}(s||(s={})),s})();var mi=(()=>{let s;return function(r){r[r.SWIPE=0]="SWIPE",r[r.PINCH_IN=1]="PINCH_IN",r[r.PINCH_OUT=2]="PINCH_OUT",r[r.LONG_PRESS=3]="LONG_PRESS",r[r.TAP=4]="TAP",r[r.DOUBLE_TAP=5]="DOUBLE_TAP"}(s||(s={})),s})(),xp=(()=>{class s{constructor(){this.lS={clientX:2,clientY:3},this.hS={clientX:1,clientY:2},this.uS=[L.POINTER_DOWN,L.POINTER_MOVE,L.POINTER_UP],this.dS=[L.TOUCH_START,L.TOUCH_MOVE,L.TOUCH_END]}transformEvents(t,e){if(!ot.isConnected(t))return e.events=csArray.prototype.filter.call(e.events,c=>c.type!==L.VISIBILITY_CHANGE),e.events.length===0||(H.warn(`IframeRecordingEventsTransformer received event ${kt.RecordingEvent}
        from disconnected iframe, content:${csJSON.stringify(e.events)}`),e.events=[]),e;let i=q(t),n=null;csArray.prototype.some.call(e.events,c=>this.If(c)||this.Pf(c))&&(n=t.getBoundingClientRect());for(let c of e.events)this.If(c)?this.fS(n,c):this.Pf(c)&&this.pS(n,c),c.context=c.context&&c.context.length>0?`${i}/${c.context}`:`${i}`;return e}pS(t,e){this.Of(this.hS,t,e)}fS(t,e){this.Of(this.lS,t,e)}Of(t,e,i){i.args&&(i.args[t.clientX]=Math.round(e.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(e.top+i.args[t.clientY]))}If(t){return csArray.prototype.indexOf.call(this.uS,t.type)!==-1}Pf(t){return csArray.prototype.indexOf.call(this.dS,t.type)!==-1}}return s})(),Ut=(()=>{class s extends Error{constructor(t,e){let i=e?`Command misuse: ${t} - ${e}`:`Command misuse: ${t}`;super(i),this.name="MisusedCommandError"}}return s})(),pn;function Lt(s){if(pn||(pn=document.createElement("div")),!(!!s&&C(s)))return at.warn(`isValidSelector: invalid selector provided '${s}'`),!1;try{return Qt.call(pn,s),!0}catch{return at.warn(`isValidSelector: invalid selector provided '${s}'`),!1}}function si(s,r){if(La)return La.call(s,r);let t=s;do{if(Qt.call(t,r))return t;t=t==null?void 0:t.parentElement}while(t!==null&&csNodenodeType.apply(t)===1);return null}function os(s){if(!s)return s;switch(typeof s){case"object":{if(csArray.isArray(s))return csArray.from(s);let r={};for(let t in s)r[t]=os(s[t]);return r}default:return s}}function Tl(s){for(let r in s)if(s[r]!==void 0)return!0;return!1}function bl(s,r){if(csArray.isArray(s)&&csArray.isArray(r))return s.length!==r.length||csArray.prototype.some.call(s,(i,n)=>i!==r[n])?os(r):void 0;let t={},e=new Set([...Object.keys(s||{}),...Object.keys(r||{})]);for(let i of e){let n=s[i],o=r[i];if(n===o)continue;let c=typeof n;if(c!==typeof o)n===void 0&&o!==void 0?t[i]=o:n!==void 0&&o===void 0&&(t[i]=null);else if(c==="object"&&n&&o){let h=bl(n,o);h!==void 0&&(t[i]=h)}else t[i]=os(o)}return Tl(t)?t:void 0}function Rl(s,r){let t={...s};for(let[e,i]of Object.entries(r))if(i===null)delete t[e];else if(i!==void 0){let n=t[e],o=i;n&&typeof n=="object"&&o&&typeof o=="object"&&!csArray.isArray(n)&&!csArray.isArray(o)?t[e]=Rl(n,o):t[e]=o}return t}function Cl(s){let r=null;return t=>t?r=t:r||(r=s())}var Lp=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function Vp(s){return csString.prototype.indexOf.call(s,"-")>0&&csString.prototype.indexOf.call(s,":")===-1&&csString.prototype.indexOf.call(s,'"')===-1&&csString.prototype.indexOf.call(s,",")===-1&&!Lp.has(s)}var Ys=Cl(()=>new WeakMap),gn=Cl(()=>new Set),ls=(()=>{let s;return function(r){function t(u){return Ys().get(u)}r.getAll=t;function e(u,p){var y;return(y=Ys().get(u))===null||y===void 0?void 0:y[p]}r.get=e;function i(u,p,y){let m=Ys().get(u);m||Ys().set(u,m={}),m[p]=y,c(u)}r.set=i;function n(u,p){let y=Ys().get(u);y&&(delete y[p],c(u))}r.remove=n;function o(){Ys(new WeakMap)}r.reset=o;function c(u){for(let p of gn())p(u)}function l(u){gn().add(u)}r.subscribe=l;function h(u){gn().delete(u)}r.unsubscribe=h}(s||(s={})),s})(),nt=(()=>{let s;return function(r){function t(l,h,u){var p;if(typeof Node!="undefined"&&l instanceof Node)ls.set(l,h,u);else{let y=l;(p=y.props)!==null&&p!==void 0||(y.props={}),y.props[h]=u}}r.setProperty=t;function e(l,h){var u;return typeof Node!="undefined"&&l instanceof Node?ls.get(l,h):(u=l.props)===null||u===void 0?void 0:u[h]}r.getProperty=e;function i(l){return typeof Node!="undefined"&&l instanceof Node?ls.getAll(l):l.props}r.getProperties=i;function n(l,h){let u=null;return o(l,(p,y,m)=>h(p)&&(u=p)&&!!m()),u}r.findDescendant=n;function o(l,h){c(l,void 0,h)}r.traverse=o;function c(l,h,u){let p=!1;if(u(l,h,()=>p=!0),p)return;let m=l.shadowRoot;m&&c(m,l,u);let v=l.children;if(v!=null&&v.length){for(let b of v)if(b&&(c(b,l,u),p))break}}}(s||(s={})),s})(),D=(()=>{let s;return function(r){let t;(function(_){_[_.NotMasked=0]="NotMasked",_[_.Parent=1]="Parent",_[_.Child=2]="Child"})(t=r.MaskedElementState||(r.MaskedElementState={})),r.maskedProp="masked",r.maskedAttributeProp="maskedAttribute";function e(_){return fs(_)&&"Attributes"in _&&"PIISelectors"in _?_.Attributes instanceof Array&&_.PIISelectors instanceof Array:!1}r.isSelectorUserInput=e;function i(_){if(!fs(_)||_===null)throw new Ut("setPIISelectors");return"Attributes"in _||(_.Attributes=[]),"PIISelectors"in _||(_.PIISelectors=[]),_}r.sanitizeSelectorUserInput=i;function n(_){var A,x,N;return"nodeType"in _?(A=nt.getProperty(_,r.maskedProp))!==null&&A!==void 0?A:{state:t.NotMasked}:(N=(x=_.metadata)===null||x===void 0?void 0:x[r.maskedProp])!==null&&N!==void 0?N:{state:t.NotMasked}}r.getMaskedElementDetails=n;function o(_){var A,x,N;return"nodeType"in _?(A=nt.getProperty(_,r.maskedAttributeProp))!==null&&A!==void 0?A:{attributes:[]}:(N=(x=_.metadata)===null||x===void 0?void 0:x[r.maskedAttributeProp])!==null&&N!==void 0?N:{attributes:[]}}r.getMaskedAttributeDetails=o;function c(_){let A=nt.getProperty(_,r.maskedProp);return(A==null?void 0:A.state)===t.Parent}r.isMaskedElement=c;function l(_){let A=nt.getProperty(_,r.maskedProp);return(A==null?void 0:A.state)===t.Child}r.isMaskedElementChild=l;function h(_,A){let x=nt.getProperty(_,r.maskedAttributeProp);return((x==null?void 0:x.attributes)==null?void 0:csArray.prototype.indexOf.call(x==null?void 0:x.attributes,A))>-1}r.isMaskedAttribute=h;function u(_,A){nt.setProperty(_,r.maskedProp,A)}r.setMaskedElementProperty=u;function p(_){nt.setProperty(_,r.maskedProp,void 0)}r.unsetMaskedElementProperty=p;function y(_,A){nt.setProperty(_,r.maskedAttributeProp,A)}r.setMaskedAttributeProperty=y;function m(_,A){let x=csArray.prototype.filter.call(_.PIISelectors,B=>Lt(B));A.elementSelector.length>0&&csArray.prototype.push.call(x,...csString.prototype.split.call(A.elementSelector,","));let N=I([...x]),w={elementSelector:csArray.prototype.join.call(N,","),attrSelector:A.attrSelector,attrSelectors:A.attrSelectors};return csArray.prototype.forEach.call(_.Attributes,B=>{B!=null&&B.attrName&&(B!=null&&B.selector)&&Lt(B.selector)&&!v(w.attrSelectors,B)&&csArray.prototype.push.call(w.attrSelectors,B)}),w.attrSelector=b(w.attrSelectors),w}r.getComputedSelectorSettings=m;function v(_,A){return csArray.prototype.some.call(_,x=>x.selector===A.selector&&x.attrName===A.attrName)}function b(_){let A="";return csArray.prototype.forEach.call(_,x=>{let N=csString.prototype.split.call(x.selector,",");csArray.prototype.forEach.call(N,w=>{Lt(w)&&(A&&(A+=","),A+=w)})}),A}function I(_){if(_.length<=1)return _;let A=[];for(let x of _){let N=csString.prototype.split.call(x,",");for(let w of N)csArray.prototype.indexOf.call(A,w)===-1&&csArray.prototype.push.call(A,w)}return A}}(s||(s={})),s})(),Up=(()=>{class s{constructor(){this.ya={elementSelector:"",attrSelector:"",attrSelectors:[]},this.pl={elementSelector:"",attrSelector:"",attrSelectors:[]},this.gS=window.top===window?"pii-migration":"pii-migration-iframe",this.Nf=!1}onAfterNaturalPageView(){this.Mf()}onParentSensitiveStatusChange(t){t.started&&!this.Nf&&(this.Nf=!0,t.maskedElementSettings&&(this.ya=t.maskedElementSettings),this.Mf())}Mf(){var t,e;let i=this.Df(this.ya),n=this.Df(this.pl),o=csArray.prototype.filter.call(n.elementSelectors,l=>csArray.prototype.indexOf.call(i.elementSelectors,l)===-1&&l!=="[data-cs-mask]"),c={};for(let[l,h]of Object.entries(n.attrSelectors)){let u=i.attrSelectors[l]||[],p=csArray.prototype.filter.call(h,y=>csArray.prototype.indexOf.call(u,y)===-1);p.length>0&&(c[l]=p)}(o.length>0||Object.keys(c).length>0)&&(H.computeIsActive(100),H.warn(csJSON.stringify({selectors:o,attrs:c}),!0,this.gS),H.computeIsActive((e=(t=window.CS_CONF)===null||t===void 0?void 0:t.validationRate)!==null&&e!==void 0?e:10))}Df(t){let e=csString.prototype.trim.call(t.elementSelector).length>0?csArray.prototype.filter.call(csArray.prototype.map.call(csString.prototype.split.call(t.elementSelector,","),n=>csString.prototype.trim.call(n)),n=>n.length>0):[],i={};for(let n of t.attrSelectors)i[n.attrName]=csArray.prototype.filter.call(csArray.prototype.map.call(csString.prototype.split.call(n.selector,","),o=>csString.prototype.trim.call(o)),o=>o.length>0);return{elementSelectors:e,attrSelectors:i}}markClicktalePIIInUse(t){this.pl=D.getComputedSelectorSettings(t,this.pl)}markPIIMaskingTemplateInUse(t){let e=D.sanitizeSelectorUserInput(t);this.ya=D.getComputedSelectorSettings(e,this.ya)}}return U([P()],s.prototype,"markPIIMaskingTemplateInUse",null),s})(),jp=(()=>{class s{constructor(t,e){this.S=t,this.Et=e}init(){this.Et.addListener(this.S)}onOptout(){this.S.stop()}onBeforeSessionRenewal(){this.S.stop()}}return s})();var jt=(()=>{class s{constructor(){this._isStarted=!1}get isStarted(){return this._isStarted}start(...t){this._isStarted||(this._isStarted=!0,this.onStart(...t))}stop(){this._isStarted&&(this._isStarted=!1,this.onStop())}restart(){this.stop(),this.start()}}return s})(),Hp=(()=>{let s;return function(r){r.UXA="_uxa",r.WVT="cs_wvt"}(s||(s={})),s})(),Bp=(()=>{class s extends jt{constructor(t,e){super(),this.gl=t,this.ml=e,this.ls={}}register(t,e,i){for(let n of t){let o=(...c)=>{try{let l=e(...c);return G.counters.commandApplied.count(n),l}catch(l){l instanceof Ut?(G.counters.commandMisuse.count(n),H.warn(`Misused Command: ${n}; Args: ${csJSON.stringify(c)}; Error: ${Ue(l)?l.stack:l}`)):(G.counters.commandError.count(n),H.error(`Command Error - ${n}: ${Ue(l)?l.stack:l}`))}};this.ls[n]={callback:o,configuration:i},this.ls}}onStart(){this.mS(),this.yS()}onStop(){for(let t of this.gl)window[t]=[]}applyFromIntegration(t,e,i){this.kf(t,e,`Commands.apply.from.integration: ${i}`),G.counters.commandsFromIntegrations.count(t)}applyFromImplementation(t,e,i){var n;this.kf(t,e,`Commands.apply.from.implementation: ${i}`),G.counters.commandsFromCSTC.count(t),i==="PIIMaskingTemplate"&&((n=this.ml)===null||n===void 0||n.markPIIMaskingTemplateInUse(e[0]))}onIframeCommands(t){for(let e of t.commands)this.ES(e.name,e.params,t.iframePath),G.counters.commandsFromIframe.count(e.name)}kf(t,e,i){if(!this.isStarted){window._uxa.push([t,...e]);return}H.tryToExecute(i,()=>{if(this.ls[t])return this.ls[t].callback(...e)})()}ES(t,e,i){H.tryToExecute(`Commands.apply.from.iframe: ${i}`,()=>{if(this.ls[t])return this.ls[t].callback(...e)})()}mS(){for(let t of this.gl)window[t].forEach(([e,...i])=>this.xf(e,i,!1))}yS(){for(let t of this.gl)window[t]={push:([e,...i])=>this.xf(e,i,!0)}}xf(t,e,i){var n,o;if(this.ls[t]){if(((n=this.ls[t].configuration)===null||n===void 0?void 0:n.disableApplyPending)&&!i||((o=this.ls[t].configuration)===null||o===void 0?void 0:o.disableApplyImmediate)&&i)return;try{return this.ls[t].callback(...e)}catch(l){H.error(`Command ${t} failed - params: ${csJSON.stringify(e)}`,l)}}}}return s})(),Fp=(()=>{class s extends jo{emitPageEvent(t){for(let e of this.listeners)e.onPageEvent&&e.onPageEvent(t)}emitEventTriggerRecording(t,e){for(let i of this.listeners)i.onEventTriggerRecording&&i.onEventTriggerRecording(t,e)}emitCustomJavaScriptErrorEvent(t){for(let e of this.listeners)e.onCustomJavaScriptErrorEvent&&e.onCustomJavaScriptErrorEvent(t)}emitCustomErrorEvent(t){for(let e of this.listeners)e.onCustomErrorEvent&&e.onCustomErrorEvent(t)}emitUserIdentifierEvent(t){for(let e of this.listeners)e.onUserIdentifierEvent&&e.onUserIdentifierEvent(t)}emitExternalEvent(t){for(let e of this.listeners)e.onExternalEvent&&e.onExternalEvent({type:W.EXTERNAL_EVENT,name:t,ts:0})}emitTargetingRulesArtificialPageview(t){for(let e of this.listeners)e.onTargetingRulesArtificialPageview&&e.onTargetingRulesArtificialPageview(t)}}return s})();function $p(s){return csNodenodeType.apply(s)===1}function Ot(s){let r=csEventtarget.apply(s);return r&&$p(r)&&csElementshadowRoot.apply(r)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:r}function zp(s){return s.composedPath&&Object.defineProperty(s,"__csOriginalTarget",{value:s.composedPath()[0],writable:!1,enumerable:!1}),s}function Gp(){return(s,r,t)=>{let e=t.value;return e&&(t.value=function(i){if(Ot(i)===csEventtarget.apply(i))return e.call(this,i)}),t}}var qp=["class","data-com.agilebits.onepassword.initial-value","data-com.onepassword.iv","data-ember-action","data-initial-value","data-previous-value","data-react-checksum","data-reactid","id","maxlength","onclick","onsubmit","style"],Wp=1024,Yp=1024,Xp=(()=>{class s{constructor(t,e){this.vt=t,this.E=e}getEventTargetPathAndHierarchy(t,e){let i=Ot(t),n={isNodeSensitive(o){return D.isMaskedElement(o)||D.isMaskedElementChild(o)},isAttributeSensitive(o,c){return D.isMaskedAttribute(o,c)},allWhitelistedAttributes:Vo(this.E.whitelistedAttributes),attributeIgnoreTokens:qp,useAnonymization:e,attrMaxLength:Yp,hierarchyMaxLength:Wp};return this.vt.getElementPathAndHierarchy(i,n,{dynamicIdRegex:this.E.dynamicIdRegex,...this.E.pathComputationRules})}getEventTargetPath(t){let e=Ot(t);return this.vt.getElementPath(e,{dynamicIdRegex:this.E.dynamicIdRegex,...this.E.pathComputationRules})}getEventTargetPathAndTargetLink(t){let e=Ot(t),{path:i,firstAnchorParent:n}=this.vt.getElementPathAndFirstAnchorParent(e,{dynamicIdRegex:this.E.dynamicIdRegex,...this.E.pathComputationRules}),o=this.vS(n)?n.href:"";return{path:i,targetLink:o}}hasValidEventTarget(t){let e=Ot(t);return this.vt.isValidElement(e)}getElementPath(t){return this.vt.getElementPath(t,{dynamicIdRegex:this.E.dynamicIdRegex,...this.E.pathComputationRules})}vS(t){var e;return t!==null&&t.hasAttribute("href")&&!xr((e=t.getAttribute("href"))!==null&&e!==void 0?e:"","#")}}return s})();function $r(s,r){typeof r=="number"&&(r={wait:r});let t=r.wait,e=r.mode||"leading",i,n=[],o=null,c=0,l,h=()=>{c=M.now(),o=null,l=s.apply(i,n),n=[],i=null},u=function(...p){if(i=this!==null&&this!==void 0?this:it,n=[...p],e==="trailing")return o||(o=it.csSetTimeout(h,t)),l;let y=M.now(),m=t-(y-c);return m<=0||m>t?(c=y,l=s.apply(i,n),o?(it.csClearTimeout(o),o=null):n=[]):o||(o=it.csSetTimeout(h,m)),l};return u.cancel=()=>{o&&(it.csClearTimeout(o),c=0,o=null,n=[])},u.flushPending=()=>{o&&(it.csClearTimeout(o),h())},u}var Bs=s=>(r,t,e)=>{e.value=$r(e.value,s)},Il=(()=>{let s;return function(r){function t(e,i){let n=Kp(e,i),o=Jp(e,i);return n||o}r.select=t}(s||(s={})),s})();function Kp(s,r){return csArray.prototype.filter.call(s,t=>t.exclusion===r)[0]}function Jp(s,r){return csArray.prototype.sort.call(csArray.prototype.filter.call(s,t=>Qp(t,r)),Zp)[0]}function Qp(s,r){return s.visitor&&s.visitor.appliedTrackingDraw===r}function Zp(s,r){return r.visitor.visitsCount!==s.visitor.visitsCount?r.visitor.visitsCount-s.visitor.visitsCount:s.session?r.session?r.session.pageNumber-s.session.pageNumber:-1:1}var Xa="contentsquare.net",Ka=(()=>{let s;return function(r){r.Set="set",r.Remove="remove"}(s||(s={})),s})(),tg=(()=>{class s{constructor(t,e,i,n,o,c){this.E=t,this.O=e,this.Pe=i,this.Lf=n,this.Vf=o,this.Uf=c,this.jf=pe.None,this.yl=!1,this.Zs=[],this.ti=[]}init(){this.jf=this.O.isSameSiteSupported()?pe.None:pe.NotSet,this.SS()}setStates(t,e){this.Tn=t,this.Hf=e}start(t){this.Hf.init(this.Bf(),(e,i)=>{let n=[this.Tn.get()];i&&csArray.prototype.push.call(n,e);let o=Il.select(n,this.E.lastTrackingDraw);this.yl=!0,this.Tn.apply(o),t()}),this.Ff=this.Hf.openIframe()}setCookie(t,e,i){if(this.yl){let n=this.jf,o=ue.Yes,c={name:t,value:e,samesite:n,secure:o};i&&(c.expires=vt.toExpireDate(i).getTime()),this._S(c)}}removeCookie(t){this.yl&&this.wS(t)}wS(t){this.ti=csArray.prototype.filter.call(this.ti,e=>e!==t),this.Zs=csArray.prototype.filter.call(this.Zs,e=>e.name!==t),csArray.prototype.push.call(this.ti,t),this.setBatchReadyCall()}_S(t){this.ti=csArray.prototype.filter.call(this.ti,e=>e!==t.name),this.Zs=csArray.prototype.filter.call(this.Zs,e=>e.name!==t.name),csArray.prototype.push.call(this.Zs,t),this.setBatchReadyCall()}setBatchReadyCall(){this.AS()}AS(){if(this.Zs.length>0){let t=this.$f(Ka.Set,this.Zs);this.Ea(t),this.Zs=[]}if(this.ti.length>0){let t=this.$f(Ka.Remove,this.ti);this.Ea(t),this.ti=[]}}$f(t,e){return{command:t,cookies:e,domain:null,pid:this.E.projectId}}Ea(t){var e;let i=`https://${this.Bf()}`;!((e=this.Ff)===null||e===void 0)&&e.contentWindow&&this.Ff.contentWindow.postMessage(t,i)}Bf(){return this.E.dualCollectionTagDomain&&this.E.dualCollectionTagDomain!==Xa?`cdnssl.${this.E.dualCollectionTagDomain}`:`csxd.${Xa}`}SS(){this.Pe.onCookieToSet((t,e,i)=>{this.setCookie(t,e,i)}),this.Lf.onCookieToSet((t,e,i)=>{this.setCookie(t,e,i)}),this.Vf.onCookieToSet((t,e,i)=>{this.setCookie(t,e,i)}),this.Uf.onCookieToSet((t,e,i)=>{this.setCookie(t,e,i)}),this.Pe.onCookieToRemove(t=>{this.removeCookie(t)}),this.Lf.onCookieToRemove(t=>{this.removeCookie(t)}),this.Vf.onCookieToRemove(t=>{this.removeCookie(t)}),this.Uf.onCookieToRemove(t=>{this.removeCookie(t)})}}return U([Bs({wait:0,mode:"trailing"}),P("send xdframe-single-iframe batch")],s.prototype,"setBatchReadyCall",null),s})(),Vr=".",Ho="__DOT__",eg=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.[0-1])?(\.\b(x|[0-9a-fA-F]{12})\b)?$/,Pl="x";function Ol(s){let[r,t,e,i,n,o,c,l,h]=ng(s);return{id:r,creationTimestamp:Number(t),visitsCount:Number(e),hitTimestamp:Number(i),lastVisitTimestamp:Number(n),appliedTrackingDraw:Number(o),expires:Number(c),allowSubdomains:l===void 0?void 0:!!Number(l),identityPrint:h===void 0||h===Pl?null:h}}function sg(s){var r;return csArray.prototype.join.call(csArray.prototype.map.call(csArray.prototype.map.call([s.id,s.creationTimestamp,s.visitsCount,s.hitTimestamp,s.lastVisitTimestamp,s.appliedTrackingDraw,s.expires,s.allowSubdomains?1:0,(r=s.identityPrint)!==null&&r!==void 0?r:Pl],csString),ig),Vr)}function Nl(s){return eg.test(s)}function ig(s){return csString.prototype.replace.call(s,/\./g,Ho)}function rg(s){return csString.prototype.replace.call(s,new csRegExp(Ho,"g"),Vr)}function ng(s){return csString.prototype.indexOf.call(s,Ho)!==-1?csArray.prototype.map.call(csString.prototype.split.call(s,Vr),rg):csString.prototype.split.call(s,Vr)}var k=(()=>{let s;return function(r){r.QUOTA_REACHED="X",r.RECORDING_RULES_TARGETING="8",r.ANALYTICS_ONLY_RULES_TARGETING="9",r.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING="P",r.ANALYTICS_ONLY="0",r.RECORDING_GLOBAL_SAMPLING="5",r.RECORDING_TEMPORARILY="T",r.RECORDING_URL_SAMPLING="6",r.RECORDING_ETR_SAMPLING="7",r.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED="B",r.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN="W"}(s||(s={})),s})();function og(s){return s===k.RECORDING_TEMPORARILY||s===k.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING}function Ml(s){return s===k.RECORDING_GLOBAL_SAMPLING||s===k.RECORDING_RULES_TARGETING||s===k.RECORDING_URL_SAMPLING||s===k.RECORDING_ETR_SAMPLING}var ag={[k.RECORDING_RULES_TARGETING]:k.RECORDING_GLOBAL_SAMPLING},re=(()=>{let s;return function(r){r.ETR_OFF="0",r.ETR_ON="1"}(s||(s={})),s})(),hs=(()=>{let s;return function(r){r.ETR_LEGACY="0",r.ETR_SESSION="1",r.ETR_PAGE="2"}(s||(s={})),s})(),Kt=(()=>{let s;return function(r){r.ETR_DISABLED="0",r.ETR_PENDING="1",r.ETR_SAVED_PAGE="2",r.ETR_SAVED_SESSION="3",r.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),Kn=(()=>{let s;return function(r){r.UNNECESSARY="U",r.NOT_EXPRESSED="N",r.WITHDRAWN="W",r.GRANTED="G"}(s||(s={})),s})(),Dl=/^(\d+\.[01356789TBWXP](\.[01UNWG])?(\.[39])?)(\.\d+)?$/,kl=".";function cg(s){return csArray.prototype.join.call([s.pageNumber,s.collectState,s.replayConsent,s.etrStatus],kl)}function xl(s){if(!zr(s))return null;let r=Jn(s);return r!==null?Ll(r):null}function Ll(s){var r,t;let[e,i,n,o]=csString.prototype.split.call(s,kl);return{collectState:i,replayConsent:(r=n)!==null&&r!==void 0?r:Kn.UNNECESSARY,etrStatus:(t=o)!==null&&t!==void 0?t:Kt.ETR_NOT_SAVED_SESSION,pageNumber:parseInt(e,10)}}function zr(s){return Dl.test(s)}function Jn(s){if(!s)return null;let r=(()=>{var t;return(t=csString.prototype.match.call(s,Dl))===null||t===void 0?void 0:t[1]})();return r!=null?r:null}var Vl=(()=>{let s;return function(r){function t(e){return{exclusion:Number(e._cs_ex)||0,visitor:e._cs_id?Ol(e._cs_id):null,session:e._cs_s?xl(e._cs_s):null,cvars:e._cs_cvars?window.csJSON.parse(e._cs_cvars):null}}r.fromRaw=t}(s||(s={})),s})(),Me="_cs_ex",Ja=2592e6,lg=/^[0-9]+$/,Ul=(()=>{class s{constructor(t,e,i){this.E=t,this.O=e,this.J=i}onCookieToSet(t){this.Mi=t}onCookieToRemove(t){this.Di=t}get(){return this.E.cookielessTrackingEnabled?Number(this.J.getItem(Me)):Number(this.O.get(Me))}set(t){var e;this.E.cookielessTrackingEnabled?this.J.setItem(Me,t):(this.O.set(Me,t,Ja),(e=this.Mi)===null||e===void 0||e.call(this,Me,t,Ja))}remove(){var t;this.E.cookielessTrackingEnabled?this.J.removeItem(Me):(this.O.delete(Me),(t=this.Di)===null||t===void 0||t.call(this,Me))}static isValidExclusionString(t){return lg.test(t)}}return s})(),ts="_cs_cvars",jl=(()=>{class s{constructor(t,e,i){this.E=t,this.O=e,this.J=i}onCookieToSet(t){this.Mi=t}onCookieToRemove(t){this.Di=t}get(){return this.E.cookielessTrackingEnabled?this.J.getItem(ts):this.O.get(ts)}set(t){var e;this.E.cookielessTrackingEnabled?this.J.setItem(ts,t):(this.O.set(ts,t),(e=this.Mi)===null||e===void 0||e.call(this,ts,t))}remove(){var t;this.E.cookielessTrackingEnabled?this.J.removeItem(ts):(this.O.delete(ts),(t=this.Di)===null||t===void 0||t.call(this,ts))}static isValidCustomVarString(t){return typeof t=="string"}}return s})(),Qn=(()=>{let s;return function(r){function t(i){let n=["_cs_ex","_cs_id","_cs_s","_cs_cvars"];return csArray.prototype.every.call(Object.keys(i),o=>csArray.prototype.indexOf.call(n,o)>=0)}r.isRawDomainState=t;function e(i){return t(i)?(!i._cs_id||Nl(i._cs_id))&&(!i._cs_s||zr(i._cs_s))&&(!i._cs_ex||Ul.isValidExclusionString(i._cs_ex))&&(!i._cs_cvars||jl.isValidCustomVarString(i._cs_cvars)):!1}r.isValid=e}(s||(s={})),s})(),hg="1.2.0",ug=(()=>{class s{constructor(t,e){this.E=t,this.Oe=e}init(t,e){this.El=`https://${t}`,this.R=e}openIframe(){this.Oe.onMessage(e=>{this.vl(e)}),this.Oe.onTimeout(()=>{this.Sl()}),this.Oe.start();let t=this.zf(this.El);return this.Oe.open(t)}vl(t){if(this._l(t)){let e=t.data,i=!0;if(this.TS(t)){H.warn(`Error xdframe single domain: ${csJSON.stringify(t.data)} from ${t.origin}`);return}if(!Qn.isRawDomainState(e)){H.warn(`Unknown message format from xdframe single domain: ${csJSON.stringify(t.data)} from ${t.origin}`);return}Qn.isValid(e)||(H.warn(`Invalid xdframe single domain state: ${csJSON.stringify(t.data)} from ${t.origin}`),i=!1),this.Oe.stop(),this.R(i?Vl.fromRaw(e):{},i)}}Sl(){H.warn(`xdframe single domain: timeout: ${this.zf(this.El)}`),this.Oe.stop(),this.R({},!1)}_l(t){return t.origin===this.El&&fs(t.data)}TS(t){return!!t.data.error}zf(t){let e=this.E.projectId;return`${t}/uxa/xdframe-single-domain-${hg}.html?pid=${e}`}}return s})(),dg=(()=>{class s{constructor(t,e,i,n,o,c,l){this.w=t,this.S=e,this.wl=i,this.Al=n,this.hs=o,this.bS=c,this.bn=l}start(){this.w.addListener(this.bS),this.w.addListener(this.bn),this.w.addListener(this.wl),this.bn.init(),this.Al.init(),this.hs.init(),!this.hs.isActive()&&this.S.start()}}return s})(),fg=(()=>{class s{constructor(t){this.Rs=t}onOptout(){this.Rs.removeExclusion()}}return s})(),pg=(()=>{class s{constructor(t,e){this.Mt=t,this.pt=e}exclude(t){this.pt.set(csString(t.lastTrackingDraw))}removeExclusion(){this.pt.remove()}isExcluded(){return this.RS()||this.CS()}RS(){return this.getAppliedTrackingDraw()!==0}getAppliedTrackingDraw(){return this.pt.get()}CS(){return csString.prototype.indexOf.call(this.Mt.href,Me)>0}}return s})(),Hl=["excludeURLforReplay"],gg=(()=>{class s{constructor(t,e){this.Rs=t,this.S=e}init(){this.S.register(Hl,t=>{if(C(t))this.Rs.setExcludeUrlForSessionReplay(t);else throw new Ut("excludeURLforReplay")})}}return s})(),mn=(()=>{let s;return function(r){r.SessionReplay="SR",r.None=""}(s||(s={})),s})(),mg=".^",Bl=".*",yg=(()=>{class s{constructor(t){this.A=t,this.Tl=new csRegExp(`${mg}`)}setExcludeUrlForSessionReplay(t){try{this.Tl=new csRegExp(t)}catch{H.warn(`excludeURLforReplay - invalid regex '${t}'`),this.Tl=new csRegExp(`${Bl}`)}}Gf(){return this.Tl.test(this.A.getAnonymizedUrl())?mn.SessionReplay:mn.None}isUrlExcludedForSessionReplay(){return this.Gf()===mn.SessionReplay}getRequestParameters(){return{ex:this.Gf()}}}return s})();var Qa=1/0,{toString:Eg}=Object.prototype;function vg(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":Eg.call(s)}var Bo=s=>typeof s=="symbol"||typeof s=="object"&&s!=null&&vg(s)==="[object Symbol]";function Fl(s){if(typeof s=="string"||Bo(s))return s;let r=`${s}`;return typeof s=="number"?r==="0"&&1/s===-Qa?"-0":r:s instanceof Number&&r==="0"&&1/s.valueOf()===-Qa?"-0":r}var Sg=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_g=/^\w*$/;function wg(s,r){return csArray.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||Bo(s)?!0:_g.test(s)||!Sg.test(s)||r!=null&&s in Object(r)}function Fo(s,r){if(typeof s!="function"||r!=null&&typeof r!="function")throw new TypeError("Expected a function");let t=function(...e){let i=r?r.apply(this,e):e[0],{cache:n}=t;if(n.has(i))return n.get(i);let o=s.apply(this,e);return t.cache=n.set(i,o)||n,o};return t.cache=new(Fo.Cache||Map),t}Fo.Cache=Map;var Ag=500;function Tg(s){let r=Fo(s,t=>{let{cache:e}=r;return e.size===Ag&&e.clear(),t});return r}var bg=46,Rg=/\\(\\)?/g,Cg=csRegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),$l=Tg(s=>{let r=[];return csString.prototype.charCodeAt.call(s,0)===bg&&csArray.prototype.push.call(r,""),csString.prototype.replace.call(s,Cg,(t,e,i,n)=>{let o=t;return i?o=csString.prototype.replace.call(n,Rg,"$1"):e&&(o=csString.prototype.trim.call(e)),csArray.prototype.push.call(r,o),t}),r});function Ig(s,r){return csArray.isArray(s)?s:wg(s,r)?[s]:$l(s)}function Pg(s,r){let t=Ig(r,s),e=s,i=0,{length:n}=t;for(;e!=null&&i<n;){let o=Fl(t[i]);e=e[o],i+=1}return i&&i===n?e:void 0}function Og(s){return"iterable"in s}function zl(s){return X(s.iterable)?C(s.iterable)||s.iterable===null:!0}function Gl(s,r,t){let e=s==null?void 0:Pg(s,r);return e===void 0?t:e}var Ng=/\b__p \+= '';/g,Mg=/\b(__p \+=) '' \+/g,Dg=/(__e\(.*?\)|\b__t\)) \+\n'';/g,kg=/['\n\r\u2028\u2029\\]/g,ql=/[&<>"']/g,xg=csRegExp(ql.source),Lg=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,gr=/($^)/,Vg={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ug=/[()=,{}[\]/\s]/,jg=/<%-([\s\S]+?)%>/g,Hg=/<%([\s\S]+?)%>/g,Wl=/<%=([\s\S]+?)%>/g,{hasOwnProperty:Za}=Object.prototype,Bg="Invalid `variable` option passed into `_.template`";function Fg(s){return`\\${Vg[s]}`}var $g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},zg={escape:jg,evaluate:Hg,interpolate:Wl,variable:"",imports:{_:{template:br,escape(s){return s&&xg.test(s)?csString.prototype.replace.call(s,ql,r=>$g[r]):s!=null?s:""}}}};function br(s,r){let t={...zg,...r},e=Object.keys(t.imports||{}),i=csArray.prototype.map.call(e,v=>t==null?void 0:t.imports[v]),n,o,c=0,l=t.interpolate||gr,h="__p += '",u=csRegExp(`${(t.escape||gr).source}|${l.source}|${(l===Wl?Lg:gr).source}|${(t.evaluate||gr).source}|$`,"g"),p=`//# sourceURL=${Za.call(t,"sourceURL")?csString.prototype.replace.call(`${t.sourceURL}`,/\s/g," "):void 0}
`;s==null||csString.prototype.replace.call(s,u,(v,b,I,_,A,x)=>{let N=I||_;return h+=csString.prototype.replace.call(csString.prototype.slice.call(s,c,x),kg,Fg),b&&(n=!0,h+=`' +
__e(${b}) +
'`),A&&(o=!0,h+=`';
${A};
__p += '`),N&&(h+=`' +
((__t = (${N})) == null ? '' : __t) +
'`),c=x+v.length,v}),h+=`';
`;let y=Za.call(t,"variable")&&t.variable;if(!y)h=`with (obj) {
${h}
}
`;else if(Ug.test(y))throw new Error(Bg);h=csString.prototype.replace.call(csString.prototype.replace.call(o?csString.prototype.replace.call(h,Ng,""):h,Mg,"$1"),Dg,"$1;"),h=`function(${y||"obj"}) {
${y?"":`obj || (obj = {});
`}var __t, __p = ''${n?", __e = _.escape":""}${o?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`}${h}return __p
}`;let m;try{m=Function(...e,`${p}return ${h}`)(...i)}catch(v){m=v}if(m.source=h,m instanceof Error)throw m;return m}var Gg=/^(\s*("(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*')\s*,?)+$/,qg=/<%[\s\S]+?%>|<%-[\s\S]+?%>|<%=[\s\S]+?%>|\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/,Wg=/^document\.querySelector\(("(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*')\)\.(textContent|value)$/;function tc(s){if(!Gg.test(s)||qg.test(s))throw new Error("whitelisted function is wrongly used")}var ec={"window.location.hash.replace(":(s,r)=>{let t=csString.prototype.substring.call(s,29,s.length-1);return tc(t),br(`\${${s}}`)(r)},"window.sessionStorage.getItem(":(s,r)=>{let t=csString.prototype.substring.call(s,30,s.length-1);return tc(t),br(`\${${s}}`)(r)},"document.querySelector(":(s,r)=>{if(Wg.test(s))return br(`\${${s}}`)(r)},"new Date().getTime()":(s,r)=>new csDate().getTime().toString()};function Yg(s){let r=Us(Object.keys(ec),t=>Rt(s,t));if(r)return ec[r]}function Xg(s){return Rt(s,"'")&&ri(s,"'")}var Kg=/\$\{([\s\S]+?)\}/g,Jg=s=>(r,t,e)=>{let i="";return csArray.prototype.forEach.call(csString.prototype.split.call(t,"+"),n=>{let o=csString.prototype.trim.call(n),c=Gl(s,o);if(c===void 0)if(Xg(o))c=csString.prototype.substring.call(o,1,o.length-1);else{let l=Yg(o);if(l&&(c=l(o,s)),c===void 0)throw new Error("undefined not allowed")}i+=c}),i};function ii(s,r){try{return csString.prototype.replace.call(s,Kg,Jg(r))}catch{return null}}function Zn(s,r){let t={};for(let e of Object.keys(s)){let i=s[e];if(C(i)){let n=ii(i,r);if(n===null)return null;t[e]=n}else t[e]=i}return t}function to(s,r){let t=csArray.prototype.join.call(csArray.prototype.filter.call(csArray.prototype.map.call(csString.prototype.split.call(s,","),e=>ii(e,r)),e=>e!==null&&Lt(e)),",");return Lt(t)?t:null}var yn=(()=>{let s;return function(r){r.AND="AND",r.OR="OR"}(s||(s={})),s})(),de=(()=>{let s;return function(r){r.STARTS_WITH="startsWith",r.EQUALS="equals",r.NOT_EQUALS="notEquals",r.CONTAINS="contains",r.NOT_CONTAINS="notContains",r.MATCHES="matches",r.NOT_MATCHES="notMatches",r.EXIST="exist",r.NOT_EXIST="notExist"}(s||(s={})),s})();function Yl(s,r){return Qg(s.operator,sm(s.args,r))}function Qg(s,r){switch(s){case de.EXIST:case de.NOT_EXIST:return Zg(s,r);default:return tm(s,r)}}function Zg(s,r){let[t]=r;if(!Lt(t))return!1;switch(s){case de.EXIST:return window.csquerySelector[document.nodeType].call(document,t)!==null;case de.NOT_EXIST:return window.csquerySelector[document.nodeType].call(document,t)===null;default:return!1}}function tm(s,r){let[t,e]=r;if(!(s in yn)&&!(C(t)&&C(e)))return!1;switch(s){case yn.AND:return!!csArray.prototype.reduce.call(r,(n,o)=>n&&o);case yn.OR:return!!csArray.prototype.reduce.call(r,(n,o)=>n||o);case de.STARTS_WITH:return Rt(t,e);case de.EQUALS:return t===e;case de.NOT_EQUALS:return t!==e;case de.CONTAINS:return csString.prototype.indexOf.call(t,e)>-1;case de.NOT_CONTAINS:return csString.prototype.indexOf.call(t,e)===-1;case de.MATCHES:{let n=sc(e);return n!==null&&n.test(t)}case de.NOT_MATCHES:{let n=sc(e);return n!==null&&!n.test(t)}default:return!1}}function em(s){return!!(s&&s.operator&&s.args)}function sm(s,r){return csArray.prototype.map.call(s,t=>em(t)?Yl(t,r):C(t)?ii(t,r):t)}function sc(s){let r=/^\/(.*)\/([gimy]*)$/.exec(s),t=null;if(r){let[,e,i]=r;try{t=new csRegExp(e,i)}catch{}}else try{t=new csRegExp(s)}catch{}return t}var im=(()=>{class s extends jt{constructor(t,e,i,n,o){super(),this.gt=t,this.Dl=e,this._t=i,this.pe=n,this.L=o,this.Sa=[],this.si=0}init(){this.gt.init()}initStates(){this.kl(),this.Sa=[],this.si=0,this.xl()}xl(){this.us=M.now()}ki(){return M.now()-this.us}onStart(){this.gt.subscribe(s.Ht,t=>this.Q(t))}onStop(){this.gt.unsubscribe(s.Ht)}onIframeApiError(t){this.Q(t)}Q(t){this.isStarted&&this.si<s.Rn&&this.L.isSessionValid()&&(t.relativeTime=this.ki(),csArray.prototype.push.call(this.Sa,this.pe.anonymize(t)),this.Cn(),G.counters.networkRequests.count("collected"))}kl(){this.Dl.removeQueryParams(),this.Dl.setQueryParams(this._t.getRequestParameters())}Cn(){this.Dl.send({errors:this.Sa}),this.Sa=[],this.si+=1}}return s.Ht="ApiErrorsService",s.Rn=20,s})(),rm="api-errors",eo=["api-errors:maskUrl"],nm=(()=>{class s{constructor(t,e,i,n,o,c,l,h){this.gt=t,this.pe=e,this.E=i,this._t=n,this.Et=o,this.S=c,this.Dt=l,this.L=h}init(){let t=this.Dt.create(`${this.E.getTrackerUri()}/${rm}`);this.Is=new im(this.gt,t,this._t,this.pe,this.L),this.Is.init(),this.Et.addListener(this.Is),this.ft()}ft(){this.S.register(eo,t=>{if(!C(t))throw new Ut(eo[0]);this.pe.addUrlMaskingPattern(t)})}onStartTracking(){this.Is.start()}onAfterNaturalPageView(){this.Is.initStates()}onArtificialPageViewEnd(t){t&&this.Is.stop()}onAfterArtificialPageView(t){this.Is.initStates(),t&&this.Is.start()}onBeforeSessionRenewal(){this.Is.stop()}onOptout(){this.Is.stop()}}return s})(),wt=(()=>{class s{constructor(t,e){this.commandsService=t,this.args=e}}return s})(),$i=(()=>{class s extends wt{}return s})(),om=(()=>{class s extends wt{validateArgs(t){return J(t)?C(t.url):!1}execute(t){this.commandsService.applyFromImplementation(eo[0],[t.url],"ApiErrorsMaskUrlTemplate")}}return s})(),Di=(()=>{class s{constructor(...t){this.Xf=t}addProvider(t){csArray.prototype.push.call(this.Xf,t)}getRequestParameters(){return csArray.prototype.reduce.call(this.Xf,(t,e)=>({...e.getRequestParameters(),...t}),{})}}return s})(),am=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function cm(){return{la:am}}var zi=(()=>{let s;return function(r){r.UNCOMPRESSED="0",r.GZIP="2"}(s||(s={})),s})(),Xl=(()=>{class s{}return s})();function lm(s){if(typeof Object.values=="function")return Object.values(s);let r=[];for(let t in s)s.hasOwnProperty(t)&&csArray.prototype.push.call(r,s[t]);return r}function hm(s,r){if(Object.keys(s).length<=r)return s;let t={},e=0;for(let[i,n]of Object.entries(s)){if(e>=r)break;t[i]=n,e++}return t}var um=(()=>{let s;return function(r){function e(i,n,o,c){let l={...i,...n,...o,...c};return hm(l,200)}r.mergeAndLimitProperties=e}(s||(s={})),s})(),Rs=(()=>{let s;return function(r){r.Artificial="a",r.Renewal="r",r.Natural="n"}(s||(s={})),s})(),Is=(()=>{let s;return function(r){r.Natural="Natural",r.Artificial="Artificial",r.Renewal="Renewal"}(s||(s={})),s})(),dm=(()=>{class s extends jt{constructor(t,e,i,n,o,c,l,h,u,p){super(),this.E=t,this.w=e,this.Y=i,this.xi=n,this.A=o,this.ds=c,this.VS=l,this.Wt=h,this.Yt=u,this.Ll=p,this.Ps=null}init(){this.Vl()}onStart(t=Is.Natural){switch(t){case Is.Natural:this.Ul();break;case Is.Artificial:this.jl();break;case Is.Renewal:this.Hl();break}}onStop(){}triggerArtificialPageView(t,e){this.isStarted?(this.w.emitArtificialPageViewEnd(),this.Li(t,e)):(yt(t)&&this.A.overridePath(t,e),this.Y.emitTargetingRulesArtificialPageview(this.A.getUrl()),this.E.hasTargetingRules()&&this.A.cleanupOverrideLifespan())}Ul(){this.ds.setPageViewType(Rs.Natural);let t=this.A.getAnonymizedUrl();this.w.emitBeforeNaturalPageView(t),this.Bl(),this.A.cleanupOverrideLifespan(),this.w.emitAfterNaturalPageView(Rs.Natural),this.Ps=t}Hl(){this.ds.setPageViewType(Rs.Renewal);let t=this.A.getAnonymizedUrl();this.w.emitBeforeNaturalPageView(t),this.Bl(),this.w.emitAfterNaturalPageView(Rs.Renewal),this.Ps=t}Li(t,e,i=!1){yt(t)&&this.A.overridePath(t,e);let n=this.A.getAnonymizedUrl();this.w.emitBeforeArtificialPageView(this.Ps,n),this.ds.setPageViewType(Rs.Artificial),this.Bl(),this.A.cleanupOverrideLifespan(),this.w.emitAfterArtificialPageView(i),this.Ps=n}jl(){this.Li(null,void 0,!0)}Vl(){window.addEventListener("pageshow",t=>{this.isStarted&&t.persisted&&(this.w.emitArtificialPageViewEnd(),this.Li())})}US(){var t,e,i;let n=(t=this.Ll)===null||t===void 0?void 0:t.getProperties(document,"pageview",this.A.getPath()),o=um.mergeAndLimitProperties((e=this.Wt)===null||e===void 0?void 0:e.getProperties(),(i=this.Yt)===null||i===void 0?void 0:i.getProperties(),n!=null?n:void 0,void 0);if(Object.keys(o).length>0)return o}Bl(){let t=this.US(),e=t?{properties:t}:void 0;this.xi.removeQueryParams(),this.xi.setQueryParams({...this.VS.getRequestParameters(),...e?{}:{ct:zi.UNCOMPRESSED}}),this.xi.send(e)}}return s})(),fm=99999,pm=(()=>{class s{constructor(t){this.C=t,this.jS=this.HS()&&window.CSCurrentScript}BS(){let t=window.CSCurrentScript;if(!t)return null;let e=window.performance.getEntriesByName(t.src,"resource")[0];return!e||this.FS(e)?null:Math.round(e.responseEnd-e.fetchStart)}FS(t){let e=t.transferSize;return e!==void 0?e===0||e===300||e<t.encodedBodySize:t.connectStart===t.domainLookupEnd}getRequestParameters(){if(!this.jS||this.$S()!==1)return{};let t=this.BS();return t===null?{}:{dt:`${Math.min(t,fm)}`}}$S(){var t;return((t=this.C.getSession())===null||t===void 0?void 0:t.pageNumber)||null}HS(){return typeof window.performance=="object"&&typeof window.performance.getEntriesByName=="function"}}return s})(),Kl=["trackPageview"],so=["setPath"],io=["setQuery"],ic=["referrer:maskUrl"],gm=["referrer:removeQueryString"],mm=["referrer:keepQueryString"],ym="pageview",En=s=>fs(s)&&s!==null,Em=(s,r,t,e)=>{s.register(Kl,(i,n)=>{if(!C(i)){r.triggerArtificialPageView();return}En(n)?r.triggerArtificialPageView(i,n):r.triggerArtificialPageView(i)}),s.register(so,(i,n)=>{if(!C(i))throw new Ut(so[0]);En(n)?t.overridePath(i,n):t.overridePath(i)}),s.register(io,(i,n)=>{if(!C(i))throw new Ut(io[0]);En(n)?t.overrideQuery(i,n):t.overrideQuery(i)}),e&&(s.register(ic,i=>{if(!C(i))throw new Ut(ic[0]);e.addUrlMaskingPattern(i)}),s.register(gm,()=>e.enableRemoveQueryString()),s.register(mm,()=>e.disableRemoveQueryString()))},vm=(()=>{class s{constructor(t,e,i,n,o,c,l,h,u,p,y,m,v,b,I,_,A,x,N){this.E=t,this.S=e,this.w=i,this.Be=n,this.M=o,this.C=c,this.Os=l,this.It=h,this.bt=u,this.A=p,this.Xt=y,this.ds=m,this.Y=v,this.Dt=b,this.Ye=I,this.mr=_,this.Wt=A,this.Yt=x,this.Ll=N}init(){let t=this.Dt.create(`${this.E.getTrackerUri()}/${ym}`,"base64"),e=new Di(this.Be,this.M,bt,this.Os,this.A,this.It,To,this.bt,this.ds,new pm(this.C),this.Xt);this.In=new dm(this.E,this.w,this.Y,t,this.A,this.ds,e,this.Wt,this.Yt,this.Ll),this.In.init(),this.Ye&&e.addProvider(this.Ye),this.mr&&e.addProvider(this.mr);let i=this.E.isCsCrosswritingHeap();if(i||this.E.isCsSideloadingHeap()||this.E.isHeapSideloadsCs()){let n=this.E.getHeapEnvId()||void 0;e.addProvider({getRequestParameters(){let o={cw:i?"1":"2"};return n&&(o.happid=n),o}})}Em(this.S,this.In,this.A,this.Os)}start(t){this.In.start(t)}stop(){this.In.stop()}onBeforeSessionRenewal(){this.In.stop()}}return s})();function $o(s){switch(s){case"no decoding":return null;case"decode once":return{decodeURI:!0};case"decode multiple times":return{decodeURIDeep:!0};default:return null}}function zo(s){switch(s==null?void 0:s[0]){case"on next pageview only":return{lifespan:"onNextPageviewOnly"};default:return null}}var Jl=(()=>{class s extends wt{validateArgs(t){if(J(t)){let e=X(t.path)?C(t.path):!0,i=X(t.decodeURI)?C(t.decodeURI):!0,n=X(t.lifespan)?csArray.isArray(t.lifespan):!0;return e&&i&&n}return!1}execute(t){if(!t.path)this.Pn([]);else{let e=[t.path],i=$o(t.decodeURI),n=zo(t.lifespan),o={...i,...n};Object.keys(o).length&&e.push(o),this.Pn(e)}}Pn(t){this.commandsService.applyFromImplementation(Kl[0],t,"ArtificialPageviewTemplate")}}return s})(),Sm=(()=>{class s extends wt{constructor(){super(...arguments),this.Fl=!1}validateArgs(t){return J(t)&&C(t.type)&&C(t.urls)&&(t.type==="allow"||t.type==="block")&&csString.prototype.trim.call(t.urls).length>0?(this.Fl=!1,!0):(H.implementation(`BlockAllowListForSRTemplate has wrong argument: ${t}, fallback to default config.`),this.Fl=!0,!0)}execute(t){let e="";this.Fl?e=Bl:e=this.zS(t.urls,t.type),this.commandsService.applyFromImplementation(Hl[0],[e],"BlockAllowListForSRTemplate")}zS(t,e){let i=e==="allow"?"?!":"";return i+=csArray.prototype.join.call(csArray.prototype.map.call(csString.prototype.split.call(t,","),n=>`.*${csString.prototype.trim.call(n)}`),"|"),`^(${i}).*?`}}return s})(),Ql=["trackError"],_m=(()=>{class s extends $i{validateArgs(t){return J(t)?C(t.message)&&csArray.isArray(t.attributes):!1}execute(t,e){let i=ii(t.message,e);if(!i)return;let n={};for(let o of t.attributes){let c=ii(o.value,e);c!==null&&(n[o.key]=c)}this.commandsService.applyFromImplementation(Ql[0],[i,n],"CustomErrorTemplate")}}return s})(),Go=["setCustomVariable"],wm=(()=>{class s{constructor(t,e){this.S=t,this.bt=e}init(){this.S.register(Go,(t,e,i,n)=>{this.bt.set(t,e,i,n)})}onAfterArtificialPageView(){this.bt.deleteNextPageOnlyCustomVariables()}onAfterNaturalPageView(){this.bt.deleteNextPageOnlyCustomVariables()}onOptout(){this.bt.removeCustomVariablesSession()}onBeforeVisitorRenewal(){this.bt.removeCustomVariablesSession(),this.bt.removeCustomVariablesPage()}}return s})(),Am=(()=>{class s extends wt{validateArgs(t){if(J(t)){let e=zl(t),i=csArray.isArray(t.scope)?Po(t.scope,n=>C(n)):!0;return e&&i&&_t(t.index)&&C(t.name)&&C(t.value)}return!1}execute(t){this.commandsService.applyFromImplementation(Go[0],[t.index,t.name,t.value,t.scope[0]],"CustomVariableTemplate")}}return s})(),Zl=["setEncryptionSelectors"],qo=["setPIISelectors"],th=["setCapturedElementsSelector"],Tm=(()=>{class s{constructor(t,e,i,n,o,c,l){this.w=t,this.S=e,this.ht=i,this.Kt=n,this.Jt=o,this.ut=c,this.yr=l}init(){var t,e;this.yr&&this.ut&&((t=this.yr)===null||t===void 0||t.addSelector((e=this.ut)===null||e===void 0?void 0:e.getEncryptionSelectors())),this.ft()}onBeforeNaturalPageView(t){this.Kt.start(),this.w.emitSensitiveStatusChange()}onStartTracking(t){this.Kt.start(),this.w.emitSensitiveStatusChange()}onAfterArtificialPageView(){this.Kt.stop(),this.Kt.start(),this.w.emitSensitiveStatusChange()}onBeforeSessionRenewal(){this.Kt.stop(),this.w.emitSensitiveStatusChange()}onOptout(){this.Kt.stop(),this.w.emitSensitiveStatusChange()}onReplayUnanonymizationConsentGranted(){this.w.emitSensitiveStatusChange()}onReplayUnanonymizationConsentWithdrawn(){this.w.emitSensitiveStatusChange()}ft(){this.S.register(qo,t=>{this.ht.setMaskedElementSettingsFromCommand(t),this.w.emitSensitiveStatusChange()}),this.S.register(th,t=>{this.Jt.setWhitelistedElementsSelector(t),this.w.emitSensitiveStatusChange()}),this.S.register(Zl,t=>{var e,i;(e=this.ut)===null||e===void 0||e.setEncryptionSelectors(t),(i=this.yr)===null||i===void 0||i.addSelector(t)})}}return s})(),bm=(()=>{class s extends wt{validateArgs(t){return J(t)?C(t.selector):!1}execute(t){this.commandsService.applyFromImplementation(Zl[0],[t.selector],"DataCsEncryptTemplate")}}return s})(),Rm="data-cs-override-id",Cm=(()=>{class s extends wt{validateArgs(t){if(J(t)){let e=yt(t.value)?C(t.value):!0;return C(t.selector)&&e}return!1}execute(t){var e;if(!Lt(t.selector))return;let i=window.csquerySelector[document.nodeType].call(document,t.selector);i&&i.setAttribute(Rm,(e=t.value)!==null&&e!==void 0?e:"")}}return s})(),Im=512,Pm=255,vn=(()=>{class s{constructor(t,e){this.key=csString.prototype.slice.call(t,0,Im),this.value=C(e)?csString.prototype.slice.call(e,0,Pm):e}static isKeyValid(t){return C(t)}static isValueValid(t){return C(t)||Ns(t)}}return s})(),Om=(()=>{class s extends jt{constructor(t,e){super(),this.Qt=t,this.D=e,this.$l=[]}onStart(){csArray.prototype.forEach.call(this.$l,t=>this.Kf(t.key,t.value)),this.$l=[]}onStop(){}Kf(t,e){let i=this.D.anonymizePII(t),n=Ns(e)?e:this.D.anonymizePII(e);this.Qt.add(new vn(i,n))}trackDynamicVariable(t,e){if(vn.isKeyValid(t)&&vn.isValueValid(e)){if(!this.isStarted){csArray.prototype.push.call(this.$l,{key:t,value:e});return}this.Kf(t,e)}else throw new Ut(Wo[0])}}return s})(),Nm=(()=>{class s{constructor(t){this.ge=t,this.Qt=[]}add(t){csArray.prototype.push.call(this.Qt,t),this.setBatchReadyCall()}clear(){this.Qt=[]}onBatchReady(t){this.GS=t}getRequestParameters(){let t={};for(let e of this.Qt)t[e.key]=e.value;return{dv:this.ge.compressSync(csJSON.stringify(t),"base64"),ct:this.ge.algorithm}}setBatchReadyCall(){this.GS()}}return U([Bs({wait:0,mode:"trailing"}),P("dynamicVariablesBatchReady")],s.prototype,"setBatchReadyCall",null),s})(),Mm="dvar",Wo=["trackDynamicVariable"],Dm=(()=>{class s{constructor(t,e,i,n,o,c){this.S=t,this.C=e,this.E=i,this.Be=n,this.ge=o,this.D=c,this.bs=new Mi(this.E.getTrackerUri(),Mm),this.Qt=new Nm(this.ge),this.Rs=new Om(this.Qt,this.D)}init(){this.bs.setRequestParametersProviders(this.Be,this.Qt),this.C.setDynamicVariablesService(this.Rs),this.Qt.onBatchReady(()=>this.bs.send()),this.bs.after(()=>this.Qt.clear()),this.S.register(Wo,({key:t,value:e}={})=>{this.Rs.trackDynamicVariable(t,e)})}onStartTracking(){this.Rs.start()}onArtificialPageViewEnd(t){t&&this.Rs.stop()}onAfterArtificialPageView(t){t&&this.Rs.start()}}return s})(),km=20,xm=(()=>{class s extends $i{validateArgs(t){return J(t)?zl(t)&&C(t.key)&&C(t.value)&&C(t.type):!1}execute(t,e){let i=Zn(t,e);i!==null?this.Pn(i):this.qS(t,e)()}qS(t,e){return()=>{let i=0,n=window.csSetInterval(()=>{i+=1;let o=Zn(t,e);if(o!==null){window.csClearInterval(n),n=void 0,i=0,this.Pn(o);return}i>=km&&(window.csClearInterval(n),n=void 0,i=0)},100)}}Pn(t){let e=t.value;if(t.type==="Integer"){let i=Number.parseInt(t.value,10);Number.isNaN(i)||(e=i)}this.commandsService.applyFromImplementation(Wo[0],[{key:t.key,value:e}],"DynamicVariableTemplate")}}return s})(),eh=100,Lm=100,Vm=(()=>{class s extends jt{constructor(t,e){super(),this.WS=t,this.L=e,this.Ne=null,this.zl=[]}onStart(){csArray.prototype.forEach.call(this.zl,t=>{this.Ne=t,this.Jf()}),this.zl=[]}onStop(){}addToCart(t){let e={};C(t.sku)&&(e.sku=csString.prototype.slice.call(t.sku,0,Lm)),C(t.merchant)&&(e.merchant=csString.prototype.slice.call(t.merchant,0,eh)),(e.sku||e.merchant)&&(this.Ne=e,this.Jf())}getCartItem(){return this.Ne}Jf(){if(!this.isStarted&&this.Ne!==null){csArray.prototype.push.call(this.zl,this.Ne),this.clear();return}this.L.refreshSession(),this.L.isSessionValid()&&this.WS.send()}clear(){this.Ne=null}getRequestParameters(){if(!this.Ne)return{};let t={};return C(this.Ne.sku)&&this.Ne.sku.length>0&&(t.sku=this.Ne.sku),C(this.Ne.merchant)&&this.Ne.merchant.length>0&&(t.me=this.Ne.merchant),t}}return s})(),rc=(()=>{class s{constructor(t,e){this.id=t,this.revenue=e}static from(t){let e=new s(t.id,parseFloat(t.revenue));return isNaN(parseFloat(t.tax))||(e.tax=parseFloat(t.tax)),isNaN(parseFloat(t.shipping))||(e.shipping=parseFloat(t.shipping)),C(t.currency)&&t.currency.length<=10&&(e.currency=t.currency),e}hasValidRevenue(){return!isNaN(this.revenue)&&this.revenue>=0}static isValid(t){return yt(t)&&_t(t.revenue)&&C(t.currency)&&t.currency.length<=10&&(!yt(t.id)||C(t.id))}}return s})(),Um=(()=>{class s{constructor(t,e,i,n){this.id=t,this.name=e,this.price=i,this.quantity=n}static from(t){if(!s.Gl(t))return null;let e=new s(t.id,t.name,parseFloat(t.price),parseInt(t.quantity,10));return X(t.sku)&&(e.sku=t.sku),X(t.category)&&(e.category=t.category),X(t.merchant)&&t.merchant.length>0&&(e.merchant=t.merchant.slice(0,eh)),e}static Gl(t){return yt(t)&&C(t.id)&&C(t.name)&&_t(parseFloat(t.price))&&Ns(parseInt(t.quantity,10))&&(!X(t.sku)||C(t.sku))&&(!X(t.category)||C(t.category))&&(!X(t.merchant)||C(t.merchant))}}return s})(),jm=(()=>{class s extends jt{constructor(t,e,i){super(),this.D=t,this.Qf=e,this.L=i,this.ql=[],this.clear()}onStart(){csArray.prototype.forEach.call(this.ql,t=>{this.ye=t.transaction,this.On=t.transactionItems,this.sendTransaction()}),this.ql=[]}onStop(){}addTransaction(t){let e=this.D.anonymizeFields(t,["id"]);this.ye=rc.from(e)}getTransaction(){return this.ye}sendTransaction(){if(!this.isStarted){csArray.prototype.push.call(this.ql,{transaction:this.ye,transactionItems:[...this.On]}),this.clear();return}if(!(this.Qf===null||this.L===null)&&(this.L.refreshSession(),!!this.L.isSessionValid())){if(!this.ye.hasValidRevenue()){H.warn("Transaction Service: unable to send transaction with invalid parameters");return}this.Qf.send()}}addItem(t){if(Ae(t))throw new Ut(Gr[1]);let e=this.D.anonymizeFields(t,["id","name","sku","category"]),i=Um.from(e);i!==null&&csArray.prototype.push.call(this.On,i)}getItems(){return this.On}clear(){this.ye=rc.from({revenue:NaN}),this.On=[]}getRequestParameters(){let t={id:this.ye.id?`${this.ye.id}`:"",revenue:`${this.ye.revenue}`};return X(this.ye.tax)&&(t.tax=`${this.ye.tax}`),X(this.ye.shipping)&&(t.shipping=`${this.ye.shipping}`),X(this.ye.currency)&&(t.cu=`${this.ye.currency}`),t.items=window.csJSON.stringify(this.On),t}}return s})(),Hm=["ecommerce:addToCart","ec:cart:add"],Yo=["ecommerce:addTransaction","ec:transaction:create"],Gr=["ecommerce:addItem","ec:transaction:items:add"],Xo=["ecommerce:send","ec:transaction:send"],Bm=(()=>{class s{constructor(t,e,i,n,o,c,l){this.E=t,this._t=e,this.M=i,this.S=n,this.D=o,this.L=c,this.A=l}init(){let t=new Mi(this.E.getTrackerUri(),"transaction"),e=new Mi(this.E.getTrackerUri(),"addtocart");this.Fe=new jm(this.D,t,this.L),this.Er=new Vm(e,this.L);let i=new Di(this._t,this.M,this.A,this.Fe);t.setRequestParametersProviders(i),t.after(()=>{this.Fe.clear()});let n=new Di(this._t,this.M,this.A,this.Er);e.setRequestParametersProviders(n),e.after(()=>{this.Er.clear()}),this.S.register(Yo,o=>{this.Fe.addTransaction(o)}),this.S.register(Gr,o=>this.Fe.addItem(o)),this.S.register(Xo,()=>this.Fe.sendTransaction()),this.S.register(Hm,o=>{this.Er.addToCart(o)})}onStartTracking(){this.Fe.start(),this.Er.start()}onArtificialPageViewEnd(t){t&&(this.Fe.stop(),this.Er.stop())}onAfterArtificialPageView(t){t&&(this.Fe.start(),this.Er.start())}}return s})(),Fm=(()=>{class s extends wt{validateArgs(t){return J(t)?C(t.transactionId)&&_t(t.revenue)&&C(t.currency)&&C(t.name)&&C(t.sku)&&C(t.category)&&_t(t.price)&&_t(t.quantity):!1}execute(t){this.YS({id:t.transactionId,revenue:t.revenue,currency:t.currency}),this.XS({id:t.transactionId,name:t.name,sku:t.sku,category:t.category,price:t.price,quantity:t.quantity}),this._a()}YS(t){this.commandsService.applyFromImplementation(Yo[0],[t],"EcTransactionAllTemplate")}XS(t){this.commandsService.applyFromImplementation(Gr[0],[t],"EcTransactionAllTemplate")}_a(){this.commandsService.applyFromImplementation(Xo[0],[],"EcTransactionAllTemplate")}}return s})(),$m=(()=>{class s extends wt{validateArgs(t){return J(t)?C(t.id)&&_t(t.revenue)&&C(t.currency):!1}execute(t){this.commandsService.applyFromImplementation(Yo[0],[t],"EcTransactionCreateTemplate")}}return s})(),zm=(()=>{class s extends wt{validateArgs(t){return J(t)?C(t.id)&&C(t.name)&&C(t.sku)&&C(t.category)&&_t(t.price)&&_t(t.quantity):!1}execute(t){this.commandsService.applyFromImplementation(Gr[0],[t],"EcTransactionItemsAddTemplate")}}return s})(),Gm=(()=>{class s extends wt{validateArgs(t){return!!J(t)}execute(){this.commandsService.applyFromImplementation(Xo[0],[],"EcTransactionSendTemplate")}}return s})(),qm=(()=>{class s extends $i{validateArgs(t){return J(t)?yt(t)&&C(t.selector):!1}execute(t,e){if(!yt(t)||!C(t==null?void 0:t.selector))return;let i=to(t.selector,e);i!==null&&this.commandsService.applyFromImplementation(th[0],[i],"ElementUnmaskingTemplate")}}return s})(),xs;(function(s){s.ContentSquare="CONTENTSQUARE",s.LoadedByClicktale="LOADED_BY_CLICKTALE",s.LoadClicktalePtc="LOAD_CLICKTALE_PTC",s.DualCollectionReview="DUAL_COLLECTION_REVIEW",s.DualCollection="DUAL_COLLECTION",s.ContentSquareTagClickTaleEndpoints="CONTENTSQUARE_TAG_CLICKTALE_ENDPOINTS"})(xs||(xs={}));var nc=(()=>{let s;return function(r){function t(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()}r.isRecording=t;function e(){window.ClickTaleStop&&window.ClickTaleStop()}r.stopRecording=e;function i(c){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(c)}r.triggerLogicalPageView=i;function n(c){window.ClickTaleEvent&&window.ClickTaleEvent(c)}r.sendPageEvent=n;function o(c){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(c)}r.sendEventTriggerRecording=o}(s||(s={})),s})();function ro(s){return s.tagDeploymentMode===xs.DualCollectionReview||s.tagDeploymentMode===xs.DualCollection}function Wm(s){return ro(s)||s.tagDeploymentMode===xs.LoadClicktalePtc}var Ym="@ETP@",oc="@user-identifier@",Xm=(()=>{class s extends jt{constructor(t,e,i,n){super(),this.E=t,this.KS=e,this.ge=i,this.Y=n,this.Wl=[],this.Vi=[]}onStart(){csArray.prototype.forEach.call(this.Wl,t=>this.Zf(t)),this.Wl=[],csArray.prototype.forEach.call(this.Vi,t=>this.tp(t)),this.Vi=[]}onStop(){}Zf(t){this.JS(t)?wi.isSupported()&&this.QS(t):this.ZS(t)}trackPageEvent(t){if(!s.ep(t))throw new Ut(Ko[0]);this.isStarted?this.Zf(t):csArray.prototype.push.call(this.Wl,t)}JS(t){return xr(t,oc)}async QS(t){if(!this.E.customHashIdEnabled)return;let e=csString.prototype.slice.call(t,oc.length);if(e.length>wi.MAX_DIGEST_INPUT_SIZE){H.warn("UserIdentifier event: invalid user identifier");return}let i=await wi.digest(e);i?(this.vr={eventName:i,isETR:!1,isCustomHashId:!0},this.wa()):H.warn("Page event: unable to compute customHashId"),this.E.encryptionEnabled&&this.Y.emitUserIdentifierEvent(e)}ZS(t){this.Y.emitPageEvent(t),this.vr={eventName:t,isETR:!1,isCustomHashId:!1},this.wa(),this.E.tagDeploymentMode===xs.LoadClicktalePtc&&nc.sendPageEvent(t)}tp(t){this.E.malkaEtrEnabled?this.t_(t):this.e_(t)}trackEventTriggerRecording(t){if(!s.ep(t))throw new Ut(Gi[0]);this.isStarted?this.tp(t):csArray.prototype.push.call(this.Vi,t)}t_(t){xr(t,Ym)?this.Y.emitEventTriggerRecording(t,hs.ETR_PAGE):this.Y.emitEventTriggerRecording(t,hs.ETR_SESSION),this.vr={eventName:t,isETR:!0,isCustomHashId:!1},this.wa()}e_(t){Wm(this.E)&&(this.Y.emitEventTriggerRecording(t,hs.ETR_LEGACY),this.vr={eventName:t,isETR:!0,isCustomHashId:!1},this.wa(),this.E.tagDeploymentMode===xs.LoadClicktalePtc&&nc.sendEventTriggerRecording(t))}getRequestParameters(){return{value:this.ge.compressSync(this.vr.eventName,"base64"),ct:this.ge.algorithm,isETR:`${this.vr.isETR}`,isCustomHashId:`${this.vr.isCustomHashId}`}}wa(){this.KS.send()}static ep(t){return C(t)&&!!csString.prototype.trim.call(t)}}return s})(),Ko=["trackPageEvent"],Gi=["trackEventTriggerRecording"],Km=(()=>{class s{constructor(t,e,i,n,o){this.E=t,this.S=e,this.ge=i,this.Be=n,this.Y=o}init(){let t=new Mi(this.E.getTrackerUri(),"pageEvent");this.Sr=new Xm(this.E,t,this.ge,this.Y),t.setRequestParametersProviders(this.Sr,this.Be),this.S.register(Ko,e=>{this.Sr.trackPageEvent(e)}),this.S.register(Gi,e=>{this.Sr.trackEventTriggerRecording(e)})}onStartTracking(){this.Sr.start()}onArtificialPageViewEnd(t){t&&this.Sr.stop()}onAfterArtificialPageView(t){t&&this.Sr.start()}}return s})(),Jm=(()=>{class s extends wt{validateArgs(t){return J(t)?C(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(Gi[0],[`@ETP@${t.eventName}`],"EventTriggerRecordingPageTemplate")}}return s})(),Qm=(()=>{class s extends wt{validateArgs(t){return J(t)?C(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(Gi[0],[`@ETS@${t.eventName}`],"EventTriggerRecordingSessionTemplate")}}return s})(),sh=["networkRequest:maskUrls"],Zm=["networkRequest:maskUrls:reset"],ty=(()=>{class s{constructor(t,e){this.sp=t,this.mt=e}init(){this.sp.register(sh,t=>{if(C(t)){this.mt.addPartialUrlMaskingPattern(t);return}if(csArray.isArray(t))for(let e of t)C(e)&&this.mt.addPartialUrlMaskingPattern(e)}),this.sp.register(Zm,()=>this.mt.resetPartialUrlMaskingPatterns())}}return s})(),ey=(()=>{class s extends wt{validateArgs(t){return J(t)?C(t.maskingPattern):!1}execute(t){this.commandsService.applyFromImplementation(sh[0],[t.maskingPattern],"NetworkRequestMaskUrlTemplate")}}return s})(),sy=(()=>{class s extends wt{validateArgs(t){return J(t)?C(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(Ko[0],[t.eventName],"PageEventTemplate")}}return s})(),iy=(()=>{class s extends $i{validateArgs(t){if(J(t)){let e=csArray.isArray(t.cssSelectors),i=csArray.isArray(t.attributes);return e&&i}return!1}execute(t,e){let i=csArray.prototype.filter.call(csArray.prototype.map.call(t.cssSelectors,c=>to(c,e)),c=>!!c),n=csArray.prototype.filter.call(csArray.prototype.map.call(t.attributes,c=>{let l=ii(c.attrName,e),h=to(c.selector,e);return{attrName:l,selector:h}}),c=>!!c.attrName&&!!c.selector),o={PIISelectors:[...i],Attributes:[...n]};this.commandsService.applyFromImplementation(qo[0],[o],"PIIMaskingTemplate")}}return s})(),ry=(()=>{class s extends wt{validateArgs(t){return J(t)?C(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(Gi[0],[`${t.eventName}`],"RecordingEventTriggerTemplate")}}return s})(),ny=(()=>{class s extends wt{validateArgs(t){return J(t)?C(t.path):!1}execute(t){let e=[t.path],i=$o(t.decodeURI),n=zo(t.lifespan),o={...i,...n};Object.keys(o).length&&e.push(o),this.commandsService.applyFromImplementation(so[0],e,"SetPathTemplate")}}return s})(),oy=(()=>{class s extends wt{validateArgs(t){return J(t)?C(t.query):!1}execute(t){let e=[t.query],i=$o(t.decodeURI),n=zo(t.lifespan),o={...i,...n};Object.keys(o).length&&e.push(o),this.commandsService.applyFromImplementation(io[0],e,"SetQueryTemplate")}}return s})();function me(s,r,t,e){var i=arguments.length,n=i<3?r:e===null?e=Object.getOwnPropertyDescriptor(r,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,r,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(n=(i<3?o(n):i>3?o(r,t,n):o(r,t))||n);return i>3&&n&&Object.defineProperty(r,t,n),n}var Si=s=>s instanceof HTMLFormElement?"form":s.localName,ac=new Map,Sn=!Vi&&document.implementation.createHTMLDocument("");function ih(s){var r,t;return(t=(r=s.sheet)===null||r===void 0?void 0:r.href)!==null&&t!==void 0?t:s.getAttribute("href")}function ay(s){if(!Hi(s))return null;let r=rh(s);if(r===null||r.length===0)return null;let t="";if(jr(s.textContent))K(r,e=>t+=e.cssText);else{let e=cy(s);if(e===r.length||e>r.length)return null;let i=new csArray(r.length-e);for(let n=e,o=0;n<r.length;n+=1,o+=1)i[o]=r[n];K(i,n=>t+=n.cssText)}return t}function cy(s){if(!Sn)return 0;let r=ac.get(s.textContent);if(r)return r;let t=s.cloneNode(!0);t.textContent=s.textContent,Sn.head.appendChild(t);let e=rh(t);return r=e?e.length:0,ac.set(s.textContent,r),Sn.head.removeChild(t),r}function rh(s){try{if(s.disabled)return null;let r=s.sheet;return r?r.cssRules||r.rules:null}catch(r){if(r.name!=="SecurityError"&&r.name!=="InvalidAccessError")throw r;return null}}var us={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,STYLESHEET:50};var Fs=(()=>{class s{constructor(t){this.csId=q(t),this.props=ls.getAll(t)}}return s})(),nh=(()=>{class s extends Fs{constructor(t){super(t),this.nodeType=3,this.data=t.data}}return s})(),Le=(()=>{class s extends Fs{constructor(t){var e,i,n;super(t),this.attributes=[],this.nodeType=us.ELEMENT_NODE,this.localName=Si(t),this.namespaceURI=(e=t.namespaceURI)!==null&&e!==void 0?e:void 0,this.children=[];let o=ay(t);if(o){this.children=new csArray(csNodechildNodes.apply(t).length);let c=document.createTextNode(o),l=new nh(c);csArray.prototype.push.call(this.children,l)}(Hi(t)||No(t))&&(this.disabledSheet=(n=(i=t.sheet)===null||i===void 0?void 0:i.disabled)!==null&&n!==void 0?n:!1)}static isElement(t){return t.nodeType===us.ELEMENT_NODE}static getAttribute(t,e){return Us(t.attributes,i=>i.name===e)}static getAttributeValue(t,e){var i;return(i=this.getAttribute(t,e))===null||i===void 0?void 0:i.value}}return s})();function ly(s,r){let t=!1,e=function(){if(!t)return s.apply(r,arguments)};return e.cancel=()=>t=!0,e}function hy(){let s=new Error,r=s.stack?csArray.prototype.filter.call(csString.prototype.split.call(s.stack,`
`),e=>e!=="Error"&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(e),"promise ")===-1&&csString.prototype.indexOf.call(e,"[native code]")===-1&&csString.prototype.indexOf.call(e,"(<anonymous>)")===-1):[];if(r.length===0)return"";let t=dy(r);return t===""||(r=fy(r,t),r.length===0)?"":oh(r[0])}function uy(s){return csString.prototype.indexOf.call(s,"@")!==-1}function dy(s){return s.length>0?oh(s[0]):""}function fy(s,r){return csArray.prototype.filter.call(s,t=>csString.prototype.indexOf.call(t,r)===-1)}function oh(s){let r="",t;uy(s)?t=new csRegExp("@(.+):(\\d+):(\\d+)$"):t=new csRegExp("\\((.+):(\\d+):(\\d+)\\)");let e=t.exec(s);return e&&(r=e[1]),r}var py=s=>s;function gy(s,r,t,e){let i=csSymbol.for("propertyProxy");Object.defineProperty(s,r,{get(){var n;if(this[i])return this[i];let o=(n=t.get)===null||n===void 0?void 0:n.apply(this);return typeof o!="object"?o:(typeof Proxy=="function"?this[i]=new Proxy(o,{get(c,l){let h=Reflect.get(c,l);return typeof h=="function"?h.bind(c):h},set:(c,l,h)=>{let u=c[l],p=Reflect.set(c,l,h);return e.forEach(y=>y(this,h,u,"subproperty")),p}}):this[i]=o,this[i])},set(){var n;let o=arguments,c=this[r],l=(n=t.set)===null||n===void 0?void 0:n.apply(this,o);delete this[i];try{e.forEach(h=>h(this,o[0],c,"property"))}catch(h){at.error(h)}return l}})}function my(s,r,t){let e=yy(s,r);if(!e)return null;let i=(n,o,c,l)=>t(n,o,c,l);return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function yy(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,r);return i?i.configurable?(s[t]=e,gy(s,r,i,e),e):(at.warn(`Cannot intercept non configurable property '${csString(r)}' of object '${s}'`),null):(at.warn(`Cannot intercept property '${csString(r)}' because it does not exist directly on the target object '${s}'`),null)}function Ey(s,r){let t=csSymbol.for(r);if(s[t])return s[t];let e=Object.getOwnPropertyDescriptor(s,r);if(!(e!=null&&e.writable)&&!(e!=null&&e.set))return at.warn(`Cannot intercept read only function '${csString(r)}' of object '${s}'`),null;let i=new Set;s[t]=i;let n=s[r];if(typeof n=="function"){let o=function(){let c=arguments,l=[];try{l=csArray.prototype.map.call(je(i),u=>u(c))}catch(u){at.critical(u)}let h=n.apply(this,c);return js(()=>{let u={result:h,context:this,args:c};csArray.prototype.forEach.call(l,p=>p(u))},[Te.MonkeyPatch,`${csString(r)}`]),h};_y(o,n),s[r]=o}return i}function Jt({target:s,methodName:r,hook:t,hookPrepareArgs:e=py,options:i}){let n=Ey(s,r);if(!n)return null;let o=c=>{let l=e(c),h=i!=null&&i.withCallerName?{callerName:hy()}:{};return u=>t({...u,...h,args:l})};return{activate:()=>{n.add(o)},deactivate:()=>{n.delete(o)}}}function vy(s,r){return ah(s,r,!1)}function ah(s,r,t=!0){let e=csSymbol.for(r);if(t?s[e]:s.hasOwnProperty(e))return s[e];let i=new Set,n=Object.getOwnPropertyDescriptor(s,r);if(!n)return at.warn(`Cannot intercept property '${csString(r)}' because it does not exist directly on the target object '${s}'`),null;if(!n.configurable)return at.warn(`Cannot intercept read only property '${csString(r)}' of object '${s}'`),null;s[e]=i;let o=`${csString(r)}-setter`;return Object.defineProperty(s,r,{set(){var c;let l=this[r],h=arguments;return js(()=>{i.forEach(u=>u(this,h[0],l,"property"))},[Te.MonkeyPatch,o]),(c=n.set)===null||c===void 0?void 0:c.apply(this,h)}}),i}function Sy(s,r,t){return ki(s,r,t,!0)}function ki(s,r,t,e=!1){let i=e?vy(s,r):ah(s,r);if(!i)return null;let n=(o,c,l)=>t(o,c,l,"property");return{activate:()=>{i.add(n)},deactivate:()=>{i.delete(n)}}}function _y(s,r){s.prototype=r.prototype,Object.defineProperty(s,"toString",{value:()=>r.toString()})}var qi=(()=>{class s{constructor(){this.set=new Set}add(t){this.set.add(t),this.set.size===1&&csSetTimeout(()=>{this.set.clear()})}has(t){return this.set.has(t)}del(t){this.set.delete(t)}clear(){this.set.clear()}values(){return je(this.set)}get count(){return this.set.size}}return s})(),wy=(()=>{class s extends qi{constructor(t="high"){super(),this.s_=t}add(t){this.set.add(t),this.set.size===1&&$t(()=>{this.set.clear()},this.s_)}}return s})();function qr(s,r=!1){let t=new qi;return{push(e){t.count===0&&(r?$t:csSetTimeout)(()=>{s(t.values()),t.clear()}),t.add(e)}}}var ke=csSymbol(),Jo=(()=>{class s{constructor(t){var e,i,n,o,c,l,h,u,p,y,m,v,b;this.R=t,this.Yl=null,this.Xl=null,this.Kl=null,this.Jl=null,this.Ql=null,this.i_=qr(I=>this.processUpdateRulesInATick(I)),this.Zl=null,this.th=null,this.eh=null,this.R=I=>$t(()=>t(I)),typeof((i=(e=window.CSSStyleSheet)===null||e===void 0?void 0:e.prototype)===null||i===void 0?void 0:i.insertRule)=="function"&&(this.Yl=Jt({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:({context:I,args:_})=>{this.processInsertRule(I,_)}})),typeof((o=(n=window.CSSStyleSheet)===null||n===void 0?void 0:n.prototype)===null||o===void 0?void 0:o.deleteRule)=="function"&&(this.Xl=Jt({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:({context:I,args:_})=>{this.processDeleteRule(I,_)}})),typeof((l=(c=window.CSSGroupingRule)===null||c===void 0?void 0:c.prototype)===null||l===void 0?void 0:l.insertRule)=="function"&&(this.Kl=Jt({target:window.CSSGroupingRule.prototype,methodName:"insertRule",hook:({context:I})=>this.processUpdateRule(I)})),typeof((u=(h=window.CSSGroupingRule)===null||h===void 0?void 0:h.prototype)===null||u===void 0?void 0:u.deleteRule)=="function"&&(this.Jl=Jt({target:window.CSSGroupingRule.prototype,methodName:"deleteRule",hook:({context:I})=>this.processUpdateRule(I)})),!((p=window.StyleSheet)===null||p===void 0)&&p.prototype&&"disabled"in window.StyleSheet.prototype&&(this.Ql=ki(window.StyleSheet.prototype,"disabled",(I,_,A)=>{_!==A&&this.r_(I,_)})),typeof((m=(y=window.CSSStyleDeclaration)===null||y===void 0?void 0:y.prototype)===null||m===void 0?void 0:m.setProperty)=="function"&&(this.Zl=Jt({target:window.CSSStyleDeclaration.prototype,methodName:"setProperty",hook:({context:I})=>{let _=I.parentRule;_ instanceof CSSStyleRule&&this.processUpdateRule(_)}})),typeof((b=(v=window.CSSStyleDeclaration)===null||v===void 0?void 0:v.prototype)===null||b===void 0?void 0:b.removeProperty)=="function"&&(this.th=Jt({target:window.CSSStyleDeclaration.prototype,methodName:"removeProperty",hook:({context:I})=>{let _=I.parentRule;_ instanceof CSSStyleRule&&this.processUpdateRule(_)}})),Object.getOwnPropertyDescriptor(window.CSSStyleRule.prototype,"style")&&(this.eh=my(window.CSSStyleRule.prototype,"style",I=>{this.processUpdateRule(I)}))}observe(){var t,e,i,n,o,c,l,h;(t=this.Yl)===null||t===void 0||t.activate(),(e=this.Xl)===null||e===void 0||e.activate(),(i=this.Kl)===null||i===void 0||i.activate(),(n=this.Jl)===null||n===void 0||n.activate(),(o=this.Ql)===null||o===void 0||o.activate(),(c=this.Zl)===null||c===void 0||c.activate(),(l=this.th)===null||l===void 0||l.activate(),(h=this.eh)===null||h===void 0||h.activate()}disconnect(){var t,e,i,n,o,c,l,h;(t=this.Yl)===null||t===void 0||t.deactivate(),(e=this.Xl)===null||e===void 0||e.deactivate(),(i=this.Kl)===null||i===void 0||i.deactivate(),(n=this.Jl)===null||n===void 0||n.deactivate(),(o=this.Ql)===null||o===void 0||o.deactivate(),(c=this.Zl)===null||c===void 0||c.deactivate(),(l=this.th)===null||l===void 0||l.deactivate(),(h=this.eh)===null||h===void 0||h.deactivate()}processInsertRule(t,[e,i]){if(t[ke]==null&&!t.ownerNode)return;let n={type:"cssRuleInserted",sheet:t,rule:e,index:i};this.R(n)}processUpdateRule(t){let e=t;for(;e.parentRule!==null;)e=e.parentRule;e.parentStyleSheet!==null&&this.i_.push(e)}processUpdateRulesInATick(t){for(let e of t){if(e.parentStyleSheet===null)return;let i=e.parentStyleSheet,n=csArray.prototype.indexOf.call(ei(i.cssRules),e);if(n===-1)return;let o={type:"cssRuleUpdated",sheet:i,rule:e.cssText,index:n};this.R(o)}}processDeleteRule(t,[e]){if(t[ke]==null&&!t.ownerNode)return;let i={type:"cssRuleDeleted",sheet:t,index:e};this.R(i)}r_(t,e){if(t[ke]==null&&!t.ownerNode)return;let i={type:"cssStyleSheetDisabled",sheet:t,disabled:e};this.R(i)}}return st([P()],s.prototype,"observe",null),st([P()],s.prototype,"disconnect",null),st([P()],s.prototype,"processInsertRule",null),st([P()],s.prototype,"processUpdateRule",null),st([P()],s.prototype,"processUpdateRulesInATick",null),st([P()],s.prototype,"processDeleteRule",null),s})(),ai=(()=>{var s;class r{static n_(e){this.ii.forEach(i=>{e(i,"initial")})}static Nn(e){if(this.U||(this.U=new csMutationObserver(i=>{for(let n of i)n.target.isConnected&&K(n.addedNodes,this.o_),K(n.removedNodes,this.a_)})),csArray.prototype.push.call(this.Me,e),!this.X){this.X=!0,this.U.observe(document,this.Mn);for(let i of Ps.getAllShadowHosts(document)){let n=csElementshadowRoot.apply(i);this.ii.add(n),this.U.observe(n,this.Mn)}this.ih||(this.ih=Jt({target:Element.prototype,methodName:"attachShadow",hook:i=>this._r(i.result)&&this.ip(i.result)})),this.ih.activate()}this.n_(e)}static _r(e){return e.isConnected&&e.ownerDocument===document}static Dn(e){var i,n;this.Me=csArray.prototype.filter.call(this.Me,o=>o!==e),this.Me.length===0&&(this.Me=[],this.X=!1,(i=this.U)===null||i===void 0||i.disconnect(),(n=this.ih)===null||n===void 0||n.deactivate(),this.ii.clear())}constructor(e){this.R=e,this.R=gs("DocumentShadowRootObserver:callback",(i,n)=>e(i,n))}get shadowRoots(){return je(s.ii)}takeRecords(){var e,i;return(i=(e=s.U)===null||e===void 0?void 0:e.takeRecords())!==null&&i!==void 0?i:[]}observe(){Ps.isSupported()&&s.Nn(this.R)}disconnect(){Ps.isSupported()&&s.Dn(this.R)}}return s=r,r.Me=[],r.ii=new Set,r.X=!1,r.Mn={childList:!0,subtree:!0},r.ip=t=>{s.ii.has(t)||(s.U.observe(t,s.Mn),s.ii.add(t),K(s.Me,e=>e(t,"added")))},r.o_=t=>{qt(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(s.ip)},r.a_=t=>{t.isConnected||qt(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(e=>{s.ii.has(e)&&(s.ii.delete(e),K(s.Me,i=>i(e,"removed")))})},st([P()],r.prototype,"observe",null),st([P()],r.prototype,"disconnect",null),r})(),Ay=(()=>{class s{constructor(t){this.c_=1,this.Aa=new Set,this.rh=null,this.nh=null,this.oh=(e,i)=>{(i==="initial"||i==="added")&&this.setStyleSheets(e,e.adoptedStyleSheets)},this.l_=e=>{let i=e.sheet;if(this.Aa.has(i)){if(e.type==="cssRuleInserted"){let n={type:"adoptedStyleSheetRuleInserted",sheetId:i[ke],rule:e.rule,index:e.index};this.R(n)}else if(e.type==="cssRuleDeleted"){let n={type:"adoptedStyleSheetRuleDeleted",sheetId:i[ke],index:e.index};this.R(n)}else if(e.type==="cssRuleUpdated"){let n={type:"adoptedStyleSheetRuleUpdated",sheetId:i[ke],rule:e.rule,index:e.index};this.R(n)}else if(e.type==="cssStyleSheetDisabled"){let n={type:"adoptedStyleSheetDisabled",sheetId:i[ke],disabled:e.disabled};this.R(n)}}},this.R=e=>$t(async()=>{await el(2),t(e)}),this.Ee=new ai(this.oh),"adoptedStyleSheets"in Document.prototype&&(this.rh=ki(window.Document.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),"ShadowRoot"in window&&"adoptedStyleSheets"in window.ShadowRoot.prototype&&(this.nh=ki(window.ShadowRoot.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),this.rp=new Jo(this.l_)}observe(){var t,e;this.setStyleSheets(document,document.adoptedStyleSheets),this.Ee.observe(),(t=this.rh)===null||t===void 0||t.activate(),(e=this.nh)===null||e===void 0||e.activate(),this.rp.observe()}disconnect(){var t,e;this.Aa.clear(),this.Ee.disconnect(),(t=this.rh)===null||t===void 0||t.deactivate(),(e=this.nh)===null||e===void 0||e.deactivate(),this.rp.disconnect()}setStyleSheets(t,e){if(!e.length)return;this.h_(e);let i=Ve(e,o=>o[ke]),n={type:"adoptedStyleSheetsSet",target:t,sheetsIds:i};this.R(n)}h_(t){K(t,e=>{if(this.Aa.has(e))return;let i=this.c_++;e[ke]=i,this.Aa.add(e);let n=this.u_(e),o={type:"adoptedStyleSheetRegistered",sheetId:i,cssRules:n,disabled:e==null?void 0:e.disabled};this.R(o)})}u_(t){let e=[];try{e=Ve(t.cssRules,i=>i.cssText)}catch{}return e}}return st([P()],s.prototype,"observe",null),st([P()],s.prototype,"disconnect",null),st([P()],s.prototype,"setStyleSheets",null),s})(),Ty=Hs(Iy,"optimizeMutations"),by=csSymbol.for("ignoreNextSerialization");function Ry(){let s=new Set,r=new Set,t=new Set,e=new Set,i=new Map,n=new Map,o=new Map,c=new Set,l=new Set,h=new Map,u=new Set;return{isMovedNode(p){return s.has(p)},markAsMovedNode(p){u.delete(p),s.add(p)},isDetachedMove(p){return!!ot.findAncestor(p,y=>u.has(y),!0)},isAddedNode(p){let y=ot.findAncestor(p,m=>r.has(m)||l.has(m)||s.has(m),!0);return!!y&&!s.has(y)},isMovedNodeIntoAddedNode(p){return s.has(p)&&!!ot.findAncestor(p,y=>r.has(y)||l.has(y),!0)},markAsAddedNode(p){u.delete(p),l.delete(p),r.add(p)},markAsPendingInsert(p){l.add(p)},isPendingInsert(p){return l.has(p)},isRemovedNode(p){return!!ot.findAncestor(p,y=>t.has(y),!0)},markAsRemovedNode(p){t.add(p)},isUselessNode(p){return e.has(p)},markAsUselessNode(p){e.add(p)},getPlaceholder(p,y){let m=y==="previous"?n:i;return p&&m.has(p)?m.get(p)||null:p},getSiblings(p){let y=p.addedNodes.length,m=this.getPlaceholder(p.previousSibling,"previous"),v=this.getPlaceholder(p.nextSibling,"next");if(y){let b=m,I=v,_=p.previousSibling!==m,A=p.nextSibling!==v;for(let x=0;x<y;x++){let N=p.addedNodes[x],w=p.addedNodes[y-x-1];this.isLatestNodeMutation(N,p)?(n.delete(N),p.previousSibling&&_&&(i.set(p.previousSibling,N),_=!1),b=N):n.set(N,b),this.isLatestNodeMutation(w,p)?(i.delete(w),p.nextSibling&&A&&(n.set(p.nextSibling,w),A=!1),I=w):i.set(w,I)}}else p.previousSibling&&p.previousSibling!==m&&i.set(p.previousSibling,v),p.nextSibling&&p.nextSibling!==v&&n.set(p.nextSibling,m);return{previousSibling:m,nextSibling:v}},setAttributeMutation(p,y){let m=o.get(p)||new Set;m.add(y),o.set(p,m)},isAttributeMutated(p,y){var m;return!!(!((m=o.get(p))===null||m===void 0)&&m.has(y))},setLatestNodeMutation(p,y){h.set(p,y)},isLatestNodeMutation(p,y){return h.get(p)===y},markAsFutureAddedNode(p){h.has(p)||u.add(p)},isTextMutated(p){return c.has(p)},setTextMutated(p){return c.add(p)}}}function Cy(s,r){for(let t=0;t<s.addedNodes.length;t++){let e=s.addedNodes[t];r.markAsFutureAddedNode(e),r.setLatestNodeMutation(e,s)}for(let t=0;t<s.removedNodes.length;t++){let e=s.removedNodes[t];r.setLatestNodeMutation(e,s)}}function Iy(s){let r=Ry(),t=[];for(let e of s)e.type==="childList"&&Cy(e,r);for(let e of s)switch(e.type){case"attributes":Oy(e,r,t);break;case"characterData":Py(e,r,t);break;case"childList":Dy(e,r,t);break}return t}function Py(s,r,t=[]){let e=s.target;return ot.isConnected(e)&&!r.isTextMutated(e)&&!r.isAddedNode(e)&&!My(e,"characterData")&&(r.setTextMutated(e),csArray.prototype.push.call(t,s)),t}function Oy(s,r,t=[]){let e=s.target,i=`${s.attributeNamespace}/${s.attributeName}`;return ot.isConnected(e)&&!r.isAttributeMutated(e,i)&&!r.isAddedNode(e)&&(r.setAttributeMutation(e,i),csArray.prototype.push.call(t,s)),t}var Ny=30;function My(s,r,t){let e=csSymbol.for(t?`${r}:${t}`:r),i=M.now(),n=s[e];return n&&i<n?!0:(s[e]=i+Ny,!1)}function Dy(s,r,t=[]){let e=ot.isConnected(s.target),i=!e&&r.isRemovedNode(s.target),n=e&&r.isAddedNode(s.target),o=r.getSiblings(s),c=o.nextSibling,l=o.previousSibling,h=null,u=()=>{if(h){let{childListType:m,movedNodes:v,...b}=h;csArray.prototype.push.call(t,m==="added"?b:{...b,movedNodes:v}),h=null}},p=m=>m===(h==null?void 0:h.childListType)?h:(u(),{childListType:m,type:"childList",target:s.target,addedNodes:[],removedNodes:[],movedNodes:[],previousSibling:l,nextSibling:c});if(e){for(let m=0;m<s.addedNodes.length;m++){let v=s.addedNodes[m];r.isLatestNodeMutation(v,s)?(r.isMovedNode(v)?(h=p("moved"),csArray.prototype.push.call(h.movedNodes,v)):(r.markAsAddedNode(v),n||(h=p("added"),csArray.prototype.push.call(h.addedNodes,v))),l=v):ot.isConnected(v)?r.isMovedNode(v)||r.markAsPendingInsert(v):r.markAsUselessNode(v)}u()}let y=Pi(s.removedNodes,m=>{if(ot.isConnected(m)){if(!i&&!r.isPendingInsert(m)){if(r.isDetachedMove(m))return!0;r.markAsMovedNode(m),r.isMovedNodeIntoAddedNode(m)&&(m[by]=!0)}return!1}return r.isUselessNode(m)?!1:(r.markAsRemovedNode(m),!0)});return y.length&&csArray.prototype.push.call(t,{type:"childList",removedNodes:y,addedNodes:[],movedNodes:[],target:s.target,nextSibling:c,previousSibling:l}),t}var cc={childList:!0,subtree:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,attributeOldValue:!0},Ee=(()=>{var s;class r{static setShadowRootFilter(e){csArray.prototype.push.call(s.shadowRootFilters,e)}static ah(e){if(s.shadowRootFilters.length>0&&Oi(e))for(let i=0;i<s.shadowRootFilters.length;i++){let n=s.shadowRootFilters[i];if(n(e))return}this.observedTargets.add(e),this.mutationObserver.observe(e,cc)}static disconnectShadowRoot(e){this.observedTargets.has(e)&&(this.observedTargets.delete(e),this.isRefreshing||(this.isRefreshing=!0,$t(()=>{this.isRefreshing=!1;let i=this.mutationObserver.takeRecords();i.length&&s.mutationCallback(i),this.mutationObserver.disconnect(),this.observedTargets.forEach(n=>{this.mutationObserver.observe(n,cc)})})))}static observe(e,i){csArray.prototype.push.call(this.callbacks,e),i&&csArray.prototype.push.call(this.shadowRootCallbacks,i),this.started?i&&csArray.prototype.forEach.call(Ps.getAllShadowHosts(document),n=>i(csElementshadowRoot.apply(n),"initial")):(this.mutationObserver=new csMutationObserver(this.mutationCallback),this.ah(document),this.shadowRootObserver=new ai(this.onShadowRoot),this.shadowRootObserver.observe(),this.started=!0,K(this.shadowRootObserver.shadowRoots,n=>{this.ah(n)}))}static disconnect(e,i){var n,o;this.callbacks=csArray.prototype.filter.call(this.callbacks,c=>c!==e),i&&(this.shadowRootCallbacks=csArray.prototype.filter.call(this.shadowRootCallbacks,c=>c!==i)),this.callbacks.length===0&&(this.callbacks=[],this.shadowRootCallbacks=[],s.shadowRootFilters=[],(n=this.shadowRootObserver)===null||n===void 0||n.disconnect(),(o=this.mutationObserver)===null||o===void 0||o.disconnect(),this.observedTargets.clear(),this.started=!1)}constructor(e,i){this.R=e,this.np=i;let n=qr(o=>e(o,this),!0);this.R=gs("DocumentMutationObserver:callback",o=>{K(o,c=>n.push(c))})}get shadowRoots(){var e,i;return(i=(e=s.shadowRootObserver)===null||e===void 0?void 0:e.shadowRoots)!==null&&i!==void 0?i:[]}takeRecords(){var e;let i=(e=s.mutationObserver)===null||e===void 0?void 0:e.takeRecords(),n=s.shadowRootObserver.takeRecords();return i!=null&&i.length&&n.length?Td(i,n):i!=null?i:n}observe(){s.observe(this.R,this.np)}disconnect(){s.disconnect(this.R,this.np)}}return s=r,r.callbacks=[],r.shadowRootCallbacks=[],r.started=!1,r.observedTargets=new Set,r.shadowRootFilters=[],r.mutationCallback=t=>{St.mutations.count.increase(t.length),csArray.prototype.forEach.call(s.callbacks,e=>e(t,s.mutationObserver))},r.onShadowRoot=(t,e)=>{K(s.shadowRootCallbacks,i=>i(t,e)),e!=="removed"?s.ah(t):s.disconnectShadowRoot(t)},r.isRefreshing=!1,st([P()],r.prototype,"observe",null),st([P()],r.prototype,"disconnect",null),r})(),ky=(()=>{class s{constructor(t){this.R=t,this.ch=!1,this.d_=e=>{e.sheet.ownerNode&&(e.type==="cssRuleInserted"?this.R({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssRuleDeleted"?this.R({type:e.type,target:e.sheet.ownerNode,index:e.index}):e.type==="cssRuleUpdated"?this.R({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssStyleSheetDisabled"&&this.R({type:e.type,target:e.sheet.ownerNode,disabled:e.disabled}))},this.R=e=>$t(()=>t(e)),this.op=new Jo(e=>$t(async()=>{await el(),this.d_(e)})),"adoptedStyleSheets"in Document.prototype&&(this.ap=new Ay(t))}observe(){var t;this.ch=!1,this.U=new Ee(e=>this.f_(e),(e,i)=>{i==="added"&&this.p_(e)}),this.U.observe(),this.op.observe(),(t=this.ap)===null||t===void 0||t.observe()}disconnect(){var t,e;(t=this.U)===null||t===void 0||t.disconnect(),this.op.disconnect(),(e=this.ap)===null||e===void 0||e.disconnect(),this.ch=!0}f_(t){if(this.ch)return;let e=Ty(t);for(let i=0;i<e.length;i++){let n=e[i];if(!n){at.error("processRawMutations: empty record");continue}switch(n.type){case"attributes":this.processAttributeChanged(n);break;case"characterData":this.processCharacterDataChanged(n);break;case"childList":this.processChildListChanged(n);break;default:at.error(`processRawMutations: unknown record type '${n.type}'`);break}}}processAttributeChanged(t){let e={type:"attributeChanged",target:t.target,attribute:t.attributeName,namespace:t.attributeNamespace,oldValue:t.oldValue,newValue:ot.getAttributeNS(t.target,t.attributeNamespace,t.attributeName)};this.R(e)}processCharacterDataChanged(t){let e={type:"characterDataChanged",target:t.target,oldValue:t.oldValue,newValue:t.target.data};this.R(e)}processChildListChanged(t){var e,i,n;if(!((e=t.movedNodes)===null||e===void 0)&&e.length){let o={type:"nodesMoved",target:t.target,nodes:t.movedNodes,previousSibling:t.previousSibling,nextSibling:t.nextSibling};this.R(o)}if(!((i=t.addedNodes)===null||i===void 0)&&i.length){let o={type:"nodesAdded",target:t.target,previousSibling:t.previousSibling,nextSibling:t.nextSibling,nodes:ei(t.addedNodes)};this.R(o)}if(!((n=t.removedNodes)===null||n===void 0)&&n.length){let o={type:"nodesRemoved",target:t.target,nodes:Ve(t.removedNodes,c=>c)};this.R(o)}}p_(t){let e={type:"shadowRootAttached",target:t.host,shadowRoot:t};this.R(e)}}return st([P()],s.prototype,"processAttributeChanged",null),st([P()],s.prototype,"processCharacterDataChanged",null),st([P()],s.prototype,"processChildListChanged",null),s})(),xy=(()=>{class s extends Fs{constructor(t){super(t),this.nodeType=4,this.data=t.data}}return s})(),Ly=(()=>{class s extends Fs{constructor(t){super(t),this.nodeType=8,this.data=t.data}}return s})(),Vy=(()=>{class s extends Fs{constructor(t){super(t),this.nodeType=10,this.name=t.name,this.publicId=t.publicId,this.systemId=t.systemId}}return s})(),Uy=(()=>{class s extends Fs{constructor(t){super(t),this.nodeType=9,this.baseURI=s.getBaseURI(t),this.children=[]}static getBaseURI(t){let e=t.baseURI;if(e==null){let i=t.getElementsByTagName("base");e=i.length!==0?i[0].href:t.URL}return e}}return s})(),jy=(()=>{class s extends Fs{constructor(t){super(t),this.nodeType=11,this.mode=t.mode,this.children=[]}}return s})(),Hy=(()=>{class s{constructor(t,e,i){var n;typeof t=="string"?(this.name=t,this.value=e,this.namespaceURI=i!=null?i:""):(this.name=t.name,this.value=t.value,this.namespaceURI=(n=t.namespaceURI)!==null&&n!==void 0?n:"")}static create(t){let e=t.attributes,i=new csArray(e.length);for(let n=0;n<i.length;n++){let o=e[n];i[n]=new s(o.name,o.value,o.namespaceURI),o.name==="href"&&No(t)&&(i[n].value=ih(t))}return i}}return s})(),lc={workTime:40,async:!0,initialDOM:!0};var Ti=csSymbol("InitialDom"),hc=csSymbol.for("ignoreNextSerialization");function ch(s){return s[hc]?(delete s[hc],!0):!1}function By(s=lc){return function(t,e){var i;(i=s.workTime)!==null&&i!==void 0||(s.workTime=lc.workTime);let n=gs("serialize:callback",y=>e(y)),o=new Ui,c=(y,m)=>{y.hasChildNodes()&&o.push({node:y,serializedNode:m});let v=y instanceof Element&&csElementshadowRoot.apply(y);if(v){let b=m.shadowRoot=bi(v);s.async&&s.initialDOM&&nt.setProperty(v,Ti,!0),c(v,b)}},l,h=!0,u=8,p=gs("work",()=>{var y;if(h)l=bi(t),s.async&&s.initialDOM&&nt.setProperty(t,Ti,!0),c(t,l),h=!1;else if(o.isEmpty)return;let m=zy(100);for(;!o.isEmpty;){if(s.async&&m.elapsed()>=s.workTime){--u<=0&&csSetTimeout(p);return}let{node:v,serializedNode:b}=o.pop(),I=(y=b.children)!==null&&y!==void 0?y:[];if(Bi(v))continue;let _=0;for(let A=csNodefirstChild.apply(v);A;A=csNodenextSibling.apply(A)){if(ch(A))continue;let x=bi(A);s.async&&s.initialDOM&&nt.setProperty(A,Ti,!0),I[_++]=x,c(A,x)}}s.async?csSetTimeout(()=>n(l)):e(l)});if(!s.async)s.workTime=1/0,p();else for(let y=0;y<u;y++)csSetTimeout(p,1)}}function Fy(s){let r=bi(s),t=r;if(Bi(s))return r;let e=0;for(let n=csNodefirstChild.apply(s);n;n=csNodenextSibling.apply(n))ch(n)||(t.children[e++]=no(n));let i=s.shadowRoot;return i&&(t.shadowRoot=no(i)),r}var no=Hs(Fy,"serializeSync");function bi(s){let r,t;switch(csNodenodeType.apply(s)){case 1:t=r=new Le(s),r.attributes=Gy(s);break;case 3:t=new nh(s);break;case 4:t=new xy(s);break;case 8:t=new Ly(s);break;case 10:t=new Vy(s);break;case 9:t=new Uy(s);break;case 11:t=new jy(s);break;default:throw new Error("Node type not supported: "+csNodenodeType.apply(s))}return t}function $y(){Ti=csSymbol("InitialDom")}function zy(s){if(s<1)throw new Error("Precision should be >= 1");let r=0,t=M.elapsed();return{started:t,elapsed(){return++r%s===0&&(t=M.elapsed()),t-this.started}}}function Gy(s){return Bi(s)?[]:Hy.create(s)}var Qo=(()=>{class s{constructor(t){this.type="asyncEvent",this.lh=!1,t&&t(e=>this.resolve(e))}resolve(t){if(this.lh)throw new Error("AsyncEvent already resolve.");t.timestamp==null&&(t={...t,timestamp:this.timestamp}),this.ni=t,this.lh=!0,this.R&&this.R(this.ni)}complete(t){this.lh&&t(this.ni),this.R=t}wait(){return new Promise(t=>this.complete(t))}}return s})(),ne=(()=>{class s{constructor(){this.Pt=[],this.isStarted=!1}async produceEvent(t){var e;this.isStarted&&(t.timestamp=(e=t.timestamp)!==null&&e!==void 0?e:M.now(),t.timestamp==null&&(t.timestamp=M.now()),csArray.prototype.forEach.call(this.Pt,i=>i(t)))}onStop(){}start(){this.isStarted||(this.isStarted=!0,this.onStart())}stop(){this.isStarted&&(this.isStarted=!1,this.onStop(),this.Pt=[])}stopForInactivity(){this.isStarted&&(this.isStarted=!1,this.onStop())}subscribe(t){return csArray.prototype.push.call(this.Pt,t),()=>{let e=csArray.prototype.indexOf.call(this.Pt,t);csArray.prototype.splice.call(this.Pt,e,1)}}}return s})(),qy=By(),Wy=(()=>{class s extends ne{constructor(){super(...arguments),this.Ta=!1}onStart(){this.Ta=!0,this.R=ly(this.g_,this),this.G=new ky(this.R),this.G.observe();let t=St.mutations.initialDOM.asyncMeasure(),e=()=>{this.Ta=!1,$y(),t()};this.produceEvent(new Qo(i=>qy(document,n=>{e(),i({type:"DomEvent",domEvent:"initialDOM",initialDOM:n})})))}onStop(){var t,e;this.Ta=!1,(t=this.R)===null||t===void 0||t.cancel(),(e=this.G)===null||e===void 0||e.disconnect()}Zt(t,e){let i={type:"DomEvent",domEvent:e.type,target:0,targetProps:{}};return"target"in e&&(i.target=q(e.target),i.targetProps=nt.getProperties(e.target)),[e,i]}g_(t){if(!this.m_(t))switch(t.type){case"attributeChanged":{let[e,i]=this.Zt(t.type,t);i.attribute=e.attribute,i.isSvg=ni(e.target),i.namespace=e.namespace,i.newValue=e.newValue,i.oldValue=e.oldValue,i.localName=Si(e.target),i.linkRel=nl(e.target)?e.target.rel:null,i.parentLocalName=e.target.parentElement?Si(e.target.parentElement):void 0,i.localName==="input"&&(i.inputType=e.target.getAttribute("type")),this.produceEvent(i)}break;case"characterDataChanged":{let[e,i]=this.Zt(t.type,t);i.newValue=e.newValue,i.oldValue=e.oldValue,i.targetNodeType=csNodenodeType.apply(e.target),i.parentLocalName=e.target.parentElement?Si(e.target.parentElement):null,i.parentProps=e.target.parentElement?nt.getProperties(e.target.parentElement):void 0,this.produceEvent(i)}break;case"nodesAdded":{let[e,i]=this.Zt(t.type,t);i.targetLocalName=dt(e.target)?Si(e.target):null,i.nextSibling=e.nextSibling?q(e.nextSibling):null,i.previousSibling=e.previousSibling?q(e.previousSibling):null,St.mutations.serializedMutations.measure(()=>{i.nodes=Ve(e.nodes,no)}),this.produceEvent(i);break}case"nodesMoved":{let[e,i]=this.Zt(t.type,t);i.previousSibling=e.previousSibling?q(e.previousSibling):null,i.nextSibling=e.nextSibling?q(e.nextSibling):null,i.nodesIds=Ve(e.nodes,q),this.produceEvent(i);break}case"nodesRemoved":{let[e,i]=this.Zt(t.type,t);i.nodesIds=Ve(e.nodes,q),this.produceEvent(i);break}case"shadowRootAttached":{let[e,i]=this.Zt(t.type,t);i.shadowRoot=bi(e.shadowRoot),this.produceEvent(i);break}case"cssRuleInserted":{let[e,i]=this.Zt(t.type,t);i.index=e.index,i.rule=e.rule,this.produceEvent(i);break}case"cssRuleDeleted":{let[e,i]=this.Zt(t.type,t);i.index=e.index,this.produceEvent(i);break}case"cssRuleUpdated":{let[e,i]=this.Zt(t.type,t);i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"cssStyleSheetDisabled":{let[e,i]=this.Zt(t.type,t);i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetRegistered":{let[e,i]=this.Zt(t.type,t);i.sheetId=e.sheetId,i.cssRules=e.cssRules,i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetsSet":{let[e,i]=this.Zt(t.type,t);i.sheetsIds=e.sheetsIds,this.produceEvent(i);break}case"adoptedStyleSheetRuleInserted":{let[e,i]=this.Zt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleDeleted":{let[e,i]=this.Zt(t.type,t);i.sheetId=e.sheetId,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleUpdated":{let[e,i]=this.Zt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetDisabled":{let[e,i]=this.Zt(t.type,t);i.sheetId=e.sheetId,i.disabled=e.disabled,this.produceEvent(i);break}}}ba(t){return this.Ta&&!nt.getProperty(t,Ti)}m_(t){switch(t.type){case"nodesAdded":case"nodesMoved":case"nodesRemoved":case"shadowRootAttached":return this.ba(t.target)||D.isMaskedElement(t.target)||D.isMaskedElementChild(t.target);case"characterDataChanged":{let e=t.target.parentElement;return e!==null&&(this.ba(e)||D.isMaskedElement(e)||D.isMaskedElementChild(e))}case"attributeChanged":return this.ba(t.target)||D.isMaskedElementChild(t.target)||D.isMaskedAttribute(t.target,t.attribute);case"cssRuleInserted":case"cssRuleDeleted":case"cssRuleUpdated":case"cssStyleSheetDisabled":return this.ba(t.target)||D.isMaskedElementChild(t.target);default:return!1}}}return s})(),Ls=(()=>{let s;return function(r){function t(i){return i.type==="DomEvent"}r.isDOMEvent=t;function e(i){return i.domEvent==="attributeChanged"}r.isAttributeChangedEvent=e}(s||(s={})),s})(),ci=(()=>{class s{constructor(){this.Pt=[]}start(){}stop(){this.Pt.length=0,this.Pt=[]}pushEvent(t){if(s.pendingEvents++,this.isListening(t)){let e=this.Pt;csSetTimeout(()=>{let n=gs("Processor:processEvent",o=>this.processEvent(o))(t);n!=null&&csArray.prototype.forEach.call(e,o=>o(n)),s.pendingEvents--})}else csSetTimeout(()=>{csArray.prototype.forEach.call(this.Pt,e=>e(t))})}subscribe(t){return csArray.prototype.push.call(this.Pt,t),()=>{this.Pt=csArray.prototype.filter.call(this.Pt,e=>e!==t)}}emitEvent(t){$t(()=>csArray.prototype.forEach.call(this.Pt,e=>e(t)))}}return s.pendingEvents=0,s})(),Yy=(()=>{class s extends ci{isListening(t){return t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE"||Ls.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded")}processEvent(t){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return this.processFastDOM(t),t;let e=0,i=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let n of i){if(n instanceof Le){let c=D.getMaskedAttributeDetails(n);n.attributes=this.Ra(n,c)}if(D.getMaskedElementDetails(n).state===D.MaskedElementState.Child){if(t.domEvent==="initialDOM")return null;t.nodes=csArray.prototype.filter.call(t.nodes,c=>c!==n);continue}nt.traverse(n,c=>{if(c instanceof Le){let l=D.getMaskedAttributeDetails(c);c.attributes=this.Ra(c,l);let h=D.getMaskedElementDetails(c);h.state===D.MaskedElementState.Parent&&(this.Ca(c,h),e++)}})}return e>0&&G.counters.sensitiveElements.count("masked-elements",e),t}processFastDOM(t){var e;let{MaskedElementState:i}=D,n=t.type==="DOM_PATCH"?t.diff:t.state,o=t.state;for(let c in n){let l=n[c],h=o[c],u=D.getMaskedElementDetails(h);if(u.state===i.Child){delete n[c];continue}else if(h.type!==1)continue;let p=D.getMaskedAttributeDetails(h);for(let y of(e=p.attributes)!==null&&e!==void 0?e:[])l.attributes&&delete l.attributes[y];u.state===i.Parent&&this.Ca(l,u)}}Ra(t,e){return e.attributes.length===0?t.attributes:csArray.prototype.filter.call(t.attributes,i=>csArray.prototype.indexOf.call(e.attributes,i.name)===-1)}Ca(t,e){var i;let n=`width: ${e.width}px !important; height: ${e.height}px !important;`;"nodeType"in t?(t.children=[],t.shadowRoot=void 0,csArray.prototype.push.call(t.attributes,{name:"style",value:n,namespaceURI:""}),Le.getAttribute(t,"data-cs-mask")||csArray.prototype.push.call(t.attributes,{name:"data-cs-mask",value:"",namespaceURI:""})):((i=t.attributes)!==null&&i!==void 0||(t.attributes={}),delete t.firstChild,delete t.shadowRoot,t.attributes.style=n,t.attributes["data-cs-mask"]||(t.attributes["data-cs-mask"]=""))}}return me([Nt("MaskedElementProcessor.processEvent")],s.prototype,"processEvent",null),s})(),fe=(()=>{let s;return function(r){r.ANONYMIZED_TEXT_STATUS_PROP="anonymizationStatus",r.WHITELISTED_STATUS="whitelisted";function t(n){return nt.getProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP)===r.WHITELISTED_STATUS}r.isWhitelistedElement=t;function e(n){nt.setProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP,r.WHITELISTED_STATUS)}r.whitelistElement=e;function i(n){nt.setProperty(n,r.ANONYMIZED_TEXT_STATUS_PROP,void 0)}r.removeWhitelistElement=i}(s||(s={})),s})(),Xy=/[\u4E00-\u9FFF]|[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]/g,Ky="\uFF41",Jy=/[^\s]/g,Qy="a";function _n(s){let r=csString.prototype.replace.call(s,Xy,Ky);return csString.prototype.replace.call(r,Jy,Qy)}function Zy(s,r){let t=r==="number"?"0":"\u2022";return csString.prototype.replace.call(s,/\S/g,t)}var tE=(()=>{class s{constructor(t,e,i,n=null,o=!1){this.fs=t,this.kn=e,this.D=i,this.Ia=n,this.y_=o,this.xn=Vo(this.kn)}sanitize(t,e){return nt.traverse(t,(i,n)=>{if(i.anonymized=this.fs,i.nodeType===us.TEXT_NODE){let o=i,{anonymizedValue:c,withAnonymization:l}=this.getAnonymizedValue(o.data,n?n==null?void 0:n.localName:e==null?void 0:e.targetLocalName,n?nt.getProperties(n):e==null?void 0:e.targetProps);i.anonymized=l,o.data=c;return}if(Le.isElement(i))return this.E_(i);if(i.nodeType===us.CDATA_SECTION_NODE){let o=i;o.data=this.fs?_n(o.data):this.D.checkAndAnonymizePII(o.data,this.Ia);return}}),t}setAnonymization(t){this.fs=t}getAnonymizedValue(t,e,i){if(e==="style")return{anonymizedValue:t,withAnonymization:!1};let n=(i==null?void 0:i[fe.ANONYMIZED_TEXT_STATUS_PROP])===fe.WHITELISTED_STATUS;return this.fs&&!n?{anonymizedValue:_n(t),withAnonymization:!0}:{anonymizedValue:this.D.checkAndAnonymizePII(t,this.Ia),withAnonymization:!1}}E_(t){let e=Us(t.attributes,n=>n.name==="type"),i=e==null?void 0:e.value;t.attributes=csArray.prototype.map.call(t.attributes,n=>(n.anonymized=this.fs,n.value=this.getAnonymizedAttributeValue(t.namespaceURI,t.localName,n.name,n.value,i),n))}getAnonymizedAttributeValue(t,e,i,n,o){if(t==="http://www.w3.org/2000/svg"||t==="svg"||this.v_(e,i,o))return n;if(tp(i))return ep(e,i,n)?this.D.anonymizePII(n):n;let c=this.y_&&i==="placeholder";return this.fs&&(sp(e,i,o)||c)?_n(n):this.fs?"":this.D.checkAndAnonymizePII(n,null)}v_(t,e,i){return Zf(t,e,i)||this.xn.has(e)}}return s})(),uc=(()=>{class s{static create(t,e){if(!s.isSupported())throw new Error("IntersectionObserver is not supported");if(e&&e.delay&&e.delay<100)throw new Error("Visibility delay should be > 100ms");return e!=null&&e.trackVisibility&&(t=s.S_(t)),new csIntersectionObserver(t,e)}static isSupported(){return!!window.csIntersectionObserver&&!!window.IntersectionObserverEntry}static S_(t){return(e,i)=>t(Ve(e,eE),i)}}return s})();function eE(s){return s.isVisible||!ot.isVisibleInViewportInForeground(s.target)?s:{boundingClientRect:s.boundingClientRect,intersectionRatio:s.intersectionRatio,intersectionRect:s.intersectionRect,isIntersecting:s.isIntersecting,rootBounds:s.rootBounds,target:s.target,time:s.time,isVisible:!0}}var oo=()=>(s,r,t)=>{t.value=sE(t.value)};function sE(s){let r=csSymbol("oncePerTickSymbol"),t=null,e={},i=function(){var n;let o=(n=this)!==null&&n!==void 0?n:e;if(t=arguments,o[r])return;o[r]=!0,Co(()=>{o[r]=!1,s.apply(o,t)})};return i.oncePerTickSymbol=r,i}oo.isScheduled=(s,r)=>{let t=r.oncePerTickSymbol;return s[t]};var iE=(()=>{class s{constructor(t){this.R=t,this.oi=new Map,this.cp=e=>{let i=e.target;if(this.oi.has(i))return!0;let n=!1;return this.oi.forEach((o,c)=>{n||!this.oi.get(c).subtree||(n=c.contains(i))}),n},St.general.nbOfMutationObservers.increase(),this.U=new csMutationObserver(e=>{oo.isScheduled(this,this.garbageCollect)&&(e=Pi(e,this.cp)),e.length&&$t(()=>t(e,this))})}disconnect(){St.general.nbOfMutationObservers.decrease(),this.U.disconnect(),this.oi=new Map}takeRecords(){return this.U.takeRecords()}observe(t,e){return St.mutations.elementMutationObserved.increase(),this.oi.set(t,e),this.U.observe(t,e)}unobserve(t){this.oi.has(t)&&(St.mutations.elementMutationObserved.decrease(),this.oi.delete(t),this.garbageCollect())}garbageCollect(){St.mutations.unobserveGarbageCollection.measure(()=>{let t=Pi(this.takeRecords(),this.cp);t.length&&this.R(t,this),this.U.disconnect(),this.oi.forEach((e,i)=>this.U.observe(i,e))})}}return st([oo()],s.prototype,"garbageCollect",null),s})(),rE=(()=>{class s{constructor(t){this.R=t,this.Ns=new Set}onMutations(t){if(Ii(t,e=>{var i;return!!(!((i=e.removedNodes)===null||i===void 0)&&i.length)}))for(let e of this.Ns.values())ot.isConnected(e)||(this.Ns.delete(e),this.R(e))}observe(t){this.G||(this.G=new Ee(e=>csSetTimeout(()=>this.onMutations(e))),this.G.observe()),this.Ns.add(t)}disconnect(){var t;(t=this.G)===null||t===void 0||t.disconnect(),this.Ns.clear(),this.G=void 0}}return st([P("NodeDisconnectedObserver.onMutations")],s.prototype,"onMutations",null),s})(),nE=300,ds=(()=>{class s{constructor(t){this.Pa=new Set,this.__=new rE(e=>this.lp(e)),this.X=!1,this.Ot=t?{...dc,...t}:dc}stop(){var t,e;this.X=!1,(t=this.Ln)===null||t===void 0||t.disconnect(),(e=this.U)===null||e===void 0||e.disconnect()}start(t){if(this.X)throw new Error("VisibilityObserver is already started");this.R=gs("VisibilityObserver:callback",(i,n)=>t(i,n));let e={root:null,rootMargin:"0px",threshold:.5,trackVisibility:!0,delay:nE};this.Ln=uc.create(i=>this.handleIntersection(i),e),this.U=new iE(i=>csSetTimeout(()=>{K(i,n=>this.lp(n.target))})),this.hh(),this.X=!0}observe(t){if(!this.X)throw new Error("Observer is stopped.");this.Ot.reobserve===!1&&t[this.uh]||(St.visibilityObserver.nbElements.increase(),t[this.uh]=!0,this.watchIntersection(t))}hh(){this.Oa=csSymbol("isVisible"),this.uh=csSymbol("ObservedElement"),this.fh=csSymbol("LinkedElement"),this.hp=csSymbol("Tracked")}lp(t){this.Pa.add(t);for(let e of this.w_(t))this.Pa.add(e);this.recheckCssVisibilityAll()}recheckCssVisibilityAll(){K(this.Pa.keys(),t=>{!t.isConnected||ot.areAncestorsHiddenByCSS(t)||t[this.uh]&&this.watchIntersection(t)}),this.Pa.clear()}watchIntersection(t){this.U.unobserve(t),this.Ln.unobserve(t);let e=ot.getTopAncestorHiddenByCSS(t);e?(e!==t&&(this.up(e,t),this.watchMutation(e)),this.watchMutation(t)):this.Ln.observe(t)}watchMutation(t,e=!0){e&&delete t[this.Oa],this.Ln.unobserve(t);let i={attributeFilter:["style","class","hidden"]};this.U.observe(t,i)}handleIntersection(t){for(let e of t){let i=e.target;if(!e.isVisible){ot.isVisibleInDocument(i)||this.A_(i);continue}let n=this.Ot.allowSameMatch||!e.target[this.Oa];e.target[this.Oa]=!0,n&&!this.Ot.delay&&this.onVisibilityChanged(e.target,Qs.VisibleInViewPort)}this.Ot.delay&&csSetTimeout(()=>{for(let e of t){let i=e.isIntersecting&&e.isVisible;e.target[this.Oa]&&i&&this.onVisibilityChanged(e.target,Qs.VisibleInViewPort)}},this.Ot.delay)}A_(t){St.visibilityObserver.hiddenElements.increase();let e=ot.getTopElement(t);this.watchMutation(t),e&&(this.__.observe(e),this.up(e,t),this.watchMutation(e,!1))}up(t,e){var i;(t[this.fh]=(i=t[this.fh])!==null&&i!==void 0?i:new Set).add(e)}w_(t){var e,i;let n=[],o=(i=(e=t[this.fh])===null||e===void 0?void 0:e.values())!==null&&i!==void 0?i:[];return K(o,c=>csArray.prototype.push.call(n,c)),n}onVisibilityChanged(t,e){if(e===Qs.VisibleInViewPort&&this.Ot.trackOnce){if(this.Ln.unobserve(t),this.U.unobserve(t),t[this.hp])return;t[this.hp]=!0}this.R(t,e)}static isSupported(){return uc.isSupported()}}return st([P()],s.prototype,"observe",null),st([Bs({wait:50}),P(),Nt("recheckCssVisibilityAll")],s.prototype,"recheckCssVisibilityAll",null),st([P()],s.prototype,"watchIntersection",null),st([P()],s.prototype,"watchMutation",null),st([P(),Nt("VisibilityObserver.handleIntersection")],s.prototype,"handleIntersection",null),st([P()],s.prototype,"onVisibilityChanged",null),s})(),Qs=(()=>{let s;return function(r){r.VisibleInViewPort="VisibleInViewPort",r.HiddenByAnother="HiddenByAnother",r.Hidden="Hidden"}(s||(s={})),s})(),dc={delay:1e3,trackOnce:!0,reobserve:!1},oE=(()=>{class s{constructor(t){this.R=t,this.Ms=new qi,this.T_=e=>{$t(()=>{for(let i of e)i.type==="childList"&&K(i.addedNodes,n=>{qt(n,NodeFilter.SHOW_TEXT).visitAll(c=>{this.Ms.has(c)||(this.Ms.add(c),this.R(c))})})})},this.Vn=new Ee(this.T_)}observe(){this.Vn.observe(),qt(document,NodeFilter.SHOW_TEXT).visitAll(e=>{this.Ms.add(e),this.R(e)})}disconnect(){this.Ms.clear(),this.Vn.disconnect()}}return s})(),lh=(()=>{let s;return function(r){r.ENCRYPTED_NODE_PROP="encrypted";function t(n){return nt.getProperty(n,r.ENCRYPTED_NODE_PROP)===!0}r.shouldEncrypt=t;function e(n){nt.setProperty(n,r.ENCRYPTED_NODE_PROP,!0)}r.markEncryptedNode=e;function i(n){nt.setProperty(n,r.ENCRYPTED_NODE_PROP,void 0)}r.unmarkEncryptedNode=i}(s||(s={})),s})(),xe=(()=>{let s;return function(r){r.EDITABLE_NODE_PROP="editableNode";function t(n){var o;return"nodeType"in n?nt.getProperty(n,r.EDITABLE_NODE_PROP)===!0:((o=n.metadata)===null||o===void 0?void 0:o[r.EDITABLE_NODE_PROP])===!0}r.isEditableNode=t;function e(n){nt.setProperty(n,r.EDITABLE_NODE_PROP,!0)}r.markEditableNode=e;function i(n){nt.setProperty(n,r.EDITABLE_NODE_PROP,void 0)}r.unmarkEditableNode=i}(s||(s={})),s})(),aE=(()=>{class s extends ne{constructor(){super(),this.ai=new Set,this.ph=new Set,this.gh=new Set,this.fs=!1,this.kt=new ds,this.dp=new oE(t=>{let e=ot.getParentElement(t);!e||!e.isConnected||D.isMaskedElement(e)||D.isMaskedElementChild(e)||lh.shouldEncrypt(e)||xe.isEditableNode(e)||Hi(e)||Bi(e)||Br(e)||jr(t.data)||(this.ai.add(e),this.watchElements())})}onStart(){ds.isSupported()&&(this.kt.start((t,e)=>this.onVisibilityChanged(t,e)),this.dp.observe())}onStop(){ds.isSupported()&&(this.kt.stop(),this.dp.disconnect(),this.ai.clear(),this.ph.clear(),this.gh.clear())}setAnonymization(t){this.fs=t}watchElements(){if(!this.isStarted)return;let t=this.ai;this.ai=new Set;for(let e of je(t))!e.isConnected||this.ph.has(e)||(this.ph.add(e),Ii(csNodechildNodes.apply(e),i=>csNodenodeType.apply(i)===3)&&this.kt.observe(e))}onVisibilityChanged(t,e){e!==Qs.VisibleInViewPort||this.fs&&!fe.isWhitelistedElement(t)||K(csNodechildNodes.apply(t),i=>{if(csNodenodeType.apply(i)!==3)return;let n=i.data;this.gh.has(n)||(this.gh.add(n),this.produceEvent({type:"TextVisibility",text:n,state:e}))})}}return me([P(),Bs({wait:50,mode:"trailing"})],s.prototype,"watchElements",null),me([P()],s.prototype,"onVisibilityChanged",null),s})(),fc=(()=>{let s;return function(r){function t(e){return e.type==="TextVisibility"}r.isTextVisibilityEvent=t}(s||(s={})),s})();function pc(s){var r;let t=(r=s.attributes)===null||r===void 0?void 0:r.type;if(t!=null)return csString.prototype.trim.call(csString.prototype.toLowerCase.call(t))}var cE=(()=>{class s extends ci{constructor(t,e,i=new oi,n=null,o=!1){super(),this.D=i,this.Ia=n,this.captureAnonymizedPlaceholders=o,this.wr=new tE(t,e,i,n,o)}setAnonymization(t){this.wr.setAnonymization(t)}isListening(t){return t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE"||fc.isTextVisibilityEvent(t)||Ls.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||Ls.isAttributeChangedEvent(t)&&typeof t.newValue=="string"||t.domEvent==="characterDataChanged")}processEvent(t){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return this.b_(t);if(fc.isTextVisibilityEvent(t))return t.text=this.D.checkAndAnonymizePII(t.text,this.Ia),t;switch(t.domEvent){case"initialDOM":case"nodesAdded":this.mh(t);break;case"attributeChanged":this.R_(t);break;case"characterDataChanged":this.C_(t);break}return t}b_(t){var e,i;let n=t.type==="DOM_PATCH"?t.diff:t.state,o=t.state;for(let c in n){let l=o[c],h=o[l.parent];switch(l.type){case us.TEXT_NODE:case us.COMMENT_NODE:{let u=n[c];if(X(u.data)){if(h.localName==="script"){u.data="";continue}}else continue;let{anonymizedValue:p,withAnonymization:y}=this.wr.getAnonymizedValue((e=u.data)!==null&&e!==void 0?e:"",h.localName,h.metadata);u.anonymized=y,u.data=p;break}case us.ELEMENT_NODE:{let u=n[c];if(u.attributes)for(let p in u.attributes){let y=u.attributes[p],m=pc(l);u.attributes[p]=this.wr.getAnonymizedAttributeValue(l.namespaceURI,l.localName,p,y,m)}!((i=u.state)===null||i===void 0)&&i.value&&(u.state.value=Zy(u.state.value,pc(l)));break}}}return t}mh(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes,i;t.domEvent==="nodesAdded"&&(i={targetLocalName:t.targetLocalName,targetProps:t.targetProps});for(let n of e)this.wr.sanitize(n,i)}R_(t){if(!t.isSvg&&t.newValue){if(t.localName===null){t.newValue="";return}t.newValue=this.wr.getAnonymizedAttributeValue(t.namespace,t.localName,t.attribute,t.newValue,t.inputType)}}C_(t){t.newValue=this.wr.getAnonymizedValue(t.newValue,t.parentLocalName,t.parentProps).anonymizedValue}}return me([Nt("AnonymizedTextProcessor.processEvent")],s.prototype,"processEvent",null),s})();var et=(()=>{let s;return function(r){r[r.ELEMENT_NODE=1]="ELEMENT_NODE",r[r.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",r[r.TEXT_NODE=3]="TEXT_NODE",r[r.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",r[r.COMMENT_NODE=8]="COMMENT_NODE",r[r.DOCUMENT_NODE=9]="DOCUMENT_NODE",r[r.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",r[r.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE",r[r.CSS_STYLESHEET_NODE=50]="CSS_STYLESHEET_NODE"}(s||(s={})),s})();function Zo(s){let r=csString.prototype.trim.call(s);if(s==="")return[];let[t,e]=lE(r);return e?(ri(t,",")||(e=hE(e)),[gc(t),...Zo(e)]):[gc(t)]}function lE(s){return csString.prototype.split.call(s,/\s(.+)/)}function gc(s){return csString.prototype.split.call(s,/,$/)[0]}function hE(s){return csString.prototype.split.call(s,/,(.+)/)[1]||""}var uE=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\)(?!\\))/g;function dE(s,r){return csString.prototype.replace.call(s,uE,(...e)=>{let i=e[3]||e[4],n=e[9]||e[10]||e[11],o=pE((i||n).trim()),c=i?"@import ":"",l=r(o)||o;return`${c}url(${fE(l)})`})}function fE(s){return csString.prototype.indexOf.call(s,'"')===-1?`"${s}"`:csString.prototype.indexOf.call(s,"'")===-1?`'${s}'`:s}function Ri(s){let r=new Set;return dE(s,t=>{var e,i;return r.add((i=(e=csString.prototype.match.call(t,/^["|'](.*)?["|']$/))===null||e===void 0?void 0:e[1])!==null&&i!==void 0?i:t),t}),je(r)}function pE(s){let r=/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g;return csString.prototype.replace.call(s,r,(t,e,i,n)=>{if(e==="\\")return csString.prototype.slice.call(t,1);if(n)return n;let o=parseInt(i,16);return 55296<=o&&o<=57343||o===0||o>1114111?"\uFFFD":csString.fromCodePoint(o)})}var mc=(()=>{class s{static async toStaticResourceEvent(t,e,i){let n=await s.O_(t);if(!n)return null;let o=await s.gp(n),c=se(t)?void 0:t,l={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:o,data:n}};return c&&(l.originalResourceName=c),l}static async toCSSStaticResourceEvent(t,e,i,n){let o=await s.N_(t,n),c=ge(t),l=o.get(c);if(!l)return null;let h={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:l.hash,data:l.data}};return o.delete(c),o.size&&(h.nestedResources=[],o.forEach(u=>{u&&csArray.prototype.push.call(h.nestedResources,{hash:u.hash,data:u.data})})),h}static async gp(t){let e=await t.arrayBuffer(),i=await crypto.subtle.digest(this.mp,e);return Fn(i)}static async O_(t){let e;if(!se(t))e=await(await window.fetch(t)).blob();else{let i=Ia(t);if(!i)return null;e=i}return e}static async N_(t,e){let i=new Map,n=ge(t),c=[{resourceRawPath:t,resourceAbsolutePath:n}];for(;c.length>0;){let l=csArray.prototype.pop.call(c);if(!e&&l.resourceAbsolutePath!==null&&!se(l.resourceAbsolutePath)){i.set(l.resourceAbsolutePath,null);continue}if(i.get(l.resourceAbsolutePath)===void 0)try{if(l.resourceRawPath===null||csString.prototype.indexOf.call(l.resourceRawPath,".css")>0){if(!l.data){let m=await fetch(l.resourceAbsolutePath);l.data=await m.text()}l.nestedResources||(l.nestedResources=Ri(l.data));let p=!1,y=!1;for(let m of l.nestedResources){let v=se(m)?m:l.resourceAbsolutePath?Tf(m,l.resourceAbsolutePath):ge(m),b=i.get(v);if(b!==void 0){if(b!==null){let _=s.M_(b,m);l.data=lt.stringReplaceAll(l.data,m,_)}continue}Us(c,_=>_.resourceAbsolutePath===v)!==void 0||(p=!0,y||(csArray.prototype.push.call(c,l),y=!0),csArray.prototype.push.call(c,{resourceRawPath:m,resourceAbsolutePath:v}))}if(!p){let m=await s.D_(l.data);i.set(l.resourceAbsolutePath,{hash:m.hash,data:m.data})}}else{let p;if(!se(l.resourceAbsolutePath))p=await(await fetch(l.resourceAbsolutePath)).blob();else{let m=Ia(l.resourceAbsolutePath);if(!m){i.set(l.resourceAbsolutePath,null);continue}p=m}let y=await s.gp(p);i.set(l.resourceAbsolutePath,{hash:y,data:p})}}catch{i.set(l.resourceAbsolutePath,null)}}return i}static M_(t,e){let i=`cs://resources/${t.hash}`;return se(e)||(i+=`?${s.Eh}=${e}`),i}static async D_(t){let e=new Blob([t],{type:"text/css"}),i=await e.arrayBuffer(),n=await crypto.subtle.digest(s.mp,i);return{data:e,hash:Fn(n)}}}return s.mp="SHA-256",s.Eh="original-resource-name",s})(),ao=(()=>{class s extends ci{get busy(){return this.vh>0}constructor(){super(),this.k_="cssrm://",this.x_=1,this.ps=!1,this.vh=0}isListening(t){if(s.isSupported()){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return!0;if(!Ls.isDOMEvent(t))return!1}else return!1;return t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged"}processEvent(t){if(t.type!=="DomEvent")return this.L_(t);switch(t.domEvent){case"initialDOM":case"nodesAdded":this.V_(t);break;case"attributeChanged":this.U_(t);break;case"characterDataChanged":this.j_(t);break}return t}disableOnlineAssets(){this.ps=!1}enableOnlineAssets(){this.ps=!0}isOnlineAssetsActivated(){return this.ps}L_(t){var e;let i=t.type==="DOM_PATCH"?t.diff:t.state;for(let n in i){let o=i[n],c=t.state[n],l=t.state[c.parent];switch(c.type){case et.TEXT_NODE:this.yp(o,l==null?void 0:l.localName);break;case et.CSS_STYLESHEET_NODE:{if(o=o,o.cssRules)for(let h in o.cssRules){let u=o.cssRules[h],p=this.Ar(u);p!==null&&(o.cssRules[h]=p)}break}case et.ELEMENT_NODE:{o=o;let h=o.attributes;if(!h)continue;if(h.style&&(h.style=this.Ar(h.style)),(this.Ep(c.localName)||this.vp(c.localName,l==null?void 0:l.localName))&&("src"in h&&(h.src=this.Sh(h.src)),"srcset"in h&&(h.srcset=this._h(h.srcset))),this.ps&&c.localName==="link"&&(!((e=h.href)===null||e===void 0)&&e.length)&&h.rel==="stylesheet"){let u=this.Ui(ge(h.href),!0);h["data-cs-original-href"]=h.href,h.href=u}}}}return t}V_(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let i of e)nt.traverse(i,(n,o)=>{if(n.nodeType===us.TEXT_NODE&&o){this.yp(n,o.localName);return}if(!Le.isElement(n))return;let c=Le.getAttribute(n,"style");if(c!=null&&c.value&&(c.value=this.Ar(c.value)),this.Ep(n.localName)||this.vp(n.localName,o==null?void 0:o.localName)){let l=Le.getAttribute(n,"src");l!=null&&l.value&&(l.value=this.Sh(l.value));let h=Le.getAttribute(n,"srcset");if(h){h.value=this._h(h.value);return}}if(this.H_(n)&&this.ps){let l=Us(n.attributes,u=>u.name==="href");if(!l||!l.value)return;let h=this.Ui(ge(l.value),!0);csArray.prototype.push.call(n.attributes,{name:"data-cs-original-href",namespaceURI:"",value:l.value}),l.value=h}})}yp(t,e){if(!t||e!=="style")return;let i=this.Ar(t.data);i!==null&&(t.data=i)}j_(t){if(t.parentLocalName!=="style"||!t.newValue)return;let e=this.Ar(t.newValue);e!==null&&(t.newValue=e)}U_(t){if(!t.newValue||t.newValue===t.oldValue)return;let e=t.attribute==="src",i=t.attribute==="srcset";if(t.attribute==="style"){t.newValue=this.Ar(t.newValue);return}if(!e&&!i)return;let o=t.localName==="img",c=t.localName==="source"&&t.parentLocalName&&t.parentLocalName==="picture";!o&&!c||(e&&(t.newValue=this.Sh(t.newValue)),i&&(t.newValue=this._h(t.newValue)))}Sh(t){return se(t)||this.ps?this.Ui(t,!1,M.now()):t}_h(t){if(!this.ps)return t;let e=t,i=Zo(t);for(let n of i){let o=this.Ui(ge(n),!1);e=csString.prototype.replace.call(e,n,o)}return e}Ar(t){let e=Ri(t),i=t,n=M.now();for(let o of e){let c=se(o);if(!(c||this.ps)||this.B_(o))continue;let l=Kf(o),h=o;c?h=this.Ui(o,!1,n):this.ps&&(l?h=this.Ui(o,!0,n):h=this.Ui(ge(o),!1,n)),i=csString.prototype.replace.call(i,o,h)}return i}Ui(t,e,i=M.now()){let n=this.x_++;this.vh++;let o=e?mc.toCSSStaticResourceEvent:mc.toStaticResourceEvent,c=new Qo(async l=>{try{let h=await o(t,n,i,this.ps);l(h||{type:"warning",message:`Failed to process static resource: ${t}`})}catch(h){l({type:"warning",message:h})}finally{this.vh--}});return this.emitEvent(c),this.k_+n}Ep(t){return t==="img"}vp(t,e){return t==="source"&&e==="picture"}H_(t){return t.localName==="link"&&csArray.prototype.some.call(t.attributes,e=>e.name==="rel"&&e.value==="stylesheet")}static isSupported(){return Zc()&&md()&&!!csArray.from}B_(t){return csString.prototype.replace.call(t,/['"]+/g,"").length===0}}return me([Nt("StaticResourceManagerProcessor.processEvent")],s.prototype,"processEvent",null),s})(),yi=console;var Os={debug:(...s)=>yi.debug(...s),log:(...s)=>yi.log(...s),info:(...s)=>yi.info(...s),warn:(...s)=>yi.warn(...s),error:(...s)=>yi.error(...s)},co=(()=>{class s{push(t){let e={value:t};this.Tr?(this.Ah.next=e,this.Ah=e):(this.Tr=e,this.Ah=e)}pushMany(t){for(let e of t)this.push(e)}shift(){if(!this.Tr)return;let t=this.Tr;return this.Tr=t.next,this.Tr||(this.Ah=void 0),t.value}isEmpty(){return!this.Tr}}return s})(),xi=(()=>{let s;return function(r){r[r.High=0]="High",r[r.Low=1]="Low"}(s||(s={})),s})(),ta=(()=>{class s{constructor(){this.Sp=new co,this._p=new co,this.length=0}push(t,e=xi.Low){return e===xi.High?this.Sp.push(t):this._p.push(t),this.length+=1}shift(){if(this.length!==0)return this.length-=1,this.Sp.shift()||this._p.shift()}isEmpty(){return this.length===0}}return s})(),gE=(()=>{class s{get length(){return this.wt.length}constructor(){this.Un=[],this.wt=new ta,this.Th=new Set}F_(t){switch(t.type){case"attributes":return`-${t.attributeNamespace}-${t.attributeName}`;default:return""}}$_(t){switch(t.type){case"pointerOverElement":case"customElementRegistration":return}return`${q(t.target)}-${t.type}${this.F_(t)}`}z_(t){switch(t.type){case"state":return xi.High;default:return xi.Low}}G_(t){let e=this.$_(t);if(e){if(this.Th.has(e))return;this.Th.add(e)}return this.wt.push({mutation:t,key:e},this.z_(t))}q_(){this.Un.length!==0&&(csArray.prototype.forEach.call(csArray.prototype.flat.call(this.Un),t=>this.G_(t)),this.Un=[])}push(t){csArray.prototype.push.call(this.Un,t)}shift(){this.q_();let t=this.wt.shift();if(t)return t.key&&this.Th.delete(t.key),t.mutation}isEmpty(){return this.wt.isEmpty()&&this.Un.length===0}}return s})(),mE=(()=>{class s{constructor(t){this.ve=t,this.Na=!1,this.Ns=new WeakSet,this.Ma=e=>{let i=e.getRootNode();i&&this.Ns.has(i)&&this.ve(e)}}observe(t){this.Ns.has(t)||(this.Ns.add(t),this.Na||(ls.subscribe(this.Ma),this.Na=!0))}disconnect(){this.Na&&(ls.unsubscribe(this.Ma),this.Na=!1),this.Ns=new WeakSet}}return s})(),wn=new WeakMap,An=new WeakMap;function yc(s,r){if(!s||typeof s!="object"&&typeof s!="function")return s;if(wn.has(s))return wn.get(s);let t=r();return wn.set(s,t),t}function lo(s,r){return s.prototype=r.prototype,Object.defineProperty(s,"toString",{value:()=>r.toString()}),s}function yE(s,r,t,e,i){Object.defineProperty(s,r,{set(n){var o;let c=(o=t.set)===null||o===void 0?void 0:o.apply(this,[n]);return e(this,[r],[n],c),c},get(){var n;let o=(n=t.get)===null||n===void 0?void 0:n.apply(this);return yc(o,()=>{let c=new Proxy(o,{get(l,h){let u=Reflect.get(l,h);return typeof u!="function"?u:yc(u,()=>i&2?lo(function(...p){let y=An.get(this)||this,m=Reflect.apply(u,y,p);return e(y,[r,h],p,m),m},u):lo(function(...p){let y=An.get(this)||this;return Reflect.apply(u,y,p)},u))},set:i&1?(l,h,u)=>{let p=Reflect.set(l,h,u);return e(l,[r,h],[u],p),p}:Reflect.set});return An.set(c,o),c})}})}function EE(s,r,t,e){let i={};t.get&&(i.get=t.get),t.set&&(i.set=function(n){let o=t.set.call(this,n);return e(this,[r],[n],o),o}),t.value&&(i.value=lo(function(...n){let o=Reflect.apply(t.value,this,n);return e(this,[r],n,o),o},t.value),i.writable=t.writable!==!1),t.configurable!==void 0&&(i.configurable=t.configurable),t.enumerable!==void 0&&(i.enumerable=t.enumerable),Object.defineProperty(s,r,i)}function Et(s,r,t,e={}){let i=s&&s.prototype?s.prototype:s;if(!i)return()=>{};let n=csSymbol.for(`fd_spy_${r}`);if(n in i){let h=i[n];return h.add(t),()=>h.delete(t)}let o=i[n]=new Set([t]),c=Object.getOwnPropertyDescriptor(i,r);if(!c)return Os.warn(`Could not find descriptor for ${r} on target`,i),()=>o.delete(t);let l=(...h)=>{for(let u of o)try{u(...h)}catch(p){Os.warn(`Error in spy hook for ${r} on target`,i,p)}};return e.mode?yE(i,r,c,l,e.mode):EE(i,r,c,l),()=>o.delete(t)}function Yt(s,r,t){let e=i=>t(i.target);return s.addEventListener(r,e,{capture:!0,passive:!0}),()=>{s.removeEventListener(r,e,{capture:!0})}}var vE=(()=>{class s{constructor(t){this.ve=t,this.Pt=new WeakMap,this.Se=e=>this.ve({type:"state",target:e}),this.wp=e=>this.ve({type:"setAdoptedStyleSheets",target:e}),this.br=e=>this.ve({type:"styleSheetUpdated",target:e}),this.Hn=e=>{var i;let n=(i=this.W_(e))===null||i===void 0?void 0:i.parentStyleSheet;n&&this.br(n)},this.Y_=e=>this.ve({type:"styleSheetDisabledChanged",target:e}),this.Ap=e=>this.ve({type:"activeElementChanged",target:e.ownerDocument}),this.Ma=e=>this.ve({type:"metadataChanged",target:e})}X_(t){return csNodenodeType.apply(t)===et.DOCUMENT_NODE}K_(t){let e=[Yt(t,"input",this.Se),Yt(t,"change",this.Se),Yt(t,"checked",this.Se),Yt(t,"scroll",this.Se),Yt(t,"toggle",this.Se),Yt(t,"focusin",this.Ap),Yt(t,"focusout",this.Ap),Yt(t,"pointerover",i=>{this.ve({type:"pointerOverElement",target:i.ownerDocument,element:i})}),Yt(t,"pointerout",i=>{this.ve({type:"pointerOverElement",target:i.ownerDocument,element:null})}),Yt(t,"load",i=>{switch(i.localName){case"iframe":case"link":this.ve({type:"loaded",target:i});break}})];this.Da(t,()=>{csArray.prototype.forEach.call(e,i=>i())})}J_(t){let e=t.defaultView;if(!e)return;let i=[Yt(e,"resize",()=>this.Se(t)),Yt(t,"visibilitychange",()=>this.Se(t)),Yt(t,"fullscreenchange",()=>this.Se(t)),Et(e.Document,"adoptedStyleSheets",this.wp,{mode:2}),Et(e.ShadowRoot,"adoptedStyleSheets",this.wp,{mode:2}),Et(e.Element,"attachShadow",(n,o,c,l)=>{this.ve({type:"attachShadow",target:n,shadowRoot:l})}),Et(e.HTMLInputElement,"value",this.Se),Et(e.HTMLInputElement,"checked",this.Se),Et(e.HTMLSelectElement,"selectedIndex",this.Se),Et(e.CSSStyleSheet,"insertRule",this.br),Et(e.CSSStyleSheet,"deleteRule",this.br),Et(e.CSSStyleSheet,"replace",this.br),Et(e.CSSStyleSheet,"replaceSync",this.br),Et(e.CSSStyleSheet,"addRule",this.br),Et(e.CSSStyleRule,"style",this.Hn,{mode:1}),Et(e.CSSGroupingRule,"insertRule",this.Hn),Et(e.CSSGroupingRule,"deleteRule",this.Hn),Et(e.CSSStyleDeclaration,"setProperty",this.Hn),Et(e.CSSStyleDeclaration,"removeProperty",this.Hn),Et(e.StyleSheet,"disabled",this.Y_),Et(e.HTMLDialogElement,"show",this.Se),Et(e.HTMLDialogElement,"showModal",this.Se),Et(e.HTMLDialogElement,"close",this.Se),Et(e.CustomElementRegistry,"define",(n,o,c)=>{this.ve({type:"customElementRegistration",target:t,name:c[0]})})];this.Da(t,()=>{csArray.prototype.forEach.call(i,n=>n())})}W_(t){for(;t.parentRule!==null;)t=t.parentRule;return t}Q_(t){let e=new csMutationObserver(i=>{this.ve(i)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,characterData:!0}),this.Da(t,()=>{e.disconnect()})}Z_(t){let e=new mE(this.Ma);e.observe(t),this.Da(t,()=>{e.disconnect()})}Da(t,e){this.Pt.get(t)==null||csArray.prototype.push.call(this.Pt.get(t),e)}observe(t){this.Pt.has(t)||(this.Pt.set(t,[]),this.K_(t),this.X_(t)&&this.J_(t),this.Q_(t),this.Z_(t))}disconnect(t){let e=this.Pt.get(t)||[];for(let i of e)try{i()}catch(n){Os.warn(n)}this.Pt.delete(t)}}return s})(),hh=new ta,ht,SE=40,_E=10;function wE(s){return csSetTimeout(()=>{let r=0,t=0,e=performance.now(),i=!0;s({get hasTimeLeft(){return r%_E===0&&(t=performance.now(),i=t-e<SE),r++,i}})},0)}function Ec(){var s;let r=(s=ht==null?void 0:ht.subTasks)===null||s===void 0?void 0:s.shift();return r?(r.subTasks=ht==null?void 0:ht.subTasks,r):hh.shift()}function uh(){wE(s=>{for(ht||(ht=Ec());s.hasTimeLeft&&ht;){ht.isRunning=!0;try{ht.isEnded=ht.run(s)!==!0}catch(r){Os.error("Error occurred while running task:",r),ht.isEnded=!0}ht.isRunning=!1,(ht.isEnded||ht.isAborted)&&(ht=Ec())}ht&&uh()})}function Ei(s,r=xi.Low){let t={run:s,isAborted:!1,isEnded:!1,abort:()=>{t.isAborted=!0}};return ht!=null&&ht.isRunning?(ht.subTasks=ht.subTasks||new ta,ht.subTasks.push(t,r)):hh.push(t,r)===1&&!ht&&uh(),t}var AE=40;function vc(s){return csString.prototype.replace.call(s,/[:\\]/g,"\\$&")}function Tn(s){return csString.prototype.replace.call(s,/\\([:\\\\])/g,"$1")}var bn=["nextSibling","firstChild","contentDocument","shadowRoot","sheetId"];function Rn(s,r){return!!s&&r in s&&!!s[r]}var Sc={"http://www.w3.org/1999/xhtml":void 0,"http://www.w3.org/2000/svg":"svg"},ho=(()=>{class s{constructor(t){this.R=t,this.G=new vE(e=>{this.bh.push(e),this.tw()}),this.Xe={},this.Ke=new Map,this.bh=new gE,this.Bn=new Map,this.processedMutationsCount=0,this.serializedNodeCount=0,this.Tp=0,this.bp=AE}disconnect(){for(let t of this.Bn.values())this.G.disconnect(t);this.Bn.clear()}observe(t){return this.disconnect(),this.ka(t),this}getState(t=!0){let e=this.Xe;return this.Xe={...e},t&&this.Rp(),e}getChanges(){let t={};for(let[i,n]of this.Ke){let o=this.Xe[i];if(!(n&&!o))if(o&&!n)t[i]=os(o);else{let c=bl(n,o);c!==void 0&&(t[i]=c)}}return this.Rp(),Tl(t)?t:void 0}setFrameRate(t){return this.bp=t/1e3,this}onChange(t){return this.R=t,()=>{this.R===t&&(this.R=void 0,this.Fn&&(csClearTimeout(this.Fn),this.Fn=void 0))}}async getStateAsync(t=!0){return await this.Cp(),this.getState(t)}async getChangesAsync(){return await this.Cp(),this.getChanges()}async Cp(){return new Promise(t=>{Ei(()=>t())})}Rp(){this.Ke.clear()}static*findNodes(t,e){for(let i of Object.values(t))e(i)&&(yield i)}static stringifyAttrKey(t,e){let i=vc(e);return t?`${vc(t)}:${i}`:i}static parseAttrKey(t){let e=!1,i=-1;for(let c=0;c<t.length;c++){let l=t[c];if(e)e=!1;else if(l==="\\")e=!0;else if(l===":"){i=c;break}}if(i===-1)return{namespaceURI:null,name:Tn(t)};let n=csString.prototype.slice.call(t,0,i),o=csString.prototype.slice.call(t,i+1);return{namespaceURI:Tn(n),name:Tn(o)}}static apply(t,e,i){let n={...t},o=new Set,c=new Set,l=y=>{c.has(y)?c.delete(y):o.add(y)},h=y=>{o.has(y)?o.delete(y):c.add(y)};function u(y,m){for(let v of bn)v in m&&(Rn(y,v)&&l(y[v]),Rn(m,v)&&h(m[v]))}for(let[y,m]of Object.entries(e)){if(m===null)continue;let v=y,b=n[v],I=b===void 0?m:Rl(b,m);u(b,m),n[v]=I}let p=y=>{if(c.has(y))return;let m=n[y];if(m){delete n[y],i==null||i(y);for(let{nodeId:v}of s.nodeRelationsEntries(m))p(v)}};for(let y of o)p(y);return n}static nodeRelationsEntries(t,e=!1){let i=e?bn.filter(o=>o!=="nextSibling"):bn,n=[];for(let o of i)Rn(t,o)&&csArray.prototype.push.call(n,{key:o,nodeId:t[o]});return n}At(t){if(t in this.Xe&&!this.Ke.has(t)){let e=this.Xe[t];this.Ke.set(t,os(e)),this.Xe[t]=os(e)}return this.Xe[t]}ew(t){try{let e=t.cssRules.length,i={};for(let n=0;n<e;n++){let o=t.cssRules[n];i[n]=o.cssText}return{type:et.CSS_STYLESHEET_NODE,cssRules:i,disabled:t.disabled}}catch{return{type:et.CSS_STYLESHEET_NODE,cssRules:{}}}}iw(t){return csArray.prototype.pop.call(csArray.from(window.csquerySelectorAll[t.nodeType].call(t,":hover")))||void 0}rw(t){let e=ls.getAll(t);switch(csNodenodeType.apply(t)){case et.DOCUMENT_NODE:{let i=t,n=i.activeElement||void 0,o=this.iw(i),c={type:et.DOCUMENT_NODE,baseURI:i.baseURI,activeId:n&&q(n),hoveredId:o&&q(o),...this.Ip(t),metadata:e};return i.compatMode==="BackCompat"&&(c.quirksMode=!0),c}case et.DOCUMENT_FRAGMENT_NODE:return{type:et.DOCUMENT_FRAGMENT_NODE,mode:t.mode,metadata:e};case et.COMMENT_NODE:return{type:et.COMMENT_NODE,data:void 0,metadata:e};case et.ELEMENT_NODE:{let i=t,n=i.namespaceURI||"";return{type:et.ELEMENT_NODE,namespaceURI:n in Sc?Sc[n]:n,localName:i.localName,attributes:this.nw(i),state:this.Pp(i),metadata:e}}case et.TEXT_NODE:return{type:et.TEXT_NODE,data:t.data||"",metadata:e};case et.CDATA_SECTION_NODE:return{type:et.CDATA_SECTION_NODE,data:t.data,metadata:e};case et.DOCUMENT_TYPE_NODE:return{type:et.DOCUMENT_TYPE_NODE,name:t.name,publicId:t.publicId,systemId:t.systemId,metadata:e};default:return null}}nw(t){return csArray.prototype.reduce.call(csArray.from(t.attributes),(e,i)=>{let n=e||{};return n[s.stringifyAttrKey(i.namespaceURI,i.name)]=i.value,n},void 0)}Ip(t){let e=t.defaultView,i=e==null?void 0:e.visualViewport;return{state:{scrollX:e==null?void 0:e.scrollX,scrollY:e==null?void 0:e.scrollY,visibility:t.visibilityState},viewport:{width:i==null?void 0:i.width,height:i==null?void 0:i.height},screen:{width:e==null?void 0:e.screen.width,height:e==null?void 0:e.screen.height}}}Pp(t){let e={};return"value"in t&&t.value&&(e.value=t.value),"selectedIndex"in t&&t.selectedIndex!==void 0&&t.selectedIndex>=0&&(e.selectedIndex=t.selectedIndex),"checked"in t&&t.checked&&(e.checked=t.checked),t.popover&&t.matches(":popover-open")?e.popover=!0:t.localName==="dialog"&&(e.open=t.open),t.scrollLeft&&(e.scrollX=t.scrollLeft),t.scrollTop&&(e.scrollY=t.scrollTop),e}tw(){var t;((t=this.ow)===null||t===void 0?void 0:t.isEnded)!==!1&&(this.ow=Ei(e=>(this.Rr(e),this.Op(),!this.bh.isEmpty())))}Op(){if(!this.R||this.Fn)return;let t=performance.now()-this.Tp,e=Math.max(0,this.bp-t);this.Fn=csSetTimeout(()=>{this.Fn=void 0;let i=this.getChanges();this.Tp=performance.now(),i&&this.R(i,this.getState())},e)}aw(t){for(let e=t==null?void 0:t.previousSibling;e;e=e.previousSibling)if(this.gs(e))return q(e)}lw(t){var e;let i=csNodeparentNode.apply(t)||t.host||((e=t.defaultView)===null||e===void 0?void 0:e.frameElement);if(this.gs(i))return q(i)}ka(t){let e=new co;e.pushMany(this.Np(t,!1)),!e.isEmpty()&&Ei(i=>{let n;for(;i.hasTimeLeft&&(n=e.shift());){e.pushMany(this.Np(n));let o=csNodenextSibling.apply(n);o&&e.push(o)}return!!n})}hw(t){switch(t){case et.DOCUMENT_NODE:return"contentDocument";case et.DOCUMENT_FRAGMENT_NODE:return"shadowRoot";default:return"childList"}}Cr(t){Ei(()=>{let e=t.ownerNode;if(e&&(!this._r(e)||!this.gs(e)))return!1;if(this.gs(t)||!e||e.localName==="style"?this.Mp(t):this.Rh(q(t),{type:et.CSS_STYLESHEET_NODE,cssRules:{},disabled:t.disabled}),e&&this.gs(e)){let i=q(e);this.At(i).sheetId=q(t)}return!1})}Dp(t){let e=0,i=q(t),n=t.adoptedStyleSheets||[],o=n.length,c={};Ei(l=>{if(!this.gs(t)||!this._r(t)||n!==t.adoptedStyleSheets)return!1;for(;l.hasTimeLeft&&e<o;){let u=n[e];c[e]=this.gs(u)?q(u):this.Mp(u),e+=1}if(e<o)return!0;let h=this.At(i);return h&&(h.adoptedStyleSheets=c),!1})}Mp(t){let e=q(t);return this.Rh(e,this.ew(t)),e}Rh(t,e){this.serializedNodeCount++,this.Xe[t]=e,this.Op(),this.Ke.has(t)||this.Ke.set(t,null)}gs(t){return q(t)in this.Xe}kp(t){var e;if(!s.trackIframeContent||t.localName!=="iframe")return!1;let i=t;try{return!!i.contentDocument&&!!(!((e=i.contentWindow)===null||e===void 0)&&e.document)}catch{return!1}}xp(t){let e=q(t),i=this.Xe[e];if(!i){Os.warn(`No serialized node id ${e}`);return}let n=this.lw(t);if(!n){Os.warn("No parent id for node",t);return}let o=this.hw(i.type);if(o==="childList"){let c=this.aw(t);this.Ch(e,c,n,!0)}else{let c=this.At(n);c[o]=e,i.parent=n}}*Np(t,e=!0){var i,n,o,c;if(!this._r(t))return;if(this.gs(t)){e&&this.xp(t);return}let l=q(t),h=this.rw(t);if(!h){Os.warn("Node was not serialized",t);return}switch(this.Rh(l,h),e&&this.xp(t),h.type){case et.DOCUMENT_NODE:case et.DOCUMENT_FRAGMENT_NODE:{let p=t;this.Bn.set(l,p),this.G.observe(p),!((i=p.adoptedStyleSheets)===null||i===void 0)&&i.length&&this.Dp(p);break}case et.TEXT_NODE:{((n=t.parentElement)===null||n===void 0?void 0:n.localName)==="style"&&(h.data="");break}case et.ELEMENT_NODE:{let p=t;switch(h.localName){case"iframe":this.kp(p)&&(yield p.contentDocument);break;case"link":p.rel==="stylesheet"&&p.sheet&&this.Cr(p.sheet);break;case"style":{let y=p.sheet;y&&this.Cr(y);break}default:Vp(h.localName)&&(!((c=(o=t.ownerDocument)===null||o===void 0?void 0:o.defaultView)===null||c===void 0)&&c.customElements.get(h.localName))&&this.Lp(q(t.ownerDocument),h.localName),csElementshadowRoot.apply(p)&&(yield csElementshadowRoot.apply(p));break}break}}let u=csNodefirstChild.apply(t);u&&(yield u)}Lp(t,e){let i=this.At(t),n=i.customElements||(i.customElements={});n[e]=1}Ih(t){let e=this.At(t);if(e){switch(e.type){case et.DOCUMENT_NODE:case et.DOCUMENT_FRAGMENT_NODE:this.G.disconnect(this.Bn.get(t)),this.Bn.delete(t)}delete this.Xe[t];for(let{nodeId:i}of s.nodeRelationsEntries(e))this.Ih(i)}}Ch(t,e,i,n){let o;if(e){let c=this.At(e);o=c.nextSibling,c.nextSibling=t}else{let c=this.At(i);o=c.firstChild,c.firstChild=t}if(n&&t&&o!==t){let c=this.At(t);if(c.nextSibling=o,o){let l=this.At(o);l.previousSibling=t}}if(t){let c=this.At(t);c.parent=i,c.previousSibling=e}}uw(t){var e;let i=this.At(t),n=new Set;for(let o=i==null?void 0:i.firstChild;o;o=(e=this.At(o))===null||e===void 0?void 0:e.nextSibling)n.add(o);return n}_r(t){return"isConnected"in t?t.isConnected:!t.ownerNode||t.ownerNode.isConnected}fw(t){let e=this.At(t);e&&(e.parent=void 0,e.nextSibling=void 0,e.previousSibling=void 0)}Rr(t){var e,i;let n;for(;t.hasTimeLeft&&(n=this.bh.shift());){if(this.processedMutationsCount++,!this.gs(n.target)||!this._r(n.target))continue;let o=q(n.target);switch(n.type){case"attachShadow":{this.ka(n.shadowRoot),this.At(o).shadowRoot=q(n.shadowRoot);break}case"childList":{let c,l=this.uw(o);for(let u=csNodefirstChild.apply(n.target);u;u=csNodenextSibling.apply(u)){this.gs(u)||this.ka(u);let p=q(u);l.delete(p),this.Ch(p,c,o),c=p}this.Ch(void 0,c,o);for(let u of l)this.fw(u),this.Ih(u);let h=this.At(o);if(h.type===et.ELEMENT_NODE&&h.localName==="style"){let u=n.target.sheet;u&&this.Cr(u)}break}case"characterData":{let c=this.At(o);if(c.type===et.TEXT_NODE&&(c.data=n.target.data,((e=n.target.parentElement)===null||e===void 0?void 0:e.localName)==="style")){c.data="";let l=(i=n.target.parentElement)===null||i===void 0?void 0:i.sheet;l&&this.Cr(l)}break}case"attributes":{let c=s.stringifyAttrKey(n.attributeNamespace,n.attributeName),l=n.target,h=this.At(o),u=l.getAttributeNS(n.attributeNamespace,n.attributeName);h.attributes=h.attributes||{},u===null?delete h.attributes[c]:h.attributes[c]=u;break}case"state":{let c=this.At(o);c.type===et.DOCUMENT_NODE?Object.assign(c,this.Ip(n.target)):c.state=this.Pp(n.target);break}case"setAdoptedStyleSheets":{this.Dp(n.target);break}case"styleSheetUpdated":{this.Cr(n.target);break}case"styleSheetDisabledChanged":{let c=this.At(o);c.disabled=n.target.disabled;break}case"loaded":{switch(n.target.localName){case"link":{let c=n.target;c.rel==="stylesheet"&&c.sheet&&this.Cr(c.sheet);break}case"iframe":{let c=n.target,l=this.At(o),h=c.contentDocument,u=h&&q(h);l.contentDocument&&l.contentDocument!==u&&(this.Ih(l.contentDocument),delete l.contentDocument),this.kp(c)&&this.ka(h);break}}break}case"activeElementChanged":{let c=this.At(o),l=n.target.activeElement||void 0;c.activeId=l&&q(l);break}case"pointerOverElement":{let c=this.At(o),l=n.element||void 0;c.hoveredId=l&&q(l);break}case"customElementRegistration":{this.Lp(o,n.name);break}case"metadataChanged":{let c=this.At(o);c&&(c.metadata=os(ls.getAll(n.target)));break}}}}}return s.trackIframeContent=!1,s.cloneDeep=os,s})(),TE=(()=>{class s extends ci{constructor(t){super(),this.Z=t}isListening(t){return t.type==="DOM_INITIAL_STATE"||Ls.isDOMEvent(t)&&t.domEvent==="initialDOM"}processEvent(t){if(Ls.isDOMEvent(t))t.initialDOM.baseURI=this.Z.anonymizeUrl(t.initialDOM.baseURI);else for(let e of ho.findNodes(t.state,i=>i.type===et.DOCUMENT_NODE))e&&e.type===et.DOCUMENT_NODE&&(e.baseURI=this.Z.anonymizeUrl(e.baseURI));return t}}return me([Nt("UrlAnonymizationProcessor.processEvent")],s.prototype,"processEvent",null),s})(),bE="textarea",RE=(()=>{class s extends ci{isListening(t){return t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE"||Ls.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="characterDataChanged")}processEvent(t){if(t.type==="DOM_PATCH"||t.type==="DOM_INITIAL_STATE")return this.pw(t),t;switch(t.domEvent){case"initialDOM":case"nodesAdded":this.gw(t);break;case"characterDataChanged":this.mw(t);break}return t}pw(t){let e=t.type==="DOM_PATCH"?t.diff:t.state,i=t.state;for(let n in e){let o=e[n],c=i[n];if(!c.parent||!("data"in o)||c.type!==3)continue;let l=i[c.parent];this.Vp(o,c.metadata,l.localName)}}gw(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let i of e)nt.traverse(i,(n,o)=>{var c;let l=(c=o==null?void 0:o.localName)!==null&&c!==void 0?c:t.targetLocalName,h=n.props;n.nodeType===3&&this.Vp(n,h,l)})}Vp(t,e,i){this.Up(i,e)&&(t.data=this.jp(t.data))}mw(t){this.Up(t.parentLocalName,t.targetProps)&&(t.newValue=this.jp(t.newValue))}jp(t){return csString.prototype.replace.call(t,/\S/g,"\u2022")}Up(t,e){return t===bE||(e==null?void 0:e[xe.EDITABLE_NODE_PROP])===!0}}return me([Nt("AnonymizedEditableTextProcessor.processEvent")],s.prototype,"processEvent",null),s})(),CE=(()=>{class s extends ne{async onStart(){this.Ir&&this.Ir.disconnect(),this.Ir=new ho().observe(document);let t=await this.Ir.getStateAsync();this.produceEvent({type:"DOM_INITIAL_STATE",state:ho.cloneDeep(t)}),this.$n=this.Ir.onChange((e,i)=>{this.produceEvent({type:"DOM_PATCH",diff:e,state:i})})}onStop(){var t;(t=this.$n)===null||t===void 0||t.call(this)}destroy(){var t;(t=this.Ir)===null||t===void 0||t.disconnect(),this.Ir=void 0}}return s})(),dh=!0,Rr=csSymbol("safe"),_c=csSymbol("task");function gt(s,r=dh){var t;(t=s[Rr])!==null&&t!==void 0||(s[Rr]=function(e){let i=arguments;js(()=>(e[_c]=Gt,s.listener.apply(s.boundElement,i)),[Te.EventListener,s.type],e[_c])}),s.boundElement.addEventListener(s.type,s[Rr],r)}function mt(s,r=dh){s.boundElement.removeEventListener(s.type,s[Rr],r)}var IE=(()=>{class s{constructor(t){this.R=t,this.te={boundElement:window,type:"resize",listener:()=>this.resizeListener()},this.R=t}observe(){gt(this.te),this.Ph()}Ph(){this.resizeListener()}disconnect(){mt(this.te)}resizeListener(){let t={width:bt.windowWidth(),height:bt.windowHeight()};this.R(t)}}return st([P("resize")],s.prototype,"resizeListener",null),s})(),rs=(()=>{let s;return function(r){r.PORTRAIT="Portrait",r.LANDSCAPE="Landscape"}(s||(s={})),s})(),mr=(()=>{let s;return function(r){r.PORTRAIT_PRIMARY="portrait-primary",r.PORTRAIT_SECONDARY="portrait-secondary",r.LANDSCAPE_PRIMARY="landscape-primary",r.LANDSCAPE_SECONDARY="landscape-secondary"}(s||(s={})),s})(),yr=(()=>{let s;return function(r){r[r.PORTRAIT=0]="PORTRAIT",r[r.PORTRAIT_REVERSE=180]="PORTRAIT_REVERSE",r[r.LANDSCAPE=-90]="LANDSCAPE",r[r.LANDSCAPE_REVERSE=90]="LANDSCAPE_REVERSE"}(s||(s={})),s})(),PE=(()=>{let s;return function(r){let t=null;r.isScreenOrientationApiSupported=()=>{var c;return t!=null?t:t=!!(!((c=it.screen)===null||c===void 0)&&c.orientation)},r.isDeprecatedScreenOrientationApiSupported=()=>"orientation"in it;function e(){return rs.LANDSCAPE}function i(){var c;switch((c=it.screen.orientation)===null||c===void 0?void 0:c.type){case mr.PORTRAIT_PRIMARY:case mr.PORTRAIT_SECONDARY:return rs.PORTRAIT;case mr.LANDSCAPE_PRIMARY:case mr.LANDSCAPE_SECONDARY:return rs.LANDSCAPE;default:return rs.PORTRAIT}}function n(){switch(window.orientation){case yr.PORTRAIT:case yr.PORTRAIT_REVERSE:return rs.PORTRAIT;case yr.LANDSCAPE:case yr.LANDSCAPE_REVERSE:return rs.LANDSCAPE;default:return rs.PORTRAIT}}function o(){return r.isScreenOrientationApiSupported()?i():r.isDeprecatedScreenOrientationApiSupported()?n():e()}r.getCurrentOrientation=o}(s||(s={})),s})(),OE=(()=>{class s extends ne{constructor(){super(...arguments),this.Oh=null,this.Nh=null,this.ci=new IE(t=>{this.produceEvent({...t,type:"viewportResize"}),this.onScreenPotentiallyChanged()})}onScreenPotentiallyChanged(){let t=PE.getCurrentOrientation(),{screenWidth:e,screenHeight:i}=this.yw(t);if(e!==this.Oh||i!==this.Nh){this.Oh=e,this.Nh=i;let n={type:"screenResize",width:e,height:i};this.produceEvent(n)}}yw(t){let e,i,n=bt.screenWidth(),o=bt.screenHeight();return t===rs.PORTRAIT?(e=n,i=o):(e=Math.max(n,o),i=Math.min(n,o)),{screenWidth:e,screenHeight:i}}onStart(){this.ci.observe()}onStop(){this.Oh=null,this.Nh=null,this.ci.disconnect()}}return s})();function NE(s){let r=csEventtarget.apply(s);return r&&dt(r)&&csElementshadowRoot.apply(r)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:r}var ye=(()=>{class s{get selectors(){return this.Je===""?null:this.Je}constructor(t,e={closest:!1}){this.R=t,this.Ot=e,this.Je="",this.zn=new qi,this.Rr=Hs(i=>{if(this.Je==="")return;let n=[];for(let o of Io(i,c=>c.addedNodes)){if(!(Yd(o)||this.Ot.closest&&Or(o)))continue;let c=this.Ot.closest?this.Ew(o,this.Je):this.findMatchingElements(o,this.Je);Da(c,n)}n.length&&this.R(n,"added")},"SelectorObserver.processMutations"),this.vw=(i,n)=>{if(this.Je===""||n!=="added")return;let o=this.findMatchingElements(i,this.Je);o.length&&this.R(o,"added")},this.G=new Ee(this.Rr,this.vw)}observe(t){this.Je===""?this.G.observe():this.Je+=",",this.Je+=t;let e=this.findMatchingElements(document,t);for(let i of this.G.shadowRoots){let n=this.findMatchingElements(i,t);Da(n,e)}e.length&&(K(e,i=>{this.zn.add(i)}),this.R(e,"initial"))}processPendingMutations(){this.Rr(this.G.takeRecords())}disconnect(){this.G.disconnect(),this.zn.clear(),this.Je=""}Ew(t,e){let i=[];if(Or(t)){if(t.parentElement){let n=si(t.parentElement,e);n&&csArray.prototype.push.call(i,n)}return csArray.prototype.filter.call(i,n=>this.zn.has(n)===!1)}else{if(ps(t)){let n=si(t,e);if(n)return csArray.prototype.push.call(i,n),csArray.prototype.filter.call(i,o=>this.zn.has(o)===!1)}return this.findMatchingElements(t,e)}}findMatchingElements(t,e){let i=ei(window.csquerySelectorAll[t.nodeType].call(t,e));return dt(t)&&Qt.call(t,e)&&csArray.prototype.push.call(i,t),csArray.prototype.filter.call(i,n=>this.zn.has(n)===!1)}}return st([P()],s.prototype,"observe",null),st([P()],s.prototype,"disconnect",null),st([Nt("SelectorObserver.findMatchingElements")],s.prototype,"findMatchingElements",null),s})(),ME=(()=>{class s extends ne{constructor(){super(),this.Hp=t=>{let e=NE(t);e&&this.Mh(e,t.type)},this.Ee=new ai((t,e)=>{switch(e){case"initial":case"added":this.Bp(t);break;case"removed":this.Fp(t);break}}),this.W=new ye((t,e)=>{(e==="initial"||e==="added")&&this.Sw(t)})}static shouldProcessElement(t){return t.tagName==="VIDEO"&&ot.isConnected(t)&&!D.isMaskedElement(t)&&!D.isMaskedElementChild(t)}static isPlaying(t){return!t.paused&&!t.ended}onStart(){this.Bp(document),this.Ee.observe(),this.W.observe("video")}onStop(){this.Fp(document),this.Ee.disconnect(),this.W.disconnect()}Mh(t,...e){if(this.isStarted&&s.shouldProcessElement(t))for(let i of e){let n=q(t),o={type:"VideoEvent",videoEventType:i,nodeId:n};i==="seeked"&&(o.newTimePositionInSec=t.currentTime),Co(()=>this.produceEvent(o))}}Sw(t){for(let e of t)this.Mh(e,"seeked"),s.isPlaying(e)&&this.Mh(e,"play")}Bp(t){for(let e of["play","pause","seeked"])gt({type:e,listener:this.Hp,boundElement:t})}Fp(t){for(let e of["play","pause","seeked"])mt({type:e,listener:this.Hp,boundElement:t})}}return s})();function DE(s){return s.nodeName==="SELECT"}function ea(s){return s.nodeName==="INPUT"}function kE(s){return s.nodeName==="TEXTAREA"||ea(s)&&!fh(s)&&!ph(s)}function fh(s){return ea(s)&&s.type==="number"}function ph(s){return ea(s)&&(s.type==="checkbox"||s.type==="radio")}var xE=(()=>{class s extends ne{constructor(t,e=[]){super(),this.ut=t,this._w=e,this.Dh=new wy("low"),this.Pr=i=>this.inputHandler(i),this.li=[],this.kh=new Map,this.Aw(),this.Tw(),this.W=new ye(i=>{for(let n of i){if(n instanceof HTMLInputElement)for(let o of this._w)this.bw(n,o);this.xh(n)&&$t(()=>{this.Lh(n,q(n))},"low")}}),this.Ee=new ai((i,n)=>{switch(n){case"initial":case"added":gt({type:"change",listener:this.Pr,boundElement:i});break;case"removed":mt({type:"change",boundElement:i,listener:this.Pr});break}})}bw(t,e){let i=this.kh.get(e);if(!i)i=new WeakSet,this.kh.set(e,i);else if(i.has(t))return;i.add(t);let n=Sy(t,e,(o,c,l)=>{l!==c&&ot.isConnected(o)&&this.$p(o)});n&&(this.isStarted&&n.activate(),csArray.prototype.push.call(this.li,n))}onStart(){gt({type:"keyup",boundElement:document,listener:this.Pr}),gt({type:"change",boundElement:document,listener:this.Pr}),K(this.li,t=>t.activate()),this.W.observe(csArray.prototype.join.call(s.Rw,",")),this.Ee.observe()}onStop(){mt({type:"keyup",boundElement:document,listener:this.Pr}),mt({type:"change",boundElement:document,listener:this.Pr}),K(this.li,t=>t.deactivate()),this.W.disconnect(),this.Ee.disconnect(),this.Dh.clear(),this.kh.clear()}Lh(t,e){var i,n,o;if(this.Dh.has(t))return;if(this.Dh.add(t),DE(t)){let h={type:"InputEvent",inputType:"select",target:q(t),selectedIndex:t.selectedIndex,timestamp:M.now()};this.produceEvent(h);return}if(ph(t)){let h={type:"InputEvent",inputType:"checkable",target:q(t),checked:t.checked,timestamp:M.now()};this.produceEvent(h);return}let c=kE(t),l=fh(t);if(c||l){let h=(i=t.value)!==null&&i!==void 0?i:"";if(!((n=this.ut)===null||n===void 0)&&n.shouldEncrypt(t)){(o=this.ut)===null||o===void 0||o.registerInputNodeToEncrypt({targetId:e,targetValue:h,date:M.now()});return}let u=l?"0":"\u2022",p={type:"InputEvent",inputType:"text",target:q(t),value:csString.prototype.replace.call(h,/\S/g,u),timestamp:M.now()};this.produceEvent(p)}}inputHandler(t){if(!this.isStarted)return;let e=Ot(t),i=q(e);!i||!this.xh(e)||ot.isConnected(e)&&$t(()=>{this.Lh(e,i)},"low")}Aw(){this.trackChanges(HTMLInputElement,"checked"),this.trackChanges(HTMLInputElement,"value"),this.trackChanges(HTMLTextAreaElement,"value")}Tw(){this.trackChanges(HTMLSelectElement,"selectedIndex"),this.trackChanges(HTMLSelectElement,"value"),this.trackChanges(HTMLOptionElement,"selected",!0)}trackChanges(t,e,i=!1){let n=ki(t.prototype,e,(o,c,l)=>{if(l!==c&&ot.isConnected(o)){let h=i?o.parentElement:o;this.$p(h)}});n&&csArray.prototype.push.call(this.li,n)}xh(t){return!D.isMaskedElement(t)&&!D.isMaskedElementChild(t)&&(Hr(t)||Mo(t)||Br(t))}$p(t){if(this.isStarted&&ot.isConnected(t)){let e=q(t);e&&this.xh(t)&&$t(()=>{this.Lh(t,e)},"low")}}}return s.Rw=["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]','input[type="number"]','input[type="checkbox"]','input[type="radio"]',"select"],me([ut()],s.prototype,"inputHandler",null),me([P()],s.prototype,"trackChanges",null),s})();var LE=(()=>{class s{constructor(t=Number.POSITIVE_INFINITY){this.hi=[],this.lt=[],this.Cw=t}next(t){this.lt.length===this.Cw&&csArray.prototype.shift.call(this.lt),csArray.prototype.push.call(this.lt,t),this.lt.length===1&&csSetTimeout(()=>this.clear());for(let e of this.hi)e(t)}subscribe(t){if(Us(this.hi,i=>t===i))return()=>{this.hi=csArray.prototype.filter.call(this.hi,i=>i!==t)};csArray.prototype.push.call(this.hi,t);for(let i of this.lt)t(i);return()=>{this.hi=csArray.prototype.filter.call(this.hi,i=>i!==t)}}clear(){this.lt=[]}hasObservers(){return this.hi.length>0}}return s})(),gh=(()=>{var s;class r{constructor(e){this.R=e}observe(){this.Iw=s.Gn.subscribe(e=>this.R(e)),s.xa||(s.xa=!0,s.Vn.observe(),qt(document,NodeFilter.SHOW_ELEMENT).visitAll(i=>{s.Ms.add(i),s.Gn.next(i)}))}disconnect(){s.xa&&(this.Iw(),s.Gn.hasObservers()||(s.xa=!1,s.Vn.disconnect(),s.Gn.clear(),s.Ms.clear()))}}return s=r,r.Ms=new qi,r.Gn=new LE,r.Pw=Hs(t=>{$t(()=>{for(let e of t)e.type==="childList"&&K(e.addedNodes,i=>{qt(i,NodeFilter.SHOW_ELEMENT).visitAll(o=>{s.Ms.has(o)||(s.Ms.add(o),s.Gn.next(o))})})})},"ElementObserver.findAllElements"),r.xa=!1,r.Vn=new Ee(s.Pw),st([P()],r.prototype,"observe",null),st([P()],r.prototype,"disconnect",null),r})(),VE=(()=>{class s extends ne{constructor(){super(),this.Ds=typeof window.customElements=="object"&&typeof window.customElements.whenDefined=="function"&&typeof window.Promise=="function",this.Ow=gs("CustomElementRegistrationProducer:onElementsFound",e=>{for(let i of e)D.isMaskedElement(i)||D.isMaskedElementChild(i)||Kd(i)&&this.register(csString.prototype.toLowerCase.call(i.tagName))});let t=qr(this.Ow);this.qn=new gh(e=>t.push(e)),this.ai=new Set}onStart(){this.Ds&&this.qn.observe()}onStop(){this.ai.clear(),this.qn.disconnect()}async register(t){this.ai.has(t)||(this.ai.add(t),await window.customElements.whenDefined(t),this.produceEvent({type:"CustomElementRegistration",tagName:csString.prototype.toLowerCase.call(t)}))}}return me([P()],s.prototype,"register",null),s})(),wc=(()=>{class s{static isNavigationTimingObserverSupported(){var t,e;return(((t=window.PerformanceObserver)===null||t===void 0?void 0:t.supportedEntryTypes)==null?void 0:csArray.prototype.indexOf.call((e=window.PerformanceObserver)===null||e===void 0?void 0:e.supportedEntryTypes,"navigation"))>=0}static getTimeOrigin(){return window.performance.timeOrigin}static zp(){if(this.isNavigationTimingObserverSupported())return new window.PerformanceObserver(t=>s.Nw(t))}static Nw(t){let i=t.getEntriesByType("navigation")[0];i&&(this.ji=i,s.Or(i))}static Nn(t){this.Mw(t),this.ji&&t(this.ji),this.$e||this.Dw()}static Mw(t){this.Vt.add(t)}static kw(t){this.Vt.delete(t)}static Dw(){if(this.Wn||(this.Wn=this.zp()),!this.Wn){this.ji||(this.ji={requestStart:window.performance.timing.requestStart,domInteractive:window.performance.timing.domInteractive}),this.Or(this.ji);return}this.Wn.observe({type:"navigation",buffered:!0}),this.$e=!0}static Or(t){this.Vt.forEach(e=>e(t))}static Dn(t){this.kw(t),this.Vt.size===0&&this.Yn()}static Yn(){var t;this.$e&&((t=this.Wn)===null||t===void 0||t.disconnect(),this.$e=!1,this.ji=null,this.Wn=this.zp())}constructor(t){this.R=t}observe(){s.Nn(this.R)}disconnect(){s.Dn(this.R)}}return s.$e=!1,s.Vt=new Set,s.ji=null,s})(),UE=(()=>{class s extends ne{constructor(){super(...arguments),this.La=null,this.Gp=new wc(t=>{if(this.La)return;let e=this.xw(t);e&&(this.La=e,this.produceEvent(e))})}onStart(){if(this.La){this.produceEvent(this.La);return}this.Gp.observe()}onStop(){this.Gp.disconnect()}xw(t){let e=wc.getTimeOrigin();return{type:"PerformanceTiming",timings:{timeOrigin:e,requestStart:Math.floor(e+t.requestStart),domInteractive:Math.floor(e+t.domInteractive)},timestamp:M.now()}}}return s})(),Tt=(()=>{let s;return function(r){r[r.TAP=0]="TAP",r[r.LONG_PRESS=1]="LONG_PRESS",r[r.DRAG=2]="DRAG",r[r.FLICK=3]="FLICK",r[r.PINCH_IN=4]="PINCH_IN",r[r.PINCH_OUT=5]="PINCH_OUT"}(s||(s={})),s})(),Er=(()=>{let s;return function(r){r[r.UP=1]="UP",r[r.DOWN=2]="DOWN",r[r.LEFT=3]="LEFT",r[r.RIGHT=4]="RIGHT"}(s||(s={})),s})(),jE=(()=>{class s{compute(t,e){let i=this.fi(e.x)-this.fi(t.x),n=this.fi(e.y)-this.fi(t.y),o=e.time-t.time;return{duration:o,distance:this.qp(i,n),direction:this.Lw(i,n),velocity:this.Vw(i,n,o)}}computePinchMetrics(t,e){let i=this.fi(e.x)-this.fi(t.x),n=this.fi(e.y)-this.fi(t.y);return{duration:e.time-t.time,distance:this.qp(i,n)}}getScale(t,e){return Math.abs(e/t-1)}fi(t){return t/window.devicePixelRatio}qp(t,e){return Math.round(Math.sqrt(t*t+e*e))}Vw(t,e,i){let n=i/1e3,o=t/n,c=e/n;return Math.round(Math.abs(o)+Math.abs(c))}Lw(t,e){return Math.abs(t)>Math.abs(e)?t>0?Er.RIGHT:Er.LEFT:e>0?Er.DOWN:Er.UP}}return s})(),mh=typeof performance!="undefined"&&!!performance.now,Ac=mh?()=>performance.now():()=>csDate.now(),HE=(()=>{var s;return mh?(s=performance.timing)===null||s===void 0?void 0:s.navigationStart:0})(),vr={now(){return Math.round(Ac()+HE)},elapsed(){return Ac()}};function Tc(s,r=0){let t=Math.pow(10,r);return Math.round(s*t)/t}var BE=1e3,FE=100,$E=.1,uo=(()=>{class s{constructor(){this.ee={},this.Vh=()=>{},this.Va=new jE,this.De()}static isGestureDetectionSupported(){return typeof devicePixelRatio!="undefined"}onGesture(t){this.Vh=t}isValidTouchEvent(t){return"touches"in t&&"changedTouches"in t}processActionDown(t){if(!this.Uw(t))return;this.jw(t)&&this.De();let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:vr.now()};if(t.touches.length===1)this.ee.startPinchTime=e.time,this.ee.firstTouch=e;else if(t.touches.length===2&&(this.ee.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:vr.now()},this.ee.firstTouch&&this.ee.secondTouch)){let i=this.Va.computePinchMetrics(this.ee.firstTouch,this.ee.secondTouch);this.Nr=i.distance}csArray.prototype.push.call(this.Xn,e),this.Ua=Ot(t)}processActionMove(){this.Uh=!0}processActionUp(t){if(this.Hw(t)){if(csArray.prototype.push.call(this.Xn,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:vr.now()}),this.Bw(t)&&this.ee.startPinchTime){let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.ee.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:vr.now()};this.ee.firstTouch&&(this.ee.firstTouch=e,this.ee.secondTouch=i),this.Fw(t)}this.Nr||this.$w()&&this.zw(t)}}De(){this.Xn=[],this.Ua=null,this.Uh=!1,this.Nr=null,this.Kn=!0}zw(t){let e=this.Va.compute(this.Xn[0],this.Xn[1]);this.Kn=t.isTrusted;let i=this.Uh?this.Gw(e):this.qw(e);if(this.Ww(i.type,t.changedTouches)){let n=t.changedTouches[0];i.pageX=Tc(n.pageX,1),i.pageY=Tc(n.pageY,1)}this.Vh(i,t)}Fw(t){if(!(this.ee.firstTouch&&this.ee.secondTouch))return;let e=this.Va.computePinchMetrics(this.ee.firstTouch,this.ee.secondTouch);this.Kn=t.isTrusted;let i=this.Yw(e);i&&this.Vh(i,t)}Yw(t){return!this.Nr||this.Va.getScale(this.Nr,t.distance)<$E?void 0:{type:this.Nr>t.distance?Tt.PINCH_IN:Tt.PINCH_OUT,target:this.Ua,distance:t.distance,isTrusted:this.Kn}}Gw(t){return{type:t.velocity<FE?Tt.DRAG:Tt.FLICK,target:this.Ua,velocity:t.velocity,distance:t.distance,direction:t.direction,isTrusted:this.Kn}}qw(t){return{type:t.duration<BE?Tt.TAP:Tt.LONG_PRESS,target:this.Ua,isTrusted:this.Kn}}Ww(t,e){return t===Tt.TAP&&e&&e.length===1}jw(t){return t.touches.length===1}$w(){return this.Xn.length===2}Uw(t){return t.touches.length>0}Hw(t){return t.changedTouches.length>0}Bw(t){return this.Uh&&!!this.Nr&&t.changedTouches.length===1&&t.touches.length===1}}return s})(),zE="touchstart",GE="touchmove",qE="touchend",yh=(()=>{class s{constructor(t){this.R=t}observe(){s.Wp&&s.jh(this.R)}disconnect(){s.Wp&&s.$n(this.R)}static Xw(t,e){csArray.prototype.forEach.call(je(s.Vt),i=>i(t,e))}static jh(t){s.Vt.has(t)||(s.Vt.add(t),s.Vt.size===1&&(s.Jn.onGesture(s.Xw),csArray.prototype.forEach.call(s.pi,e=>gt(e))))}static $n(t){s.Vt.delete(t),s.Vt.size===0&&csArray.prototype.forEach.call(s.pi,e=>mt(e))}static Hh(t){if(s.Jn.isValidTouchEvent(t))switch(t.type){case"touchstart":s.Jn.processActionDown(t);break;case"touchmove":s.Jn.processActionMove();break;case"touchend":s.Jn.processActionUp(t);break}}}return s.pi=[{boundElement:it.document,type:zE,listener:r=>s.Hh(r)},{boundElement:it.document,type:GE,listener:r=>s.Hh(r)},{boundElement:it.document,type:qE,listener:r=>s.Hh(r)}],s.Wp=uo.isGestureDetectionSupported(),s.Vt=new Set,s.Jn=new uo,s})(),WE=(()=>{class s extends ne{constructor(){super(),this.Qn=new yh(this.Bh.bind(this))}onStart(){this.Qn.observe()}onStop(){this.Qn.disconnect()}Bh(t){let e=this.Kw(t);e&&this.produceEvent(e)}Kw(t){return this.Jw(t)?{type:"Gesture",targetId:q(t.target),data:{type:t.type,direction:t.direction,distance:t.distance,velocity:t.velocity,pageX:t.pageX,pageY:t.pageY}}:null}Jw(t){return t.target!==null&&!(dt(t.target)&&D.isMaskedElementChild(t.target))}}return s})(),Eh=(()=>{class s{constructor(t){this.R=t,this.gi=!1,this.te={boundElement:it,type:"error",listener:e=>this.Qw(e)}}observe(){gt(this.te,this.gi)}disconnect(){mt(this.te,this.gi)}Qw(t){this.R(t)}}return s})(),YE=(()=>{class s extends ne{constructor(){super(...arguments),this.Yp=new Eh(t=>this.Zw(t))}Zw({message:t,filename:e,lineno:i,colno:n}){t=t!=null?t:"[NO ERROR MESSAGE]",e=!e||se(e)?"":e,this.produceEvent({type:"JSError",message:t,filename:e,lineno:i,colno:n})}onStart(){this.Yp.observe()}onStop(){this.Yp.disconnect()}}return s})(),XE=(()=>{class s extends ci{constructor(t){super(),this.tA=t,this.Fh=1024,this.$h=150}isListening(t){return t.type==="JSError"}processEvent(t){return t.message=lt.truncate(t.message,this.Fh,lt.ELLIPSIS),t.filename=lt.truncate(t.filename,this.$h,lt.ELLIPSIS),this.tA(t)}}return s})();var Ks=[],fo=!1,vh=Hs(JE,"executeTasks");function KE(s){if(csArray.prototype.push.call(Ks,s),!fo){for(let r=0;r<3;r++)csSetTimeout(vh);fo=!0}}function JE(){let s=csDate.now();for(let r=0;r<Ks.length;r++)if(Ks[r](),csDate.now()-s>=35){Ks=csArray.prototype.slice.call(Ks,r+1),csSetTimeout(vh);return}Ks=[],fo=!1}var es=(()=>{let s;return function(r){r[r.Started=0]="Started",r[r.Stopped=1]="Stopped",r[r.Processing=2]="Processing",r[r.Completed=3]="Completed"}(s||(s={})),s})(),Sh=(()=>{class s{constructor(){this.wt=new Ui,this.xt=es.Stopped,this.R=null,this.Kp=t=>{this.xt===es.Stopped||!t||(this.R(t),this.Jp())}}get queueLength(){return this.wt.length}start(t){if(this.R)throw new Error("callback already set");this.xt=es.Started,this.R=t}push(t){this.wt.push(t),this.rA()}stop(){this.R=null,this.xt=es.Stopped,this.wt.clear()}static pipe(t,e){let i=t,n=new csArray;for(let c of e){let l=new s;l.start(h=>{c.pushEvent(h)}),csArray.prototype.push.call(n,l),K(i,h=>h.subscribe(u=>l.push(u))),i=[c]}let o=new QE(n);return K(i,c=>c.subscribe(l=>o.push(l))),o}Qp(){return this.xt===es.Stopped}ms(){return this.xt===es.Processing}Jp(){if(!this.Qp()){if(this.wt.isEmpty){this.xt=es.Completed;return}this.xt=es.Processing,KE(()=>{let t=this.wt.pop();t instanceof Qo?t.complete(this.Kp):this.Kp(t)})}}rA(){this.Qp()||this.ms()||this.Jp()}}return s})(),QE=(()=>{class s extends Sh{constructor(t){super(),this.Zp=t}get queueLength(){return csArray.prototype.reduce.call(this.Zp,(t,e)=>t+e.queueLength,0)}stop(){super.stop(),K(this.Zp,t=>t.stop())}}return s})(),ZE=(()=>{class s{constructor(t,e=[]){this.producers=t,this.processors=e,this.X=!1,this.Vt=[]}get pendingEvents(){var t,e;return(e=(t=this.wt)===null||t===void 0?void 0:t.queueLength)!==null&&e!==void 0?e:0}start(){if(this.X)throw new Error("Recording is already started.");let t=this.Vt;this.wt=Sh.pipe(this.producers,this.processors),this.wt.start(e=>csArray.prototype.forEach.call(t,i=>i(e))),K(this.producers,e=>e.start()),K(this.processors,e=>e.start()),this.X=!0}stop(){this.wt.stop(),this.Vt.length=0;for(let t of this.producers)t.stop();for(let t of this.processors)t.stop();this.X=!1,this.Vt=[]}subscribe(t){if(this.X)throw new Error("Recording is already started.");return csArray.prototype.push.call(this.Vt,t),()=>this.Vt=csArray.prototype.filter.call(this.Vt,e=>e!==t)}}return s})(),tv=2,sa=(()=>{class s{constructor(t){this.nA=t,this.ja=0}addString(t){this.ja+=t.length*tv}addArrayBuffer(t){this.ja+=t.byteLength}isThresholdReached(){return this.ja>this.nA}reset(){this.ja=0}}return s})(),ev=(()=>{class s{constructor(t){this.Ha={},this.ke=new sa(t)}save({key:t,metadata:e,events:i}){this.ke.isThresholdReached()||(this.ke.addString(t),typeof i=="string"?this.ke.addString(i):this.ke.addArrayBuffer(i),!this.ke.isThresholdReached()&&(this.Ha[t]={metadata:e,events:i}))}recover(t){let e=[];csArray.prototype.forEach.call(this.oA(),i=>{let n=this.Ha[i];n!==void 0&&(delete n.metadata.datatype,csArray.prototype.push.call(e,n),this.aA(i))}),e.length!==0&&(t(e),this.ke.reset())}oA(){return Object.keys(this.Ha)}aA(t){delete this.Ha[t]}}return s})(),ss=(()=>{let s;return function(r){r[r.NOT_STARTED=0]="NOT_STARTED",r[r.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",r[r.OPEN_FAILED=2]="OPEN_FAILED",r[r.READY=3]="READY"}(s||(s={})),s})(),sv=(()=>{class s{constructor(t,e,i){this.Mr=t,this.cA=i,this.Hi=ss.NOT_STARTED,this.Ba=[],this.Wh=0,this.lA=self.origin,this.xe=typeof window=="object"?"":"worker-",this.ke=new sa(e),this.hh()}async hh(){await this.tg(),this.Hi===ss.READY?this.hA():this.cA(this.Ba)}hA(){csArray.prototype.forEach.call(this.Ba,t=>{this.save(t)}),this.Ba=[]}async save(t){try{if(this.Hi===ss.OPEN_IN_PROGRESS){csArray.prototype.push.call(this.Ba,t);return}if(this.Hi!==ss.READY||this.ke.isThresholdReached())return;let{key:e,metadata:i,events:n}=t;if(this.ke.addString(e),typeof n=="string"?this.ke.addString(n):this.ke.addArrayBuffer(n),this.ke.isThresholdReached())return;await this.ae.put(`${this.lA}/${e}`,new Response(n,{headers:i}))}catch{}}async recover(t){!this.ae&&(await this.tg(),this.Hi!==ss.READY)||this.uA(t)}async tg(){try{this.Hi=ss.OPEN_IN_PROGRESS,this.ae=await self.caches.open(`${this.xe}${this.Mr}`),this.Hi=ss.READY}catch{this.Hi=ss.OPEN_FAILED}}async uA(t){try{if(this.Wh++,this.Wh>1)return;let e=await this.ae.keys();if(e.length===0)return;let i=await this.ae.matchAll(),n=csArray.prototype.map.call(i,c=>{let l={};c.headers.forEach((u,p)=>{l[p]=u}),delete l["content-type"];let h=l.datatype;return delete l.datatype,h==="json"||h==="base64"?c.text().then(u=>({metadata:l,events:u})):c.arrayBuffer().then(u=>({metadata:l,events:u}))}),o=await Promise.all(n);await Promise.all(csArray.prototype.map.call(e,c=>this.ae.delete(c))),t(o),this.ke.reset()}catch{}finally{this.Wh--}}}return s})(),iv=(()=>{class s{constructor(t){try{this.dA(t)}catch{this.Yh()}}dA(t){self.caches?this.fA(t):this.Yh()}save(t){this.Fa.save(t)}recover(t){this.Fa.recover(t)}fA(t){this.Fa=new sv(t,s.eg,e=>{this.Yh(e)})}Yh(t){this.Fa=new ev(s.eg),t&&csArray.prototype.forEach.call(t,e=>{this.Fa.save(e)})}}return s.eg=1024*1024*16,s})(),_h=(()=>{class s{constructor(t){this.sg=[],this.ig=[],this.Qe={},this.Zn=t}setQueryParams(t){csArray.prototype.forEach.call(Object.keys(t),e=>{this.Qe[e]=t[e]})}removeQueryParams(t){t?csArray.prototype.forEach.call(t,e=>{delete this.Qe[e]}):this.Qe={}}onBeaconSuccess(t){csArray.prototype.push.call(this.sg,t)}onBeaconFailure(t){csArray.prototype.push.call(this.ig,t)}send(t){let e=Ni.toQuery({...this.Qe,ct:zi.UNCOMPRESSED}),i=this.pA(e,t);return i?csArray.prototype.forEach.call(this.sg,n=>n()):csArray.prototype.forEach.call(this.ig,n=>n(this.Qe)),i}pA(t,e){try{if(typeof csNavigatorsendBeacon!="function")return!1;let i=csNavigatorsendBeacon(`${this.Zn}?${t}`,e||"");if(i)return i}catch{}return typeof navigator.sendBeacon!="function"?!1:navigator.sendBeacon(`${this.Zn}?${t}`,e||"")}}return s})(),rv=(()=>{class s{constructor(t,e){this.w=t,this.C=e,this.to=Kt.ETR_DISABLED,this.$a=Kt.ETR_PENDING,this.Xh=!0}getEtrStatus(t){t===void 0&&(t=this.C.getSession());let e=t==null?void 0:t.etrStatus;return this.rg()&&e===Kt.ETR_SAVED_SESSION?e:this.to}onEventTriggerRecording(t,e){switch(e){case hs.ETR_PAGE:this.ng(Kt.ETR_SAVED_PAGE);break;case hs.ETR_LEGACY:case hs.ETR_SESSION:this.ng(Kt.ETR_SAVED_SESSION);break}}onCollectStateChange(t,e){t===k.RECORDING_TEMPORARILY?this.Xh=!0:this.Xh=!1,t===k.ANALYTICS_ONLY&&e===re.ETR_ON?this.og(this.$a):this.og(Kt.ETR_DISABLED)}og(t){this.to=t,this.$a=Kt.ETR_PENDING,this.ag(t),this.w.emitRecordingContextChange()}ng(t){this.Xh?Number(t)>Number(this.$a)&&(this.$a=t):this.rg()&&Number(t)>Number(this.to)&&(this.to=t,this.ag(t),this.w.emitRecordingContextChange())}ag(t){let e=this.C.getSession();e!==null&&e.etrStatus===Kt.ETR_NOT_SAVED_SESSION&&t===Kt.ETR_SAVED_SESSION&&(e.etrStatus=t,this.C.setSession(e))}rg(){return this.to!==Kt.ETR_DISABLED}}return s})(),nv=(()=>{class s{constructor(t=100){this.gA=t,this.za={},this.eo=null,this.Eh="original-resource-name"}onEvent(t){this.mA=t}processEvent(t){this.yA(t.resourceId,t.resource.hash,t.originalResourceName),this.EA(t)}flushEvents(){this.eo&&csClearTimeout(this.eo),this.cg()}onSendStaticResource(t){this.EA=t}cg(){if(!Object.keys(this.za).length)return;let t={type:L.RESOURCE_HASHES,date:M.now(),args:[this.za]};this.eo=null,this.za={},this.mA(t)}yA(t,e,i){let n=e;i&&(n+=`?${this.Eh}=${i}`),this.za[t]=n,!this.eo&&(this.eo=window.csSetTimeout(()=>this.cg(),this.gA))}}return s})();function ov(s,r,t){let{timestamp:e}=s;switch(s.domEvent){case"initialDOM":{let{initialDOM:i}=s,n={type:L.INITIAL_DOM,date:e,args:[i]};t.emitInitialDomDone(n);break}case"nodesAdded":{csArray.prototype.forEach.call(s.nodes,i=>{r({type:L.MUTATION_INSERT,date:e,args:[s.target,s.nextSibling,i]})});break}case"nodesMoved":{for(let i of s.nodesIds)r({type:L.MUTATION_MOVE,date:e,args:[i,s.nextSibling,s.target]});break}case"nodesRemoved":{csArray.prototype.forEach.call(s.nodesIds,i=>{r({type:L.MUTATION_REMOVE,date:e,args:[i]})});break}case"attributeChanged":{let{target:i,namespace:n,attribute:o,newValue:c}=s;r({type:L.MUTATION_ATTRIBUTE,date:e,args:[i,n,o,c]});break}case"characterDataChanged":{let{target:i,newValue:n}=s;r({type:L.MUTATION_CHARACTER_DATA,date:e,args:[i,n]});break}case"cssRuleInserted":{let{target:i,rule:n,index:o}=s,c=X(o)?[i,n,o]:[i,n];r({type:L.STYLESHEET_RULE_INSERT,date:e,args:c});break}case"cssRuleDeleted":{let{target:i,index:n}=s;r({type:L.STYLESHEET_RULE_DELETE,date:e,args:[i,n]});break}case"cssRuleUpdated":{let{target:i,rule:n,index:o}=s;r({type:L.STYLESHEET_RULE_UPDATE,date:e,args:[i,n,o]});break}case"cssStyleSheetDisabled":{let{target:i,disabled:n}=s;r({type:L.STYLESHEET_DISABLED,date:e,args:[i,n]});break}case"shadowRootAttached":{let{target:i,shadowRoot:n}=s;r({type:L.ATTACH_SHADOW,date:e,args:[i,n]});break}case"adoptedStyleSheetRegistered":{let{sheetId:i,cssRules:n,disabled:o}=s;r({type:L.REGISTER_ADOPTED_STYLE_SHEET,date:e,args:[i,{cssRules:n,disabled:o}]});break}case"adoptedStyleSheetsSet":{let{target:i,sheetsIds:n}=s;r({type:L.SET_ADOPTED_STYLE_SHEETS,date:e,args:[i,n]});break}case"adoptedStyleSheetRuleInserted":{let{sheetId:i,rule:n,index:o}=s,c=X(o)?[i,n,o]:[i,n];r({type:L.ADOPTED_STYLESHEET_RULE_INSERT,date:e,args:c});break}case"adoptedStyleSheetRuleDeleted":{let{sheetId:i,index:n}=s;r({type:L.ADOPTED_STYLESHEET_RULE_DELETE,date:e,args:[i,n]});break}case"adoptedStyleSheetRuleUpdated":{let{sheetId:i,rule:n,index:o}=s,c=[i,n,o];r({type:L.ADOPTED_STYLESHEET_RULE_UPDATE,date:e,args:c});break}case"adoptedStyleSheetDisabled":{let{sheetId:i,disabled:n}=s,o=[i,n];r({type:L.ADOPTED_STYLESHEET_DISABLED,date:e,args:o});break}default:H.error("translateDOMEvent: DOMEvent not supported");break}}function av(s){let r=cv(s.data);return{type:L.GESTURE_RECOGNITION,args:[s.targetId,r],date:s.timestamp}}function cv(s){let r={type:lv(s.type)};for(let t in s){let e=s[t];e!==void 0&&t!=="type"&&(r[t]=e)}return r}function lv(s){switch(s){case Tt.DRAG:case Tt.FLICK:return mi.SWIPE;case Tt.LONG_PRESS:return mi.LONG_PRESS;case Tt.TAP:return mi.TAP;case Tt.PINCH_IN:return mi.PINCH_IN;case Tt.PINCH_OUT:return mi.PINCH_OUT}}function hv(s){switch(s.inputType){case"text":return{type:L.INPUT_TEXT,args:[s.target,s.value],date:s.timestamp};case"select":return{type:L.INPUT_SELECT,args:[s.target,s.selectedIndex],date:s.timestamp};case"checkable":return{type:L.INPUT_CHECKABLE,args:[s.target,s.checked],date:s.timestamp}}}var Cn=(()=>{let s;return function(r){r.REQUEST_START="requestStart",r.DOM_INTERACTIVE="domInteractive",r.TIME_ORIGIN="timeOrigin"}(s||(s={})),s})();function uv(s){return{type:L.PERFORMANCE_TIMINGS,args:[{performanceTiming:Cn.REQUEST_START,timestamp:s.timings.requestStart},{performanceTiming:Cn.DOM_INTERACTIVE,timestamp:s.timings.domInteractive},{performanceTiming:Cn.TIME_ORIGIN,timestamp:s.timings.timeOrigin}],date:s.timestamp}}var dv=500,In=0;function fv(){return{processEvent(s,r){if(s.originalEvent.type===L.PERFORMANCE_RESOURCE_TIMING)return In>=dv?null:(In+=1,r({...s.originalEvent,date:s.timestamp}));r(s.originalEvent)},reset(){In=0}}}function bc(s){let r=s.type==="DOM_INITIAL_STATE"?s.state:s.diff;for(let t in r){let e=r[t];e&&(delete e.parent,delete e.previousSibling,delete e.metadata)}return s}function pv(s,r){let t=[],e=!1;return{push(i){if(csArray.prototype.push.call(t,i),t.length===r.batchSize){this.flush();return}r.autoFlushDelay&&r.autoFlushDelay>0&&!e&&(e=!0,csSetTimeout(()=>{e=!1,t.length>0&&this.flush()},r.autoFlushDelay))},flush(){if(!t.length)return;let i=t;t=[],s(i)}}}var gv=20;function mv(s){return pv(r=>{let t={visibleInViewPort:r},e={type:L.TEXT_VISIBILITY,date:M.now(),args:[t]};s(e)},{batchSize:gv,autoFlushDelay:1e3})}function yv(s){switch(s.videoEventType){case"play":return{type:L.VIDEO_PLAY,args:[s.nodeId],date:s.timestamp};case"pause":return{type:L.VIDEO_PAUSE,args:[s.nodeId],date:s.timestamp};case"seeked":{let r=s;return{type:L.VIDEO_SEEK,args:[r.nodeId,r.newTimePositionInSec],date:s.timestamp}}default:return null}}var Ev=(()=>{class s{get pendingEvents(){return this.Ga.pendingEvents}constructor(t,e,i,n,o){this.Ga=t,this.w=e,this.Le=i,this.ys=n,this.ks=o,this.se=()=>{},this.so=()=>{},this.lg=mv(c=>this.se(c))}start(){var t,e;this.hg=fv(),this.Ga.subscribe(i=>{var n,o,c,l,h,u,p;let y=i,{timestamp:m}=y;switch(y.type){case"Legacy":{let v=y.eventType==="user"?(n=this.so)!==null&&n!==void 0?n:()=>{}:this.se;this.hg.processEvent(y,v)}break;case"CustomElementRegistration":{this.se({type:L.CUSTOM_ELEMENT_REGISTRATION,date:m,args:[y.tagName]});break}case"DomEvent":{ov(y,this.se,this.w);break}case"InputEvent":{let v=hv(y);(o=this.so)===null||o===void 0||o.call(this,v);break}case"inputEncryptedText":{let{target:v,value:b,encryptedData:I,encryptionMetadata:_}=y;(c=this.so)===null||c===void 0||c.call(this,{type:L.INPUT_ENCRYPTED_TEXT,date:m,args:[v,b,I,_]});break}case"encryptedCharacterDataChanged":{let{target:v,rawData:b,encryptedData:I,encryptionMetadata:_}=y;this.se({type:L.MUTATION_ENCRYPTED_CHARACTER_DATA,date:m,args:[v,b,I,_]});break}case"StaticResource":{let{url:v}=y;this.se({type:L.STATIC_RESOURCE_URL,date:m,args:[v]});break}case"ResizeMaskedElement":{let{target:v,width:b,height:I}=y;this.se({type:L.MUTATION_ATTRIBUTE,date:m,args:[v,"","style",`width:${b}px !important;height:${I}px !important;`]});break}case"Gesture":{let v=av(i);(l=this.so)===null||l===void 0||l.call(this,v);break}case"TextVisibility":{this.lg.push(y.text);break}case"StaticResourceManagerEvent":{(h=this.Le)===null||h===void 0||h.processEvent(y);break}case"screenResize":{let{width:v,height:b}=y,I={type:L.SCREEN_RESIZE,date:m,args:[v,b]};this.se(I);break}case"viewportResize":{let{width:v,height:b}=y,I={type:L.RESIZE,date:m,args:[v,b]};this.se(I);break}case"PerformanceTiming":{this.se(uv(y));break}case"CustomError":{let v=(u=this.ks)===null||u===void 0?void 0:u.translate(y);v&&this.se(v);break}case"JSError":{let v=(p=this.ys)===null||p===void 0?void 0:p.translate(y);v&&this.se(v);break}case"VideoEvent":{let v=yv(y);v&&this.se(v);break}case"DOM_INITIAL_STATE":{let v=bc(y),b={type:L.DOM_INITIAL_STATE,date:m,args:[v.state]};this.w.emitInitialDomDone(b);break}case"DOM_PATCH":{let v=bc(y),b={type:L.DOM_PATCH_STATE,date:m,args:[v.diff]};this.se(b);break}case"warning":{H.warn(y.message);break}default:H.error(`WebRecorderEventTranslator: Event not supported (${y.type})`);break}}),this.w.emitInitialDomStart(),(t=this.ys)===null||t===void 0||t.start(),(e=this.ks)===null||e===void 0||e.start(),this.Ga.start()}stop(){var t,e,i;this.reset(),this.flush(),this.Ga.stop(),(t=this.Le)===null||t===void 0||t.flushEvents(),(e=this.ys)===null||e===void 0||e.stop(),(i=this.ks)===null||i===void 0||i.stop()}flush(){this.lg.flush()}onEvent(t,e){var i;this.se=t,this.so=e,(i=this.Le)===null||i===void 0||i.onEvent(n=>this.se(n))}reset(){this.hg.reset()}}return s})();var vv=(()=>{class s{constructor(t){this.qa=t,this.Rn=20,this.Fi=0,this.B=!1}translate(t){if(this.Fi>=this.Rn)return this.qa.stop(),null;this.Fi+=1;let{filename:e,message:i,lineno:n,colno:o,timestamp:c}=t;return{type:L.JAVASCRIPT_ERROR,date:c,args:[{errorType:"jsError",message:i,filename:e,lineno:n,colno:o}]}}start(){this.B||(this.Fi=0,this.B=!0)}stop(){this.B=!1}}return s})(),Sv=(()=>{class s extends ne{constructor(t){super(),this.ze=t}subscribe(t){return super.subscribe(t)}onStart(){K(this.ze,t=>{t.onEvent(e=>{var i;return this.Dr(e,(i=t.eventType)!==null&&i!==void 0?i:"browser")})}),K(this.ze,t=>{var e;(e=t.start)===null||e===void 0||e.call(t)})}onStop(){K(this.ze,t=>{var e;return(e=t.stop)===null||e===void 0?void 0:e.call(t)})}Dr(t,e){this.produceEvent({timestamp:M.now(),type:"Legacy",originalEvent:t,eventType:e})}}return s})(),wh=(()=>{class s{emit(t,e,i,n=document){let c=`${i!==void 0?`${i}`:`${s.vA}`}${t}`,l=s.createEvent(c,{detail:e});l!==null&&n.dispatchEvent(l)}static createEvent(t,e={}){if(typeof CustomEvent=="function")return new CustomEvent(t,e);let i=this.SA();if(i===null)return null;let{bubbles:n=!1,cancelable:o=!1,detail:c}=e;return i.initCustomEvent(t,n,o,c),i}static SA(){try{return document.createEvent("CustomEvent")}catch{return null}}}return s.vA="cs.tracking.",s})(),ie=(()=>{let s;return function(r){r.Visible="visible",r.Hidden="hidden",r.Blur="blur",r.PagehideVisible="pagehideVisible",r.PagehideHidden="pagehideHidden",r.ExitPageByNavigate="exitPageByNavigate"}(s||(s={})),s})(),Ah=(()=>{class s{constructor(){this.B=!1,this.mi=t=>{try{switch(t.type){case"visibilitychange":return document.visibilityState==="hidden"?this.ce(ie.Hidden):this.ce(ie.Visible);case"pagehide":return document.visibilityState==="hidden"?this.ce(ie.PagehideHidden):this.ce(ie.PagehideVisible);case"blur":return this.ce(ie.Blur);case"navigate":return this._A(t)?this.ce(ie.ExitPageByNavigate):void 0;default:return}}catch{}}}start(){this.B||(this.B=!0,this.Kh(),this.wA(),this.AA(),Na()&&this.TA())}stop(){this.B&&(this.B=!1,this.Jh(),this.bA(),this.RA(),Na()&&this.CA())}onEvent(t){this.ce=t}TA(){window.navigation.addEventListener("navigate",this.mi)}CA(){window.navigation.removeEventListener("navigate",this.mi)}Kh(){document.addEventListener("visibilitychange",this.mi)}Jh(){document.removeEventListener("visibilitychange",this.mi)}wA(){window.addEventListener("pagehide",this.mi)}bA(){window.removeEventListener("pagehide",this.mi)}AA(){window.addEventListener("blur",this.mi)}RA(){window.removeEventListener("blur",this.mi)}_A(t){return t instanceof NavigateEvent?!t.hashChange&&!t.downloadRequest&&!t.formData:!1}}return s})(),Vt=(()=>{let s;return function(r){r[r.Active=0]="Active",r[r.Paused=1]="Paused",r[r.Stopped=2]="Stopped"}(s||(s={})),s})(),_v=(()=>{class s{constructor(t,e,i=[]){this.Dr=t,this.Qh=e,this.IA=i,this.Wa=null,this.xt=Vt.Active,this.lt=[]}reset(){this.Wa=null,this.lt=[],this.xt=Vt.Active}disconnect(){this.xt=Vt.Stopped}PA(){this.Qh(Vt.Paused),this.xt=Vt.Paused,csSetTimeout(()=>{this.xt===Vt.Paused&&this.Zh()},s.STOP_TIMEOUT)}OA(){this.Qh(Vt.Active),this.xt=Vt.Active,K(this.lt,this.Dr),this.lt=[]}Zh(){this.lt=[],this.Qh(Vt.Stopped),this.xt=Vt.Stopped}pushEvent(t,e){if(e.isUserEvent&&(this.Wa=t.date,this.xt!==Vt.Active)){this.OA(),this.Dr(t);return}if(this.NA(t)){this.Dr(t);return}switch(this.xt){case Vt.Active:if(this.MA(t,e)){this.PA(),csArray.prototype.push.call(this.lt,t);return}this.Dr(t);break;case Vt.Paused:csArray.prototype.push.call(this.lt,t);break;case Vt.Stopped:break}}MA(t,e){return!e.isUserEvent&&this.Wa!==null&&t.date-this.Wa>s.INACTIVITY_TIMEOUT}NA(t){return csArray.prototype.indexOf.call(this.IA,t.type)>-1}}return s.INACTIVITY_TIMEOUT=5e3,s.STOP_TIMEOUT=5e3,s})(),wv=2e3,Av=(()=>{class s extends jt{constructor(t,e,i,n,o,c,l,h,u,p,y,m,v,b=[],I,_,A,x,N){super(),this.E=t,this.z=e,this.DA=i,this.L=n,this.C=o,this._e=c,this.gt=l,this.pe=h,this.ut=u,this.K=p,this.Ut=y,this.Nt=m,this.Ge=v,this.ze=b,this.ug=I,this.ie=_,this.kr=A,this.ys=x,this.ks=N,this.si=0,this.yi=new wh,this.xr={allowFromQuotaService:!0,allowFromSerialization:!0},this.dg=$r(()=>{this.z.eventsCount()>0&&this.fg()},wv),this.xs=w=>this.processBrowserEvent(w),this.io=w=>this.jt(w),this.Ya=0,this.ro=0,this.Ze=new Ah,this.tu=!1,this.pg=50*1024,this.$i=!1,this.no=!1,this.Vi=[],this.Xa=new _v(w=>this.Q(w),w=>{switch(w){case Vt.Active:this.kA();break;case Vt.Stopped:this.xA();break}},[L.RESOURCE_HASHES,L.TEXT_VISIBILITY,L.API_ERROR,L.JAVASCRIPT_ERROR]),this.gg=w=>{this.Ut.removeBatchInProgress(`${w.params.sn}.${w.params.pn}.${w.params.ri}`)}}init(){this.eu(),this.K.onLoad(this.gg),this.K.onError(this.gg)}kA(){csArray.prototype.forEach.call(this.ug,t=>t.start())}xA(){csArray.prototype.forEach.call(this.ug,t=>t.stopForInactivity())}eu(){var t,e,i;this.Ge.onEvent(this.xs,this.io),(t=this.ut)===null||t===void 0||t.onInputNodeToEncrypt(this.io),(e=this.ut)===null||e===void 0||e.onApiErrorToEncrypt(n=>{this.mg(n)}),(i=this.ut)===null||i===void 0||i.onUserIdentifierToEncrypt(this.xs),this.Ze.onEvent(n=>{if(csSetTimeout(()=>this.zi("page-state",n)),n!==ie.Visible){if(n===ie.Blur)return this.yg();if(!this.tu)return this.tu=!0,csSetTimeout(()=>{this.tu=!1}),n===ie.Hidden?this.yg():this.LA()}})}isRecording(){return this.C.hasValidSession()&&this.isStarted}yg(){if(!this.canSendEvents())return;this.Ge.flush(),this.Ut.saveBatchesInProgress(),K(this.ze,c=>{var l,h;return K((h=(l=c.getPendingEvents)===null||l===void 0?void 0:l.call(c))!==null&&h!==void 0?h:[],u=>this.z.addEvent(u))});let t=this.z.getEvents();if(t.length===0)return;this.zi("pending-events",this.Ge.pendingEvents);let e=this.K.getQueryParams();e.rst=this.getRecordingStartTimestamp(),this.ro=t[t.length-1].date,e.let=this.getRecordingLastEventTimestamp();let i=this.z.getCurrentRequestIndex(),n=i.getCurrentIndex();e.ri=n.toString(),this.Nt.removeQueryParams(),this.Nt.setQueryParams(e);let o=this.z.stringifyEvents();if(o.length>this.pg){let c=this.Eg();if(c.length>0){let l=ks(c);this.Nt.send(l)||this.Ut.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:l}),i.increment()}if(this.z.eventsCount()>0){e.ri=i.getCurrentIndex().toString();let l=this.z.stringifyEvents();this.Ut.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:l}),i.increment()}}else this.Nt.send(o)||this.Ut.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:o}),i.increment();this.Nt.removeQueryParams(),this.z.clearEvents()}LA(){if(!this.canSendEvents())return;this.Ge.flush();let t=this.K.getQueryParams();this.Ut.saveBatchesInProgress(),t.rst=this.getRecordingStartTimestamp(),delete t.ri,t.hlm="true",this.Nt.removeQueryParams(),K(this.ze,n=>{var o,c;return K((c=(o=n.getPendingEvents)===null||o===void 0?void 0:o.call(n))!==null&&c!==void 0?c:[],l=>this.z.addEvent(l))});let e=this.z.getEvents();if(e.length===0){delete t.let,delete t.rst,this.Nt.setQueryParams(t),this.Nt.send(),this.Nt.removeQueryParams();return}this.zi("pending-events",this.Ge.pendingEvents),this.ro=e[e.length-1].date,t.let=this.getRecordingLastEventTimestamp(),this.Nt.setQueryParams(t);let i=this.z.stringifyEvents();if(i.length>this.pg){let n=this.Eg();if(n.length>0){let o=ks(n);this.Nt.send(o)||this.Ut.save({key:`${t.sn}.${t.pn}.last`,metadata:{...t,datatype:"json"},events:o})}else delete t.let,delete t.rst,delete t.ri,this.Nt.removeQueryParams(),this.Nt.setQueryParams(t),this.Nt.send(),this.Nt.removeQueryParams();if(this.z.eventsCount()>0){t.rst=this.getRecordingStartTimestamp(),t.let=this.getRecordingLastEventTimestamp();let o=this.z.getCurrentRequestIndex(),c=o.getCurrentIndex();t.ri=c.toString();let l=this.z.stringifyEvents();this.Ut.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:l}),o.increment()}}else this.Nt.send(i)||(this.Ut.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:i}),this.z.getCurrentRequestIndex().increment());this.Nt.removeQueryParams(),this.z.clearEvents()}blockSendingEventsFromQuotaService(){this.xr.allowFromQuotaService=!1}allowSendingEventsFromQuotaService(){this.xr.allowFromQuotaService=!0}blockSendingEventsFromSerialization(){this.xr.allowFromSerialization=!1}allowSendingEventsFromSerialization(){this.xr.allowFromSerialization=!0}canSendEvents(){return this.xr.allowFromQuotaService&&this.xr.allowFromSerialization}onIframeJavascriptError(t){var e;if(this._e&&this.ys){(e=this._e)===null||e===void 0||e.anonymize(t);let i=this.ys.translate({message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename,timestamp:M.now(),type:"JSError"});i&&this.xs(i)}}onIframeCustomError(t){if(this.ks){let e=this.ks.translate({...t,timestamp:M.now(),type:"CustomError"});e&&this.xs(e)}}onIframeDetailedApiError(t){this.vg(t)}onIframeRecordingUserEvent(t){for(let e of t)this.jt(e)}onIframeRecordingBrowserEvent(t){if(this.isStarted)for(let e of t)this.processBrowserEvent(e)}processBrowserEvent(t){this.L.isCurrentPageviewValid()&&this.Xa.pushEvent(t,{isUserEvent:!1})}jt(t){this.L.refreshSession(),this.L.isSessionValid()&&this.Xa.pushEvent(t,{isUserEvent:!0})}Q(t){St.general.nbEvents.increase(),this.z.addEvent(t),this.z.isThresholdReached()?this.pushEvents():this.z.isFull()&&this.dg(),this.Sg(t)}Sg(t){this.E.emitDebugEvents&&this.yi.emit("recordingEvent",{...t,typeName:L[t.type]})}onStart(){var t;this.zi("tag-version","15.169.0"),this.zi("page-state",document.visibilityState),this.Xa.reset(),this.Ze.start(),this.initStates(),this.Ge.start(),this.gt&&this.pe&&this.gt.subscribe(s.Ht,e=>this.vg(e),{detailedEvent:!0}),this.E.emitDebugEvents&&this.yi.emit("replayRecordingStarted"),csArray.prototype.forEach.call(this.Vi,e=>this._g(e)),this.Vi=[],this.$i&&((t=this.ie)===null||t===void 0||t.enableOnlineAssets(),this.$i=!1)}onStop(){var t;this.Ze.stop(),this.gt&&this.gt.unsubscribe(s.Ht),this.Ge.stop(),this.Xa.disconnect(),(t=this.ie)===null||t===void 0||t.disableOnlineAssets()}clearStates(){this.Ge.flush(),this.dg.cancel(),this.pushEvents(),this.K.removeQueryParams()}initStates(){this.Ya=M.now(),this.z.getCurrentRequestIndex().reset(),this.si=0,this.K.setQueryParams(this.DA.getRequestParameters())}pushEvents(){K(this.ze,t=>{var e;return(e=t.flushEvents)===null||e===void 0?void 0:e.call(t)}),this.z.eventsCount()>0&&(this.isStarted?this.fg():this.z.clearEvents())}fg(){if(!this.canSendEvents())return;let t=this.z.getOrderedBatchSlots();for(let e of t){let i=e.batch.getEvents();if(!i.length)continue;this.ro=i[i.length-1].date;let n=e.metadata.requestIndex,o=n.getCurrentIndex(),c=this.Ya>this.ro?i[0].date:this.Ya;this.K.setQueryParams({pn:csString(e.metadata.pageNumber),ri:o.toString(),rst:c.toString(),let:this.getRecordingLastEventTimestamp()});let l=this.K.getQueryParams();this.Ut.addBatchInProgress(`${l.sn}.${l.pn}.${o}`,{...this.K.getQueryParams()},i),this.K.send(i),n.increment(),e.batch.clearEvents(),this.wg&&this.wg()}this.z.clearEmptyBatchSlots()}addInitialDom(t){this.z.addEventByTimestamp(t),this.Sg(t)}vg(t){if(this.kr&&(t.plainCustomRequestHeaders||t.plainCustomResponseHeaders||t.requestBodyAttributes||t.responseBodyAttributes||t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody)){if(this.kr.truncate(t),this.ut){this.ut.registerApiErrorToEncrypt(t);return}t.customRequestHeaders="",t.customResponseHeaders="",t.requestBodyAttributes="",t.responseBodyAttributes="",t.queryParameters="",t.requestBody="",t.responseBody=""}this.mg(t)}mg(t){if(this.si<s.VA){let e={type:L.API_ERROR,date:M.now(),args:[this.pe.anonymize(t)]};this.xs(e),this.si=this.si+1,G.counters.networkRequests.count("collected")}}UA(t){t===hs.ETR_SESSION?this.K.setQueryParams({[s.jA]:s.Ag}):t===hs.ETR_PAGE&&this.K.setQueryParams({[s.HA]:s.Ag})}clearEvents(){this.z.clearEvents()}onCustomJavaScriptErrorEvent(t){var e;let i=(e=this.ys)===null||e===void 0?void 0:e.translate({type:"JSError",timestamp:M.now(),message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename});i&&this.xs(i)}onCustomErrorEvent(t){var e;let i=(e=this.ks)===null||e===void 0?void 0:e.translate({type:"CustomError",timestamp:M.now(),message:t.message,attributes:t.attributes});i&&this.xs(i)}onPageEvent(t){this.Tg(t)}onUserIdentifierEvent(t){var e;let i={userIdentifier:t,date:M.now(),keyId:this.E.encryptionPublicKeyId};(e=this.ut)===null||e===void 0||e.registerUserIdentifierToEncrypt(i)}onEventTriggerRecording(t,e){this.isStarted?this._g({eventName:t,eventType:e}):csArray.prototype.push.call(this.Vi,{eventName:t,eventType:e})}_g(t){this.UA(t.eventType),this.Tg(t.eventName),this.pushEvents()}Tg(t){let e={type:L.PAGE_EVENT,date:M.now(),args:[{eventName:csString.prototype.slice.call(t,0,s.BA)}]};this.z.addEvent(e)}triggerUnanonymizationConsentGranted(){let t={date:M.now(),type:L.UNANONYMIZED_CONSENT_GRANTED};this.z.addEvent(t)}triggerUnanonymizationConsentWithdrawn(){let t={date:M.now(),type:L.UNANONYMIZED_CONSENT_WITHDRAWN};this.z.addEvent(t)}triggerRecordingForSessionGranted(){this.zi("consent-granted")}triggerRecordingForSessionWithdrawn(){this.zi("consent-withdrawn")}activateOnlineAssetsOnNextPageview(){this.no=!0}getStaticResourceManagerStatus(){return this.ie?{isStarted:this.E.useStaticResourceManager&&ao.isSupported(),onlineAssets:{activated:this.ie.isOnlineAssetsActivated(),enabledOnNextPageview:this.no}}:null}resetOnlineAssetsOnPageview(){this.$i=!1,this.no=!1}updateOnlineAssetsOnPageview(){this.ie&&this.no&&(this.$i=!0,this.no=!1)}onRecordingRequestSent(t){this.wg=t}getRecordingStartTimestamp(){return this.Ya.toString()}getRecordingLastEventTimestamp(){return this.ro.toString()}onOptOut(){K(this.ze,t=>{var e;return(e=t.releaseResources)===null||e===void 0?void 0:e.call(t)})}zi(t,e){if(!this.E.emitRecordInfoEvents)return;let i={date:M.now(),type:L.RECORDING_INFO_EVENT,args:e==null?[t]:[t,e]};this.z.addEvent(i)}Eg(){return this.z.extractEvents(L.API_ERROR,L.JAVASCRIPT_ERROR,L.CUSTOM_ERROR,L.TEXT_VISIBILITY,L.POINTER_DOWN)}}return s.Ht="RecordingService",s.BA=255,s.VA=20,s.HA="etrp",s.jA="etrs",s.Ag="1",U([Nt("addInitialDom")],s.prototype,"addInitialDom",null),s})(),Tv=(()=>{class s extends jt{constructor(t,e,i){super(),this.le=t,this.Nt=e,this.K=i,this.su=!1,this.oo={},this.FA=n=>{if(n.length!==0)for(let o of n){let{metadata:c,events:l}=o;this.$A(c.rt)&&this.K.send(l,c)}},window.addEventListener("focus",()=>{this.recover()})}onStart(){this.oo={}}onStop(){}recover(){this.le.recover(this.FA)}addBatchInProgress(t,e,i){this.oo[t]={metadata:{...e},events:i}}removeBatchInProgress(t){delete this.oo[t]}blockSendingLastMessage(){this.su=!1}allowSendingLastMessage(){this.su=!0}sendLastMessageBeacon(){if(this.su){let{ri:t,rst:e,let:i,...n}=this.K.getQueryParams();n.hlm="true",this.Nt.setQueryParams(n),this.Nt.send()}}$A(t){return!!t&&csString.prototype.indexOf.call(t,k.RECORDING_TEMPORARILY)===-1}saveBatchesInProgress(){csArray.prototype.forEach.call(Object.keys(this.oo),t=>{let{metadata:e,events:i}=this.oo[t];this.le.save({key:`${e.sn}.${e.pn}.${e.ri}`,metadata:{...e,datatype:"json"},events:csJSON.stringify(i)})})}save(t){this.le.save(t)}}return U([P("RecordingRecovery")],s.prototype,"recover",null),s})(),bv=(()=>{let s;return function(r){r[r.NOT_EXIST=2]="NOT_EXIST"}(s||(s={})),s})(),Rv=8*1024*1024,Cv=(()=>{class s extends jt{constructor(t,e,i){super(),this.Le=t,this.bg=e,this._t=i,this.iu={},this.Rg=new Set,this.ms=!1}initState(){Zc()&&(this.Be=this._t.getRequestParameters(),this.zA=`${this.bg}/exist?${Ni.toQuery(this.Be)}`,this.GA=`${this.bg}/putTag?${Ni.toQuery(this.Be)}`,this.Cg=Ci(async()=>{if(this.ms){this.Cg();return}this.ms=!0;try{await this.qA()}finally{this.ms=!1}},300),this.Le.onSendStaticResource(t=>{this.Ig(t)}))}onStart(){}onStop(){}onIframeStaticResource(t){this.Ig(t)}Ig(t){this.Pg(t.resource.hash,t.resource.data),t.nestedResources&&t.nestedResources.length>0&&csArray.prototype.forEach.call(t.nestedResources,e=>{this.Pg(e.hash,e.data)})}Pg(t,e){this.Rg.has(t)||(this.Rg.add(t),this.iu[t]=e,this.Cg())}async qA(){let t=this.iu;this.iu={};let e=await this.WA(t);if(!e.length)return;let i=this.YA(e);await Promise.all(csArray.prototype.map.call(i,n=>window.fetch(this.GA,{method:"POST",body:n})))}async KA(t){try{let e=Object.keys(t);if(!e.length)return[];let i={projectId:this.Be.pid,filter:bv.NOT_EXIST,hashes:e,touch:!0};return await(await window.fetch(this.zA,{method:"POST",body:csJSON.stringify(i)})).json()}catch{return[]}}async WA(t){let e=[],i=await this.KA(t);return csArray.prototype.forEach.call(i,n=>{let o=t[n];o?csArray.prototype.push.call(e,{hash:n,data:o}):H.warn("SRM: received unknown hash: "+n)}),e}YA(t){let e=0,i=[new FormData];for(let n of t){let{data:o,hash:c}=n,l=i.length-1;if(e=e+o.size,e<Rv)i[l].append("",o,c);else{let h=new FormData;h.append("",o,c),e=o.size,csArray.prototype.push.call(i,h)}}return i}}return s})(),Th=2*1e3*1024,Iv=200,Rc=(()=>{class s{constructor(t=Th){this.Bt=[],this.ru=new sa(t)}addEvent(t){this.ru.addString(ks(t)),csArray.prototype.push.call(this.Bt,t)}addEventByTimestamp(t){let e=0;for(;e<this.Bt.length&&!(this.Bt[e].date>=t.date);e+=1);csArray.prototype.splice.call(this.Bt,e,0,t)}eventsCount(){return this.Bt.length}clearEvents(){this.ru.reset(),this.Bt=[]}isFull(){return this.eventsCount()>=Iv}isThresholdReached(){return this.ru.isThresholdReached()}getEvents(){return this.Bt}extractEvents(...t){let e=[],i=[];return csArray.prototype.forEach.call(this.Bt,n=>{csArray.prototype.indexOf.call(t,n.type)!==-1?csArray.prototype.push.call(e,n):csArray.prototype.push.call(i,n)}),this.Bt=i,e}stringifyEvents(){return ks(this.Bt)}VO(t){t.type===L.INITIAL_DOM&&(window.CSDomSerialized=window.CSDomSerialized?window.CSDomSerialized+1:1)}}return U([Nt("RecordingBatch.addEvent")],s.prototype,"addEvent",null),s})(),Cc=(()=>{class s{constructor(){this.Ka=1}getCurrentIndex(){return this.Ka}increment(){this.Ka+=1}reset(){this.Ka=1}getRequestParameters(){return{ri:`${this.Ka}`}}}return s})(),Pv=3,Ov=8,Nv=(()=>{class s{constructor(t,e=Th,i=Pv){this.JA=t,this.Og=e,this.nu=i,this.Ja={}}addEvent(t){this.Ng().addEvent(t)}addEventByTimestamp(t){this.Ng().addEventByTimestamp(t)}eventsCount(){return csArray.prototype.reduce.call(this.Gi(),(t,e)=>t+e.batch.eventsCount(),0)}isFull(){return csArray.prototype.some.call(this.Gi(),t=>t.batch.isFull())}isThresholdReached(){let t=this.Gi();return t.length>=this.nu||csArray.prototype.some.call(t,e=>e.batch.isThresholdReached())}getEvents(){return csArray.prototype.reduce.call(this.getOrderedBatchSlots(),(t,e)=>csArray.prototype.concat.call(t,e.batch.getEvents()),[])}extractEvents(...t){return csArray.prototype.reduce.call(this.getOrderedBatchSlots(),(e,i)=>csArray.prototype.concat.call(e,i.batch.extractEvents(...t)),[])}stringifyEvents(){return ks(this.getEvents())}clearEvents(){csArray.prototype.forEach.call(this.Gi(),t=>t.batch.clearEvents())}clearEmptyBatchSlots(){let t=this.getOrderedBatchSlots();for(let e=0;e<t.length-1;e++)t[e].batch.eventsCount()===0&&delete this.Ja[t[e].metadata.pageNumber]}Gi(){return lm(this.Ja)}getOrderedBatchSlots(){return csArray.prototype.sort.call(this.Gi(),Mv)}Mg(){let t=this.JA();if(t<=0)return{batch:new Rc(this.Og),metadata:{pageNumber:0,requestIndex:new Cc}};let e=this.Ja[t];if(e)return e;let i={batch:new Rc(this.Og),metadata:{pageNumber:t,requestIndex:new Cc}};return this.Ja[t]=i,this.Gi().length>Math.max(this.nu,Ov)&&H.warn(`RecordingBatchGroup: max number of slots overflowed(${this.Gi().length}/${this.nu})`),i}Ng(){return this.Mg().batch}getCurrentRequestIndex(){return this.Mg().metadata.requestIndex}}return s})();function Mv(s,r){return s.metadata.pageNumber-r.metadata.pageNumber}function zt(s,r=0){let t=Math.pow(10,r);return Math.round(s*t)/t}var Dv=(()=>{class s{constructor(t,e){this.Mt=t,this.D=e,this.pi=[{boundElement:window,type:"hashchange",listener:()=>this.hashChangeListener()},{boundElement:document,type:"visibilitychange",listener:()=>this.visibilityChangeListener()}]}onEvent(t){this.j=t}start(){this.qi(),this.triggerInitialEvents()}stop(){this.Wi()}qi(){csArray.prototype.forEach.call(this.pi,t=>gt(t))}Wi(){csArray.prototype.forEach.call(this.pi,t=>mt(t))}triggerInitialEvents(){this.hashChangeListener()}hashChangeListener(){let t={type:L.HASH_CHANGE,args:[this.D.anonymizePII(this.Mt.href)],date:M.now()};this.j(t)}visibilityChangeListener(){let t={type:L.VISIBILITY_CHANGE,args:[document.visibilityState],date:M.now()};this.j(t)}}return U([P("hashChange")],s.prototype,"hashChangeListener",null),U([P("visibilityChange")],s.prototype,"visibilityChangeListener",null),s})(),Zs=(()=>{let s;return function(r){r[r.COPY=0]="COPY",r[r.CUT=1]="CUT",r[r.PASTE=2]="PASTE"}(s||(s={})),s})(),Y=(()=>{let s;return function(r){r[r.SPACE=0]="SPACE",r[r.ENTER=1]="ENTER",r[r.BACKSPACE=2]="BACKSPACE",r[r.DELETE=3]="DELETE",r[r.ARROWUP=4]="ARROWUP",r[r.ARROWDOWN=5]="ARROWDOWN",r[r.ARROWLEFT=6]="ARROWLEFT",r[r.ARROWRIGHT=7]="ARROWRIGHT",r[r.CAPSLOCK=8]="CAPSLOCK",r[r.SHIFT=9]="SHIFT",r[r.TAB=10]="TAB",r[r.ALPHANUMERICAL=11]="ALPHANUMERICAL",r[r.ESCAPE=12]="ESCAPE",r[r.END=13]="END",r[r.ALT=14]="ALT",r[r.CTRL=15]="CTRL",r[r.META=16]="META"}(s||(s={})),s})();function kv(s){if(!C(s))return null;let t=/iP(ad|hone|od).+Version\/(\d+)\..*Safari/i.exec(s);return t?Number(t[2]):null}var Ic="data-cs-scroll-container";function xv(s){try{if(yt(csEventtarget.apply(s)))return!0}catch{}return!1}var ti=(()=>{let s;return function(r){function t(i){return!!(yt(i)&&xv(i)&&ps(csEventtarget.apply(i))&&csEventtarget.apply(i).getAttribute(Ic)!==null)}r.isEventOnScrollContainer=t;function e(){return window.csquerySelector[document.nodeType].call(document,`[${Ic}]`)}r.getScrollContainer=e}(s||(s={})),s})(),Lv=33,Vv=(()=>{class s{constructor(){this.eventType="user",this.au=[],this.nT=[{type:"pointerup",listener:e=>this.pointerUpListener(e),boundElement:document},{type:"pointermove",listener:e=>this.pointerMoveListener(e),boundElement:document},{type:"pointerdown",listener:e=>this.pointerDownListener(e),boundElement:document}],this.oT=[{type:"touchstart",listener:e=>this.touchStartListener(e),boundElement:document},{type:"touchmove",listener:e=>this.touchMoveListener(e),boundElement:document},{type:"touchend",listener:e=>this.touchEndCancelListener(e),boundElement:document},{type:"touchcancel",listener:e=>this.touchEndCancelListener(e),boundElement:document}],this.Za=[{type:"click",listener:e=>this.clickListener(e),boundElement:document},{type:"keyup",listener:e=>this.keyUpListener(e),boundElement:document},{type:"keydown",listener:e=>this.keyDownListener(e),boundElement:document},{type:"copy",listener:e=>this.copyListener(e),boundElement:document},{type:"cut",listener:e=>this.cutListener(e),boundElement:document},{type:"paste",listener:e=>this.pasteListener(e),boundElement:document},{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e)),boundElement:document},{type:"mouseover",listener:e=>this.mouseOverListener(e),boundElement:document}],this.lu=[{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e))}];let t=kv(window.navigator.userAgent);(t===null||t&&t>=16)&&csArray.prototype.push.call(this.lu,{type:"mouseover",listener:e=>this.mouseOverListener(e)}),this.Ee=new ai((e,i)=>{switch(i){case"initial":case"added":this.qi(e);break;case"removed":this.Wi(e);break}})}init(){this.aT(),this.cT(),this.hu()}onEvent(t){csArray.prototype.push.call(this.au,t)}he(t,e=!1){csArray.prototype.forEach.call(this.au,i=>i(t,e))}start(){this.Ph(),this.qi(document),this.Ee.observe()}stop(){this.Wi(document),this.Ee.disconnect(),this.au=[]}cT(){this.lT()&&csArray.prototype.push.call(this.Za,...this.nT)}aT(){this.hT()&&csArray.prototype.push.call(this.Za,...this.oT)}qi(t){Nr(t)?csArray.prototype.forEach.call(this.Za,e=>gt(e)):csArray.prototype.forEach.call(this.lu,e=>{let i={type:e.type,listener:e.listener,boundElement:t};gt(i)})}Wi(t){Nr(t)?csArray.prototype.forEach.call(this.Za,e=>mt(e)):csArray.prototype.forEach.call(this.lu,e=>{let i={type:e.type,listener:e.listener,boundElement:t};mt(i)})}lT(){return"PointerEvent"in window&&typeof window.PointerEvent=="function"}hT(){return"TouchEvent"in window&&typeof window.TouchEvent=="function"}Ph(){this.uT()}uT(){let t=ti.getScrollContainer()||document,e=q(t),i=this.Dg(t);if(i.top!==0||i.left!==0){let n={type:L.SCROLL,args:[e,i.left,i.top],date:M.now()};this.he(n,!0)}}Dg(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}}scrollListener(t){if(D.isMaskedElement(t)||D.isMaskedElementChild(t))return;let e=q(t),i=this.Dg(t),n={type:L.SCROLL,args:[e,i.left,i.top],date:M.now()};this.he(n)}mouseOverListener(t){if(D.isMaskedElementChild(t.target))return;let e=q(t.target),i={type:L.MOUSE_OVER,args:[e],date:M.now()};this.he(i)}clickListener(t){let e=Ot(t);if(D.isMaskedElementChild(e))return;let i=q(e),n={type:L.CLICK,args:[i],date:M.now()};this.he(n)}keyUpListener(t){let e=Ot(t);if(D.isMaskedElementChild(e))return;let i=q(e),n=this.F[t.key];if(n===void 0)return;let o={type:L.KEY_UP,args:[i,n],date:M.now()};this.he(o)}keyDownListener(t){let e=Ot(t);if(D.isMaskedElementChild(e))return;let i=q(e),n=this.F[t.key];if(n===void 0)return;let o={type:L.KEY_DOWN,args:[i,n],date:M.now()};this.he(o)}copyListener(t){let e=Ot(t);if(D.isMaskedElementChild(e))return;let i=q(e),n={type:L.CLIPBOARD_COMMAND,args:[i,Zs.COPY],date:M.now()};this.he(n)}cutListener(t){let e=Ot(t);if(D.isMaskedElementChild(e))return;let i=q(e),n={type:L.CLIPBOARD_COMMAND,args:[i,Zs.CUT],date:M.now()};this.he(n)}pasteListener(t){let e=Ot(t);if(D.isMaskedElementChild(e))return;let i=q(e),n={type:L.CLIPBOARD_COMMAND,args:[i,Zs.PASTE],date:M.now()};this.he(n)}pointerUpListener(t){let e=Ot(t);if(D.isMaskedElementChild(e))return;let i=q(e),n={type:L.POINTER_UP,args:[t.pointerId,t.pointerType,zt(t.clientX,1),zt(t.clientY,1),i,t.button],date:M.now()};this.he(n)}pointerMoveListener(t){let e={type:L.POINTER_MOVE,args:[t.pointerId,t.pointerType,zt(t.clientX,1),zt(t.clientY,1)],date:M.now()};this.he(e)}pointerDownListener(t){let e=Ot(t);if(D.isMaskedElementChild(e))return;let i=q(e),n={type:L.POINTER_DOWN,args:[t.pointerId,t.pointerType,zt(t.clientX,1),zt(t.clientY,1),i,t.button,{pageX:zt(t.pageX,1),pageY:zt(t.pageY,1)}],date:M.now()};this.he(n)}touchStartListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:L.TOUCH_START,args:[n.identifier,zt(n.clientX,1),zt(n.clientY,1)],date:M.now()};this.he(o)}}touchMoveListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:L.TOUCH_MOVE,args:[n.identifier,zt(n.clientX,1),zt(n.clientY,1)],date:M.now()};this.he(o)}}touchEndCancelListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let n=e[i],o={type:t.type==="touchend"?L.TOUCH_END:L.TOUCH_CANCEL,args:[n.identifier,zt(n.clientX,1),zt(n.clientY,1)],date:M.now()};this.he(o)}}hu(){this.F={},this.F[" "]=Y.SPACE,this.F.Spacebar=Y.SPACE,this.F.Backspace=Y.BACKSPACE,this.F.Enter=Y.ENTER,this.F.Delete=Y.DELETE,this.F.ArrowUp=Y.ARROWUP,this.F.ArrowDown=Y.ARROWDOWN,this.F.ArrowLeft=Y.ARROWLEFT,this.F.ArrowRight=Y.ARROWRIGHT,this.F.Up=Y.ARROWUP,this.F.Down=Y.ARROWDOWN,this.F.Left=Y.ARROWLEFT,this.F.Right=Y.ARROWRIGHT,this.F.CapsLock=Y.CAPSLOCK,this.F.Shift=Y.SHIFT,this.F.Tab=Y.TAB,this.F.Escape=Y.ESCAPE,this.F.Esc=Y.ESCAPE,this.F.End=Y.END,this.F.Alt=Y.ALT,this.F.Control=Y.CTRL,this.F.Meta=Y.META}}return U([Nt("RecordingPageEvents.start")],s.prototype,"start",null),U([P("scroll")],s.prototype,"scrollListener",null),U([P("mouseOver"),ut(),Gp()],s.prototype,"mouseOverListener",null),U([P("click"),ut()],s.prototype,"clickListener",null),U([P("Event handler type: keyup")],s.prototype,"keyUpListener",null),U([P("Event handler type: keydown")],s.prototype,"keyDownListener",null),U([P("Event handler type: copy")],s.prototype,"copyListener",null),U([P("Event handler type: cut")],s.prototype,"cutListener",null),U([P("Event handler type: paste")],s.prototype,"pasteListener",null),U([P("Event handler type: pointerup"),ut()],s.prototype,"pointerUpListener",null),U([P("Event handler type: pointermove"),ut(),Bs({wait:Lv})],s.prototype,"pointerMoveListener",null),U([P("Event handler type: pointerdown"),ut()],s.prototype,"pointerDownListener",null),U([P("Event handler type: touchstart"),ut()],s.prototype,"touchStartListener",null),U([P("Event handler type: touchmove"),ut()],s.prototype,"touchMoveListener",null),U([P("Event handler type: touchend-cancel"),ut()],s.prototype,"touchEndCancelListener",null),s})(),Uv=(()=>{class s{constructor(t={maskingEnabled:!0}){this.dT=t}onScannedAsset(t){this.tc=t}sc(){let t=window.location.href,e=csString.prototype.indexOf.call(t,"#");return e===-1?t:csString.prototype.substring.call(t,0,e)}scanCssString(t){this.du(Ri(t))}scanElement(t,e){this.dT.maskingEnabled&&(D.getMaskedElementDetails(t).state!==D.MaskedElementState.NotMasked||e&&D.isMaskedAttribute(t,e))||(Hi(t)?this.fT(t):No(t)?this.pT(t,e):(this.gT(t,e),this.mT(t,e),this.yT(t,e)))}pT(t,e){var i;if((!e||e==="href")&&t.href){let o={assetId:((i=t.sheet)===null||i===void 0?void 0:i.href)||t.href,assetBasePath:this.sc(),assetRawPath:ih(t)};this.tc({type:"stylesheet",asset:o})}}fT(t){var e;let i=new Set;if(t.textContent)for(let o of Ri(t.textContent))i.add(o);let n;try{n=(e=t.sheet)===null||e===void 0?void 0:e.cssRules}catch(o){o.name==="SecurityError"||o.name==="InvalidAccessError"||H.error(o.message)}if(n)for(let o=0;o<n.length;o++){let c=n.item(o).cssText;for(let l of Ri(c))i.add(l)}this.du(je(i))}fu(t){return!this.ET(t)&&!se(t)&&!Xf(t)}gT(t,e){if(Hd(t)||jd(t)){if(!e||e==="src"){let i=t.getAttribute("src");if(i&&this.fu(i)){let n={assetId:t.src,assetRawPath:i,assetBasePath:this.sc()};this.tc({type:"asset",asset:n})}}(!e||e==="srcset")&&t.srcset&&this.vT(t.srcset)}}mT(t,e){if(csNodenodeType.apply(t)!==1){at.warn(`StaticResourceUrlTracker: Wrong element nodeType: ${t==null?void 0:t.nodeName}/${csNodenodeType.apply(t)}`);return}if(t.hasAttribute&&(!e||e==="style")&&t.hasAttribute("style")){let i=t.getAttribute("style");if(typeof i=="string")this.scanCssString(i);else throw new Error("Unexpected style: "+t.outerHTML)}}vT(t){this.du(Zo(t))}yT(t,e){if((zd(t)||Gd(t)||qd(t))&&(!e||e==="href"||e==="xlink:href")){let i=t.getAttribute("href")||t.getAttribute("xlink:href");if(i&&this.fu(i)){let n={assetId:ge(i),assetRawPath:i,assetBasePath:this.sc()};this.tc({type:"asset",asset:n})}}}du(t){return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(t,e=>this.fu(e)),e=>({rawUrl:e,absoluteUrl:ge(e)})),e=>{let i={assetId:e.absoluteUrl,assetBasePath:this.sc(),assetRawPath:e.rawUrl};this.tc({type:"asset",asset:i})})}ET(t){return/^https:\/\/\w+:\w+@/.test(t)}}return s})(),jv=30,Hv=0,bh=(()=>{class s{constructor(t,e=jv,i=Hv){this.ST=t,this._T=e,this.wT=i,this.ss=new Ui,this.We=!1,this.pu=0,this.kg=()=>{for(this.pu=0;this.ss.length;){if(this.pu>=this._T){csSetTimeout(this.kg,this.wT);return}let n=M.elapsed(),o=this.ss.pop();if(!o)break;this.runTask(o);let c=M.elapsed()-n;this.pu+=c}this.We=!1}}schedule(t,e=!1){if(!this.ST||e){t();return}St.general.pendingTasks.increase(),this.ss.push(t),this.AT()}AT(){this.We||(this.We=!0,csSetTimeout(()=>{this.kg()}))}runTask(t){St.general.pendingTasks.decrease(),t()}runPendingTasks(){this.ss.forEach(t=>{this.runTask(t)}),this.ss.clear()}clearQueue(){St.general.pendingTasks.clear(),St.mutations.pendingMutations.clear(),this.ss.clear()}isEmpty(){return this.ss.length===0}}return U([P("TaskScheduler"),Nt("runTask")],s.prototype,"runTask",null),U([Nt("runPendingTasks")],s.prototype,"runPendingTasks",null),s})(),Bv=(()=>{class s{constructor(){this.X=!1,this.xg=new Jo(t=>t.type==="cssRuleInserted"&&this.TT(t)),this.bT=qr(t=>{this.X&&t.length>0&&this.N.schedule(()=>K(t,e=>this.lo.scanElement(e)))}),this.RT=({type:t,asset:e})=>{var i,n,o;t==="stylesheet"&&((i=this.CT)===null||i===void 0||i.call(this,e)),(n=this.IT)===null||n===void 0||n.call(this,e);let c={date:M.now(),type:L.STATIC_RESOURCE_URL,args:[e.assetId]};(o=this.j)===null||o===void 0||o.call(this,c)},this.N=new bh(!0,30,0),this.qn=new gh(t=>this.PT(t)),this.U=new Ee(t=>this.Rr(t)),this.lo=new Uv,this.lo.onScannedAsset(this.RT)}onEvent(t){this.j=t}onAsset(t){this.IT=t}onStyleSheetFound(t){this.CT=t}start(){this.X||(this.X=!0,this.xg.observe(),this.qn.observe(),this.U.observe())}stop(){this.X&&(this.xg.disconnect(),this.qn.disconnect(),this.U.disconnect(),this.X=!1)}TT(t){!t.rule||!this.X||this.lo.scanCssString(t.rule)}PT(t){this.X&&D.getMaskedElementDetails(t).state===D.MaskedElementState.NotMasked&&this.bT.push(t)}Rr(t){csSetTimeout(()=>{for(let e of t)switch(e.type){case"attributes":this.lo.scanElement(e.target,e.attributeName);break;case"characterData":this.OT(e.target);break;case"childList":}})}OT(t){Or(t)&&csNodeparentNode.apply(t)&&Hi(csNodeparentNode.apply(t))&&this.lo.scanCssString(t.data)}}return s})(),Fv="csPersisted",Pc="v2/recording",$v=["isRecording"],Rh=["replay:resourceManager:enableForOnlineResource:nextPageviewOnly","cssrm:onlineAssets:activateForNextPageview"],zv=["replay:resourceManager:getStatus","cssrm:getStatus"],Gv=(()=>{class s{constructor(t,e,i,n,o,c,l,h,u,p,y,m,v,b,I,_,A,x,N,w,B,F){this.Ei=t,this.C=e,this.E=i,this.Be=n,this.S=o,this.D=c,this.L=l,this.we=h,this._e=u,this.gt=p,this.pe=y,this.mt=m,this.w=v,this.vi=b,this.Lg=I,this.Xt=_,this.Dt=A,this.Z=x,this.kr=N,this.it=w,this.UO=B,this.ut=F}init(){var t,e,i;let n=[],o=[];csArray.prototype.push.call(o,new Yy),this.ho=new cE(this.it.shouldUseAnonymization(),this.E.whitelistedAttributes,this.D,this.E.anonymizeDigits),this.Yi();let c=new iv(Fv);this.NT(c),this.z=new Nv(()=>{var w;return((w=this.C.getSession())===null||w===void 0?void 0:w.pageNumber)||0});let l=new Bv;csArray.prototype.push.call(n,l),this.E.useStaticResourceManager&&ao.isSupported()&&(this.ie=new ao,this.Le=new nv,this.Vg=new Cv(this.Le,this.E.getStaticResourceManagerUri(),this.Be),this.Lg.addListener(this.Vg),csArray.prototype.push.call(o,this.ie));let h=new Di(this.Be,{getRequestParameters:()=>({let:this.recordingService.getRecordingLastEventTimestamp()})},{getRequestParameters:()=>({rst:this.recordingService.getRecordingStartTimestamp()})},{getRequestParameters:()=>({rt:csArray.prototype.join.call(this.C.getRecordingTypes(),",")})}),u=new _h(`${this.E.getRecordingUri()}/${Pc}`);csArray.prototype.push.call(o,this.ho),csArray.prototype.push.call(o,new TE(this.Z)),csArray.prototype.push.call(o,new RE),this.Xi=new Vv,this.Xi.init(),csArray.prototype.push.call(n,this.Xi),this.Ut=new Tv(c,u,this.K),csArray.prototype.push.call(n,new Dv(window.location,this.D));let p=!1,y=p?new CE:new Wy,m=p?null:new OE,v=p?null:new ME,b=p?null:new xE(this.ut,(e=this.E.experimental)===null||e===void 0?void 0:e.trackedCustomInputProperties),I=p?null:new VE,_=csArray.prototype.filter.call([m,this.we,y,new Sv(csArray.prototype.filter.call(n,w=>w)),I,new UE,new WE,b,v],Boolean);this.E.textVisibilityEnabled&&ds.isSupported()&&(this.uo=new aE,csArray.prototype.push.call(_,this.uo)),this.E.jsErrorsEnabled&&(this.qa=new YE,this.MT=new XE(w=>this._e.anonymize(w)),this.ys=new vv(this.qa),csArray.prototype.push.call(_,this.qa),csArray.prototype.push.call(o,this.MT));let A=new ZE(_,o),x=new Ev(A,this.w,this.Le,this.ys,this.ks),N=csArray.prototype.filter.call([y,m,v,b,I],Boolean);this.recordingService=new Av(this.E,this.z,h,this.L,this.C,this._e,this.gt,this.pe,this.ut,this.K,this.Ut,u,x,n,N,this.ie,this.kr,this.ys,this.ks),this.vi.addListener(this.recordingService),this.Lg.addListener(this.recordingService),this.recordingService.init(),this.S.register($v,()=>this.C.isReplayRecorded()&&!this.Xt.isUrlExcludedForSessionReplay()),this.S.register(Rh,()=>{this.recordingService.activateOnlineAssetsOnNextPageview(),this.w.emitRecordingContextChange()}),this.S.register(zv,()=>this.recordingService.getStaticResourceManagerStatus()),this.fo=new rv(this.w,this.C),this.vi.addListener(this.fo),this.Ei.enableRecordingContext(this.recordingService,this.C,this.fo),this.gu()}onAfterNaturalPageView(){var t;this.Xt.isUrlExcludedForSessionReplay()?this.recordingService.resetOnlineAssetsOnPageview():this.recordingService.updateOnlineAssetsOnPageview(),(t=this.Vg)===null||t===void 0||t.initState()}onStartTracking(){this.Ut.recover(),this.Yi(),this.C.isReplayRecorded()&&!this.Xt.isUrlExcludedForSessionReplay()&&(this.C.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.ic())}onArtificialPageViewEnd(){this.C.isReplayRecorded()&&!this.Xt.isUrlExcludedForSessionReplay()&&!this.C.isTemporarilyRecorded()&&this.Ut.sendLastMessageBeacon(),this.recordingService.clearStates(),this.po()}onAfterArtificialPageView(){this.Yi(),this.C.isReplayRecorded()&&!this.Xt.isUrlExcludedForSessionReplay()?(this.C.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.recordingService.updateOnlineAssetsOnPageview(),this.ic()):this.recordingService.resetOnlineAssetsOnPageview()}onBeforeSessionRenewal(){this.recordingService.clearStates(),this.po()}onOptout(){this.po(),this.recordingService.onOptOut()}onReplayUnanonymizationConsentGranted(){this.Yi(),this.recordingService.triggerUnanonymizationConsentGranted(),this.w.emitRecordingContextChange()}onReplayUnanonymizationConsentWithdrawn(){this.Yi(),this.recordingService.triggerUnanonymizationConsentWithdrawn(),this.w.emitRecordingContextChange()}onCollectStateChange(t,e){t===k.QUOTA_REACHED||t===k.ANALYTICS_ONLY&&e===re.ETR_OFF?(this.recordingService.clearEvents(),this.po()):(this.K.setQueryParams({rt:csArray.prototype.join.call(this.C.getRecordingTypes(),",")}),this.recordingService.allowSendingEventsFromQuotaService(),this.recordingService.pushEvents(),this.fo.onCollectStateChange(t,e))}onTargetingRulesMatched(){this.C.isReplayRecorded()&&!this.Xt.isUrlExcludedForSessionReplay()&&!this.recordingService.isRecording()&&this.ic()}onInitialDomStart(){this.recordingService.blockSendingEventsFromSerialization(),this.Ut.blockSendingLastMessage()}onInitialDomDone(t){this.recordingService.allowSendingEventsFromSerialization(),this.recordingService.addInitialDom(t),this.Ut.allowSendingLastMessage(),this.Xi.start(),this.recordingService.pushEvents()}onAfterReplayRecordingConsentGranted(){this.C.isReplayRecorded()&&!this.Xt.isUrlExcludedForSessionReplay()&&(this.C.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.ic(),this.recordingService.triggerRecordingForSessionGranted())}onAfterReplayRecordingConsentWithdrawn(){this.recordingService.isRecording()&&(this.recordingService.triggerRecordingForSessionWithdrawn(),this.recordingService.clearStates(),this.po())}gu(){var t,e,i,n,o,c;if(!((i=(e=(t=this.E.experimental)===null||t===void 0?void 0:t.sessionReplay)===null||e===void 0?void 0:e.shadowRoot)===null||i===void 0)&&i.filterByHostSelector){let l=(c=(o=(n=this.E.experimental)===null||n===void 0?void 0:n.sessionReplay)===null||o===void 0?void 0:o.shadowRoot)===null||c===void 0?void 0:c.filterByHostSelector;K(l,h=>{Lt(h)&&Ee.setShadowRootFilter(u=>{try{return Qt.call(u.host,h)}catch{return!1}})})}}ic(){this.recordingService.start(),this.Ut.start(),this.w.emitRecordingContextChange()}po(){this.recordingService.stop(),this.Ut.stop(),this.w.emitRecordingContextChange()}NT(t){let e="byteArray";this.K=this.Dt.create(`${this.E.getRecordingUri()}/${Pc}`,e,t)}Yi(){var t;let e=this.it.shouldUseAnonymization();this.ho.setAnonymization(e),(t=this.uo)===null||t===void 0||t.setAnonymization(e)}}return U([Nt("Recording.onStartTracking")],s.prototype,"onStartTracking",null),U([Nt("onInitialDomDone")],s.prototype,"onInitialDomDone",null),s})(),qv=(()=>{class s extends wt{validateArgs(t){return!!J(t)}execute(){this.commandsService.applyFromImplementation(Rh[0],[],"SrmOnlineAssetsTemplate")}}return s})(),Wv=1024,Yv=512,Pn=1024,On="||",Xv=(()=>{let s;return function(r){function t(c,l){return C(c)&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(c),De.CHAMELEON)!==-1?De.CHAMELEON:l}r.handleCustomEventCommandMisuse=t;function e(c,l,h){let u=i(h);return{type:W.CUSTOM_EVENT,ts:0,customEventName:lt.truncate(c,Wv,lt.ELLIPSIS),sourceLibrary:Cp(l)?l:De.WEB,...Bn(u)?{}:{properties:u}}}r.buildCustomEvent=e;function i(c){let l={};for(let h in c){if(h.length>Yv)continue;let u=c[h];if(_t(u)||Cr(u))l[h]=csString(u);else if(o(u))l[h]=lt.truncate(u,Pn,lt.ELLIPSIS);else if(bd(u)){let p=n(u);p!==""&&(l[h]=p)}}return l}r.sanitizeCustomEventProperties=i;function n(c){let l="";for(let h=0;h<c.length;h++){let u=c[h];if(!_t(u)&&!Cr(u)&&!o(u))continue;let p=csString(u);if(l==="")l=lt.truncate(p,Pn,lt.ELLIPSIS);else if(l.length+On.length+p.length<=Pn)l+=On+p;else break}return l}function o(c){return C(c)&&!jr(c)&&!csString.prototype.includes.call(c,On)}}(s||(s={})),s})(),Ft=(()=>{class s{static buildFromCustomEvent(t,e){return this.Ug(null,t,e)}static buildFromAnalysisEvent(t,e,i){return this.Ug(t,e,i)}static Ug(t,e,i){return csArray.prototype.reduce.call(i,(n,o)=>o.enhanceAnalysisEvent(t,n),e)}}return s})();var Kv=(()=>{class s extends jt{constructor(t,e,i,n,o,c,l,h,u,p,y,m,v,b,I,_,A,x,N,w,B){super(),this.E=t,this.Si=e,this.Ft=i,this.Lr=n,this.mu=o,this.rs=c,this.Ve=l,this.yu=h,this.L=u,this.le=p,this.Eu=y,this.Ze=m,this.K=v,this.$t=b,this.rc=I,this.Ls=_,this.Vs=A,this.vu=x,this.Ki=N,this.Ji=w,this.Qi=B,this.yi=new wh,this.nc=!1,this.Zi=[]}init(){var t,e,i,n,o,c,l;this.Si.onEvent(h=>this.jt(h)),this.Ft.onEvent(h=>this.jt(h)),this.Lr.onEvent(()=>{let h=this.Lr.getRequestParameters();this.K.setQueryParams(h),this.Ve.setQueryParams(h)}),this.Eu.onEvent(h=>this.Ae(h)),this.Su(),(t=this.rc)===null||t===void 0||t.onEvent(h=>this.jt(h)),(e=this.Ki)===null||e===void 0||e.onEvent(h=>this.jt(h)),(i=this.Ls)===null||i===void 0||i.onEvent(h=>this.jt(h)),(n=this.Vs)===null||n===void 0||n.onEvent(h=>this.jt(h)),this.DT(),(o=this.vu)===null||o===void 0||o.onEvent(h=>this.Ae(h)),(c=this.Ji)===null||c===void 0||c.onEvent(h=>this.Ae(h)),(l=this.Qi)===null||l===void 0||l.onEvent(h=>this.Ae(h))}DT(){this.Ve.onBeaconSuccess(()=>{this.rs.clearEvents()}),this.Ve.onBeaconFailure(t=>{this.kT(t)})}initStates(){let t=this.yu.getRequestParameters(),e=this.mu.getRequestParameters(),i=this.Lr.getRequestParameters();this.K.setQueryParams(t),this.K.setQueryParams(e),this.K.setQueryParams(i),this.Ve.setQueryParams(t),this.Ve.setQueryParams(e),this.Ve.setQueryParams(i),this.xl()}clearStates(t){var e,i;this.Si.flushPendingDebouncedListeners(),(e=this.Ls)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.Vs)===null||i===void 0||i.flushPendingTextHighlightEvent(),t?(this._u(),this.sendLastMessageBeacon()):this.sendEvents(),this.Lr.reset(),this.K.removeQueryParams()}onStart(t){var e,i,n,o,c,l,h;t||(e=this.vu)===null||e===void 0||e.start(),this.Ze.start(),this.Si.start(),this.Lr.start(),this.Ft.start(),(i=this.rc)===null||i===void 0||i.start(),(n=this.Vs)===null||n===void 0||n.start(),t||this.Eu.start(),(o=this.Ls)===null||o===void 0||o.start(),(c=this.Ki)===null||c===void 0||c.start(),(l=this.Ji)===null||l===void 0||l.start(),(h=this.Qi)===null||h===void 0||h.start(),csArray.prototype.forEach.call(this.Zi,u=>{this.Ae(u)}),this.Zi=[]}collectInitialEvents(){var t;(t=this.rc)===null||t===void 0||t.collectInitialEvents()}onIframeAnalysisBrowserEvent(t){this.Ae(t)}onIframeAnalysisUserEvent(t){this.jt(t)}onExternalEvent(t){this.Q(t)}Ae(t){this.isStarted&&this.L.isCurrentPageviewValid()&&this.Q(t)}jt(t){this.isStarted&&(this.L.refreshSession(),this.L.isSessionValid()&&this.Q(t))}Q(t){this.rs.addEvent(this.xT(t)),this.rs.isFull()&&this.sendEvents(),this.E.emitDebugEvents&&this.yi.emit("analysisEvent",{...t,typeName:W[t.type]})}xT(t){return t.ts=this.ki(),t}_u(){this.Ve.setQueryParams({hlm:"true"}),this.nc=!0}sendLastMessageBeacon(){this.Ve.removeQueryParams(["i"]),this.Ve.setQueryParams(this.yu.getRequestParameters()),this.Ve.setQueryParams(this.mu.getRequestParameters()),this.Ve.send(this.rs.stringifyEvents()),this.Ve.removeQueryParams(["hlm"]),this.nc=!1}sendEvents(){this.rs.isEmpty()||(this.Ve.removeQueryParams(["i"]),this.K.setQueryParams(this.yu.getRequestParameters()),this.K.setQueryParams(this.mu.getRequestParameters()),this.K.send(this.rs.getEvents()),this.rs.clearEvents())}onStop(){var t,e,i,n,o,c,l;this.Ze.stop(),this.Si.stop(),this.Lr.stop(),this.Ft.stop(),this.Eu.stop(),(t=this.rc)===null||t===void 0||t.stop(),(e=this.Ls)===null||e===void 0||e.stop(),(i=this.Vs)===null||i===void 0||i.stop(),(n=this.Ki)===null||n===void 0||n.stop(),this.rs.empty(),(o=this.vu)===null||o===void 0||o.stop(),(c=this.Ji)===null||c===void 0||c.stop(),(l=this.Qi)===null||l===void 0||l.stop()}xl(){this.us=M.now()}ki(){return M.now()-this.us}Su(){this.Ze.onEvent(t=>{var e,i;t!==ie.Visible&&((e=this.Ls)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.Vs)===null||i===void 0||i.flushPendingTextHighlightEvent(),t===ie.PagehideVisible?this._u():t===ie.PagehideHidden?(this._u(),this.sendLastMessageBeacon()):(!this.rs.isEmpty()||this.nc)&&this.sendLastMessageBeacon())})}kT(t){try{(!this.rs.isEmpty()||this.nc)&&this.le.save({requestParameters:t,events:this.rs.getEvents()})}catch{}}pushCustomEvent(t,e,i){if(!(C(t)&&!jr(t))||i!==void 0&&!J(i))throw new Ut(vo[0]);let n=Xv.buildCustomEvent(t,e,i),o=Ft.buildFromCustomEvent(n,this.$t);this.isStarted?this.Ae(o):csArray.prototype.push.call(this.Zi,o)}}return s})(),Wi=(()=>{class s{isEventTypeSupported(t){return csArray.prototype.indexOf.call(this.supportedEventTypes,t)!==-1}enhanceAnalysisEvent(t,e){return this.isEventTypeSupported(e.type)?this.baseEnhanceAnalysisEvent(t,e):e}}return s})(),Jv=(()=>{class s extends Wi{constructor(){super(...arguments),this.supportedEventTypes=[W.CHANGE],this.LT=["text","email","number","search","tel","url","password"]}baseEnhanceAnalysisEvent(t,e){let i=Ot(t);return Hr(i)&&csArray.prototype.indexOf.call(this.LT,i.type)>=0&&(e.isBlank=i.value===""),e}}return s})();var Xt=(()=>{let s;return function(r){r[r.ANONYMIZED=0]="ANONYMIZED",r[r.CAPTURED=1]="CAPTURED",r[r.MASKED=2]="MASKED",r[r.ENCRYPTED=3]="ENCRYPTED"}(s||(s={})),s})();var Ch=(()=>{class s extends Wi{constructor(t){super(),this.vt=t,this.supportedEventTypes=[W.MOUSEDOWN,W.MOUSEUP,W.CLICK,W.MOUSEOVER,W.TAP,W.DRAG,W.FLICK,W.SUBMIT,W.CHANGE]}baseEnhanceAnalysisEvent(t,e){return e.tgt||(e.tgt=this.vt.getEventTargetPath(t)),e}}return s})(),Oc=65535,Qv=(()=>{let s;return function(r){function t(e){let i=Ot(e);if(!i||!dt(i)||!Ae(i.getBoundingClientRect)||!yt(e.pageX)||!yt(e.pageY))return{xRel:-1,yRel:-1,valid:!1};let n=i.getBoundingClientRect(),o=e.pageX-n.left-bt.windowOffsetX(),c=e.pageY-n.top-bt.windowOffsetY();i!==document.documentElement&&(o+=i.scrollLeft,c+=i.scrollTop);let l=Math.max(i.scrollWidth,n.width),h=Math.max(i.scrollHeight,n.height),u=Math.round(o/l*Oc),p=Math.round(c/h*Oc);return{xRel:u,yRel:p,valid:!0}}r.getRelativePosition=t}(s||(s={})),s})(),Zv=(()=>{class s extends Wi{constructor(t,e){super(),this.Ts=t,this.vt=e,this.supportedEventTypes=[W.MOUSEMOVE,W.CLICK],this.Au=""}baseEnhanceAnalysisEvent(t,e){let{valid:i,xRel:n,yRel:o}=Qv.getRelativePosition(t);if(i){let c=this.vt.getEventTargetPath(t);c!==cs.INVALID_ELEMENT&&(e.xRel=n,e.yRel=o,e.type===W.MOUSEMOVE&&(c!==this.Au||this.Ts.iframesTracking?(this.Au=c,e.tgtHM=c,this.Ts.isChild||(e.tgtHMH=Al(e.tgtHM))):e.tgtHM=""))}else e.type===W.MOUSEMOVE&&(this.Au="");return e}}return s})(),Ih=(()=>{class s extends Wi{constructor(t,e){super(),this.vt=t,this.zt=e,this.supportedEventTypes=[W.CLICK,W.SUBMIT,W.CHANGE,W.TAP]}baseEnhanceAnalysisEvent(t,e){let i=this.zt.getSensitiveStatus().useAnonymization,{path:n,hierarchy:o}=this.vt.getEventTargetPathAndHierarchy(t,i);return e.tgt=n,e.hrchy=o,e}}return s})(),Nc=100,Ph=(()=>{class s extends Wi{constructor(t,e,i){super(),this.E=t,this.zt=e,this.D=i,this.supportedEventTypes=[W.TAP,W.CLICK,W.SUBMIT]}XT(t){let e="",i=document.createTreeWalker(t,NodeFilter.SHOW_TEXT),n=i.nextNode();for(;n;){if(e+=n.textContent,Mo(n.parentElement)||Br(n.parentElement)||this.zt.getElementSensitiveStatus(n.parentElement)!==Xt.CAPTURED)return!0;if(csString.prototype.trim.call(e).length>=Nc)break;n=i.nextNode()}return!1}KT(t){let e=si(t,"button,a");return e||(this.E.collectTargetText===Xn.ButtonAndLinkOnly?null:t)}baseEnhanceAnalysisEvent(t,e){if(ps(csEventtarget.apply(t))){let i=this.KT(csEventtarget.apply(t));if(i&&C(i.textContent)&&!this.XT(i)&&!this.D.hasPII(i.textContent,this.E.anonymizeDigits)){let n=lt.truncate(csString.prototype.trim.call(i.textContent),Nc);n.length>0&&(e.text=n)}}return e}}return s})();function tS(s,r,t,e,i){let n=[];return csArray.prototype.push.call(n,new Zv(s,r)),s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(n,new Ph(s,t,new oi)),s.collectHierarchy&&csArray.prototype.push.call(n,new Ih(r,t)),csArray.prototype.push.call(n,new Jv,new Ch(r)),n}function eS(s,r,t,e,i){let n=[];return s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(n,new Ph(s,t,new oi)),s.collectHierarchy&&csArray.prototype.push.call(n,new Ih(r,t)),csArray.prototype.push.call(n,new Ch(r)),n}var sS=(()=>{class s extends jt{constructor(t,e){super(),this.le=t,this.K=e,this.$g=()=>{document.visibilityState==="visible"&&this.zg()}}onStart(){this.zg(),this.Kh()}onStop(){this.Jh()}getRecoveryStorage(){return this.le}zg(){let t=this.le.recover();if(t!==null){let{requestParameters:e,events:i}=t;this.K.send(i,e)}}Kh(){document.addEventListener("visibilitychange",this.$g)}Jh(){document.removeEventListener("visibilitychange",this.$g)}}return s})(),iS=(()=>{class s{constructor(t){this.Mr=t}save(t){localStorage.setItem(this.Mr,csJSON.stringify(t))}clear(){localStorage.removeItem(this.Mr)}recover(){let t=localStorage.getItem(this.Mr);if(t===null)return null;let e=null;try{e=csJSON.parse(t)}catch{H.error(`Invalid item in localStorage.
         (key:${this.Mr}; value:${t})`)}finally{this.clear()}return e}}return s})(),rS=50,nS=(()=>{class s{constructor(t=[]){this.Bt=t}stringifyEvents(){return csJSON.stringify(this.Bt)}addEvent(t){csArray.prototype.push.call(this.Bt,t)}eventsCount(){return this.Bt.length}clearEvents(){this.Bt=[]}empty(){this.clearEvents()}isFull(){return this.eventsCount()>=rS}isEmpty(){return this.Bt.length===0}getEvents(){return this.Bt}}return s})(),oS=(()=>{class s{constructor(t,e,i,n=["submit"]){this.$t=t,this.vt=e,this.Gt=i,this.JT=n,this.Gg="select, select *, input, textarea",this.QT="select, select *, input, textarea",this.qg="a, a *, button, button *, select, select *, input, textarea",this.go="input, select, textarea",this.ZT="form",this.pc=150,this.tb=400,this.Wg=!1,this.mo=Ci((o,c)=>this.scrollListener(o,c),this.pc),this.Yg=Ci(o=>this.resizeListener(o),this.pc),this.eb=$r(o=>this.mouseMoveListener(o),this.tb),this.sb=[{boundElement:window,type:"resize",listener:()=>this.Yg()},{boundElement:document,type:"scroll",listener:o=>this.mo(o)},{boundElement:window,type:"mousemove",listener:o=>{this.eb(zp(o))}},{boundElement:document,type:"mousedown",listener:o=>this.mouseDownListener(o)},{boundElement:document,type:"mouseup",listener:o=>this.mouseUpListener(o)},{boundElement:document,type:"click",listener:o=>this.clickListener(o)}],this.Xg=[{type:"change",listener:this.Gt.on(this.QT,o=>this.changeListener(o))},{type:"submit",listener:this.Gt.on(this.ZT,o=>this.submitListener(o))}],this.ib=[{boundElement:document,type:"mouseover",listener:this.Gt.on(this.qg,o=>this.mouseOverListener(o))},{boundElement:document,type:"mouseout",listener:this.Gt.on(this.qg,o=>this.mouseOutListener(o))},{boundElement:document,type:"focusin",listener:this.Gt.on(this.Gg,o=>this.focusInListener(o))},{boundElement:document,type:"focusout",listener:this.Gt.on(this.Gg,o=>this.focusOutListener(o))},{boundElement:document,type:"keyup",listener:this.Gt.on(this.go,o=>this.keyUpListener(o))},{boundElement:document,type:"keydown",listener:this.Gt.on(this.go,o=>this.keyDownListener(o))},{boundElement:document,type:"copy",listener:this.Gt.on(this.go,o=>this.copyListener(o))},{boundElement:document,type:"cut",listener:this.Gt.on(this.go,o=>this.cutListener(o))},{boundElement:document,type:"paste",listener:this.Gt.on(this.go,o=>this.pasteListener(o))},...csArray.prototype.map.call(this.Xg,o=>({...o,boundElement:document}))],this.F={},this.oh=(o,c)=>{switch(c){case"initial":case"added":this.qi(o);break;case"removed":this.Wi(o);break}},this.Ee=new ai(this.oh),this.hu()}qi(t){if(Nr(t)){let e=this.Kg();csArray.prototype.forEach.call(e,i=>gt(i))}else{let e=this.Jg();csArray.prototype.forEach.call(e,i=>{gt({...i,boundElement:t})})}}Wi(t){if(Nr(t)){let e=this.Kg();csArray.prototype.forEach.call(e,i=>mt(i))}else{let e=this.Jg();csArray.prototype.forEach.call(e,i=>{mt({...i,boundElement:t})})}}onEvent(t){this.j=t}start(){this.Ee.observe(),this.qi(document),this.resizeListener()}stop(){this.Wi(document),this.Ee.disconnect()}flushPendingDebouncedListeners(){this.mo.flushPending(),this.Yg.flushPending()}Qg(t){return csArray.prototype.some.call(this.JT,e=>e===t)}Jg(){return this.Gt.isMatchesSelectorSupported()?csArray.prototype.filter.call(this.Xg,t=>!this.Qg(t.type)):(H.warn("Element.matches is not implemented yet"),[])}Kg(){let t=[];return csArray.prototype.push.call(t,...this.sb),this.Gt.isMatchesSelectorSupported()?csArray.prototype.push.call(t,...this.ib):H.warn("Element.matches is not implemented yet"),csArray.prototype.filter.call(t,e=>!this.Qg(e.type))}resizeListener(t){let e=ti.getScrollContainer(),i=ps(e);i&&(this.Wg=!0);let n={type:W.RESIZE,ts:0,x:i?e.clientWidth:bt.windowWidth(),y:i?e.clientHeight:bt.windowHeight()};t!==void 0&&(n.d=t),this.j(n)}scrollListener(t,e){let i=ti.isEventOnScrollContainer(e);!this.Wg&&i&&this.resizeListener();let n={type:W.SCROLL,ts:0,x:i?csEventtarget.apply(e).scrollLeft:bt.windowOffsetX(),y:i?csEventtarget.apply(e).scrollTop:bt.windowOffsetY(),d:t},o=Ft.buildFromAnalysisEvent(e,n,this.$t);this.j(o)}mouseMoveListener(t){let e={type:W.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},i=Ft.buildFromAnalysisEvent(t,e,this.$t);this.j(i)}mouseDownListener(t){let e={type:W.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ft.buildFromAnalysisEvent(t,e,this.$t);this.Te(i)}mouseUpListener(t){let e={type:W.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ft.buildFromAnalysisEvent(t,e,this.$t);this.Te(i)}clickListener(t){let e={type:W.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ft.buildFromAnalysisEvent(t,e,this.$t);this.Te(i)}mouseOverListener(t){let e={type:W.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ft.buildFromAnalysisEvent(t,e,this.$t);this.Te(i)}mouseOutListener(t){let e={type:W.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.vt.getEventTargetPath(t)},i=Ft.buildFromAnalysisEvent(t,e,this.$t);this.Te(i)}focusInListener(t){let e={type:W.FOCUSIN,ts:0,tgt:this.vt.getEventTargetPath(t)},i=Ft.buildFromAnalysisEvent(t,e,this.$t);this.Te(i)}focusOutListener(t){let e={type:W.FOCUSOUT,ts:0,tgt:this.vt.getEventTargetPath(t)},i=Ft.buildFromAnalysisEvent(t,e,this.$t);this.Te(i)}changeListener(t){let e={type:W.CHANGE,ts:0,tgt:""},i=Ft.buildFromAnalysisEvent(t,e,this.$t);this.Te(i)}submitListener(t){let e={type:W.SUBMIT,ts:0,tgt:""},i=Ft.buildFromAnalysisEvent(t,e,this.$t);this.Te(i)}copyListener(t){let e={type:W.COMMAND,ts:0,tgt:this.vt.getEventTargetPath(t),key:Zs.COPY};this.Te(e)}cutListener(t){let e={type:W.COMMAND,ts:0,tgt:this.vt.getEventTargetPath(t),key:Zs.CUT};this.Te(e)}pasteListener(t){let e={type:W.COMMAND,ts:0,tgt:this.vt.getEventTargetPath(t),key:Zs.PASTE};this.Te(e)}keyUpListener(t){let e={type:W.KEYUP,ts:0,tgt:this.vt.getEventTargetPath(t),key:this.Zg(t)};this.Te(e)}keyDownListener(t){let e={type:W.KEYDOWN,ts:0,tgt:this.vt.getEventTargetPath(t),key:this.Zg(t)};this.Te(e)}Zg(t){let e=this.F[t.key];return e===void 0?Y.ALPHANUMERICAL:e}Te(t){wl(t)&&t.tgt!==cs.INVALID_ELEMENT&&this.j(t)}hu(){this.F[" "]=Y.SPACE,this.F.Spacebar=Y.SPACE,this.F.Enter=Y.ENTER,this.F.Backspace=Y.BACKSPACE,this.F.Delete=Y.DELETE,this.F.ArrowUp=Y.ARROWUP,this.F.ArrowDown=Y.ARROWDOWN,this.F.ArrowLeft=Y.ARROWLEFT,this.F.ArrowRight=Y.ARROWRIGHT,this.F.Up=Y.ARROWUP,this.F.Down=Y.ARROWDOWN,this.F.Left=Y.ARROWLEFT,this.F.Right=Y.ARROWRIGHT,this.F.CapsLock=Y.CAPSLOCK,this.F.Shift=Y.SHIFT,this.F.Tab=Y.TAB}}return U([P("Event handler type: resize")],s.prototype,"resizeListener",null),U([P("Event handler type: scroll")],s.prototype,"scrollListener",null),U([P("Event handler type: mouseMove"),ut()],s.prototype,"mouseMoveListener",null),U([P("Event handler type: mouseDown"),ut()],s.prototype,"mouseDownListener",null),U([P("Event handler type: mouseUp"),ut()],s.prototype,"mouseUpListener",null),U([P("Event handler type: click"),ut()],s.prototype,"clickListener",null),U([P("Event handler type: mouseOver"),ut()],s.prototype,"mouseOverListener",null),U([P("Event handler type: mouseOut"),ut()],s.prototype,"mouseOutListener",null),U([P("Event handler type: focusIn")],s.prototype,"focusInListener",null),U([P("Event handler type: focusOut")],s.prototype,"focusOutListener",null),U([P("Event handler type: change")],s.prototype,"changeListener",null),U([P("Event handler type: submit"),ut()],s.prototype,"submitListener",null),U([P("Event handler type: copy")],s.prototype,"copyListener",null),U([P("Event handler type: cut")],s.prototype,"cutListener",null),U([P("Event handler type: paste")],s.prototype,"pasteListener",null),U([P("Event handler type: keyup")],s.prototype,"keyUpListener",null),U([P("Event handler type: keydown")],s.prototype,"keyDownListener",null),s})(),aS=(()=>{class s{constructor(t,e,i){this.$t=t,this.Ft=e,this.Ot=i}processGesture(t,e){switch(t.type){case Tt.TAP:this.rb(e);break;case Tt.FLICK:this.nb(t,e);break;case Tt.DRAG:this.ob(t,e);break;default:break}}rb(t){let e={type:W.TAP,ts:0,x:0,y:0,tgt:""},i=Ft.buildFromAnalysisEvent(t,e,this.$t);i.tgt!==cs.INVALID_ELEMENT&&this.j(i)}ob(t,e){var i,n;let o={type:W.DRAG,ts:0,fd:t.direction,tgt:""};!((i=this.Ot)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((n=this.Ot)===null||n===void 0)&&n.collectGestureVelocity&&(o.velocity=t.velocity);let c=Ft.buildFromAnalysisEvent(e,o,this.$t);c.tgt!==cs.INVALID_ELEMENT&&this.j(c)}nb(t,e){var i,n;let o={type:W.FLICK,ts:0,fd:t.direction,tgt:""};!((i=this.Ot)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((n=this.Ot)===null||n===void 0)&&n.collectGestureVelocity&&(o.velocity=t.velocity);let c=Ft.buildFromAnalysisEvent(e,o,this.$t);c.tgt!==cs.INVALID_ELEMENT&&this.j(c)}onEvent(t){this.j=t}start(){this.Ft.subscribe(s.tm,(t,e)=>this.processGesture(t,e))}stop(){this.Ft.unsubscribe(s.tm)}}return s.tm="AnalysisGestureTracker",U([ut()],s.prototype,"processGesture",null),s})();var cS=(()=>{class s{constructor(){this.hm=100,this.vo=0,this.So=bt.documentHeight(),this.um={boundElement:document,type:"scroll",listener:t=>this.maxScrollRateListener(t)},this.vo=this.Ou(ti.getScrollContainer()).maxScrollRate}onEvent(t){this.j=t}start(){gt(this.um)}stop(){mt(this.um)}reset(){let t=ti.getScrollContainer(),{maxScrollRate:e,maxDocumentHeight:i}=this.Ou(t);this.So=i,this.vo=e,this.j()}Ou(t){let e=0,i=0;if(t===null)i=bt.documentHeight(),e=this.vb(i);else{let n=this.Sb(t);i=this.dm(t,n),e=this._b(t,n)}return{maxScrollRate:e,maxDocumentHeight:i}}maxScrollRateListener(t){let e=null;ti.isEventOnScrollContainer(t)&&(e=csEventtarget.apply(t));let{maxScrollRate:i,maxDocumentHeight:n}=this.Ou(e);(i>this.vo||n>this.So)&&(this.vo=i,n>this.So&&(this.So=n),this.j())}vb(t){let e=Math.round(this.wb()/t*100);return Math.min(e,this.hm)}wb(){let t=bt.windowHeight();return bt.windowOffsetY()+t}_b(t,e){let i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+e,n=this.dm(t,e),o=Math.round(i/n*100);return Math.min(o,this.hm)}Sb(t){let e=window.getComputedStyle(t).paddingTop||"0px";return parseInt(e,10)}dm(t,e){return t.scrollHeight+t.getBoundingClientRect().top+e}getRequestParameters(){return{sr:`${this.vo}`,mdh:`${this.So}`}}}return U([P("MaxScrollRate handler")],s.prototype,"maxScrollRateListener",null),s})(),lS=(()=>{class s{constructor(t){this._o=t,this.wo=e=>this.processMetric(e),this.B=!1}onEvent(t){this.j=t}start(){this.B||(this.B=!0,this._o.onFCP(this.wo),this._o.onCLS(this.wo),this._o.onLCP(this.wo),this._o.onTTFB(this.wo),this._o.onINP(this.wo))}stop(){this.B=!1}processMetric(t){if(!this.B)return;let e={type:W.PERFORMANCE,name:t.name,val:t.value,ts:0};this.j(e)}}return U([P("Performance metric handler")],s.prototype,"processMetric",null),s})(),hS=(()=>{class s{constructor(t){this.Ec=t.performance}getRequestParameters(){if(this.Ab())return{};let t=this.Tb();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}}Tb(){let t=this.Ec.timing;return{startRender:`${t.domLoading-t.requestStart}`,domInteractive:`${t.domInteractive-t.requestStart}`,domComplete:`${t.domComplete-t.requestStart}`,fullyLoaded:`${t.loadEventEnd-t.requestStart}`}}Ab(){return!(this.Ec&&this.Ec.timing&&this.Ec.timing.loadEventEnd>0)}}return s})();var Oh=-1,li=s=>{addEventListener("pageshow",r=>{r.persisted&&(Oh=r.timeStamp,s(r))},!0)},be=(s,r,t,e)=>{let i,n;return o=>{r.value>=0&&(o||e)&&(n=r.value-(i!=null?i:0),(n||i===void 0)&&(i=r.value,r.delta=n,r.rating=((c,l)=>c>l[1]?"poor":c>l[0]?"needs-improvement":"good")(r.value,t),s(r)))}},ia=s=>{requestAnimationFrame(()=>requestAnimationFrame(()=>s()))},ra=()=>{let s=performance.getEntriesByType("navigation")[0];if(s&&s.responseStart>0&&s.responseStart<performance.now())return s},Yi=()=>{var r;let s=ra();return(r=s==null?void 0:s.activationStart)!=null?r:0},Re=(s,r=-1)=>{let t=ra(),e="navigate";return Oh>=0?e="back-forward-cache":t&&(document.prerendering||Yi()>0?e="prerender":document.wasDiscarded?e="restore":t.type&&(e=t.type.replace(/_/g,"-"))),{name:s,value:r,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:e}},Nn=new WeakMap;function na(s,r){return Nn.get(s)||Nn.set(s,new r),Nn.get(s)}var po=class{constructor(){Ie(this,"t");Ie(this,"i",0);Ie(this,"o",[])}h(r){var i;if(r.hadRecentInput)return;let t=this.o[0],e=this.o.at(-1);this.i&&t&&e&&r.startTime-e.startTime<1e3&&r.startTime-t.startTime<5e3?(this.i+=r.value,this.o.push(r)):(this.i=r.value,this.o=[r]),(i=this.t)==null||i.call(this,r)}},Xi=(s,r,t={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(s)){let e=new PerformanceObserver(i=>{Promise.resolve().then(()=>{r(i.getEntries())})});return e.observe({type:s,buffered:!0,...t}),e}}catch{}},oa=s=>{let r=!1;return()=>{r||(s(),r=!0)}},Js=-1,Mc=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,Ur=s=>{document.visibilityState==="hidden"&&Js>-1&&(Js=s.type==="visibilitychange"?s.timeStamp:0,uS())},Dc=()=>{addEventListener("visibilitychange",Ur,!0),addEventListener("prerenderingchange",Ur,!0)},uS=()=>{removeEventListener("visibilitychange",Ur,!0),removeEventListener("prerenderingchange",Ur,!0)},Nh=()=>{var s;if(Js<0){let r=Yi(),t=document.prerendering||(s=globalThis.performance.getEntriesByType("visibility-state").filter(e=>e.name==="hidden"&&e.startTime>r)[0])==null?void 0:s.startTime;Js=t!=null?t:Mc(),Dc(),li(()=>{setTimeout(()=>{Js=Mc(),Dc()})})}return{get firstHiddenTime(){return Js}}},Wr=s=>{document.prerendering?addEventListener("prerenderingchange",()=>s(),!0):s()},kc=[1800,3e3],Mh=(s,r={})=>{Wr(()=>{let t=Nh(),e,i=Re("FCP"),n=Xi("paint",o=>{for(let c of o)c.name==="first-contentful-paint"&&(n.disconnect(),c.startTime<t.firstHiddenTime&&(i.value=Math.max(c.startTime-Yi(),0),i.entries.push(c),e(!0)))});n&&(e=be(s,i,kc,r.reportAllChanges),li(o=>{i=Re("FCP"),e=be(s,i,kc,r.reportAllChanges),ia(()=>{i.value=performance.now()-o.timeStamp,e(!0)})}))})},xc=[.1,.25],dS=(s,r={})=>{Mh(oa(()=>{let t,e=Re("CLS",0),i=na(r,po),n=c=>{for(let l of c)i.h(l);i.i>e.value&&(e.value=i.i,e.entries=i.o,t())},o=Xi("layout-shift",n);o&&(t=be(s,e,xc,r.reportAllChanges),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(n(o.takeRecords()),t(!0))}),li(()=>{i.i=0,e=Re("CLS",0),t=be(s,e,xc,r.reportAllChanges),ia(()=>t())}),setTimeout(t))}))},Dh=0,Mn=1/0,Sr=0,fS=s=>{for(let r of s)r.interactionId&&(Mn=Math.min(Mn,r.interactionId),Sr=Math.max(Sr,r.interactionId),Dh=Sr?(Sr-Mn)/7+1:0)},go,Lc=()=>{var s;return go?Dh:(s=performance.interactionCount)!=null?s:0},pS=()=>{"interactionCount"in performance||go||(go=Xi("event",fS,{type:"event",buffered:!0,durationThreshold:0}))},Vc=0,mo=class{constructor(){Ie(this,"u",[]);Ie(this,"l",new Map);Ie(this,"m");Ie(this,"p")}v(){Vc=Lc(),this.u.length=0,this.l.clear()}P(){let r=Math.min(this.u.length-1,Math.floor((Lc()-Vc)/50));return this.u[r]}h(r){var i,n;if((i=this.m)==null||i.call(this,r),!r.interactionId&&r.entryType!=="first-input")return;let t=this.u.at(-1),e=this.l.get(r.interactionId);if(e||this.u.length<10||r.duration>t.T){if(e?r.duration>e.T?(e.entries=[r],e.T=r.duration):r.duration===e.T&&r.startTime===e.entries[0].startTime&&e.entries.push(r):(e={id:r.interactionId,entries:[r],T:r.duration},this.l.set(e.id,e),this.u.push(e)),this.u.sort((o,c)=>c.T-o.T),this.u.length>10){let o=this.u.splice(10);for(let c of o)this.l.delete(c.id)}(n=this.p)==null||n.call(this,e)}}},kh=s=>{let r=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?s():(r(s=oa(s)),document.addEventListener("visibilitychange",s,{once:!0}))},Uc=[200,500],gS=(s,r={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&Wr(()=>{var c;pS();let t,e=Re("INP"),i=na(r,mo),n=l=>{kh(()=>{for(let u of l)i.h(u);let h=i.P();h&&h.T!==e.value&&(e.value=h.T,e.entries=h.entries,t())})},o=Xi("event",n,{durationThreshold:(c=r.durationThreshold)!=null?c:40});t=be(s,e,Uc,r.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),document.addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&(n(o.takeRecords()),t(!0))}),li(()=>{i.v(),e=Re("INP"),t=be(s,e,Uc,r.reportAllChanges)}))})},yo=class{constructor(){Ie(this,"m")}h(r){var t;(t=this.m)==null||t.call(this,r)}},jc=[2500,4e3],mS=(s,r={})=>{Wr(()=>{let t=Nh(),e,i=Re("LCP"),n=na(r,yo),o=l=>{r.reportAllChanges||(l=l.slice(-1));for(let h of l)n.h(h),h.startTime<t.firstHiddenTime&&(i.value=Math.max(h.startTime-Yi(),0),i.entries=[h],e())},c=Xi("largest-contentful-paint",o);if(c){e=be(s,i,jc,r.reportAllChanges);let l=oa(()=>{o(c.takeRecords()),c.disconnect(),e(!0)});for(let h of["keydown","click","visibilitychange"])addEventListener(h,()=>kh(l),{capture:!0,once:!0});li(h=>{i=Re("LCP"),e=be(s,i,jc,r.reportAllChanges),ia(()=>{i.value=performance.now()-h.timeStamp,e(!0)})})}})},Hc=[800,1800],Eo=s=>{document.prerendering?Wr(()=>Eo(s)):document.readyState!=="complete"?addEventListener("load",()=>Eo(s),!0):setTimeout(s)},yS=(s,r={})=>{let t=Re("TTFB"),e=be(s,t,Hc,r.reportAllChanges);Eo(()=>{let i=ra();i&&(t.value=Math.max(i.responseStart-Yi(),0),t.entries=[i],e(!0),li(()=>{t=Re("TTFB",0),e=be(s,t,Hc,r.reportAllChanges),e(!0)}))})},ES=(()=>{class s{onFCP(t){try{Mh(t,{reportAllChanges:!0})}catch{G.counters.webVitalsErrors.count("FCP")}}onCLS(t){try{dS(t,{reportAllChanges:!0})}catch{G.counters.webVitalsErrors.count("CLS")}}onLCP(t){try{mS(t,{reportAllChanges:!0})}catch{G.counters.webVitalsErrors.count("LCP")}}onTTFB(t){try{yS(t,{reportAllChanges:!0})}catch{G.counters.webVitalsErrors.count("TTFB")}}onINP(t){try{gS(t,{reportAllChanges:!0})}catch{G.counters.webVitalsErrors.count("INP")}}}return s})();var vS="csAnalysisEventsPersisted",Bc="v2/events",xh=["submit"],vo=["trackEvent"];var SS=(()=>{class s{constructor(t,e,i,n,o,c,l,h,u,p,y,m,v,b,I){this.E=t,this._t=e,this.M=i,this.et=n,this.Gt=o,this.S=c,this.L=l,this.Ft=h,this.Et=u,this.Dt=p,this.Y=y,this.zt=m,this.nt=v,this.Wt=b,this.Yt=I}init(){let t=new nS,e=this.Dt.create(`${this.E.getTrackerUri()}/${Bc}`,"base64");this.Br=this.Vb(e),this.be=this.Ub(t,this.Br.getRecoveryStorage(),e),this.be.init(),this.Y.addListener(this.be),this.Et.addListener(this.be),this.S.register(xh,()=>{}),this.S.register(vo,i=>{if(!J(i))throw new Ut(vo[0]);this.be.pushCustomEvent(i.name,i.source,i.properties)})}onStartTracking(t){this.Br.start(),this.be.start(t)}onAfterNaturalPageView(){this.be.initStates()}onArtificialPageViewEnd(t){this.be.clearStates(!0),t&&(this.be.stop(),this.Br.stop())}onAfterArtificialPageView(t){this.be.initStates(),t&&(this.be.start(),this.Br.start()),this.be.collectInitialEvents()}onBeforeSessionRenewal(){this.be.clearStates(),this.be.stop(),this.Br.stop()}onOptout(){this.be.stop(),this.Br.stop()}Ub(t,e,i){var n,o;let c=new hS(window),l=new cS,h=tS(this.E,this.et,this.zt,this.Wt,this.Yt),u=[];this.E.collectSubmit||csArray.prototype.push.call(u,"submit");let p=new oS(h,this.et,this.Gt,u),y=eS(this.E,this.et,this.zt,this.Wt,this.Yt),m=new aS(y,this.Ft),v=new lS(new ES),b=new Ah,I,_,A,x=new _h(`${this.E.getTrackerUri()}/${Bc}`),N=new Di(this._t,this.M),w,B,F,Q;return new Kv(this.E,p,m,l,c,t,x,N,this.L,e,v,b,i,h,I,_,A,w,B,F,Q)}Vb(t){return new sS(new iS(vS),t)}}return s})(),_S=(()=>{class s extends wt{validateArgs(t){return J(t)?C(t.status)&&C(t.selector):!1}execute(t){if(!Lt(t.selector))return;let e=window.csquerySelector[document.nodeType].call(document,t.selector);e&&this.commandsService.applyFromImplementation(xh[0],[t.status,e],"SubmitTemplate")}}return s})(),as=(()=>{let s;return function(r){function t(n){return n.replayConsentRequiredForSession}r.isReplayConsentNeeded=t;function e(n){return n.collectState===k.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED||n.collectState===k.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingBlockedByConsent=e;function i(n){return n.collectState===k.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}r.isRecordingWithDrawn=i}(s||(s={})),s})(),_r=(()=>{let s;return function(r){r[r.NOT_NEEDED=1]="NOT_NEEDED",r[r.NOT_EXPRESSED=2]="NOT_EXPRESSED",r[r.WITHDRAWN=3]="WITHDRAWN",r[r.GRANTED=4]="GRANTED"}(s||(s={})),s})(),wS=(()=>{class s{constructor(t,e,i,n){this.M=t,this.C=e,this.E=i,this.ds=n,this.bm=!1}isNaturalPageViewSent(){return this.bm}setNaturalPageViewSent(t){this.bm=t}getTrackingContext(){let t=this.C.getSession();if(!t)return null;let e=this.getSessionKey();if(!e)return null;let i=this.E.projectId,n=this.E.uxaDomain,o=t.pageNumber,c=this.ds.getPageViewType(),l=this.C.isReplayRecorded(),h=this.jb(t);return{projectId:i,sessionKey:e,pageNumber:o,pageViewType:c,isRecording:l,uxaDomain:n,recordingConsentState:h,...this.E.smbConfig}}getSessionKey(){let t=this.M.getVisitor();return t?`${t.id}.${t.visitsCount}`:null}jb(t){return as.isReplayConsentNeeded(this.E)?t.collectState===k.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED?_r.NOT_EXPRESSED:t.collectState===k.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?_r.WITHDRAWN:_r.GRANTED:_r.NOT_NEEDED}}return s})(),AS=(()=>{class s{constructor(t){this.Lt=t,this.de=[]}handleCommand(t){if(Ae(t)&&(this.Ao(t),this.Lt.isNaturalPageViewSent())){let e=this.Lt.getTrackingContext();e!==null&&this.qt(t,e)}}Ao(t){csArray.prototype.push.call(this.de,t)}executeRegisteredCallbacks(){let t=this.Lt.getTrackingContext();t!==null&&csArray.prototype.map.call(this.de,e=>this.qt(e,t))}qt(t,e){csSetTimeout(()=>{t(e)})}}return s})(),TS=(()=>{class s{constructor(t){this.Lt=t,this.er=[]}handleCommand(t){if(this.Lt.isNaturalPageViewSent())return this.Hb(t);this.To(t)}Hb(t){let e=this.Lt.getSessionKey();return this.Rm(t)&&e!==null&&this.qt(t.callback,e),e}To(t){this.Rm(t)&&csArray.prototype.push.call(this.er,t.callback)}flushPendingCallbacks(){let t=this.Lt.getSessionKey();t!==null&&csArray.prototype.forEach.call(this.er,e=>{this.qt(e,t)}),this.er=[]}Rm(t){return t&&typeof t.callback=="function"}qt(t,e){csSetTimeout(()=>{t(e)})}}return s})();function bS(s,r){let{isRecording:t,pageNumber:e,projectId:i,siteId:n,uxaDomain:o,csLiteDomain:c}=s,l=/^(.+)\.(\d+)$/.exec(s.sessionKey),h;if(t&&l){let[,u,p]=l;n?h=`${c}/sites/${n}/player?uu=${u}&sn=${p}&pn=${e}`:h=`${o}/quick-playback/index.html?pid=${i}&uu=${u}&sn=${p}&pvid=${e}&recordingType=cs`,r.withTimestamp&&(h+=`&t=${M.now()-r.recordingStartTimestamp}`)}return{replayLink:h,isRecording:t}}var RS=(()=>{class s{constructor(t){this.Lt=t}handleCommand(t,e){fs(t)&&Ae(e)&&this.qt(t,e)}qt(t,e){csSetTimeout(()=>{let i=this.Lt.getTrackingContext();if(i){let n=bS(i,t);e(n)}})}}return s})(),CS=(()=>{class s{constructor(){this.de=new Set}handleCommand(t,e){return!Ae(t)||this.de.has(t)?null:(this.de.add(t),e&&(this.xe=e,this.Cm(t,e)),()=>this.de.delete(t))}executeCallbacks(t){this.Bb(t)&&(this.xe=t,this.de.forEach(e=>this.Cm(e,t)))}Cm(t,e){csSetTimeout(()=>{try{t(e)}catch{}})}Bb(t){let{isRecording:e,recordingStartTimestamp:i,etrState:n,etrStatus:o,collectState:c}=t;return this.xe&&(this.xe.isRecording!==e||this.xe.recordingStartTimestamp!==i||this.xe.etrState!==n||this.xe.etrStatus!==o||this.xe.collectState!==c)}}return s})(),Lh=["afterPageView"],IS=["getSessionKey"],PS=["onRecordingContextChange","onRecordingStateChange"],OS=["replay:link:generate"],NS=(()=>{class s{constructor(t,e,i,n,o,c,l,h){this.M=t,this.C=e,this.S=i,this.Et=n,this.tt=o,this.E=c,this.ds=l,this.Ei=h,this.Im=null}init(){this.Lt=new wS(this.M,this.C,this.E,this.ds),this.Du=new AS(this.Lt),this.Pm=new TS(this.Lt),this.bo=new CS,this.Fb=new RS(this.Lt),this.S.register(IS,t=>this.Pm.handleCommand(t)),this.S.register(Lh,t=>this.Du.handleCommand(t)),this.S.register(PS,t=>this.bo.handleCommand(t,this.Ei.getRecordingContext())),this.S.register(OS,(t,e)=>{this.Fr&&this.Fb.handleCommand({...t,recordingStartTimestamp:this.Ei.getRecordingContext().recordingStartTimestamp},e)})}onAfterNaturalPageView(){var t;this.Lt.setNaturalPageViewSent(!0),this.Pm.flushPendingCallbacks(),this.Du.executeRegisteredCallbacks(),(t=this.Im)===null||t===void 0||t.sendAfterPageViewCallbackToChildren()}onAfterArtificialPageView(){var t;this.Du.executeRegisteredCallbacks(),(t=this.Im)===null||t===void 0||t.sendAfterPageViewCallbackToChildren()}onCollectStateChange(){this.executeRecordingContextChangeCallbacks()}onRecordingContextChange(){this.executeRecordingContextChangeCallbacks()}executeRecordingContextChangeCallbacks(){this.bo.executeCallbacks(this.Ei.getRecordingContext())}setRecordingService(t){this.Fr=t}}return U([Bs({wait:0,mode:"trailing"})],s.prototype,"executeRecordingContextChangeCallbacks",null),s})(),Zt=(()=>{class s{onEvent(t){this.onEventCallback=t}constructor(t,e,i,n){this.commandsService=t,this.condition=i,this.experimentalConfig=n,this.isStarted=!1,this.Om=!1,this.args=e}start(){this.Om||(this.onInit(),this.Om=!0),this.isStarted||(this.onStart(),this.isStarted=!0)}stop(){this.isStarted&&(this.onStop(),this.isStarted=!1)}}return U([P()],s.prototype,"start",null),U([P()],s.prototype,"stop",null),s})(),MS=(()=>{class s extends Zt{validateArgs(t){return!!J(t)}$b(){this.isStarted&&this.onEventCallback()}onInit(){this.commandsService.applyFromImplementation(Lh[0],[()=>this.$b()],"AfterPageViewTrigger")}onStart(){}onStop(){}}return s})(),So=(()=>{class s extends Zt{constructor(){super(...arguments),this.ku={pageviewTypes:["natural","artificial"]}}validateArgs(t){var e;return J(t)&&fs(t)&&csArray.isArray(t.pageviewTypes)&&Po(t.pageviewTypes,n=>C(n))||(H.implementation(`BeforePageViewTrigger has wrong argument: ${(e=this.args)===null||e===void 0?void 0:e.pageviewTypes}, fallback to default config.`),this.args=this.ku),!0}onInit(){this.zb=this.args.pageviewTypes}onPageView(t){this.isStarted&&csArray.prototype.indexOf.call(this.zb,t)!==-1&&this.onEventCallback()}onStart(){}onStop(){}}return s})(),Fc="once per pageview",DS="always",kS=(()=>{class s extends Zt{constructor(){super(...arguments),this.Tt=!0}validateArgs(t){if(J(t)){let e=C(t.selector),i=t.frequency?t.frequency===Fc||t.frequency===DS:!0;return e&&i}return!1}onInit(){if(!Lt(this.args.selector)){this.Tt=!1;return}this.Ro=this.args.frequency?this.args.frequency===Fc:!0,this.G=new ye((t,e)=>this.R(t,e))}onStart(){this.Tt&&this.G.observe(this.args.selector)}onStop(){this.Tt&&(this.G.processPendingMutations(),this.G.disconnect())}R(t,e){e==="added"&&(this.Ro?(this.stop(),this.onEventCallback({element:t[0]})):new Set(t).forEach(i=>this.onEventCallback({element:i})))}}return s})(),$c="once per pageview",xS="always",LS=(()=>{class s extends Zt{constructor(){super(...arguments),this.xu=!1,this.es=!1,this.Ro=!0}validateArgs(t){if(J(t)){let e=C(t.selector),i=t.frequency?t.frequency===$c||t.frequency===xS:!0;return e&&i}return!1}onInit(){if(!ds.isSupported())return;this.es=!0,this.Ro=this.args.frequency?this.args.frequency===$c:!0;let t=this.Nm();this.W=new ye((e,i)=>{if(i==="initial")for(let n of e)ot.isVisibleInViewportInForeground(n)&&(n[this.Lu]=!0);this.Vu(e)},{closest:t}),this.kt=new ds({delay:0,trackOnce:!1,reobserve:!0,allowSameMatch:!0})}onStart(){!this.es||this.isStarted||(this.Lu=csSymbol("skipElement"),this.xu=!1,this.kt.start((t,e)=>this.Uu(t,e)),this.W.observe(this.args.selector))}onStop(){!this.es||!this.isStarted||(this.W.disconnect(),this.kt.stop())}Uu(t,e){if(this.isStarted&&e===Qs.VisibleInViewPort){let n=this.Nm()?t.closest(this.args.selector):t;if(n){if(n&&n[this.Lu]){delete n[this.Lu];return}this.Ro&&this.stop(),(!this.Ro||!this.xu)&&(this.xu=!0,this.onEventCallback({element:n}))}}}Vu(t){for(let e of t)this.kt.observe(e)}Nm(){var t;return((t=this.experimentalConfig)===null||t===void 0?void 0:t.useClosestElement)!==!1}}return s})(),VS=(()=>{class s extends Zt{constructor(){super(...arguments),this.ju=!1,this.Tt=!0,this.gi=!0,this.wi={boundElement:document,type:"click",listener:t=>{if(this.ju){this.ju=!1;return}this.onClickOrTap(t)}},this.Gb=(t,e)=>{t.type===Tt.TAP&&(this.ju=!0,this.onClickOrTap(e))}}validateArgs(t){return J(t)?C(t.selector):!1}onClickOrTap({target:t}){if(yt(t)&&ps(t)){let e=si(t,this.args.selector);e&&this.onEventCallback({element:e})}}onInit(){if(!Lt(this.args.selector)){this.Tt=!1;return}this.Qn=new yh(this.Gb)}onStart(){var t;this.Tt&&(gt(this.wi,this.gi),(t=this.Qn)===null||t===void 0||t.observe())}onStop(){var t;this.Tt&&(mt(this.wi,this.gi),(t=this.Qn)===null||t===void 0||t.disconnect())}}return U([P("onClickOrTap"),ut()],s.prototype,"onClickOrTap",null),s})(),US=(()=>{class s extends Zt{constructor(){super(...arguments),this.Tt=!0,this.Mm=!1}validateArgs(t){return J(t)?C(t.selector):!1}onInit(){if(!Lt(this.args.selector)){this.Tt=!1;return}this.G=new ye((t,e)=>{this.R(t,e)})}onStart(){this.Tt&&(this.G.observe(this.args.selector),this.Mm=!0)}onStop(){this.Tt&&(this.G.processPendingMutations(),this.G.disconnect())}R(t,e){this.Mm?e==="added"&&new Set(t).forEach(i=>this.onEventCallback({element:i})):this.onEventCallback({element:t[0]})}}return s})(),jS=(()=>{class s extends Zt{constructor(){super(...arguments),this.Tt=!0}validateArgs(t){return J(t)?C(t.selector):!1}onInit(){if(!Lt(this.args.selector)){this.Tt=!1;return}this.W=new ye(t=>this.qb(t)),this.U=new Ee(t=>this.Wb(t))}onStart(){this.Tt&&(this.vc=csSymbol("MatchingElement"),this.W.observe(this.args.selector),this.U.observe())}onStop(){this.Tt&&(this.W.processPendingMutations(),this.W.disconnect(),this.U.disconnect())}qb(t){new Set(t).forEach(e=>this.Yb(e))}Wb(t){let e=Io(t,n=>n.removedNodes),i=[];for(let n of e)csArray.prototype.push.call(i,...this.Xb(n));new Set(i).forEach(n=>this.onEventCallback({element:n}))}Yb(t){t[this.vc]=!0}Xb(t){let e=[];return qt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{i[this.vc]&&(ot.isConnected(i)?Qt.call(i,this.args.selector)||delete i[this.vc]:delete i[this.vc],csArray.prototype.push.call(e,i))}),e}}return s})(),HS=(()=>{class s extends Zt{constructor(){super(...arguments),this.Sc=!0}validateArgs(t){return J(t)?C(t.selector):!1}onInit(){if(!Lt(this.args.selector)||!ds.isSupported()){this.Sc=!1;return}this.kt=new ds({delay:0,trackOnce:!0,reobserve:!0}),this.W=new ye(t=>this.Vu(t),{closest:!0})}Vu(t){for(let e of t)this.kt.observe(e)}Uu(t,e){if(this.isStarted&&e===Qs.VisibleInViewPort){let i=si(t,this.args.selector);i&&(this.onEventCallback({element:i}),this.stop(),this.Sc=!1)}}onStart(){this.Sc&&(this.kt.start((t,e)=>this.Uu(t,e)),this.W.observe(this.args.selector))}onStop(){this.Sc&&(this.kt.stop(),this.W.disconnect())}}return s})(),BS=(()=>{class s extends Zt{constructor(){super(...arguments),this.Tt=!0,this.gi=!0,this.wi={boundElement:document,type:"submit",listener:t=>this.submitListener(t)}}validateArgs(t){return J(t)?C(t.selector):!1}submitListener({target:t}){yt(t)&&ps(t)&&Qt.call(t,this.args.selector)&&this.onEventCallback({element:t})}onInit(){Lt(this.args.selector)||(this.Tt=!1)}onStart(){this.Tt&&gt(this.wi,this.gi)}onStop(){this.Tt&&mt(this.wi,this.gi)}}return U([P("submitListener"),ut()],s.prototype,"submitListener",null),s})(),FS=(()=>{class s extends Zt{constructor(){super(...arguments),this.wi={boundElement:window,type:"hashchange",listener:t=>this.hashChangedListener(t)}}validateArgs(t){return!!J(t)}hashChangedListener(t){t.newURL&&t.newURL===t.oldURL||this.onEventCallback()}onInit(){}onStart(){gt(this.wi)}onStop(){mt(this.wi)}}return U([P("hashChangedListener"),ut()],s.prototype,"hashChangedListener",null),s})(),$S=(()=>{class s{static Kb(){var t,e,i,n;if("history"in window){let o=Object.getOwnPropertyDescriptors(history);if(!((t=o.pushState)===null||t===void 0)&&t.writable&&(!((e=o.replaceState)===null||e===void 0)&&e.writable))return history}if(History.prototype){let o=Object.getOwnPropertyDescriptors(History.prototype);if(!((i=o.pushState)===null||i===void 0)&&i.writable&&(!((n=o.replaceState)===null||n===void 0)&&n.writable))return History.prototype}at.warn("Unable to override pushState, replaceState",!0,"HistoryChangeObserver")}static Hu(){let t=s.Kb();s.Co===null&&Ae(t==null?void 0:t.pushState)&&(s.Co=Jt({target:t,methodName:"pushState",hook:({args:e})=>{s.Dm("pushstate",e)}})),s.Io===null&&Ae(t==null?void 0:t.replaceState)&&(s.Io=Jt({target:t,methodName:"replaceState",hook:({args:e})=>{s.Dm("replacestate",e)}}))}static Nn(t){var e,i;s.Me.add(t),s.Me.size===1&&((s.Co===null||s.Io===null)&&s.Hu(),(e=s.Co)===null||e===void 0||e.activate(),(i=s.Io)===null||i===void 0||i.activate(),gt(s.km),gt(s.xm))}static Dn(t){var e,i;s.Me.delete(t),s.Me.size===0&&((e=s.Co)===null||e===void 0||e.deactivate(),(i=s.Io)===null||i===void 0||i.deactivate(),mt(s.km),mt(s.xm))}static Dm(t,e){let i={type:t,state:e[0]};C(e[2])&&(i.url=e[2]),s.Or(i)}static popstateListener(t){s.Or({type:"popstate",state:t.state})}static hashchangeListener(t){s.Or({type:"hashchange",state:null,url:t.newURL})}static Or(t){csArray.prototype.forEach.call(je(s.Me),e=>{e(t)})}constructor(t){this.R=t}observe(){s.Nn(this.R)}disconnect(){s.Dn(this.R)}}return s.Co=null,s.Io=null,s.km={boundElement:it,type:"popstate",listener:r=>s.popstateListener(r)},s.xm={boundElement:it,type:"hashchange",listener:r=>s.hashchangeListener(r)},s.Me=new Set,st([P("popstateListener"),ut()],s,"popstateListener",null),st([P("hashchangeListener"),ut()],s,"hashchangeListener",null),s})(),zS=(()=>{class s extends Zt{validateArgs(t){if(J(t)){let e=C(t.useDebounce),i=t.useDebounce==="yes"?_t(t==null?void 0:t.window):!0,n=C(t.listeners);return e&&i&&n}return!1}onInit(){this.args.useDebounce==="yes"?this.ce=Ci(()=>{this.onEventCallback()},this.args.window):this.ce=this.onEventCallback,this.G=new $S(t=>this.Jb(t))}Lm(){return window.location.href}Jb(t){let e=t.type==="replacestate"&&this.args.listeners.indexOf("replaceState")===-1,i=t.type==="hashchange"&&this.args.listeners.indexOf("hashchange")===-1;if(e||i)return;let n=this.Lm();this.Vm!==n&&(this.Vm=n,this.ce())}onStart(){this.Vm=this.Lm(),this.G.observe()}onStop(){this.G.disconnect()}}return s})(),GS=(()=>{class s extends Zt{constructor(){super(...arguments),this.Tt=!0,this.Um={boundElement:document,type:"mouseover",listener:t=>this.mouseoverListener(t)},this.jm={boundElement:document,type:"mouseleave",listener:t=>this.mouseleaveListener(t)}}validateArgs(t){return J(t)?C(t.selector):!1}onInit(){Lt(this.args.selector)||(this.Tt=!1)}mouseleaveListener({target:t}){yt(t)&&ps(t)&&t[this._c]&&delete t[this._c]}mouseoverListener({target:t}){if(yt(t)&&ps(t)){let e=si(t,this.args.selector);e!==null&&!e[this._c]&&(e[this._c]=!0,this.onEventCallback({element:e}))}}onStart(){this.Tt&&(this._c=csSymbol("Hovered"),gt(this.jm,!0),gt(this.Um,!0))}onStop(){this.Tt&&(mt(this.Um),mt(this.jm))}}return U([P("mouseleaveListener"),ut()],s.prototype,"mouseleaveListener",null),U([P("mouseoverListener"),ut()],s.prototype,"mouseoverListener",null),s})(),qS=(()=>{class s{static readyStateChangeListener(t){csArray.prototype.forEach.call(je(s.callbacks),e=>e(t))}static jh(t){s.callbacks.has(t)||(s.callbacks.add(t),s.callbacks.size===1&&gt(s.eventHandler,!1))}static $n(t){s.callbacks.delete(t),s.callbacks.size===0&&mt(s.eventHandler,!1)}constructor(t){this.R=t}observe(){s.jh(this.R)}disconnect(){s.$n(this.R)}}return s.callbacks=new Set,s.eventHandler={boundElement:it.document,type:"readystatechange",listener:s.readyStateChangeListener},st([P("readyStateChangeListener"),ut()],s,"readyStateChangeListener",null),s})(),WS=(()=>{class s extends Zt{constructor(){super(...arguments),this.ku={state:"Any"}}validateArgs(t){var e;return J(t)&&C(t.state)||(H.implementation(`PageStateTrigger has wrong argument: ${(e=this.args)===null||e===void 0?void 0:e.state}, fallback to default config.`),this.args=this.ku),!0}onInit(){this.xt=this.args.state.toLowerCase(),this.G=new qS(()=>{this.Hm(this.xt,document.readyState)&&(this.onEventCallback(),this.G.disconnect())})}onStart(){this.Hm(this.xt,document.readyState)?this.onEventCallback():this.G.observe()}onStop(){this.G.disconnect()}Hm(t,e){let i=s.Bm[e];return s.Bm[t]<=i}}return s.Bm={complete:3,interactive:2,loading:1,any:0},s})(),YS=(()=>{class s{constructor(t,e){this.S=t,this.Qb=e,this.Zb={ApiErrorsMaskUrl:om,NetworkRequestMaskUrls:ey,ArtificialPageview:Jl,BlockAllowListForSr:Sm,CustomError:_m,CustomVariable:Am,DataCsEncrypt:bm,DataCsOverride:Cm,DynamicVariable:xm,EcTransactionAll:Fm,EcTransactionCreate:$m,EcTransactionItemsAdd:zm,EcTransactionSend:Gm,ElementUnmasking:qm,EventTriggerRecordingPage:Jm,EventTriggerRecordingSession:Qm,PageEvent:sy,PiiMasking:iy,RecordingEventTrigger:ry,SetPath:ny,SetQuery:oy,SrmOnlineAssets:qv,Submit:_S},this.$r={AfterPageView:MS,ElementAdded:kS,ElementBecomesVisible:LS,ElementExist:US,ElementRemoved:jS,ElementVisibility:HS,ElementClick:VS,FormSubmit:BS,HashChange:FS,HistoryChange:zS,Mouseover:GS,PageState:WS,BeforePageView:So}}t0(t){let e=this.Zb[t.name];return e?new e(this.S,t.args):(H.error(`Implementations: template ${t.name} does not exist`),null)}e0(t){var e;let i=this.$r[t.name];if(!i)return H.error(`Implementations: trigger ${t.name} does not exist`),null;let n=(e=this.Qb)===null||e===void 0?void 0:e[t.name];return new i(this.S,t.args,t.condition,n)}parse(t){let e=[];for(let{triggers:i,template:n}of t){let o=this.t0(n);if(!o)continue;if(!o.validateArgs(o.args)){H.implementation(`${n.name} has wrong argument.`);continue}for(let l of i){let h=this.e0(l);if(!h)continue;if(!h.validateArgs(h.args)){H.implementation(`${l.name} has wrong argument.`);continue}csArray.prototype.push.call(e,{name:`${l.name}_${n.name}`,trigger:h,template:o})}}return e}}return s})();function XS(s){return csArray.isArray(s)?csArray.prototype.map.call(s,Fl):Bo(s)?[s]:csArray.from($l(s))}function KS(s,r){try{let e=/^values\(([a-zA-Z0-9_$[\].]+)\)\[\?([a-zA-Z0-9_$]+)\]$/.exec(s);if(!e)return null;let i=e[1],n=e[2],o=Gl(r,XS(i));if(typeof o!="object"||o===null)return null;let c=[];return csArray.prototype.forEach.call(Object.keys(o),l=>{let h=o[l];typeof h=="object"&&h!==null&&!csArray.isArray(h)&&n in h&&csArray.prototype.push.call(c,h)}),c}catch{return null}}function JS(s,r){let e=/^\[([0-9]+):([0-9+])\]$/.exec(s);if(!e)return null;let i=parseInt(e[1],10),n=parseInt(e[2],10);return n<=i||n>r.length?null:csArray.prototype.slice.call(r,i,n)}function QS(s,r){let t=csString.prototype.split.call(s,"|");if(t.length>2)return null;let e=KS(csString.prototype.trim.call(t[0]),r);return t.length===2?e===null?null:JS(csString.prototype.trim.call(t[1]),e):e}var ZS=(()=>{class s{constructor(t,e,i,n){this.s0=t,this.N=i,this.xe={window,document,location,cookies:{}},this.$r=new Set,this.i0=new YS(e,n)}init(){Object.defineProperty(this.xe,"cookies",{get:()=>this.r0()});let t=this.i0.parse(this.s0);for(let{name:e,trigger:i,template:n}of t)i instanceof So&&n instanceof Jl||(this.$r.add(i),i.onEvent(o=>{this.onTriggerEvent(o,n),G.counters.CSTCSnippetUsed.count(e)}))}start(t=!1){this.$r.forEach(e=>{e.condition&&!Yl(e.condition,this.xe)||(t?this.N.schedule(()=>{e.start()}):e.start())})}stop(){this.$r.forEach(t=>{t.stop()})}onBeforePageView(t){this.$r.forEach(e=>{if(e instanceof So){e.onPageView(t);return}})}onTriggerEvent(t,e){let i=this.n0(t),n={...this.xe,...i},o=[];if(Og(e.args)&&C(e.args.iterable)&&e.args.iterable.length>0){let c=QS(e.args.iterable,n);if(yt(c)){let l=csArray.prototype.map.call(c,h=>({...n,$:h}));csArray.prototype.push.call(o,...l)}}else csArray.prototype.push.call(o,n);if(e instanceof $i){for(let c of o)e.execute(e.args,c);return}for(let c of o){let l=Zn(e.args,c);l&&e.execute(l)}}r0(){let t;try{t=document.cookie}catch{t=""}return csArray.prototype.reduce.call(csString.prototype.split.call(t,"; "),(e,i)=>{let[n,o]=csString.prototype.split.call(i,"=");return o!==void 0&&(e[n]=o),e},{})}n0(t){let e={...t};for(let i in e)dt(e[i])&&(D.isMaskedElement(e[i])||D.isMaskedElementChild(e[i]))&&delete e[i];return e}}return U([Nt("implementationsService.start")],s.prototype,"start",null),U([P()],s.prototype,"onTriggerEvent",null),s})(),t_=(()=>{class s{constructor(t,e,i,n){this.Bs=new ZS(t,e,i,n)}init(){this.Bs.init()}onInitTracking(){this.Bs.start(!0)}onOptout(){this.Bs.stop()}onBeforeSessionRenewal(){this.Bs.stop(),this.Bs.start()}onArtificialPageViewEnd(){this.Bs.stop()}onBeforeArtificialPageView(){this.Bs.start(),this.Bs.onBeforePageView("artificial")}onBeforeNaturalPageView(){this.Bs.onBeforePageView("natural")}}return s})(),e_=["optout"];var s_=(()=>{class s{constructor(t,e){this.S=t,this.hs=e}init(){this.S.register(e_,()=>{this.hs.activate()})}}return s})(),_i="_cs_optout",i_=(()=>{class s{constructor(t,e,i){this.E=t,this.O=e,this.St=i}get(){return this.E.cookielessTrackingEnabled?this.St.getItem(_i):this.O.get(_i)}set(t){this.E.cookielessTrackingEnabled?this.St.setItem(_i,t):this.O.set(_i,t,Ro)}}return s})(),zc="1",r_=(()=>{class s{constructor(t,e,i){this.w=t,this.Mt=e,this.pt=i}init(){!this.isActive()&&this.o0()&&this.activate()}isActive(){return this.pt.get()===zc}activate(){this.w.emitOptout(),this.pt.set(zc)}o0(){return csString.prototype.indexOf.call(this.Mt.href,_i)>0}}return s})(),n_=(()=>{class s{constructor(){this.wc=null,this.a0=1}startInterval(){this.wc=window.csSetInterval(()=>{let t=this.a0++;if(this.flush(`interval.${t}`),t>=5){this.stopInterval();return}},5e3)}flush(t){G.counters.tasks.flush(t),G.counters.longTasks.flush(t)}clear(){G.counters.tasks.reset(),G.counters.longTasks.reset(),this.stopInterval()}stopInterval(){this.wc&&(csClearInterval(this.wc),this.wc=null)}}return s})(),o_=(()=>{class s{constructor(){this.Po=!1,this.Oo=null,this.Fs=new n_}onStartTracking(){this.c0()}c0(){let t=csArray.prototype.filter.call(performance.getEntriesByType("resource"),e=>{var i;if(e.initiatorType!=="script")return!1;let n=csString.prototype.split.call(e.name,"/")[2]||"",o=(i=window.CSCurrentScript)===null||i===void 0?void 0:i.src;return o?o===e.name:n==="t.contentsquare.net"});csArray.prototype.forEach.call(t,e=>{if(e.transferSize===0)return;let i=e.responseEnd-e.responseStart,n=e.transferSize;i>=0&&G.counters.downloadTime.push(i),n>=0&&G.counters.transferSize.push(n)}),G.counters.downloadTime.count>0&&G.counters.downloadTime.flush(),G.counters.transferSize.count>0&&G.counters.transferSize.flush()}Fm(){G.counters.blockingTime.flush(),G.counters.inpContribution.flush()}onBeforeArtificialPageView(){this.Fm(),this.Oo&&csClearTimeout(this.Oo),this.Fs.stopInterval(),this.Po=!0}onBeforeNaturalPageView(){this.Fm()}onAfterNaturalPageView(t){t===Rs.Natural?(this.Fs.flush("boot"),this.Fs.startInterval()):(this.Oo&&csClearTimeout(this.Oo),this.Fs.stopInterval(),this.Po=!0)}onInitialDomStart(){this.Po||this.Fs.stopInterval()}onInitialDomDone(){this.Po||(this.Po=!0,this.Fs.flush("initial-dom"),this.Oo=window.csSetTimeout(()=>{this.Fs.flush("post-initial-dom"),this.Fs.startInterval()},5e3))}onOptout(){this.Fs.clear()}}return s})(),a_=(()=>{let s;return function(r){r.COMPRESSION_DISABLED="compressionDisabled"}(s||(s={})),s})(),c_=(()=>{class s{constructor(){}static init(t){(!this.Bu||t!==void 0)&&this.initFlags(t)}static initFlags(t=document.cookie){var e;let i=(e=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))===null||e===void 0?void 0:e[1];if(this.Bu=new Map,i){let n=csString.prototype.split.call(i,".");for(let o=0;o<n.length;o++){let[c,l]=csString.prototype.split.call(n[o],"=");this.Bu.set(c,l||"true")}}}static getBoolean(t){let e=this.getString(t);return e!=null&&e!=="false"&&parseInt(e)!==0}static getString(t){var e;return this.init(),(e=this.Bu)===null||e===void 0?void 0:e.get(t)}static isCompressionEnabled(){return!this.getBoolean(a_.COMPRESSION_DISABLED)}static Log(t){return(e,i,n)=>{var o;let c=i.toString(),l=`${(o=e.constructor)===null||o===void 0?void 0:o.name}.${c}`,h=n.value;l_(s.getString("debugLog"),t)&&(n.value=function(...u){return console.log(l,...u),h.bind(this)(...u)})}}}return s})();function l_(s,r){var t;return s==null?!1:s===r||!!(!((t=csString.prototype.match.call(s,new csRegExp("(^|,)("+r+")(,|$)")))===null||t===void 0)&&t.length)}var h_=(()=>{class s{constructor(t){this.l0=t,this.$m=[],this.Fu={},this.h0=0}static async create(t,e={}){let i=new s(t),n;return csArray.prototype.forEach.call(Object.entries(e),([o,c])=>{e[o]=c,i.register(c)}),await i.zr().catch(o=>{at.warn("Failed to start worker: "+o.toString()),n=new t}),new Proxy(i,{get(o,c){return c==="__worker"?i.Re:t.prototype[c]instanceof Function?(...l)=>n?Promise.resolve(n[c](...l)):i.zm(c,l):n?Promise.resolve(n[c]):i.zm(c,[])}})}zm(t,e){let i=++this.h0;return new Promise((n,o)=>{this.Fu[i]=(c,l)=>{delete this.Fu[i],c?o(c):n(l)},this.Re.postMessage({id:i,command:t,params:e})})}register(t){csArray.prototype.push.call(this.$m,t.toString())}zr(){try{let t=Gc.toString()+`
`+csArray.prototype.join.call(this.$m,`
`)+`

const klass = (${this.l0.toString()});

${Gc.name}()`,e=new Blob([t],{type:"application/javascript"}),i=csURL.createObjectURL(e);this.Re=new Worker(i),this.Re.addEventListener("message",n=>{var o,c,l,h,u;if(n.data!=="ping"){if(!((o=n.data)===null||o===void 0)&&o.critical||!n.data.id){at.error("Worker error:",(l=(c=n.data)===null||c===void 0?void 0:c.critical)!==null&&l!==void 0?l:"No ID");return}(u=(h=this.Fu)[n.data.id])===null||u===void 0||u.call(h,n.data.error,n.data.result)}})}catch(t){return Promise.reject(t)}return new Promise((t,e)=>{this.Re.onerror=i=>e(new Error(i.message)),this.Re.onmessage=()=>{this.Re.onmessage=this.Re.onerror=null,t()}})}}return s})();function Gc(){let s=new klass;self.postMessage("ping"),self.onmessage=r=>{var t,e,i;if(!(!((t=r.data)===null||t===void 0)&&t.command))return self.postMessage({critical:"Invalid command",id:(e=r.data)===null||e===void 0?void 0:e.id,command:(i=r.data)===null||i===void 0?void 0:i.command});Promise.resolve().then(()=>{let n=s[r.data.command];return typeof n=="function"?n.apply(s,r.data.params):n}).then(n=>{var o;self.postMessage({result:n,id:r.data.id,command:(o=r.data)===null||o===void 0?void 0:o.command})},n=>{var o,c;self.postMessage({error:n,id:(o=r.data)===null||o===void 0?void 0:o.id,command:(c=r.data)===null||c===void 0?void 0:c.command})})}}function _o(){function i(a){let f=a.length;for(;--f>=0;)a[f]=0}let n=0,o=1,c=2,l=3,h=258,u=29,p=256,y=p+1+u,m=30,v=19,b=2*y+1,I=15,_=16,A=7,x=256,N=16,w=17,B=18,F=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Q=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Ct=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Ht=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),oe=512,S=new Array((y+2)*2);i(S);let V=new Array(m*2);i(V);let j=new Array(oe);i(j);let z=new Array(h-l+1);i(z);let pt=new Array(u);i(pt);let It=new Array(m);i(It);function ae(a,f,g,E,d){this.static_tree=a,this.extra_bits=f,this.extra_base=g,this.elems=E,this.max_length=d,this.has_stree=a&&a.length}let Ce,ms,ys;function He(a,f){this.dyn_tree=a,this.max_code=0,this.stat_desc=f}let Be=a=>a<256?j[a]:j[256+(a>>>7)],ce=(a,f)=>{a.pending_buf[a.pending++]=f&255,a.pending_buf[a.pending++]=f>>>8&255},Mt=(a,f,g)=>{a.bi_valid>_-g?(a.bi_buf|=f<<a.bi_valid&65535,ce(a,a.bi_buf),a.bi_buf=f>>_-a.bi_valid,a.bi_valid+=g-_):(a.bi_buf|=f<<a.bi_valid&65535,a.bi_valid+=g)},te=(a,f,g)=>{Mt(a,g[f*2],g[f*2+1])},Ki=(a,f)=>{let g=0;do g|=a&1,a>>>=1,g<<=1;while(--f>0);return g>>>1},Yr=a=>{a.bi_valid===16?(ce(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=a.bi_buf&255,a.bi_buf>>=8,a.bi_valid-=8)},Xr=(a,f)=>{let g=f.dyn_tree,E=f.max_code,d=f.stat_desc.static_tree,R=f.stat_desc.has_stree,T=f.stat_desc.extra_bits,O=f.stat_desc.extra_base,tt=f.stat_desc.max_length,$,Wt,Ke,ct,ws,Gs,dr=0;for(ct=0;ct<=I;ct++)a.bl_count[ct]=0;for(g[a.heap[a.heap_max]*2+1]=0,$=a.heap_max+1;$<b;$++)Wt=a.heap[$],ct=g[g[Wt*2+1]*2+1]+1,ct>tt&&(ct=tt,dr++),g[Wt*2+1]=ct,!(Wt>E)&&(a.bl_count[ct]++,ws=0,Wt>=O&&(ws=T[Wt-O]),Gs=g[Wt*2],a.opt_len+=Gs*(ct+ws),R&&(a.static_len+=Gs*(d[Wt*2+1]+ws)));if(dr!==0){do{for(ct=tt-1;a.bl_count[ct]===0;)ct--;a.bl_count[ct]--,a.bl_count[ct+1]+=2,a.bl_count[tt]--,dr-=2}while(dr>0);for(ct=tt;ct!==0;ct--)for(Wt=a.bl_count[ct];Wt!==0;)Ke=a.heap[--$],!(Ke>E)&&(g[Ke*2+1]!==ct&&(a.opt_len+=(ct-g[Ke*2+1])*g[Ke*2],g[Ke*2+1]=ct),Wt--)}},Ji=(a,f,g)=>{let E=new Array(I+1),d=0,R,T;for(R=1;R<=I;R++)E[R]=d=d+g[R-1]<<1;for(T=0;T<=f;T++){let O=a[T*2+1];O!==0&&(a[T*2]=Ki(E[O]++,O))}},Kr=()=>{let a,f,g,E,d,R=new Array(I+1);for(g=0,E=0;E<u-1;E++)for(pt[E]=g,a=0;a<1<<F[E];a++)z[g++]=E;for(z[g-1]=E,d=0,E=0;E<16;E++)for(It[E]=d,a=0;a<1<<Q[E];a++)j[d++]=E;for(d>>=7;E<m;E++)for(It[E]=d<<7,a=0;a<1<<Q[E]-7;a++)j[256+d++]=E;for(f=0;f<=I;f++)R[f]=0;for(a=0;a<=143;)S[a*2+1]=8,a++,R[8]++;for(;a<=255;)S[a*2+1]=9,a++,R[9]++;for(;a<=279;)S[a*2+1]=7,a++,R[7]++;for(;a<=287;)S[a*2+1]=8,a++,R[8]++;for(Ji(S,y+1,R),a=0;a<m;a++)V[a*2+1]=5,V[a*2]=Ki(a,5);Ce=new ae(S,F,p+1,y,I),ms=new ae(V,Q,0,m,I),ys=new ae(new Array(0),Ct,0,v,A)},Qi=a=>{let f;for(f=0;f<y;f++)a.dyn_ltree[f*2]=0;for(f=0;f<m;f++)a.dyn_dtree[f*2]=0;for(f=0;f<v;f++)a.bl_tree[f*2]=0;a.dyn_ltree[x*2]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0},Zi=a=>{a.bi_valid>8?ce(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0},tr=(a,f,g,E)=>{Zi(a),E&&(ce(a,g),ce(a,~g)),a.pending_buf.set(a.window.subarray(f,f+g),a.pending),a.pending+=g},Jr=(a,f,g,E)=>{let d=f*2,R=g*2;return a[d]<a[R]||a[d]===a[R]&&E[f]<=E[g]},er=(a,f,g)=>{let E=a.heap[g],d=g<<1;for(;d<=a.heap_len&&(d<a.heap_len&&Jr(f,a.heap[d+1],a.heap[d],a.depth)&&d++,!Jr(f,E,a.heap[d],a.depth));)a.heap[g]=a.heap[d],g=d,d<<=1;a.heap[g]=E},Qr=(a,f,g)=>{let E,d,R=0,T,O;if(a.last_lit!==0)do E=a.pending_buf[a.d_buf+R*2]<<8|a.pending_buf[a.d_buf+R*2+1],d=a.pending_buf[a.l_buf+R],R++,E===0?te(a,d,f):(T=z[d],te(a,T+p+1,f),O=F[T],O!==0&&(d-=pt[T],Mt(a,d,O)),E--,T=Be(E),te(a,T,g),O=Q[T],O!==0&&(E-=It[T],Mt(a,E,O)));while(R<a.last_lit);te(a,x,f)},sr=(a,f)=>{let g=f.dyn_tree,E=f.stat_desc.static_tree,d=f.stat_desc.has_stree,R=f.stat_desc.elems,T,O,tt=-1,$;for(a.heap_len=0,a.heap_max=b,T=0;T<R;T++)g[T*2]!==0?(a.heap[++a.heap_len]=tt=T,a.depth[T]=0):g[T*2+1]=0;for(;a.heap_len<2;)$=a.heap[++a.heap_len]=tt<2?++tt:0,g[$*2]=1,a.depth[$]=0,a.opt_len--,d&&(a.static_len-=E[$*2+1]);for(f.max_code=tt,T=a.heap_len>>1;T>=1;T--)er(a,g,T);$=R;do T=a.heap[1],a.heap[1]=a.heap[a.heap_len--],er(a,g,1),O=a.heap[1],a.heap[--a.heap_max]=T,a.heap[--a.heap_max]=O,g[$*2]=g[T*2]+g[O*2],a.depth[$]=(a.depth[T]>=a.depth[O]?a.depth[T]:a.depth[O])+1,g[T*2+1]=g[O*2+1]=$,a.heap[1]=$++,er(a,g,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],Xr(a,f),Ji(g,tt,a.bl_count)},Zr=(a,f,g)=>{let E,d=-1,R,T=f[0*2+1],O=0,tt=7,$=4;for(T===0&&(tt=138,$=3),f[(g+1)*2+1]=65535,E=0;E<=g;E++)R=T,T=f[(E+1)*2+1],!(++O<tt&&R===T)&&(O<$?a.bl_tree[R*2]+=O:R!==0?(R!==d&&a.bl_tree[R*2]++,a.bl_tree[N*2]++):O<=10?a.bl_tree[w*2]++:a.bl_tree[B*2]++,O=0,d=R,T===0?(tt=138,$=3):R===T?(tt=6,$=3):(tt=7,$=4))},ha=(a,f,g)=>{let E,d=-1,R,T=f[0*2+1],O=0,tt=7,$=4;for(T===0&&(tt=138,$=3),E=0;E<=g;E++)if(R=T,T=f[(E+1)*2+1],!(++O<tt&&R===T)){if(O<$)do te(a,R,a.bl_tree);while(--O!==0);else R!==0?(R!==d&&(te(a,R,a.bl_tree),O--),te(a,N,a.bl_tree),Mt(a,O-3,2)):O<=10?(te(a,w,a.bl_tree),Mt(a,O-3,3)):(te(a,B,a.bl_tree),Mt(a,O-11,7));O=0,d=R,T===0?(tt=138,$=3):R===T?(tt=6,$=3):(tt=7,$=4)}},$h=a=>{let f;for(Zr(a,a.dyn_ltree,a.l_desc.max_code),Zr(a,a.dyn_dtree,a.d_desc.max_code),sr(a,a.bl_desc),f=v-1;f>=3&&a.bl_tree[Ht[f]*2+1]===0;f--);return a.opt_len+=3*(f+1)+5+5+4,f},zh=(a,f,g,E)=>{let d;for(Mt(a,f-257,5),Mt(a,g-1,5),Mt(a,E-4,4),d=0;d<E;d++)Mt(a,a.bl_tree[Ht[d]*2+1],3);ha(a,a.dyn_ltree,f-1),ha(a,a.dyn_dtree,g-1)},Gh=a=>{let f=4093624447,g;for(g=0;g<=31;g++,f>>>=1)if(f&1&&a.dyn_ltree[g*2]!==0)return 0;if(a.dyn_ltree[9*2]!==0||a.dyn_ltree[10*2]!==0||a.dyn_ltree[13*2]!==0)return 1;for(g=32;g<p;g++)if(a.dyn_ltree[g*2]!==0)return 1;return 0},ua=!1,qh=a=>{ua||(Kr(),ua=!0),a.l_desc=new He(a.dyn_ltree,Ce),a.d_desc=new He(a.dyn_dtree,ms),a.bl_desc=new He(a.bl_tree,ys),a.bi_buf=0,a.bi_valid=0,Qi(a)},da=(a,f,g,E)=>{Mt(a,(n<<1)+(E?1:0),3),tr(a,f,g,!0)},Wh=a=>{Mt(a,o<<1,3),te(a,x,S),Yr(a)},Yh=(a,f,g,E)=>{let d,R,T=0;a.level>0?(a.strm.data_type===2&&(a.strm.data_type=Gh(a)),sr(a,a.l_desc),sr(a,a.d_desc),T=$h(a),d=a.opt_len+3+7>>>3,R=a.static_len+3+7>>>3,R<=d&&(d=R)):d=R=g+5,g+4<=d&&f!==-1?da(a,f,g,E):a.strategy===4||R===d?(Mt(a,(o<<1)+(E?1:0),3),Qr(a,S,V)):(Mt(a,(c<<1)+(E?1:0),3),zh(a,a.l_desc.max_code+1,a.d_desc.max_code+1,T+1),Qr(a,a.dyn_ltree,a.dyn_dtree)),Qi(a),E&&Zi(a)},Xh=(a,f,g)=>(a.pending_buf[a.d_buf+a.last_lit*2]=f>>>8&255,a.pending_buf[a.d_buf+a.last_lit*2+1]=f&255,a.pending_buf[a.l_buf+a.last_lit]=g&255,a.last_lit++,f===0?a.dyn_ltree[g*2]++:(a.matches++,f--,a.dyn_ltree[(z[g]+p+1)*2]++,a.dyn_dtree[Be(f)*2]++),a.last_lit===a.lit_bufsize-1);var Kh=qh,Jh=da,Qh=Yh,Zh=Xh,tu=Wh,eu={_tr_init:Kh,_tr_stored_block:Jh,_tr_flush_block:Qh,_tr_tally:Zh,_tr_align:tu},fa=(a,f,g,E)=>{let d=a&65535|0,R=a>>>16&65535|0,T=0;for(;g!==0;){T=g>2e3?2e3:g,g-=T;do d=d+f[E++]|0,R=R+d|0;while(--T);d%=65521,R%=65521}return d|R<<16|0};let su=()=>{let a,f=[];for(var g=0;g<256;g++){a=g;for(var E=0;E<8;E++)a=a&1?3988292384^a>>>1:a>>>1;f[g]=a}return f},iu=new Uint32Array(su());var Fe=(a,f,g,E)=>{let d=iu,R=E+g;a^=-1;for(let T=E;T<R;T++)a=a>>>8^d[(a^f[T])&255];return a^-1},ir={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},pa={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:ru,_tr_stored_block:nu,_tr_flush_block:ou,_tr_tally:$e,_tr_align:au}=eu,{Z_NO_FLUSH:Es,Z_PARTIAL_FLUSH:cu,Z_FULL_FLUSH:lu,Z_FINISH:ze,Z_BLOCK:ga,Z_OK:ve,Z_STREAM_END:ma,Z_STREAM_ERROR:ee,Z_DATA_ERROR:hu,Z_BUF_ERROR:tn,Z_DEFAULT_COMPRESSION:uu,Z_FILTERED:du,Z_HUFFMAN_ONLY:rr,Z_RLE:fu,Z_FIXED:pu,Z_DEFAULT_STRATEGY:gu,Z_UNKNOWN:mu,Z_DEFLATED:nr}=pa,yu=9,Eu=15,vu=8,en=256+1+29,Su=30,_u=19,wu=2*en+1,Au=15,Z=3,Ge=258,le=Ge+Z+1,Tu=32,or=42,sn=69,ar=73,cr=91,lr=103,vs=113,hi=666,At=1,ui=2,Ss=3,$s=4,bu=3,qe=(a,f)=>(a.msg=ir[f],f),ya=a=>(a<<1)-(a>4?9:0),We=a=>{let f=a.length;for(;--f>=0;)a[f]=0},Ye=(a,f,g)=>(f<<a.hash_shift^g)&a.hash_mask,Xe=a=>{let f=a.state,g=f.pending;g>a.avail_out&&(g=a.avail_out),g!==0&&(a.output.set(f.pending_buf.subarray(f.pending_out,f.pending_out+g),a.next_out),a.next_out+=g,f.pending_out+=g,a.total_out+=g,a.avail_out-=g,f.pending-=g,f.pending===0&&(f.pending_out=0))},Dt=(a,f)=>{ou(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,f),a.block_start=a.strstart,Xe(a.strm)},rt=(a,f)=>{a.pending_buf[a.pending++]=f},di=(a,f)=>{a.pending_buf[a.pending++]=f>>>8&255,a.pending_buf[a.pending++]=f&255},Ru=(a,f,g,E)=>{let d=a.avail_in;return d>E&&(d=E),d===0?0:(a.avail_in-=d,f.set(a.input.subarray(a.next_in,a.next_in+d),g),a.state.wrap===1?a.adler=fa(a.adler,f,d,g):a.state.wrap===2&&(a.adler=Fe(a.adler,f,d,g)),a.next_in+=d,a.total_in+=d,d)},Ea=(a,f)=>{let g=a.max_chain_length,E=a.strstart,d,R,T=a.prev_length,O=a.nice_match,tt=a.strstart>a.w_size-le?a.strstart-(a.w_size-le):0,$=a.window,Wt=a.w_mask,Ke=a.prev,ct=a.strstart+Ge,ws=$[E+T-1],Gs=$[E+T];a.prev_length>=a.good_match&&(g>>=2),O>a.lookahead&&(O=a.lookahead);do if(d=f,!($[d+T]!==Gs||$[d+T-1]!==ws||$[d]!==$[E]||$[++d]!==$[E+1])){E+=2,d++;do;while($[++E]===$[++d]&&$[++E]===$[++d]&&$[++E]===$[++d]&&$[++E]===$[++d]&&$[++E]===$[++d]&&$[++E]===$[++d]&&$[++E]===$[++d]&&$[++E]===$[++d]&&E<ct);if(R=Ge-(ct-E),E=ct-Ge,R>T){if(a.match_start=f,T=R,R>=O)break;ws=$[E+T-1],Gs=$[E+T]}}while((f=Ke[f&Wt])>tt&&--g!==0);return T<=a.lookahead?T:a.lookahead},_s=a=>{let f=a.w_size,g,E,d,R,T;do{if(R=a.window_size-a.lookahead-a.strstart,a.strstart>=f+(f-le)){a.window.set(a.window.subarray(f,f+f),0),a.match_start-=f,a.strstart-=f,a.block_start-=f,E=a.hash_size,g=E;do d=a.head[--g],a.head[g]=d>=f?d-f:0;while(--E);E=f,g=E;do d=a.prev[--g],a.prev[g]=d>=f?d-f:0;while(--E);R+=f}if(a.strm.avail_in===0)break;if(E=Ru(a.strm,a.window,a.strstart+a.lookahead,R),a.lookahead+=E,a.lookahead+a.insert>=Z)for(T=a.strstart-a.insert,a.ins_h=a.window[T],a.ins_h=Ye(a,a.ins_h,a.window[T+1]);a.insert&&(a.ins_h=Ye(a,a.ins_h,a.window[T+Z-1]),a.prev[T&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=T,T++,a.insert--,!(a.lookahead+a.insert<Z)););}while(a.lookahead<le&&a.strm.avail_in!==0)},Cu=(a,f)=>{let g=65535;for(g>a.pending_buf_size-5&&(g=a.pending_buf_size-5);;){if(a.lookahead<=1){if(_s(a),a.lookahead===0&&f===Es)return At;if(a.lookahead===0)break}a.strstart+=a.lookahead,a.lookahead=0;let E=a.block_start+g;if((a.strstart===0||a.strstart>=E)&&(a.lookahead=a.strstart-E,a.strstart=E,Dt(a,!1),a.strm.avail_out===0)||a.strstart-a.block_start>=a.w_size-le&&(Dt(a,!1),a.strm.avail_out===0))return At}return a.insert=0,f===ze?(Dt(a,!0),a.strm.avail_out===0?Ss:$s):(a.strstart>a.block_start&&(Dt(a,!1),a.strm.avail_out===0),At)},rn=(a,f)=>{let g,E;for(;;){if(a.lookahead<le){if(_s(a),a.lookahead<le&&f===Es)return At;if(a.lookahead===0)break}if(g=0,a.lookahead>=Z&&(a.ins_h=Ye(a,a.ins_h,a.window[a.strstart+Z-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),g!==0&&a.strstart-g<=a.w_size-le&&(a.match_length=Ea(a,g)),a.match_length>=Z)if(E=$e(a,a.strstart-a.match_start,a.match_length-Z),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=Z){a.match_length--;do a.strstart++,a.ins_h=Ye(a,a.ins_h,a.window[a.strstart+Z-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(--a.match_length!==0);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=Ye(a,a.ins_h,a.window[a.strstart+1]);else E=$e(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(E&&(Dt(a,!1),a.strm.avail_out===0))return At}return a.insert=a.strstart<Z-1?a.strstart:Z-1,f===ze?(Dt(a,!0),a.strm.avail_out===0?Ss:$s):a.last_lit&&(Dt(a,!1),a.strm.avail_out===0)?At:ui},zs=(a,f)=>{let g,E,d;for(;;){if(a.lookahead<le){if(_s(a),a.lookahead<le&&f===Es)return At;if(a.lookahead===0)break}if(g=0,a.lookahead>=Z&&(a.ins_h=Ye(a,a.ins_h,a.window[a.strstart+Z-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=Z-1,g!==0&&a.prev_length<a.max_lazy_match&&a.strstart-g<=a.w_size-le&&(a.match_length=Ea(a,g),a.match_length<=5&&(a.strategy===du||a.match_length===Z&&a.strstart-a.match_start>4096)&&(a.match_length=Z-1)),a.prev_length>=Z&&a.match_length<=a.prev_length){d=a.strstart+a.lookahead-Z,E=$e(a,a.strstart-1-a.prev_match,a.prev_length-Z),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=d&&(a.ins_h=Ye(a,a.ins_h,a.window[a.strstart+Z-1]),g=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(--a.prev_length!==0);if(a.match_available=0,a.match_length=Z-1,a.strstart++,E&&(Dt(a,!1),a.strm.avail_out===0))return At}else if(a.match_available){if(E=$e(a,0,a.window[a.strstart-1]),E&&Dt(a,!1),a.strstart++,a.lookahead--,a.strm.avail_out===0)return At}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(E=$e(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<Z-1?a.strstart:Z-1,f===ze?(Dt(a,!0),a.strm.avail_out===0?Ss:$s):a.last_lit&&(Dt(a,!1),a.strm.avail_out===0)?At:ui},Iu=(a,f)=>{let g,E,d,R,T=a.window;for(;;){if(a.lookahead<=Ge){if(_s(a),a.lookahead<=Ge&&f===Es)return At;if(a.lookahead===0)break}if(a.match_length=0,a.lookahead>=Z&&a.strstart>0&&(d=a.strstart-1,E=T[d],E===T[++d]&&E===T[++d]&&E===T[++d])){R=a.strstart+Ge;do;while(E===T[++d]&&E===T[++d]&&E===T[++d]&&E===T[++d]&&E===T[++d]&&E===T[++d]&&E===T[++d]&&E===T[++d]&&d<R);a.match_length=Ge-(R-d),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=Z?(g=$e(a,1,a.match_length-Z),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(g=$e(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),g&&(Dt(a,!1),a.strm.avail_out===0))return At}return a.insert=0,f===ze?(Dt(a,!0),a.strm.avail_out===0?Ss:$s):a.last_lit&&(Dt(a,!1),a.strm.avail_out===0)?At:ui},Pu=(a,f)=>{let g;for(;;){if(a.lookahead===0&&(_s(a),a.lookahead===0)){if(f===Es)return At;break}if(a.match_length=0,g=$e(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,g&&(Dt(a,!1),a.strm.avail_out===0))return At}return a.insert=0,f===ze?(Dt(a,!0),a.strm.avail_out===0?Ss:$s):a.last_lit&&(Dt(a,!1),a.strm.avail_out===0)?At:ui};function Se(a,f,g,E,d){this.good_length=a,this.max_lazy=f,this.nice_length=g,this.max_chain=E,this.func=d}let fi=[new Se(0,0,0,0,Cu),new Se(4,4,8,4,rn),new Se(4,5,16,8,rn),new Se(4,6,32,32,rn),new Se(4,4,16,16,zs),new Se(8,16,32,32,zs),new Se(8,16,128,128,zs),new Se(8,32,128,256,zs),new Se(32,128,258,1024,zs),new Se(32,258,258,4096,zs)],Ou=a=>{a.window_size=2*a.w_size,We(a.head),a.max_lazy_match=fi[a.level].max_lazy,a.good_match=fi[a.level].good_length,a.nice_match=fi[a.level].nice_length,a.max_chain_length=fi[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=Z-1,a.match_available=0,a.ins_h=0};function Nu(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=nr,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(wu*2),this.dyn_dtree=new Uint16Array((2*Su+1)*2),this.bl_tree=new Uint16Array((2*_u+1)*2),We(this.dyn_ltree),We(this.dyn_dtree),We(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Au+1),this.heap=new Uint16Array(2*en+1),We(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*en+1),We(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let va=a=>{if(!a||!a.state)return qe(a,ee);a.total_in=a.total_out=0,a.data_type=mu;let f=a.state;return f.pending=0,f.pending_out=0,f.wrap<0&&(f.wrap=-f.wrap),f.status=f.wrap?or:vs,a.adler=f.wrap===2?0:1,f.last_flush=Es,ru(f),ve},Sa=a=>{let f=va(a);return f===ve&&Ou(a.state),f},Mu=(a,f)=>!a||!a.state||a.state.wrap!==2?ee:(a.state.gzhead=f,ve),_a=(a,f,g,E,d,R)=>{if(!a)return ee;let T=1;if(f===uu&&(f=6),E<0?(T=0,E=-E):E>15&&(T=2,E-=16),d<1||d>yu||g!==nr||E<8||E>15||f<0||f>9||R<0||R>pu)return qe(a,ee);E===8&&(E=9);let O=new Nu;return a.state=O,O.strm=a,O.wrap=T,O.gzhead=null,O.w_bits=E,O.w_size=1<<O.w_bits,O.w_mask=O.w_size-1,O.hash_bits=d+7,O.hash_size=1<<O.hash_bits,O.hash_mask=O.hash_size-1,O.hash_shift=~~((O.hash_bits+Z-1)/Z),O.window=new Uint8Array(O.w_size*2),O.head=new Uint16Array(O.hash_size),O.prev=new Uint16Array(O.w_size),O.lit_bufsize=1<<d+6,O.pending_buf_size=O.lit_bufsize*4,O.pending_buf=new Uint8Array(O.pending_buf_size),O.d_buf=1*O.lit_bufsize,O.l_buf=3*O.lit_bufsize,O.level=f,O.strategy=R,O.method=g,Sa(a)},Du=(a,f)=>_a(a,f,nr,Eu,vu,gu),ku=(a,f)=>{let g,E;if(!a||!a.state||f>ga||f<0)return a?qe(a,ee):ee;let d=a.state;if(!a.output||!a.input&&a.avail_in!==0||d.status===hi&&f!==ze)return qe(a,a.avail_out===0?tn:ee);d.strm=a;let R=d.last_flush;if(d.last_flush=f,d.status===or)if(d.wrap===2)a.adler=0,rt(d,31),rt(d,139),rt(d,8),d.gzhead?(rt(d,(d.gzhead.text?1:0)+(d.gzhead.hcrc?2:0)+(d.gzhead.extra?4:0)+(d.gzhead.name?8:0)+(d.gzhead.comment?16:0)),rt(d,d.gzhead.time&255),rt(d,d.gzhead.time>>8&255),rt(d,d.gzhead.time>>16&255),rt(d,d.gzhead.time>>24&255),rt(d,d.level===9?2:d.strategy>=rr||d.level<2?4:0),rt(d,d.gzhead.os&255),d.gzhead.extra&&d.gzhead.extra.length&&(rt(d,d.gzhead.extra.length&255),rt(d,d.gzhead.extra.length>>8&255)),d.gzhead.hcrc&&(a.adler=Fe(a.adler,d.pending_buf,d.pending,0)),d.gzindex=0,d.status=sn):(rt(d,0),rt(d,0),rt(d,0),rt(d,0),rt(d,0),rt(d,d.level===9?2:d.strategy>=rr||d.level<2?4:0),rt(d,bu),d.status=vs);else{let T=nr+(d.w_bits-8<<4)<<8,O=-1;d.strategy>=rr||d.level<2?O=0:d.level<6?O=1:d.level===6?O=2:O=3,T|=O<<6,d.strstart!==0&&(T|=Tu),T+=31-T%31,d.status=vs,di(d,T),d.strstart!==0&&(di(d,a.adler>>>16),di(d,a.adler&65535)),a.adler=1}if(d.status===sn)if(d.gzhead.extra){for(g=d.pending;d.gzindex<(d.gzhead.extra.length&65535)&&!(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>g&&(a.adler=Fe(a.adler,d.pending_buf,d.pending-g,g)),Xe(a),g=d.pending,d.pending===d.pending_buf_size));)rt(d,d.gzhead.extra[d.gzindex]&255),d.gzindex++;d.gzhead.hcrc&&d.pending>g&&(a.adler=Fe(a.adler,d.pending_buf,d.pending-g,g)),d.gzindex===d.gzhead.extra.length&&(d.gzindex=0,d.status=ar)}else d.status=ar;if(d.status===ar)if(d.gzhead.name){g=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>g&&(a.adler=Fe(a.adler,d.pending_buf,d.pending-g,g)),Xe(a),g=d.pending,d.pending===d.pending_buf_size)){E=1;break}d.gzindex<d.gzhead.name.length?E=d.gzhead.name.charCodeAt(d.gzindex++)&255:E=0,rt(d,E)}while(E!==0);d.gzhead.hcrc&&d.pending>g&&(a.adler=Fe(a.adler,d.pending_buf,d.pending-g,g)),E===0&&(d.gzindex=0,d.status=cr)}else d.status=cr;if(d.status===cr)if(d.gzhead.comment){g=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>g&&(a.adler=Fe(a.adler,d.pending_buf,d.pending-g,g)),Xe(a),g=d.pending,d.pending===d.pending_buf_size)){E=1;break}d.gzindex<d.gzhead.comment.length?E=d.gzhead.comment.charCodeAt(d.gzindex++)&255:E=0,rt(d,E)}while(E!==0);d.gzhead.hcrc&&d.pending>g&&(a.adler=Fe(a.adler,d.pending_buf,d.pending-g,g)),E===0&&(d.status=lr)}else d.status=lr;if(d.status===lr&&(d.gzhead.hcrc?(d.pending+2>d.pending_buf_size&&Xe(a),d.pending+2<=d.pending_buf_size&&(rt(d,a.adler&255),rt(d,a.adler>>8&255),a.adler=0,d.status=vs)):d.status=vs),d.pending!==0){if(Xe(a),a.avail_out===0)return d.last_flush=-1,ve}else if(a.avail_in===0&&ya(f)<=ya(R)&&f!==ze)return qe(a,tn);if(d.status===hi&&a.avail_in!==0)return qe(a,tn);if(a.avail_in!==0||d.lookahead!==0||f!==Es&&d.status!==hi){let T=d.strategy===rr?Pu(d,f):d.strategy===fu?Iu(d,f):fi[d.level].func(d,f);if((T===Ss||T===$s)&&(d.status=hi),T===At||T===Ss)return a.avail_out===0&&(d.last_flush=-1),ve;if(T===ui&&(f===cu?au(d):f!==ga&&(nu(d,0,0,!1),f===lu&&(We(d.head),d.lookahead===0&&(d.strstart=0,d.block_start=0,d.insert=0))),Xe(a),a.avail_out===0))return d.last_flush=-1,ve}return f!==ze?ve:d.wrap<=0?ma:(d.wrap===2?(rt(d,a.adler&255),rt(d,a.adler>>8&255),rt(d,a.adler>>16&255),rt(d,a.adler>>24&255),rt(d,a.total_in&255),rt(d,a.total_in>>8&255),rt(d,a.total_in>>16&255),rt(d,a.total_in>>24&255)):(di(d,a.adler>>>16),di(d,a.adler&65535)),Xe(a),d.wrap>0&&(d.wrap=-d.wrap),d.pending!==0?ve:ma)},xu=a=>{if(!a||!a.state)return ee;let f=a.state.status;return f!==or&&f!==sn&&f!==ar&&f!==cr&&f!==lr&&f!==vs&&f!==hi?qe(a,ee):(a.state=null,f===vs?qe(a,hu):ve)},Lu=(a,f)=>{let g=f.length;if(!a||!a.state)return ee;let E=a.state,d=E.wrap;if(d===2||d===1&&E.status!==or||E.lookahead)return ee;if(d===1&&(a.adler=fa(a.adler,f,g,0)),E.wrap=0,g>=E.w_size){d===0&&(We(E.head),E.strstart=0,E.block_start=0,E.insert=0);let tt=new Uint8Array(E.w_size);tt.set(f.subarray(g-E.w_size,g),0),f=tt,g=E.w_size}let R=a.avail_in,T=a.next_in,O=a.input;for(a.avail_in=g,a.next_in=0,a.input=f,_s(E);E.lookahead>=Z;){let tt=E.strstart,$=E.lookahead-(Z-1);do E.ins_h=Ye(E,E.ins_h,E.window[tt+Z-1]),E.prev[tt&E.w_mask]=E.head[E.ins_h],E.head[E.ins_h]=tt,tt++;while(--$);E.strstart=tt,E.lookahead=Z-1,_s(E)}return E.strstart+=E.lookahead,E.block_start=E.strstart,E.insert=E.lookahead,E.lookahead=0,E.match_length=E.prev_length=Z-1,E.match_available=0,a.next_in=T,a.input=O,a.avail_in=R,E.wrap=d,ve};var Vu=Du,Uu=_a,ju=Sa,Hu=va,Bu=Mu,Fu=ku,$u=xu,zu=Lu,Gu="pako deflate (from Nodeca project)",pi={deflateInit:Vu,deflateInit2:Uu,deflateReset:ju,deflateResetKeep:Hu,deflateSetHeader:Bu,deflate:Fu,deflateEnd:$u,deflateSetDictionary:zu,deflateInfo:Gu};let qu=(a,f)=>Object.prototype.hasOwnProperty.call(a,f);var Wu=function(a){let f=Array.prototype.slice.call(arguments,1);for(;f.length;){let g=f.shift();if(g){if(typeof g!="object")throw new TypeError(g+"must be non-object");for(let E in g)qu(g,E)&&(a[E]=g[E])}}return a},Yu=a=>{let f=0;for(let E=0,d=a.length;E<d;E++)f+=a[E].length;let g=new Uint8Array(f);for(let E=0,d=0,R=a.length;E<R;E++){let T=a[E];g.set(T,d),d+=T.length}return g},wa={assign:Wu,flattenChunks:Yu};let Aa=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Aa=!1}let gi=new Uint8Array(256);for(let a=0;a<256;a++)gi[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;gi[254]=gi[254]=1;var Xu=a=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(a);let f,g,E,d,R,T=a.length,O=0;for(d=0;d<T;d++)g=a.charCodeAt(d),(g&64512)===55296&&d+1<T&&(E=a.charCodeAt(d+1),(E&64512)===56320&&(g=65536+(g-55296<<10)+(E-56320),d++)),O+=g<128?1:g<2048?2:g<65536?3:4;for(f=new Uint8Array(O),R=0,d=0;R<O;d++)g=a.charCodeAt(d),(g&64512)===55296&&d+1<T&&(E=a.charCodeAt(d+1),(E&64512)===56320&&(g=65536+(g-55296<<10)+(E-56320),d++)),g<128?f[R++]=g:g<2048?(f[R++]=192|g>>>6,f[R++]=128|g&63):g<65536?(f[R++]=224|g>>>12,f[R++]=128|g>>>6&63,f[R++]=128|g&63):(f[R++]=240|g>>>18,f[R++]=128|g>>>12&63,f[R++]=128|g>>>6&63,f[R++]=128|g&63);return f};let Ta=(a,f=a.length)=>{if(f<65534&&a.subarray&&Aa)return String.fromCharCode.apply(null,a.length===f?a:a.subarray(0,f));let g="";for(let E=0;E<f;E++)g+=String.fromCharCode(a[E]);return g};var Ku=(a,f)=>{let g=f||a.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(a.subarray(0,f));let E,d,R=new Array(g*2);for(d=0,E=0;E<g;){let T=a[E++];if(T<128){R[d++]=T;continue}let O=gi[T];if(O>4){R[d++]=65533,E+=O-1;continue}for(T&=O===2?31:O===3?15:7;O>1&&E<g;)T=T<<6|a[E++]&63,O--;if(O>1){R[d++]=65533;continue}T<65536?R[d++]=T:(T-=65536,R[d++]=55296|T>>10&1023,R[d++]=56320|T&1023)}return Ta(R,d)},Ju=(a,f)=>{f=f||a.length,f>a.length&&(f=a.length);let g=f-1;for(;g>=0&&(a[g]&192)===128;)g--;return g<0||g===0?f:g+gi[a[g]]>f?g:f},ba={string2buf:Xu,buf2string:Ku,utf8border:Ju};function Qu(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Zu=Qu;let Ra=Object.prototype.toString,{Z_NO_FLUSH:td,Z_SYNC_FLUSH:ed,Z_FULL_FLUSH:sd,Z_FINISH:id,Z_OK:hr,Z_STREAM_END:rd,Z_DEFAULT_COMPRESSION:nd,Z_DEFAULT_STRATEGY:od,Z_DEFLATED:ad}=pa;function ur(a){this.options=wa.assign({level:nd,method:ad,chunkSize:16384,windowBits:15,memLevel:8,strategy:od},a||{});let f=this.options;f.raw&&f.windowBits>0?f.windowBits=-f.windowBits:f.gzip&&f.windowBits>0&&f.windowBits<16&&(f.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Zu,this.strm.avail_out=0;let g=pi.deflateInit2(this.strm,f.level,f.method,f.windowBits,f.memLevel,f.strategy);if(g!==hr)throw new Error(ir[g]);if(f.header&&pi.deflateSetHeader(this.strm,f.header),f.dictionary){let E;if(typeof f.dictionary=="string"?E=ba.string2buf(f.dictionary):Ra.call(f.dictionary)==="[object ArrayBuffer]"?E=new Uint8Array(f.dictionary):E=f.dictionary,g=pi.deflateSetDictionary(this.strm,E),g!==hr)throw new Error(ir[g]);this._dict_set=!0}}ur.prototype.push=function(a,f){let g=this.strm,E=this.options.chunkSize,d,R;if(this.ended)return!1;for(f===~~f?R=f:R=f===!0?id:td,typeof a=="string"?g.input=ba.string2buf(a):Ra.call(a)==="[object ArrayBuffer]"?g.input=new Uint8Array(a):g.input=a,g.next_in=0,g.avail_in=g.input.length;;){if(g.avail_out===0&&(g.output=new Uint8Array(E),g.next_out=0,g.avail_out=E),(R===ed||R===sd)&&g.avail_out<=6){this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;continue}if(d=pi.deflate(g,R),d===rd)return g.next_out>0&&this.onData(g.output.subarray(0,g.next_out)),d=pi.deflateEnd(this.strm),this.onEnd(d),this.ended=!0,d===hr;if(g.avail_out===0){this.onData(g.output);continue}if(R>0&&g.next_out>0){this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;continue}if(g.avail_in===0)break}return!0},ur.prototype.onData=function(a){this.chunks.push(a)},ur.prototype.onEnd=function(a){a===hr&&(this.result=wa.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};function cd(a,f){f=f||{};let g=new ur(f);if(g.push(a,!0),g.err)throw g.msg||ir[g.err];return g.result}function ld(a,f){return f=f||{},f.gzip=!0,cd(a,f)}return(a,f,g)=>{let E=ld(a);return f==="base64"?E=btoa(Ta(E)):E=E.buffer,g&&g(E),E}}var u_=(()=>{class s extends Xl{constructor(){super(),this.algorithm=zi.GZIP,this.u0=_o(),this.compress=(i,n,o)=>this.Gm.compress(i,n).then(o);let e=typeof CompressionStream!="undefined"&&!!self.CompressionStream?f_:d_;this.Gm=new e,h_.create(e,{getPakoCompressor:_o}).then(i=>{this.Gm=i})}compressSync(t,e){try{return this.u0(t,e)}catch(i){throw at.warn(i),i}}}return s})(),d_=(()=>{class s{constructor(){this.d0=_o()}compress(t,e){return Promise.resolve(this.d0(t,e))}}return s})(),f_=(()=>{class s{f0(t){return new Promise(e=>{let i=new FileReader;i.onload=n=>e(n.target.result.split(",")[1]),i.readAsDataURL(new Blob([t]))})}compress(t,e){let i=new Response(t).body.pipeThrough(new CompressionStream("gzip")),n=new Response(i).arrayBuffer();return e==="base64"?n.then(o=>this.f0(o)):n}}return s})(),p_=(()=>{class s extends Xl{constructor(){super(...arguments),this.algorithm=zi.UNCOMPRESSED,this.compress=(t,e,i)=>{i(this.compressSync(t,e))},this.compressSync=(t,e)=>t}}return s})(),Vh=(()=>{class s{static create(t=!0){return this.instance?this.instance:t&&!c_.isCompressionEnabled()?new p_:this.instance=new u_}}return s})(),g_=s=>{let r=s*60*1e3;return`${Math.floor(csDate.now()/r)}`},m_=5e3,y_=(()=>{class s extends ml{constructor(t,e,i){super(t,e),this.Gr=null,this.p0=(i==null?void 0:i.type)||"json",this.qm=i==null?void 0:i.cacheMinutes,this.Ac=i==null?void 0:i.timeout}onLoad(t){this.qr=t}onError(t){this.Mo=t}onTimeout(t,e){this.ir=t,this.Ac=e}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,n=>n());let t=this.retrieveParameters();this.nl(t);let e=Ni.toQuery(t),i=`${this.domainUri}${this.path?`/${this.path}`:""}?${e}`;this.g0(i,this.p0)}abort(){this.Gr&&(this.Gr.abort(),this.Gr=null)}isInProgress(){return this.Gr!==null}g0(t,e){var i;let n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType=e,n.onerror=()=>{var o;return(o=this.Mo)===null||o===void 0?void 0:o.call(this,n)},n.ontimeout=()=>{var o;return(o=this.ir)===null||o===void 0?void 0:o.call(this,n)},n.onload=()=>{var o,c;n.status>=200&&n.status<400?((o=this.qr)===null||o===void 0||o.call(this,this.m0(n,e)?n.response:n.responseText),csArray.prototype.forEach.call(this.afterRequestCallbacks,l=>l())):(c=this.Mo)===null||c===void 0||c.call(this,n)},n.onloadend=()=>{this.Gr=null},n.timeout=(i=this.Ac)!==null&&i!==void 0?i:m_,this.Gr=n,n.send()}m0(t,e){let i=t.getResponseHeader("Content-Type");return i===null?e==="json":csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(i),"json")>0}nl(t){let e;this.qm?e=`${g_(this.qm)}`:e=csString.prototype.slice.call(`${Math.random()}`,2,8),t.r=e}}return s})(),E_=2e4,v_=(()=>{class s{constructor(t){var e;this.Qe={},this.$u={},this.Wm=i=>{for(let n of i){let{metadata:o,events:c}=n;this.send(c,o)}},this.Zn=t.endpoint,this.Do=t.compressionOpts,this.le=t.recoveryStorage,this.mandatoryParameters=(e=t.mandatoryParameters)!==null&&e!==void 0?e:[],this.zu=t.contentType,this.worker=!!t.worker,this.le&&this.le.recover(this.Wm)}setQueryParams(t){Object.keys(t).forEach(e=>{this.Qe[e]=t[e]})}removeQueryParams(t){t?t.forEach(e=>{delete this.Qe[e]}):this.Qe={}}send(t,e){t=t!=null?t:"";let i=e||{...this.Qe},n=!("ct"in i),o=this.zu==="application/json"||typeof t!="string"&&!this.y0(t);"ct"in i||(!this.Do||!n?i.ct=zi.UNCOMPRESSED:i.ct=this.Do.compressionType);let c=o?JSON.stringify(t):t,l=Object.keys(i).map(u=>`${encodeURIComponent(u)}=${encodeURIComponent(i[u])}`).join("&"),h=`${this.Zn}?${l}`;if(Ii(this.mandatoryParameters,u=>i[u]==null)){at.warn(`[${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on ${h}`);return}this.Do&&n&&typeof c=="string"?this.Do.compressor(c,this.Do.compressionOutputType,u=>this.Ym(h,i,u)):this.Ym(h,i,c)}onLoad(t){this.qr=t}onError(t){this.Mo=t}onTimeout(t,e){this.ir=t,this.Ac=e}abort(){this.Xm&&this.Xm()}setRequestHeader(t,e){this.$u[t]=e}getQueryParams(){return this.Qe}y0(t){return t&&t.byteLength!==void 0}Ym(t,e,i){let n=new XMLHttpRequest,o=Object.keys(e).map(c=>`${encodeURIComponent(c)}=${encodeURIComponent(e[c])}`).join("&");n.open("POST",t,!0),this.zu&&n.setRequestHeader("Content-Type",this.zu),n.onload=()=>{if(this.le&&this.le.recover(this.Wm),this.qr){let c={params:e,responseText:n.responseText,status:n.status};this.qr(c)}},n.onerror=()=>{this.le&&this.le.save({key:o,metadata:e,events:i}),this.Mo&&this.Mo({params:e})},n.timeout=this.Ac||E_,n.ontimeout=()=>{G.counters.requestTimeouts.count(this.Zn),this.ir&&this.ir()},this.Xm=()=>n.abort(),Object.keys(this.$u).forEach(c=>{n.setRequestHeader(c,this.$u[c])}),n.send(i)}}return s})(),Uh=(()=>{class s{constructor(t){this.Km=t}create(t,e,i){let n=e?{compressor:this.Km.compress,compressionOutputType:e,compressionType:this.Km.algorithm}:void 0;return new v_({endpoint:t,compressionOpts:n,recoveryStorage:i})}}return s})(),S_=(()=>{class s{setItem(t,e){window.localStorage.setItem(t,e)}getItem(t){return window.localStorage.getItem(t)}removeItem(t){window.localStorage.removeItem(t)}}return s})(),__=(()=>{class s{constructor(t){this.Gu=t}start(){this.Gu.onEvent(t=>this.Q(t)),this.Gu.start()}stop(){this.Gu.stop()}Q(t){let e=`Content Security Policy error. Violated directive: ${t.violatedDirective} - Source file: ${t.sourceFile}`;H.warn(e)}}return s})(),w_=(()=>{class s{constructor(){this.te={boundElement:document,type:"securitypolicyviolation",listener:t=>this.securityPolicyViolationListener(t)}}start(){gt(this.te)}stop(){mt(this.te)}onEvent(t){this.j=t}E0(t){if(!t)return!1;let e=t.disposition;return C(t.sourceFile)&&csArray.prototype.some.call(s.v0,i=>csString.prototype.indexOf.call(t.sourceFile,i)>0)&&e!=="report"}securityPolicyViolationListener(t){this.E0(t)&&this.j({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})}}return s.v0=["contentsquare","cdnssl.clicktale.net"],U([P("Event handler type: securitypolicyviolation")],s.prototype,"securityPolicyViolationListener",null),s})(),A_=(()=>{class s{init(){this.Tc=new __(new w_),this.Tc.start()}onOptout(){this.Tc.stop()}onArtificialPageViewEnd(t){t&&this.Tc.stop()}onAfterArtificialPageView(t){t&&this.Tc.start()}}return s})(),T_=(()=>{class s{constructor(t,e,i){this.E=t,this.C=e,this.w=i}grantReplayConsent(){if(!as.isReplayConsentNeeded(this.E))return;let t=this.C.getSession();if(!t){this.C.grantReplayRecordingBeforeSessionStart();return}as.isRecordingBlockedByConsent(t)&&(this.C.grantReplayRecording(t),this.w.emitAfterReplayRecordingConsentGranted())}withdrawReplayConsent(){if(!as.isReplayConsentNeeded(this.E))return;let t=this.C.getSession();if(!t){this.C.withdrawnReplayRecordingBeforeSessionStart();return}as.isRecordingWithDrawn(t)||(this.C.withdrawnReplayRecording(t),this.w.emitAfterReplayRecordingConsentWithdrawn())}}return s})(),b_=["replay:consent:unanonymized:granted","trackConsentGranted"],R_=["replay:consent:unanonymized:withdrawn","trackConsentWithdrawn"],C_=["replay:consent:startForSession:granted"],I_=["replay:consent:startForSession:withdrawn"],P_=(()=>{class s{constructor(t,e,i,n,o){this.E=t,this.S=e,this.It=i,this.C=n,this.w=o}init(){this.Jm=new T_(this.E,this.C,this.w),this.It.setInitialConsent(),this.ft()}ft(){this.S.register(b_,()=>{this.It.grantReplayAnonymizationConsent()}),this.S.register(R_,()=>{this.It.withdrawReplayAnonymizationConsent()}),this.S.register(C_,()=>{this.Jm.grantReplayConsent()}),this.S.register(I_,()=>{this.Jm.withdrawReplayConsent()})}onOptout(){this.It.removeAllConsents()}onBeforeVisitorRenewal(){this.It.removeAllConsents()}onAfterVisitorRenewal(){this.It.setInitialConsent()}onAfterVisitorCleared(){this.It.setInitialConsent()}}return s})(),is="_cs_c",Ts=(()=>{let s;return function(r){r[r.NOT_REQUIRED=0]="NOT_REQUIRED",r[r.NOT_EXPRESSED=1]="NOT_EXPRESSED",r[r.GRANTED=2]="GRANTED",r[r.WITHDRAWN=3]="WITHDRAWN"}(s||(s={})),s})(),O_=(()=>{class s{constructor(t,e,i){this.E=t,this.O=e,this.St=i}get(){let t;return this.E.cookielessTrackingEnabled?t=this.St.getItem(is):t=this.O.get(is),t===null?t:Number(t)}set(t){this.E.cookielessTrackingEnabled?this.St.setItem(is,csString(t)):this.O.set(is,csString(t),Ro)}remove(){this.E.cookielessTrackingEnabled?this.St.removeItem(is):this.O.delete(is)}handleSubdomainChange(){this.E.cookielessTrackingEnabled||(this.E.allowSubdomains?this.O.delete(is,Fr.CURRENT_DOMAIN):this.O.delete(is,this.O.getRootDomain()))}}return s})(),N_=(()=>{class s{constructor(t,e,i){this.E=t,this.pt=e,this.w=i}setInitialConsent(){let t=this.pt.get();(t===null||this.hasConsentRequiredChanged(t))&&this.setDefaultReplayAnonymization()}hasConsentRequiredChanged(t){let e=this.E.consentRequired;return e&&t===Ts.NOT_REQUIRED||!e&&t!==Ts.NOT_REQUIRED}handleSubdomainChange(){this.pt.handleSubdomainChange()}setDefaultReplayAnonymization(){let t=this.E.consentRequired?Ts.NOT_EXPRESSED:Ts.NOT_REQUIRED;this.pt.set(t)}grantReplayAnonymizationConsent(){this.E.consentRequired&&(this.pt.set(Ts.GRANTED),this.w.emitReplayUnanonymizationConsentGranted())}withdrawReplayAnonymizationConsent(){this.E.consentRequired&&(this.pt.set(Ts.WITHDRAWN),this.w.emitReplayUnanonymizationConsentWithdrawn())}removeAllConsents(){this.pt.remove()}isReplayUnanonymizedAllowedByConsent(){return!this.E.consentRequired||this.pt.get()===Ts.GRANTED}getRequestParameters(){return{uc:`${this.pt.get()}`}}}return s})(),qc=512,Wc=255,Dn={SESSION:["visit",2],PAGE:["page",3],NEXT_PAGE_ONLY:["nextPageOnly",4]},M_=(()=>{class s{constructor(t,e){this.D=t,this.pt=e,this.re={},this.qe={}}set(t,e,i,n){let o,c;if((_t(t)||C(t))&&Number(t)>0&&yt(e)&&yt(i)&&!Ae(e)&&!Ae(i)&&this.S0(n)){let l=this.D.anonymizePII(csString(e)),h=this.D.anonymizePII(csString(i));if(o=[csString.prototype.slice.call(l,0,qc),csString.prototype.slice.call(h,0,Wc)],c=i!=="",!X(n)||csArray.prototype.indexOf.call(Dn.SESSION,n)>=0){let u=this.getCustomVariablesSession();c?u[t]=o:delete u[t],this.setCustomVariableSession(u)}(!X(n)||csArray.prototype.indexOf.call(Dn.PAGE,n)>=0)&&(c?this.re[t]=o:delete this.re[t]),X(n)&&csArray.prototype.indexOf.call(Dn.NEXT_PAGE_ONLY,n)>=0&&(c?this.qe[t]=o:delete this.qe[t])}else throw new Ut(Go[0])}getCustomVariablesSession(){let t=this.pt.get();if(!t)return{};let e=window.csJSON.parse(t);return e!==null&&fs(e)?e:{}}setCustomVariableSession(t){this.pt.set(window.csJSON.stringify(t))}removeCustomVariablesSession(){this.pt.remove()}removeCustomVariablesPage(){this.re={}}getRequestParameters(){let t=this.getCustomVariablesSession();for(let i in this.qe)this.qe.hasOwnProperty(i)&&(this.re[i]=this.qe[i]);for(let i in this.re)this.re.hasOwnProperty(i)&&(t[i]=this.re[i]);if(window.csJSON.stringify(t).length<=2)return{};let e={cvars:this.Qm(t)};return this.hasCustomVariablesPage()&&(e.cvarp=this.getCustomVariablesPage()),e}deleteNextPageOnlyCustomVariables(){if(Object.keys(this.qe).length>0)for(let t in this.qe)this.qe[t]===this.re[t]&&(delete this.re[t],delete this.qe[t])}hasCustomVariablesPage(){return this.re&&!Bn(this.re)}getCustomVariablesPage(){return this.Qm(this.re)}Zm(t){for(let e in t)if(t.hasOwnProperty(e)){let i=parseInt(e,10),n=t[e],o=n[0],c=n[1];(!dd(i,1,20)||o.length>qc||c.length>Wc)&&delete t[e]}}Qm(t){this.Zm(t);let e=Bn(t)?[]:t;return window.csJSON.stringify(e)}S0(t){return!X(t)||C(t)||_t(t)}getAllValidCustomVars(){let t=this.getCustomVariablesSession();for(let e in this.qe)this.qe.hasOwnProperty(e)&&(this.re[e]=this.qe[e]);for(let e in this.re)this.re.hasOwnProperty(e)&&(t[e]=this.re[e]);return this.Zm(t),t}}return s})(),D_=(()=>{class s{constructor(t,e,i,n){this.Ce=t,this.ko=e,this.xo=i,this.It=n}init(){this._0()}shouldMaskNonTextElements(){if(this.Ce.anonymisationMethod!==As.replayRecordingMaskedUrlRegexRules)return!1;if(this.Ce.isSMB)return this.shouldUseAnonymization();let t=this.xo.getMatchingRules(this.ko.getAnonymizedUrl());return csArray.prototype.some.call(t,e=>e.maskMedia)}shouldUseAnonymization(){if(this.It&&!this.It.isReplayUnanonymizedAllowedByConsent()){switch(this.Ce.anonymisationMethod){case null:case As.replayRecordingUnmaskedUrlRegex:return!(this.Ce.replayRecordingUnmaskedUrlRegex&&this.Ce.replayRecordingUnmaskedUrlRegex.test(this.ko.getAnonymizedUrl()));case As.replayRecordingUnmaskedUrlRegexRules:return!this.xo.evaluateUrl(this.ko.getAnonymizedUrl())}return!0}else{switch(this.Ce.anonymisationMethod){case null:case As.replayRecordingMaskedUrlRegex:return!!(this.Ce.replayRecordingMaskedUrlRegex&&this.Ce.replayRecordingMaskedUrlRegex.test(this.ko.getAnonymizedUrl()));case As.replayRecordingMaskedUrlRegexRules:return this.xo.evaluateUrl(this.ko.getAnonymizedUrl())}return!1}}_0(){this.Ce.anonymisationMethod===As.replayRecordingMaskedUrlRegexRules&&this.Ce.replayRecordingMaskedUrlRegexRules?this.xo.setRegexRules(this.Ce.replayRecordingMaskedUrlRegexRules):this.Ce.anonymisationMethod===As.replayRecordingUnmaskedUrlRegexRules&&this.Ce.replayRecordingUnmaskedUrlRegexRules&&this.xo.setRegexRules(this.Ce.replayRecordingUnmaskedUrlRegexRules)}}return s})();var k_=(()=>{class s extends ne{constructor(t){super(),this.W=null,this.bc=null,this.U=null,this.ci=null,this.ty=["value","checked","src","data","alt"],this.Rc={state:D.MaskedElementState.Child},this.A0=e=>{for(let i of e){if(D.isMaskedElement(i.target)||D.isMaskedElementChild(i.target))for(let n=0;n<i.addedNodes.length;n+=1){let o=i.addedNodes[n];D.isMaskedElement(o)||D.isMaskedElementChild(o)||dt(o)&&this.ey(o)}for(let n=0;n<i.removedNodes.length;n+=1){let o=i.removedNodes[n];ot.isConnected(o)||this.sy(o)}}},this.T0=t}setMaskedElementSettings(t){this.$s=t}startIdentifier(){this.isStarted||(this.isStarted=!0,this.onStart())}stopIdentifier(){return this.isStarted=!1,this.onStop()}start(){}stop(){}onStart(){var t,e,i,n;this.$s||(at.error("maskedElementSettings not initialized","MaskedElementIdentifier.start"),this.$s={elementSelector:"",attrSelector:"",attrSelectors:[]});let{elementSelector:o,attrSelector:c,attrSelectors:l}=this.$s;(t=this.ci)!==null&&t!==void 0||(this.ci=this.b0()),o.length!==0&&((e=this.W)!==null&&e!==void 0||(this.W=this.R0()),this.W.observe(o)),c.length!==0&&((i=this.bc)!==null&&i!==void 0||(this.bc=this.C0(l)),this.bc.observe(c)),(n=this.U)!==null&&n!==void 0||(this.U=new Ee(this.A0,(h,u)=>u==="added"&&this.I0(h))),this.U.observe(),csSetTimeout(this.T0)}onStop(){var t,e,i;this.W&&(this.sy(document),this.W.disconnect()),(t=this.bc)===null||t===void 0||t.disconnect(),(e=this.U)===null||e===void 0||e.disconnect(),(i=this.ci)===null||i===void 0||i.disconnect()}b0(){return window.ResizeObserver?new ResizeObserver(t=>{window.requestAnimationFrame(()=>{csArray.prototype.forEach.call(t,e=>{this.resizeObserverCallback(e)})})}):null}R0(){return new ye(t=>{csArray.prototype.forEach.call(t,e=>{this.P0(e)?this.ey(e):(this.O0(e),this.N0(e))})})}C0(t){return new ye(e=>{csArray.prototype.forEach.call(e,i=>this.M0(i,t))})}resizeObserverCallback(t){let e=t.target.getBoundingClientRect(),i=D.getMaskedElementDetails(t.target);if(i.state!==D.MaskedElementState.Parent||e.width===i.width&&e.height===i.height)return;let n={state:D.MaskedElementState.Parent,width:e.width,height:e.height};D.setMaskedElementProperty(t.target,n),this.produceEvent({type:"ResizeMaskedElement",target:q(t.target),width:e.width,height:e.height})}N0(t){!this.ci||!dt(t)||Bi(t)||this.ci.observe(t)}P0(t){let e=csNodeparentNode.apply(t);return e?D.isMaskedElement(e)||D.isMaskedElementChild(e):Oi(t)?D.isMaskedElement(t.host)||D.isMaskedElementChild(t.host):!1}I0(t){(D.isMaskedElement(t.host)||D.isMaskedElementChild(t.host))&&D.setMaskedElementProperty(t,this.Rc)}sy(t){qt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{D.unsetMaskedElementProperty(i)})}O0(t){let e=t.getBoundingClientRect(),i={state:D.MaskedElementState.Parent,width:e.width,height:e.height};D.setMaskedElementProperty(t,i),this.D0(t),qt(t).visitAll(n=>n!==t&&D.setMaskedElementProperty(n,this.Rc))}ey(t){D.setMaskedElementProperty(t,this.Rc),qt(t).visitAll(e=>e!==t&&D.setMaskedElementProperty(e,this.Rc))}D0(t){var e;let i=(e=nt.getProperty(t,D.maskedAttributeProp))!==null&&e!==void 0?e:{attributes:[]};for(let n=0;n<this.ty.length;n+=1){let o=this.ty[n];csArray.prototype.indexOf.call(i.attributes,o)===-1&&csArray.prototype.push.call(i.attributes,o)}i.attributes.length!==0&&D.setMaskedAttributeProperty(t,i)}M0(t,e){var i;let n=(i=nt.getProperty(t,D.maskedAttributeProp))!==null&&i!==void 0?i:{attributes:[]};for(let o=0;o<t.attributes.length;o+=1){let c=t.attributes[o].name;csArray.prototype.indexOf.call(n.attributes,c)===-1&&csArray.prototype.some.call(e,l=>csString.prototype.indexOf.call(l.attrName,c)>-1&&Qt.call(t,l.selector))&&csArray.prototype.push.call(n.attributes,c)}n.attributes.length!==0&&D.setMaskedAttributeProperty(t,n)}}return me([P()],s.prototype,"resizeObserverCallback",null),s})(),x_=(()=>{class s{constructor(){this.Wu=0,this.B=!1,this.iy="data-cs-capture",this.Ai=t=>{for(let e of t){if(fe.isWhitelistedElement(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];fe.isWhitelistedElement(n)||dt(n)&&this.ry(n)}for(let i=0;i<e.removedNodes.length;i+=1){let n=e.removedNodes[i];ot.isConnected(n)||this.ny(n)}}}}start(){this.Wu++,!this.B&&(this.B=!0,this.k0())}k0(){this.W||(this.W=new ye(e=>K(e,i=>this.ry(i))));let t=this.Yu?`[${this.iy}], ${this.Yu}`:`[${this.iy}]`;this.W.observe(t),this.U||(this.U=new Ee(this.Ai,(e,i)=>i==="added"&&this.x0(e))),this.U.observe()}stop(){this.B&&(this.Wu--,this.Wu===0&&(this.B=!1,this.L0()))}L0(){this.W&&(this.ny(document),this.W.disconnect()),this.U&&this.U.disconnect()}setWhitelistedElementsSelector(t,e=!0){if(Lt(t))this.Yu=t;else if(e)throw new Ut("setCapturedElementsSelector")}getWhitelistedElementsSelector(){return this.Yu}ry(t){qt(t).visitAll(e=>{fe.whitelistElement(e)})}x0(t){fe.isWhitelistedElement(t.host)&&fe.whitelistElement(t)}ny(t){qt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{fe.removeWhitelistElement(i)})}}return s})();var L_=(()=>{let s;return function(r){function t(){let i=navigator.userAgent+navigator.language+navigator.platform,n=csString.prototype.slice.call(e(i).toString(16),-4),o=new csDate().getTime(),c="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,l=>{let h=(o+Math.random()*16)%16|0;return o=Math.floor(o/16),(l==="x"?h:h&7|8).toString(16)});return csString.prototype.replace.call(c,"hhhh",n)}r.generate=t;function e(i){let n=0;for(let o=0;o<i.length;o+=1)n=csString.prototype.charCodeAt.call(i,o)+(n<<6)+(n<<16)-n;return Math.abs(n)}}(s||(s={})),s})();var V_="csq:start-hotjar",aa=(()=>{let s;return function(r){r.HJ_DUAL_COLLECT="one_app_tag_dc"}(s||(s={})),s})(),U_=(()=>{class s{static set(t,e){s.ay[t]=e}static isEnabled(t){return s.ay[t]===!0}}return s.ay={[aa.HJ_DUAL_COLLECT]:!1},s})();function j_(s){return!window.hjSiteSettings||!((window.hjSiteSettings.features==null?void 0:csArray.prototype.indexOf.call(window.hjSiteSettings.features,aa.HJ_DUAL_COLLECT))>-1)?!1:s?!Ml(s)&&!og(s):!0}var H_=(()=>{class s{constructor(t,e){this.Z=t,this.mt=e,this.Ku=!1}getRequestParameters(){return{dr:this.get()}}addUrlMaskingPattern(t){this.mt.addUrlMaskingPattern(t)}enableRemoveQueryString(){this.Ku=!0}disableRemoveQueryString(){this.Ku=!1}get(){let t=this.Ku?this.Z.removeQueryString(this.uy()):this.uy();return this.Z.anonymizeUrl(t,{maskingPatterns:this.mt.getUrlMaskingPatterns()})}set(t){this.dy=t}uy(){if(this.dy)return this.dy;let t="";try{t=window.top.document.referrer}catch{if(window.parent)try{t=window.parent.document.referrer}catch{t=""}}return t===""&&(t=document.referrer),typeof t!="string"&&(t=""),t}}return s})();function Yc(s,r,t){if(!X(r)&&!X(t))return s.href;let e=X(r)?wo(r):s.pathname,i=X(t)?jh(t):s.search;return`${s.protocol}//${s.host}${e}${i}`}function wo(s){return Rt(s,"/")?s:`/${s}`}function jh(s){return Rt(s,"?")||s===""?s:`?${s}`}var kn=(()=>{let s;return function(r){r[r.page=1]="page",r[r.onNextPageviewOnly=2]="onNextPageviewOnly"}(s||(s={})),s})(),B_=(()=>{class s{constructor(t,e){this.Mt=t,this.Z=e,this.K0=10}overridePath(t,e){if(t===""){this.Ti=void 0;return}let i=this.fy(e);i&&(this.Ju=i),this.Ti=e?this.py(t,e):t}overrideQuery(t,e){let i=this.fy(e);i&&(this.Qu=i),this.Lo=e?this.py(t,e):t}computeOverriddenUrl(t){return this.J0(t)?this.getAnonymizedUrl():t}Q0(t){return(typeof t=="string"||typeof t=="number")&&t in kn}J0(t){let e=this.ga(this.Mt.href);return this.ga(t)===e}ga(t){return gl(t,"/")?csString.prototype.slice.call(t,0,-1):t}fy(t){return X(t==null?void 0:t.lifespan)&&this.Q0(t==null?void 0:t.lifespan)?t==null?void 0:t.lifespan:null}Z0(){return this.Ju&&this.Ju in kn}tR(){return this.Qu&&this.Qu in kn}cleanupOverrideLifespan(){this.Z0()&&(this.Ti=void 0,this.Ju=void 0),this.tR()&&(this.Lo=void 0,this.Qu=void 0)}getAnonymizedUrl(){let t=Yc(this.Mt,this.Ti,this.Lo);return this.Z.anonymizeUrl(t)}getUrl(){return Yc(this.Mt,this.Ti,this.Lo)}getAnonymizedPathAndQuery(){let t=X(this.Ti)?wo(this.Ti):this.Mt.pathname,e=X(this.Lo)?jh(this.Lo):this.Mt.search;return this.Z.anonymizeUrl(t+e)}getPath(){return X(this.Ti)?wo(this.Ti):this.Mt.pathname}getUrlProtocol(){return this.Mt.protocol}getRequestParameters(){return{url:this.getAnonymizedUrl()}}py(t,e){return this.eR(e)?this.sR(t):this.iR(e)?this.rR(t):t}iR(t){return!!t.decodeURI}rR(t){return this.gy(t,1,!1)}eR(t){return!!t.decodeURIDeep}sR(t){return this.gy(t,this.K0,!0)}gy(t,e,i){let n=t;for(let o=0;o<e;o++)try{let c=window.decodeURI(n);if(c===n)return n;n=c}catch{return n}return i&&H.warn(`decodeURIDeep limit reached: ${n}`),n}}return s})(),F_=(()=>{class s{constructor(t,e){this.S=t,this.Ts=e}init(){this.S.register(["debugEvents"],t=>{typeof t=="boolean"&&this.Ts.updateDynamicFields("emitDebugEvents",t)})}}return s})();var Xc=(()=>{class s{constructor(t,e,i,n,o){this.E=t,this.M=e,this.C=i,this.my=n,this.ns=o}getRequestParameters(){var t;let e={...Lo(),...this.E.getRequestParameters()},i=this.C.getSession();i&&(e.pn=`${i.pageNumber}`);let n=this.M.getVisitor();if(n&&(e.sn=`${n.visitsCount}`,e.uu=`${n.id}`),!((t=this.my)===null||t===void 0)&&t.hasSubProjectId()&&(e.subProjectID=`${this.my.getSubProjectId()}`),this.nR(e),window.heap&&!this.E.isCsCrosswritingHeap())try{e.happid=window.heap.appid,window.heap.getSessionId&&(e.hsid=window.heap.getSessionId()),window.heap.getUserId?e.huu=window.heap.getUserId():window.heap.userId&&(e.huu=window.heap.userId),window.heap.getPageviewMetadata&&(e.hpvid=window.heap.getPageviewMetadata().pageviewId)}catch{delete e.happid,delete e.hsid,delete e.huu,delete e.hpvid}return e}nR(t){if(!this.ns)return;let e=this.ns.getSharedContext();e&&(t.happid=e.happid,t.t=e.pageTitle,t.fvt=csString(e.firstViewTime),t.fvurl=e.firstViewUrl,e.previousViewUrl&&(t.pvurl=e.previousViewUrl),t.url=e.currentViewUrl,e.sessionReferrer&&(t.fpvurl=e.sessionReferrer),t.sw=csString(e.screenWidth),t.sh=csString(e.screenHeight),t.cvt=csString(e.currentViewTime),e.encryptedIdentity&&(t.i=e.encryptedIdentity),e.cvarp&&(t.cvarp=e.cvarp))}}return s})();function $_(){let s="[data-cs-mask]",r="#c1_card_info_id",t=".ctHidden",e=["[data-heap-redact-text]","[heap-ignore]","[data-heap-ignore]","[data-heap-redact-attributes]"],i=["[data-hj-suppress]",".data-hj-suppress","[data-hj-masked]"];return[s,r,t,...e,...i]}function z_(){return[{selector:".ctHidden,input:not([type=button]):not([type=submit])",attrName:"value"}]}var G_=(()=>{class s{constructor(t){this.ml=t,this.oR={PIISelectors:["picture","img","video","audio"],Attributes:[]},this.$s={elementSelector:"",attrSelector:"",attrSelectors:[]};let e={PIISelectors:$_(),Attributes:z_()};this.$s=D.getComputedSelectorSettings(e,this.$s)}init(){this.aR()}setMaskedElementSettingsFromCommand(t){if(t=D.sanitizeSelectorUserInput(t),!D.isSelectorUserInput(t))throw new Ut(qo[0]);this.Zu(t)}setMaskedElementSettingsFromParent(t){let e={PIISelectors:csString.prototype.split.call(t.elementSelector,","),Attributes:t.attrSelectors};this.Zu(e)}getMaskedElementSettings(t){return t?this.yy(this.oR):this.$s}aR(){var t,e,i,n,o,c,l;let h={PIISelectors:[],Attributes:[]};((i=(e=(t=window==null?void 0:window.ClickTaleSettings)===null||t===void 0?void 0:t.DOM)===null||e===void 0?void 0:e.PII)===null||i===void 0?void 0:i.Text)instanceof Array&&h.PIISelectors.push(...window.ClickTaleSettings.DOM.PII.Text),((c=(o=(n=window==null?void 0:window.ClickTaleSettings)===null||n===void 0?void 0:n.DOM)===null||o===void 0?void 0:o.PII)===null||c===void 0?void 0:c.Attributes)instanceof Array&&window.ClickTaleSettings.DOM.PII.Attributes.forEach(u=>{C(u.attr)&&C(u.rule)&&h.Attributes.push({selector:u.rule,attrName:u.attr})}),(l=this.ml)===null||l===void 0||l.markClicktalePIIInUse(h),this.Zu(h)}Zu(t){this.$s=this.yy(t)}yy(t){return D.getComputedSelectorSettings(t,this.$s)}}return s})(),q_=60*1e3,W_=30*1e3,Y_=(()=>{class s{constructor(t,e){this.C=t,this.M=e,this.td=!1,this.cR=$r(()=>this.C.refreshSession(),W_)}onSessionExpired(t){this.lR=t}isSessionValid(){return this.td?!0:!(!this.C.hasValidSession()||this.C.pollCacheRefreshEvent()&&this.M.isSessionRenewed())}isCurrentPageviewValid(){let t=this.C.hasValidSession();return this.C.pollCacheRefreshEvent(!1)?!this.M.isSessionRenewed():t}refreshSession(){this.isSessionValid()?this.cR():this.hR()&&(this.Ey=M.now(),this.renewSession(!1))}renewSession(t){this.td=!0,this.lR(t),this.td=!1}hR(){return!document.hidden&&(!X(this.Ey)||M.now()-this.Ey>q_)}}return s})(),X_=(()=>{class s{constructor(){this.W=null,this.U=null,this.B=!1,this.Ai=t=>{for(let e of t)if(xe.isEditableNode(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let n=e.addedNodes[i];if(!xe.isEditableNode(n)){if(Or(n)||Ud(n)){xe.markEditableNode(n);continue}dt(n)&&this.vy(n)}}}}start(){this.B||(this.B=!0,this.W=new ye(t=>K(t,e=>{this.vy(e)})),this.W.observe("[contenteditable]"),this.U=new Ee(this.Ai,(t,e)=>e==="added"&&this.uR(t)),this.U.observe())}stop(){var t,e;this.B&&(this.B=!1,(t=this.W)===null||t===void 0||t.disconnect(),this.W=null,(e=this.U)===null||e===void 0||e.disconnect(),this.U=null)}vy(t){qt(t).visitAll(e=>{xe.markEditableNode(e)})}uR(t){xe.isEditableNode(t.host)&&xe.markEditableNode(t)}}return s})();var ca=(()=>{class s{constructor(){this.subscriptions={}}subscribe(t,e){this.subscriptions[t]=e,Object.keys(this.subscriptions).length===1&&this.onStartTracking()}unsubscribe(t){delete this.subscriptions[t],Object.keys(this.subscriptions).length===0&&this.onStopTracking()}}return s})(),K_=(()=>{class s extends ca{constructor(t){super(),this.fR=t,this.pi=[{boundElement:document,type:"touchstart",listener:e=>this.Q(e)},{boundElement:document,type:"touchmove",listener:e=>this.Q(e)},{boundElement:document,type:"touchend",listener:e=>this.Q(e)}],this.Vo=new uo,this.Vo.onGesture((e,i)=>this.Bh(e,i))}Bh(t,e){for(let i in this.subscriptions){let n=this.subscriptions[i];n(t,e)}}onStartTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.pi,t=>gt(t))}onStopTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.pi,t=>mt(t))}canDetectGesture(){return typeof devicePixelRatio!="undefined"}Q(t){this.fR.tryToExecute("process gesture event",()=>{if(this.Vo.isValidTouchEvent(t))switch(t.type){case"touchstart":this.Vo.processActionDown(t);break;case"touchmove":this.Vo.processActionMove();break;case"touchend":this.Vo.processActionUp(t);break}})()}static isSwipe(t){return t.type===Tt.FLICK||t.type===Tt.DRAG}}return s})();var J_=(()=>{class s{constructor(t){this.vt=t}on(t,e){return i=>{this.vt.hasValidEventTarget(i)&&this.kR(i,t)&&e(i)}}kR(t,e){let i=Ot(t);return Qt.call(i,e)}isMatchesSelectorSupported(){return!!Qt}}return s})(),Q_=(()=>{class s extends jt{constructor(){super(),this.by=0}onStart(){H.isPerfLoggingActive()&&(this.Uo=window.csSetInterval(()=>this.Ry(),s.xR))}onStop(){H.isPerfLoggingActive()&&(this.Ry(),csClearInterval(this.Uo))}Ry(){this.by>=s.LR||G.counters.methodPerformance.flush()&&this.by++}}return s.xR=5e3,s.LR=5,s})(),Z_=(()=>{class s{constructor(){}init(){this.Pc=new Q_}onStartTracking(){this.Pc.start()}onOptout(){this.Pc.stop()}onArtificialPageViewEnd(t){t&&this.Pc.stop()}onAfterArtificialPageView(t){t&&this.Pc.start()}}return s})();var Hh=(()=>{class s{constructor(){this.JR=["application/json","application/graphql","application/xml","text/plain","text/csv","text/html","text/xml","text/javascript"]}setCollectionOptions(t){this.gd=t}isValidBodyType(t){let e=t["content-type"];if(!e)return!1;let i=csString.prototype.toLocaleLowerCase.call(e);return Ii(this.JR,n=>xr(i,n))}canCollect(t,e){return this.QR(t,e)&&this.ZR(e)}QR(t,e){return t>=400||t>=200&&t<300&&this.gd.statusCodes.has(t)&&this.tC(e)}tC(t){return Ii(this.gd.urls,e=>csString.prototype.indexOf.call(t,e)!==-1)}ZR(t){return Po(this.gd.excludedDomains,e=>csString.prototype.indexOf.call(t,e)===-1)}}return s})(),tw=(()=>{class s extends Hh{constructor(){super(),this.B=!1,this.Xr=null,this.eC=({result:t,args:e,callerName:i})=>{this.interceptFetch(t,e,i)}}onEvent(t){this.j=t}start(){this.B||this.sC()&&(this.iC(),this.Xr&&this.Xr.activate(),this.B=!0)}stop(){this.B&&(this.Xr&&this.Xr.deactivate(),this.B=!1)}sC(){return!!window.fetch&&typeof window.fetch=="function"}rC(t){if(t[0]&&typeof t[0].clone=="function"){let e=ei(t);return e[0]=t[0].clone(),e}return t}iC(){this.Xr||(this.Xr=Jt({target:window,methodName:"fetch",hook:this.eC,hookPrepareArgs:this.rC,options:{withCallerName:!0}}))}async interceptFetch(t,e,i){let n=e[0],o=e[1],c=new Request(n,o);if(!C(c.url))return;let l=M.now(),h;try{h=await t}catch(m){if(this.nC(m)||this.xy(m)||this.oC(m)||this.aC(m))return;throw m}let[u,p]=csString.prototype.split.call(c.url,"?"),y=ge(u);if(h&&super.canCollect(h.status,y)){let m={library:i,method:c.method,url:y,queryParameters:p,requestTime:l,responseTime:M.now(),statusCode:h.status,requestBody:"",responseBody:"",requestHeaders:this.Ly(c.headers),responseHeaders:this.Ly(h.headers)};if(!h.bodyUsed&&super.isValidBodyType(m.responseHeaders))try{m.responseBody=await h.clone().text()}catch(v){if(this.xy(v))return}super.isValidBodyType(m.requestHeaders)&&(m.requestBody=await c.text()),this.j(m)}}nC(t){return t instanceof TypeError}xy(t){return t instanceof DOMException&&t.name==="AbortError"}aC(t){return t instanceof DOMException&&t.name==="TimeoutError"}oC(t){return t instanceof DOMException&&csArray.prototype.some.call(s.cC,e=>e===t.name)}Ly(t){let e={};return t.forEach((i,n)=>{i&&(e[csString.prototype.toLowerCase.call(n)]=csString.prototype.trim.call(i))}),e}}return s.cC=["NoModificationAllowedError","InvalidStateError","OperationError"],U([P("FetchRequestTracker.interceptFetch")],s.prototype,"interceptFetch",null),s})(),ew=0,sw=(()=>{class s extends Hh{constructor(){super(),this.ne=csSymbol("ApiCall"),this.B=!1,this.Kr=null,this.Jr=null,this.Mc=null,this.lC=({context:t,args:e,callerName:i})=>this.interceptOpen(t,e,i),this.hC=({context:t,args:e})=>this.interceptSetRequestHeader(t,e),this.uC=({context:t,args:e})=>this.interceptSend(t,e)}onEvent(t){this.j=t}start(){this.B||(this.Hu(),this.Kr&&this.Kr.activate(),this.Jr&&this.Jr.activate(),this.Mc&&this.Mc.activate(),this.B=!0)}stop(){this.B&&(this.Kr&&this.Kr.deactivate(),this.Jr&&this.Jr.deactivate(),this.B=!1)}Hu(){this.Kr||(this.Kr=Jt({target:XMLHttpRequest.prototype,methodName:"open",hook:this.lC,options:{withCallerName:!0}})),this.Jr||(this.Jr=Jt({target:XMLHttpRequest.prototype,methodName:"setRequestHeader",hook:this.hC})),this.Mc||(this.Mc=Jt({target:XMLHttpRequest.prototype,methodName:"send",hook:this.uC}))}interceptOpen(t,e,i){if(!e[1]||!C(e[1]))return;let[n,o]=csString.prototype.split.call(e[1],"?");t[this.ne]={library:i,requestTime:M.now(),method:e[0],url:ge(n),queryParameters:o,statusCode:ew,responseHeaders:{},requestHeaders:{},responseBody:"",requestBody:""},t.addEventListener("readystatechange",()=>this.readyStateChangeListener(t))}readyStateChangeListener(t){t[this.ne]&&t.readyState===XMLHttpRequest.DONE&&this.canCollect(t.status,t[this.ne].url)&&(t[this.ne].responseTime=M.now(),t[this.ne].statusCode=t.status,t[this.ne].responseHeaders=this.dC(t.getAllResponseHeaders()),super.isValidBodyType(t[this.ne].responseHeaders)&&(t.responseType===""||t.responseType==="text")&&(t[this.ne].responseBody=t.responseText),this.j(t[this.ne]))}interceptSetRequestHeader(t,e){if(!t[this.ne])return;let i=e[0],n=csString.prototype.valueOf.call(new csString(e[1]));typeof i!="string"||n.length===0||(i=csString.prototype.toLowerCase.call(csString.prototype.trim.call(i)),n=csString.prototype.trim.call(n),t[this.ne].requestHeaders[i]?t[this.ne].requestHeaders[i]+=`, ${n}`:t[this.ne].requestHeaders[i]=n)}interceptSend(t,e){t[this.ne]&&super.isValidBodyType(t[this.ne].requestHeaders)&&typeof e[0]=="string"&&(t[this.ne].requestBody=e[0])}dC(t){let e={};return csArray.prototype.forEach.call(csString.prototype.split.call(t,/[\r\n]+/),i=>{let[n,o]=csString.prototype.split.call(i,/:\s*/);o&&(e[csString.prototype.toLowerCase.call(n)]=csString.prototype.trim.call(o))}),e}}return U([P("XhrRequestTracker.interceptOpen")],s.prototype,"interceptOpen",null),U([P("XhrRequestTracker.readyStateChangeListener")],s.prototype,"readyStateChangeListener",null),U([P("XhrRequestTracker.interceptSetRequestHeader")],s.prototype,"interceptSetRequestHeader",null),U([P("XhrRequestTracker.interceptSend")],s.prototype,"interceptSend",null),s})(),iw=["startDataCollection","data-collection:start"],rw=["data-collection:stop"],nw=(()=>{class s{constructor(t,e){this.as=t,this.S=e}init(){this.S.register(iw,()=>{this.as.startDataCollection()}),this.S.register(rw,()=>{this.as.stopDataCollection()})}}return s})(),xn={fromSessionRenewal:!1,isRenewedVisitor:!1},ow=(()=>{class s{constructor(t,e,i,n,o,c){this.E=t,this.w=e,this.hs=i,this.ht=n,this.or=o,this.L=c,this.Vy=!1,this.Uy=0,this.md=!0,this.jy=!1,this.zs=!1,this.startDataCollection=({fromSessionRenewal:l,onAfterDataCollectionStartedCallback:h}=xn)=>{l&&this.zs||!this.Vy?this.fC(l,h):this.pC()}}isDataCollectionStarted(){return this.zs}tryStartAutomaticDataCollection({fromSessionRenewal:t,isRenewedVisitor:e,onAfterDataCollectionStartedCallback:i}=xn){this.gC(t,e)&&this.startDataCollection({fromSessionRenewal:t,onAfterDataCollectionStartedCallback:i})}disableStartDataCollection(){this.md=!1}allowStartDataCollection({fromSessionRenewal:t}=xn){this.md=!0,this.jy&&this.startDataCollection({fromSessionRenewal:t})}stopDataCollection(){this.zs&&(this.zs=!1,this.w.emitArtificialPageViewEnd(!0),this.or.stop())}pC(){this.zs||(this.zs=!0,this.L.isSessionValid()?(this.L.refreshSession(),this.or.start(Is.Artificial)):this.L.renewSession(!1))}gC(t,e){return e&&!this.zs?!1:t?!0:this.E.startMode===Lr.Manual?!1:!ro(this.E)&&!this.E.isHeapSideloadsStartDataCollection()&&!this.E.isCsSideloadingHeap()}fC(t,e){if(this.hs.isActive()||(this.jy=!0,this.mC()&&(this.Uy++,this.Uy<2))||!this.md||this.zs&&!t)return;this.Vy=!0,this.zs=!0,this.ht.init();let i=t?Is.Renewal:Is.Natural;this.or.start(i);let n=()=>{this.w.emitStartTracking(t),typeof e=="function"&&e()};ot.onDocumentLoaded(n)}mC(){return ro(this.E)&&this.E.isCsSideloadingHeap()}}return s})(),aw=(()=>{class s{constructor(t){this.yd=t}buildApiErrors(t,e){let i=this.yd.collectDataPoints(t,e);if(i===null)return null;let n=this.yC(t,i);if(e){let o=this.EC(t,i);return{apiError:n,detailedApiError:o}}return{apiError:n}}EC(t,e){let i=this.Hy(t);return e.collectQueryParam&&t.queryParameters&&(i.queryParameters=t.queryParameters),e.collectRequestBody&&t.requestBody&&(i.requestBody=t.requestBody),e.collectResponseBody&&t.responseBody&&(i.responseBody=t.responseBody),Object.keys(e.standardRequestHeaders).length>0&&(i.standardRequestHeaders=e.standardRequestHeaders),Object.keys(e.standardResponseHeaders).length>0&&(i.standardResponseHeaders=e.standardResponseHeaders),Object.keys(e.customRequestHeaders).length>0&&(i.customRequestHeaders=csJSON.stringify(e.customRequestHeaders)),Object.keys(e.customResponseHeaders).length>0&&(i.customResponseHeaders=csJSON.stringify(e.customResponseHeaders)),Object.keys(e.plainCustomRequestHeaders).length>0&&(i.plainCustomRequestHeaders=e.plainCustomRequestHeaders),Object.keys(e.plainCustomResponseHeaders).length>0&&(i.plainCustomResponseHeaders=e.plainCustomResponseHeaders),e.plainResponseBodyAttributes&&Object.keys(e.plainResponseBodyAttributes).length>0&&(i.plainResponseBodyAttributes=e.plainResponseBodyAttributes),e.plainRequestBodyAttributes&&Object.keys(e.plainRequestBodyAttributes).length>0&&(i.plainRequestBodyAttributes=e.plainRequestBodyAttributes),Object.keys(e.responseBodyAttributes).length>0&&(i.responseBodyAttributes=csJSON.stringify(e.responseBodyAttributes)),Object.keys(e.requestBodyAttributes).length>0&&(i.requestBodyAttributes=csJSON.stringify(e.requestBodyAttributes)),i}Hy(t){return{errorType:"apiError",url:t.url,method:t.method,requestTime:t.requestTime,responseTime:t.responseTime,statusCode:t.statusCode,library:t.library}}yC(t,e){let i=this.Hy(t);return e.matchingBodyContents.length>0&&(i.matchingBodyContents=e.matchingBodyContents),Object.keys(e.plainResponseBodyAttributes).length>0&&(i.plainBodyResponseAttributes=e.plainResponseBodyAttributes),i}}return s})(),cw=(()=>{class s extends ca{constructor(t,e,i){super(),this.Dc=t,this.kc=e,this.yd=i,this.Ed=0,this.vC=new aw(i)}subscribe(t,e,i){i!=null&&i.detailedEvent&&(Object.defineProperty(e,"detailedEvent",{value:i.detailedEvent}),this.Ed++),super.subscribe(t,e)}unsubscribe(t){var e;!((e=this.subscriptions[t])===null||e===void 0)&&e.hasOwnProperty("detailedEvent")&&this.Ed--,super.unsubscribe(t)}init(){let t=this.yd.computeApiErrorCollectionOptions();this.Dc.setCollectionOptions(t),this.Dc.onEvent(e=>this.By(e)),this.kc.setCollectionOptions(t),this.kc.onEvent(e=>this.By(e))}onStartTracking(){this.Dc.start(),this.kc.start()}onStopTracking(){this.Dc.stop(),this.kc.stop()}By(t){let e=this.vC.buildApiErrors(t,this.Ed!==0);if(e)for(let i in this.subscriptions){let n=this.subscriptions[i];n.hasOwnProperty("detailedEvent")?e.detailedApiError&&n(e.detailedApiError):n(e.apiError)}}}return s})(),lw=(()=>{class s{constructor(t,e,i=!1){this.mt=t,this.Z=e,this.An=i}addUrlMaskingPattern(t){this.mt.addUrlMaskingPattern(t)}anonymize(t){let e=this.Z.removeQueryString(t.url),i={maskingPatterns:this.mt.getUrlMaskingPatterns(),partialMaskingPatterns:this.mt.getPartialUrlMaskingPatterns(),maskNames:this.An};return{...t,url:this.Z.anonymizeUrl(e,i),library:t.library?this.Z.anonymizeUrl(t.library,i):void 0}}}return s})(),hw=(()=>{class s{constructor(){this.SC=64e3,this._C=5e3,this.wC=2e3,this.Fy=8e3,this.Ds=!!self.TextEncoder,this.Ds&&(this.AC=new TextEncoder)}Bo(t){return this.AC.encode(t).byteLength}$y(t,e,i){let n=0;t[e]&&(n+=this.Bo(t[e]),n>this.Fy&&(n=0,t[e]=lt.ELLIPSIS)),t[i]&&(n+=this.Bo(csJSON.stringify(t[i])),n>this.Fy&&(t[i]=s.truncatedObjectMarker))}TC(t){t.queryParameters&&this.Bo(t.queryParameters)>this.wC&&(t.queryParameters=lt.ELLIPSIS)}bC(t){t.requestBody&&this.Bo(t.requestBody)>this.SC&&(t.requestBody=lt.ELLIPSIS),t.responseBody&&this.Bo(t.responseBody)>this._C&&(t.responseBody=lt.ELLIPSIS)}truncate(t){this.Ds?(this.TC(t),this.bC(t),this.$y(t,"customResponseHeaders","plainCustomResponseHeaders"),this.$y(t,"customRequestHeaders","plainCustomRequestHeaders")):(t.queryParameters="",t.requestBody="",t.responseBody="",t.customResponseHeaders="",t.customRequestHeaders="",t.plainCustomResponseHeaders={},t.plainCustomRequestHeaders={})}}return s.truncatedObjectMarker={[lt.ELLIPSIS]:lt.ELLIPSIS},s})(),uw=(()=>{let s;return function(r){function t(n){let o="[",c="]",l=[];for(let h=0;h<n.length;++h)if(n[h]===o)csArray.prototype.push.call(l,n[h]);else if(n[h]===c)if(csString.prototype.indexOf.call(n,o)>-1)csArray.prototype.pop.call(l);else return!1;return l.length===0}function e(n){if(!n)return!0;if(!t(n))return!1;let o=csString.prototype.split.call(n,/[\[\]]/);return csArray.prototype.every.call(o,c=>{let l=c[0],h=c[c.length-1];if((l==="'"||l==='"')&&l!==h)return!1;let u=csString.prototype.split.call(c,".");return u[0].length===0&&csArray.prototype.shift.call(u),csArray.prototype.every.call(u,p=>{let y=/^\-?\d+$/.exec(p);return y?parseInt(y[0],10)>=0:p==="$"||/\w+/.test(p)})})}r.isValidJSONPath=e;function i(n,o){if(!n)return;let c=csString.prototype.split.call(n,/[\$\[\]]/),l=[];csArray.prototype.forEach.call(c,u=>{if(u[0]==="'"||u[0]==='"'){csArray.prototype.push.call(l,csString.prototype.substring.call(u,1,u.length-1));return}csArray.prototype.push.call(l,...csArray.prototype.filter.call(csString.prototype.split.call(u,"."),p=>p.length>0))}),l[0]==="$"&&csArray.prototype.shift.call(l);let h=o;for(let u of l)if(h[u]!==void 0)h=h[u];else return;return h}r.getJSONPathValue=i}(s||(s={})),s})(),dw=(()=>{class s{constructor(){this.RC=new Set(["age","cache-control","clear-site-data","expires","pragma","warning","downlink","ect","rtt","last-modified","connection","keep-alive","accept","accept-encoding","accept-language","expect","access-control-allow-origin","access-control-allow-credentials","access-control-allow-headers","access-control-allow-methods","access-control-expose-headers","access-control-max-age","access-control-request-headers","access-control-request-method","origin","timing-allow-origin","content-length","content-type","content-encoding","content-language","via","host","referrer-policy","user-agent","allow","server","accept-ranges","range","if-range","content-range","cross-origin-embedder-policy","cross-origin-opener-policy","cross-origin-resource-policy","content-security-policy","content-security-policy-report-only","expect-ct","feature-policy","strict-transport-security","upgrade-insecure-requests","x-content-type-options","x-download-options","x-frame-options","x-permitted-cross-domain-policies","x-powered-by","x-xss-protection","sec-fetch-site","sec-fetch-mode","sec-fetch-user","sec-fetch-dest"])}isValidStandardHeader(t){return this.RC.has(t)}}return s})(),fw=(()=>{class s{constructor(){this.CC=64e3,this.IC=100,this.ot={collectQueryParam:!1,collectRequestBody:!1,collectResponseBody:!1,matchingBodyContents:[],plainResponseBodyAttributes:{},plainRequestBodyAttributes:{},requestBodyAttributes:{},responseBodyAttributes:{},standardRequestHeaders:{},standardResponseHeaders:{},customRequestHeaders:{},customResponseHeaders:{},plainCustomRequestHeaders:{},plainCustomResponseHeaders:{}},this.zy=new dw}PC(t){return t.length<=this.CC}OC(t){let e=t["content-type"];return e!==void 0&&(Rt(e,"application/json")||Rt(e,"application/graphql"))}NC(t,e){return t&&this.PC(t)&&this.OC(e)}xc(t,e,i,n){let o=n==="request"?this.MC:this.DC;if(o!==void 0||this.NC(e,i)){if(o===void 0)try{o=csJSON.parse(e),n==="request"?this.MC=o:this.DC=o}catch{return}let c=uw.getJSONPathValue(t,o);if(c!==void 0&&(c===null||!fs(c))){let l=C(c)?c:csJSON.stringify(c);return lt.truncate(l,this.IC,lt.ELLIPSIS)}}}isBodyAttributeValueFound(t,e){let i,n;return(e.type==="request-response"||e.type==="response")&&(i=this.xc(e.path,t.responseBody,t.responseHeaders,"response")),(e.type==="request-response"||e.type==="request")&&(n=this.xc(e.path,t.requestBody,t.requestHeaders,"request")),X(i)||X(n)}collectBodyAttribute(t,e,i){let n;(e.type==="request-response"||e.type==="response")&&(n=this.xc(e.path,t.responseBody,t.responseHeaders,"response"),n&&(e.encrypted?this.ot.responseBodyAttributes[e.path]=n:(n=i(n),this.ot.plainResponseBodyAttributes[e.path]=n))),(e.type==="request-response"||e.type==="request")&&(n=this.xc(e.path,t.requestBody,t.requestHeaders,"request"),n&&(e.encrypted?n&&(this.ot.requestBodyAttributes[e.path]=n):(n=i(n),this.ot.plainRequestBodyAttributes[e.path]=n)))}isBodyContentMatching(t,e){return t.responseBody?!!new csRegExp(e,"i").test(t.responseBody):!1}collectBodyContent(t){csArray.prototype.indexOf.call(this.ot.matchingBodyContents,t)===-1&&csArray.prototype.push.call(this.ot.matchingBodyContents,t)}collectCustomHeaders(t,e,i){let n=csString.prototype.toLocaleLowerCase.call(e.headerName);t.responseHeaders[n]&&(e.type==="request-response"||e.type==="response")&&(e.encrypted?this.ot.customResponseHeaders[n]=t.responseHeaders[n]:this.ot.plainCustomResponseHeaders[n]=i(t.responseHeaders[n])),t.requestHeaders[n]&&(e.type==="request-response"||e.type==="request")&&(e.encrypted?this.ot.customRequestHeaders[n]=t.requestHeaders[n]:this.ot.plainCustomRequestHeaders[n]=i(t.requestHeaders[n]))}collectStandardHeaders(t){if(!(Object.keys(this.ot.standardRequestHeaders).length>0||Object.keys(this.ot.standardResponseHeaders).length>0)){for(let[e,i]of Object.entries(t.requestHeaders))this.zy.isValidStandardHeader(e)&&(this.ot.standardRequestHeaders[e]=i);for(let[e,i]of Object.entries(t.responseHeaders))this.zy.isValidStandardHeader(e)&&(this.ot.standardResponseHeaders[e]=i)}}setCollectQueryParam(t){t&&(this.ot.collectQueryParam=!0)}setCollectResponseBody(t){t&&(this.ot.collectResponseBody=!0)}setCollectRequestBody(t){t&&(this.ot.collectRequestBody=!0)}getCollectedDataPoints(){return this.ot}}return s})(),vi=(()=>{let s;return function(r){r.CONTENTSQUARE="contentsquare.net",r.CLICKTALE="clicktale.net",r.FAKE_TRACKER="fake-tracker.content-square.fr",r.HEAP_API="heap-api.com",r.HEAP_ANALYTICS="heapanalytics.com"}(s||(s={})),s})(),pw=(()=>{class s{constructor(t,e){this.Lc=t,this.D=e}collectDataPoints(t,e){this.ot=new fw;let i=!1;if(this.Lc.collectionRules)for(let n of this.Lc.collectionRules)this.kC(n,t)&&this.xC(n,t)&&this.LC(n,t)&&(i=!0,this.VC(t,n,e));return i||(i=this.UC(t)),i&&e&&this.Lc.collectStandardHeaders&&this.ot.collectStandardHeaders(t),i?this.ot.getCollectedDataPoints():null}computeApiErrorCollectionOptions(){let t=this.Lc.collectionRules||[],e=new Set,i=[];for(let o of t)o.statusCode!==void 0&&e.add(o.statusCode),o.url!==void 0&&csArray.prototype.indexOf.call(i,o.url)===-1&&csArray.prototype.push.call(i,o.url);let n=[vi.CONTENTSQUARE,vi.CLICKTALE,vi.HEAP_API,vi.HEAP_ANALYTICS];return csArray.prototype.push.call(n,vi.FAKE_TRACKER),{statusCodes:e,urls:i,excludedDomains:n}}kC(t,e){return(!t.statusCode&&e.statusCode>=400||t.statusCode!==void 0&&t.statusCode===e.statusCode)&&(!t.url||csString.prototype.indexOf.call(e.url,t.url)!==-1)}xC(t,e){return t.bodyContent?this.ot.isBodyContentMatching(e,t.bodyContent):!0}LC(t,e){let i=csArray.prototype.find.call(t.bodyAttributePaths,n=>n.primary);return i===void 0?!0:this.ot.isBodyAttributeValueFound(e,i)}UC(t){return t.statusCode>=400}VC(t,e,i){e.bodyContent&&this.ot.collectBodyContent(e.bodyContent);let n=Us(e.bodyAttributePaths,o=>o.primary===1);if(n&&this.ot.collectBodyAttribute(t,n,o=>this.D.anonymizePII(o)),i){this.ot.setCollectQueryParam(e.collectQueryParam),this.ot.setCollectResponseBody(e.collectResponseBody),this.ot.setCollectRequestBody(e.collectRequestBody);for(let c of e.customHeaders)this.ot.collectCustomHeaders(t,c,l=>this.D.anonymizePII(l));let o=Pi(e.bodyAttributePaths,c=>!c.primary);for(let c of o)this.ot.collectBodyAttribute(t,c,l=>this.D.anonymizePII(l))}}}return s})();var gw=20,mw="Custom Error:",yw="https://cserror.com/texterror.js",Ew=(()=>{class s extends jt{constructor(t,e,i,n,o,c,l){super(),this.Ws=t,this._d=e,this._t=i,this._e=n,this.vi=o,this.A=c,this.L=l,this.Uc=[],this.Fi=0,this.ar=[]}initStates(){this.us=M.now(),this._d.removeQueryParams(),this._d.setQueryParams(this._t.getRequestParameters()),this.Uc=[],this.Fi=0}onStart(){this.Ws.subscribe(s.Ht,t=>this.Q(t)),this.Sd()}onStop(){this.Ws.unsubscribe(s.Ht)}onIframeJavascriptError(t){this.Q(t)}trackCustomError(t){let e={errorType:"jsError",message:`${mw} ${t}`,lineno:1,colno:1,filename:yw};this.Fo(e)}Fo(t){if(this.isStarted){let e=this.Q(t);e&&this.vi.emitCustomJavaScriptErrorEvent(e)}else csArray.prototype.push.call(this.ar,t)}Sd(){this.isStarted&&(csArray.prototype.forEach.call(this.ar,t=>this.Fo(t)),this.ar=[])}Q(t){if(this.isStarted&&this.Fi<gw&&this.L.isSessionValid()){let e={...t,pageUrl:this.A.getAnonymizedUrl(),rt:this.ki()};return this._e.anonymize(e),csArray.prototype.push.call(this.Uc,e),this.Cn(),e}return null}ki(){return M.now()-this.us}Cn(){this._d.send({errors:this.Uc}),this.Uc=[],this.Fi+=1}}return s.Ht="JavaScriptErrorsService",s})(),vw="errors",Sw=(()=>{class s{constructor(t,e,i,n,o,c,l,h,u,p){this.Ws=t,this._e=e,this.E=i,this._t=n,this.Et=o,this.S=c,this.vi=l,this.A=h,this.Dt=u,this.L=p}init(){let t=this.Dt.create(`${this.E.getTrackerUri()}/${vw}`);this.Ys=new Ew(this.Ws,t,this._t,this._e,this.vi,this.A,this.L),this.Et.addListener(this.Ys),this.ft()}ft(){this.E.jsCustomErrorsEnabled&&!this.E.customErrors.enabled&&this.S.register(Ql,t=>{this.Ys.trackCustomError(t)})}onStartTracking(){this.Ys.start()}onAfterNaturalPageView(){this.Ys.initStates()}onArtificialPageViewEnd(t){t&&this.Ys.stop()}onAfterArtificialPageView(t){this.Ys.initStates(),t&&this.Ys.start()}onBeforeSessionRenewal(){this.Ys.stop()}onOptout(){this.Ys.stop()}}return s})(),_w=(()=>{class s extends ca{constructor(){super(),this.G=new Eh(t=>this.errorListener(t))}onStartTracking(){this.G.observe()}onStopTracking(){this.G.disconnect()}errorListener(t){let e=this.FC(t);for(let i in this.subscriptions){let n=this.subscriptions[i];n(e)}}$C(t){return t=t!=null?t:"[NO ERROR MESSAGE]",lt.truncate(t,s.Fh,lt.ELLIPSIS)}zC(t){return!t||se(t)?"":lt.truncate(t,s.$h,lt.ELLIPSIS)}FC(t){return{errorType:"jsError",message:this.$C(t.message),filename:this.zC(t.filename),lineno:t.lineno,colno:t.colno}}}return s.Fh=1024,s.$h=150,U([P("Event handler type: error")],s.prototype,"errorListener",null),s})(),ww="CS_ANONYMIZED_VALUE",Aw=(()=>{class s{constructor(t,e){this.D=t,this.A=e}anonymize(t){return C(t.message)&&(t.message=this.GC(t.message),t.message=this.D.anonymizePII(t.message)),C(t.filename)&&(t.filename=this.A.computeOverriddenUrl(t.filename)),t}GC(t){return csString.prototype.replace.call(t,/(value\s*=\s*".*"|value\s*=\s*'.*')/,`value='${ww}'`)}}return s})();var Tw=(()=>{class s{constructor(t){this.S=t}init(){this.iE(s.TI,vl),this.iE(s.bI,El)}iE(t,e){this.S.register([t],(i,n)=>{!C(i)||!(C(n)||Ue(n))||H.error(n,`${e}${i}`)})}}return s.bI="logSnippetError",s.TI="logImplementationSnippetError",s})();var bw=(()=>{class s{constructor(){this.Ad=Rs.Natural}setPageViewType(t){this.Ad=t}getPageViewType(){return this.Ad}getRequestParameters(){return{pvt:this.Ad}}}return s})();var Rw=(()=>{class s{setItem(t,e){window.sessionStorage.setItem(t,e)}getItem(t){return window.sessionStorage.getItem(t)}removeItem(t){window.sessionStorage.removeItem(t)}}return s})();var Cw=(()=>{class s{constructor(t,e){this.zt=t,this.E=e,this.rE=!1}enableRecordingContext(t,e,i){this.rE=!0,this.Fr=t,this.C=e,this.fo=i}getRecordingContext(){var t,e,i;if(!this.rE)return{isRecording:!1,recordingStartTimestamp:0,etrState:re.ETR_OFF,etrStatus:Kt.ETR_DISABLED,collectState:k.ANALYTICS_ONLY};let n=this.C.getSession();return{isRecording:this.Fr.isRecording(),useAnonymization:this.zt.getSensitiveStatus().useAnonymization,enableOnlineResources:(t=this.Fr.getStaticResourceManagerStatus())===null||t===void 0?void 0:t.onlineAssets.activated,enableOnlineResourcesOnNextPageview:(e=this.Fr.getStaticResourceManagerStatus())===null||e===void 0?void 0:e.onlineAssets.enabledOnNextPageview,recordingStartTimestamp:parseInt(this.Fr.getRecordingStartTimestamp(),10),etrState:this.E.malkaEtrEnabled?re.ETR_ON:re.ETR_OFF,etrStatus:this.fo.getEtrStatus(n),collectState:(i=n==null?void 0:n.collectState)!==null&&i!==void 0?i:k.ANALYTICS_ONLY}}}return s})(),Li=(()=>{class s{static isRecordingSupported(){return"MutationObserver"in window&&"visibilityState"in document}static isAsyncSerializationSupported(){return"Promise"in window&&"findIndex"in csArray.prototype}}return s})();var Iw=(()=>{class s extends jt{constructor(t,e,i,n,o,c){super(),this.we=t,this.ht=e,this.Jt=i,this.yr=n,this.an=o,this.it=c}onStart(){var t,e,i;this.Jt.start(),this.we.setMaskedElementSettings(this.ht.getMaskedElementSettings((t=this.it)===null||t===void 0?void 0:t.shouldMaskNonTextElements())),this.we.startIdentifier(),(e=this.yr)===null||e===void 0||e.start(),(i=this.an)===null||i===void 0||i.start()}onStop(){var t,e;this.Jt.stop(),this.we.stopIdentifier(),(t=this.yr)===null||t===void 0||t.stop(),(e=this.an)===null||e===void 0||e.stop()}}return s})(),Pw=(()=>{class s{constructor(t,e,i,n,o,c){this.it=t,this.ht=e,this.Kt=i,this.Jt=n,this.kn=o,this.ut=c,this.xn=Vo(this.kn)}getSensitiveStatus(){var t,e;return{started:this.Kt.isStarted,useAnonymization:this.it.shouldUseAnonymization(),capturedElementSelector:this.Jt.getWhitelistedElementsSelector(),maskedElementSettings:this.ht.getMaskedElementSettings((t=this.it)===null||t===void 0?void 0:t.shouldMaskNonTextElements()),encryptionSelectors:(e=this.ut)===null||e===void 0?void 0:e.getEncryptionSelectors()}}getElementSensitiveStatus(t){let e=this.Kt.isStarted,i=this.it.shouldUseAnonymization();return e?D.isMaskedElement(t)||D.isMaskedElementChild(t)?Xt.MASKED:lh.shouldEncrypt(t)?Xt.ENCRYPTED:xe.isEditableNode(t)?Xt.ANONYMIZED:i?fe.isWhitelistedElement(t)?Xt.CAPTURED:Xt.ANONYMIZED:Xt.CAPTURED:Xt.ANONYMIZED}getAttributeSensitiveStatus(t,e){if(!this.Kt.isStarted)return Xt.ANONYMIZED;let i=this.it.shouldUseAnonymization();return D.isMaskedAttribute(t,e)?Xt.MASKED:i?ni(t)||fe.isWhitelistedElement(t)||this.xn.has(e)?Xt.CAPTURED:Xt.ANONYMIZED:Xt.CAPTURED}}return s})(),Ow=(()=>{class s{constructor(t){this.L=t}onAfterVisitorRenewal(){this.L.renewSession(!0)}}return s})(),Nw={MATCHED:{[k.ANALYTICS_ONLY]:k.ANALYTICS_ONLY_RULES_TARGETING,[k.RECORDING_GLOBAL_SAMPLING]:k.RECORDING_RULES_TARGETING,[k.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING]:k.RECORDING_RULES_TARGETING},MISSED:{[k.ANALYTICS_ONLY]:k.ANALYTICS_ONLY_RULES_TARGETING,[k.RECORDING_GLOBAL_SAMPLING]:k.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING}},Ln=(()=>{let s;return function(r){let t;function e(m){t=m}r.setLogger=e;function i(m,v){for(let b of m)if(o(b,v))return!0;return!1}r.isUrlMatching=i;function n(m,v){if(C(v)){for(let b of m)if(o(b,v))return!0}else if(Cr(v)){for(let b of m)if(o(b,csString(v)))return!0}return!1}r.isMatching=n;function o(m,v){let b=c(m,v);return m.negate?!b:b}function c(m,v){switch(m.rule_type==="date"&&(m.match_operation==="less_than"||m.match_operation==="greater_than")&&(v=(new csDate(v).valueOf()/1e3).toFixed(0)),m.match_operation){case"exact":switch(m.rule_type){case"string":return C(m.pattern)?csString.prototype.toLowerCase.call(v)===csString.prototype.toLowerCase.call(m.pattern):!1;case"boolean":return v===m.pattern||v===csString(m.pattern);case"number":return yt(v)?Number(v)===Number(m.pattern):!1;default:return v===m.pattern}case"starts_with":return C(m.pattern)?csString.prototype.indexOf.call(v,m.pattern)===0:!1;case"ends_with":return C(m.pattern)?ri(v,m.pattern):!1;case"contains":return C(m.pattern)?csString.prototype.indexOf.call(v,m.pattern)!==-1:!1;case"regex":if(!C(m.pattern))return!1;try{return new csRegExp(m.pattern).test(v)}catch(b){return t==null||t.warn(`targeting.matchOperation.regex invalid ${b==null?void 0:b.message}`),!1}case"simple":return C(m.pattern)?y(v)===y(m.pattern):!1;case"greater_than":return Number(v)>Number(m.pattern);case"less_than":return Number(v)<Number(m.pattern);case"exact_date":{let b=Number(m.pattern);if(!_t(b))return!1;let I=new csDate(b*1e3);return new csDate(v).toDateString()===I.toDateString()}case"exact_days_ago":return l(m,v);case"more_than_days_ago":return h(m,v);case"less_than_days_ago":return u(m,v);case"unknown":return p(v);default:return t==null||t.warn(`targeting.matchOperation.regex not managed operation ${m.match_operation}`),!1}}function l(m,v){let b=new csDate,I=b.setDate(b.getDate()-Number(m.pattern)),_=new csDate(I);return new csDate(v).toDateString()===_.toDateString()}function h(m,v){let b=Number(m.pattern);if(!_t(b))return!1;let I=Number(b)+1,_=new csDate,A=new csDate(_);return A.setDate(_.getDate()-I),new csDate(v).getTime()<=A.getTime()}function u(m,v){let b=Number(m.pattern);if(!_t(b))return!1;if(b===0)return l(m,v);let I=new csDate,_=new csDate(I);return _.setDate(I.getDate()-b),new csDate(v).getTime()>=_.getTime()}function p(m){return yt(m)?C(m)?csString.prototype.trim.call(m)==="":Cr(m)?m===!0:_t(m)?m!==0:!1:!0}function y(m){let v=Rt(m,"http://")||Rt(m,"https://")?m:`https://${m}`,b=pl(v);return b!==null?csString.prototype.replace.call(b.host,/^www./,""):m}}(s||(s={})),s})(),Mw=(()=>{let s;return function(r){r.URL="url"}(s||(s={})),s})(),Vn={isLegacyURL:s=>s.component==="url",isLegacyTrigger:s=>s.component==="trigger",isURL:s=>s.type===Mw.URL},Dw=(()=>{class s{constructor(t){this.oE=new Uo,this.aE=[],this.cE=[],Ln.setLogger(t)}setTargetingRules(t){this.oE.setRegexRules(csArray.prototype.filter.call(t,Vn.isURL));for(let e of t)Vn.isLegacyURL(e)?csArray.prototype.push.call(this.aE,e):Vn.isLegacyTrigger(e)&&csArray.prototype.push.call(this.cE,e)}matchUrl(t){return Ln.isUrlMatching(this.aE,t)||this.oE.evaluateUrl(t)}matchTrigger(t){return Ln.isMatching(this.cE,t)}}return s})(),kw=(()=>{class s extends jt{constructor(t,e,i){super(),this.lE=t,this.Cd=e,this.A=i}init(){this.Id=new Dw(H),this.lE&&this.Id.setTargetingRules(this.lE)}onStart(){}checkTargetingRules(){let t=this.A.getAnonymizedUrl();this.Cd(this.Pd(t,"url"))}onStop(){}onTargetingRulesArtificialPageview(t){this.isStarted&&this.Cd(this.Pd(t,"url"))}onExternalEvent(t){this.isStarted&&this.Cd(this.Pd(t.name,"trigger"))}Pd(t,e){var i,n;return e==="url"&&C(t)&&(!((i=this.Id)===null||i===void 0)&&i.matchUrl(t))?!0:!!(e==="trigger"&&(!((n=this.Id)===null||n===void 0)&&n.matchTrigger(t)))}}return s})(),xw=(()=>{class s{constructor(t,e,i,n,o,c,l){this.E=t,this.w=e,this.Rt=i,this.Y=n,this.A=o,this.C=c,this.as=l,this.cr=!1,this.Xo=(h=!1)=>{this.cr&&this.E.isSMB&&this.as.allowStartDataCollection({fromSessionRenewal:h}),this.E.startMode===Lr.Automatic&&this.as.startDataCollection({fromSessionRenewal:h})},this.DI=h=>{this.cr||(this.cr=h,this.hE(),this.Xo())}}init(){this.E.isSMB&&this.as.disableStartDataCollection(),this.cn=new kw(this.E.recordTargetingRules,this.DI,this.A),this.Y.addListener(this.cn),this.cn.init()}start(){this.cn.start()}stop(){this.cn.stop()}maybeStartDataCollection(t){if(t){this.Xo(t);return}if(this.kI()){this.cr=!0,this.Xo(),this.stop();return}this.cn.checkTargetingRules()}onAfterArtificialPageView(){this.cn.checkTargetingRules()}onCollectStateChange(t){if(this.uE(t)){this.stop();return}let e=t===k.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING;!this.cr&&e||csSetTimeout(()=>this.dE(t),0)}onStartTracking(){this.hE()}kI(){let t=this.C.getSession();return!!(t&&this.uE(t.collectState))}uE(t){return t===k.RECORDING_RULES_TARGETING||t===k.ANALYTICS_ONLY_RULES_TARGETING}hE(){var t;if(this.cr){let e=this.C.getSession(),i=this.Rt.getInitialCollectState();this.dE((t=e==null?void 0:e.collectState)!==null&&t!==void 0?t:i),this.as.isDataCollectionStarted()&&this.w.emitTargetingRulesMatched()}}dE(t){let e=Nw[this.cr?"MATCHED":"MISSED"][t];e&&this.w.emitCollectStateChange(e,re.ETR_OFF)}}return s})(),Bh=(()=>{class s{constructor(){this.fE=new Set,this.pE=[],this.Od=new Set,this.Nd=[]}addUrlMaskingPattern(t){if(this.fE.has(t))return;this.fE.add(t);let e=za(t);csArray.prototype.push.call(this.pE,e)}getUrlMaskingPatterns(){return this.pE}resetPartialUrlMaskingPatterns(){this.Od.clear(),this.Nd=[]}addPartialUrlMaskingPattern(t){if(this.Od.has(t))return;this.Od.add(t);let e=za(t);csArray.prototype.push.call(this.Nd,e)}getPartialUrlMaskingPatterns(){return this.Nd}}return s})(),Lw=(()=>{class s{constructor(t,e,i){this.E=t,this.M=e,this.C=i,this.us=M.now()}resetStartTime(){this.us=M.now()}getSessionData(){let{projectId:t}=this.E,e=this.M.getVisitor();e==null&&H.warn("Visitor is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{id:i,visitsCount:n}=e!=null?e:{},o=this.C.getSession();o===null&&H.warn("Session is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{pageNumber:c}=o!=null?o:{};return{projectId:t,userId:i,sessionNumber:n,pageNumber:c,relativeTimestamp:M.now()-this.us}}}return s})(),Vw=["clearSession"],Uw=["extendSession"];var jw=["getSessionData"],Hw=["session:start:newVisitor"],Bw=["session:clear:visitor"],Fw=(()=>{class s{constructor(t,e,i,n){this.E=t,this.M=e,this.C=i,this.S=n}init(){this.Md=new Lw(this.E,this.M,this.C),this.S.register(Vw,()=>this.C.removeSession()),this.S.register(Uw,()=>this.C.extendSessionPeriodically(),{disableApplyPending:!0}),this.S.register(jw,()=>this.Md.getSessionData(),{disableApplyPending:!0}),this.S.register(Hw,()=>this.M.renewVisitor()),this.S.register(Bw,()=>{this.M.resetVisitor()},{disableApplyImmediate:!0})}onBeforeNaturalPageView(){this.M.createOrUpdateVisitor(),this.C.createOrUpdateSession()}onBeforeArtificialPageView(){this.M.createOrUpdateVisitor(),this.C.createOrUpdateSession()}onAfterNaturalPageView(){this.Md.resetStartTime()}onAfterArtificialPageView(){this.Md.resetStartTime()}onOptout(){this.M.removeVisitor(),this.C.removeSession()}onCollectStateChange(t){this.C.updateCollectState(t)}}return s})(),$w=(()=>{class s{constructor(t,e,i,n,o,c,l,h,u,p,y,m,v,b,I,_,A,x,N,w,B,F,Q,Ct,Ht,oe,S,V,j,z,pt,It,ae,Ce,ms,ys,He){this._t=t,this.ln=e,this.ge=i,this.M=n,this.C=o,this.L=c,this.Os=l,this.w=h,this.S=u,this.wl=p,this.E=y,this.Al=m,this.hs=v,this.bn=b,this.It=I,this.D=_,this.et=A,this.Z=x,this.A=N,this.xI=w,this.Y=B,this.Et=F,this.bt=Q,this.gE=Ct,this.Xt=Ht,this.LI=oe,this.N=S,this.Dt=V,this.O=j,this.St=z,this.J=pt,this.Rt=It,this.ht=ae,this.Ye=Ce,this.fe=ms,this.Wt=ys,this.Yt=He,this.VI=Be=>{this.w.emitBeforeSessionRenewal(),this.hn(!0,Be),this.w.emitAfterSessionRenewal()},this.UI=Be=>{this.w.emitBeforeSessionRenewal(),this.Rt.refreshQuota(ce=>{ce!==k.QUOTA_REACHED&&(this.hn(!0,Be),this.w.emitAfterSessionRenewal())})}}start(){if(this.Al.init(),this.hs.init(),this.hs.isActive())return;let t,e,i,n,o,c,l,h,u,p,y,m,v,b,I,_,A,x,N;this.N.schedule(()=>{I=new Ow(this.L),m=new J_(this.et),v=new k_(()=>{}),_=new x_,N=new X_;let w=new Iw(v,this.ht,_,x,N,this.Dd());b=new Pw(this.Dd(),this.ht,w,_,this.E.whitelistedAttributes,A);let B=new Tm(this.w,this.S,this.ht,w,_,A,x);B.init(),this.w.addListener(B),t=new SS(this.E,this.ln,this.M,this.et,m,this.S,this.L,new K_(H),this.Et,this.Dt,this.Y,b,this.nt,this.Wt,this.Yt),e=new Dm(this.S,this.C,this.E,this._t,this.ge,this.D),y=new Cw(b,this.E);let F=null,Q=new bw;i=new NS(this.M,this.C,this.S,this.Et,F,this.E,Q,y),n=new Bm(this.E,this.ln,this.M,this.S,this.D,this.L,this.A);let Ct,Ht;this.or=new vm(this.E,this.S,this.w,this.ln,this.M,this.C,this.Os,this.It,this.bt,this.A,this.Xt,Q,this.Y,this.Dt,this.Ye,Ct,this.Wt,this.Yt,Ht),this.mE=new Fw(this.E,this.M,this.C,this.S),this.as=new ow(this.E,this.w,this.hs,this.ht,this.or,this.L),new nw(this.as,this.S).init(),l=new Km(this.E,this.S,this.ge,this.ln,this.Y),h=new Tw(this.S),u=new Z_}),this.E.apiErrors.enabled&&this.N.schedule(()=>{this.mt=new Bh,this.jI=new ty(this.S,this.mt),this.jI.init()}),this.E.apiErrors.enabled&&this.N.schedule(()=>{var w,B;let F=new pw(this.E.apiErrors,this.D);this.gt=new cw(new sw,new tw,F),this.pe=new lw(this.mt,this.Z,!!(!((B=(w=this.E)===null||w===void 0?void 0:w.experimental)===null||B===void 0)&&B.anonymizeNameInUrls)),this.kr=new hw;let Q=new nm(this.gt,this.pe,this.E,this.ln,this.Et,this.S,this.Dt,this.L);Q.init(),this.w.addListener(Q)}),this.E.jsErrorsEnabled&&this.N.schedule(()=>{this.Ws=new _w,this._e=new Aw(this.D,this.A);let w=new Sw(this.Ws,this._e,this.E,this.ln,this.Et,this.S,this.Y,this.A,this.Dt,this.L);w.init(),this.w.addListener(w)}),this.N.schedule(()=>{this.bn.init()}),this.N.schedule(()=>{i.init()}),this.N.schedule(()=>{e.init()}),this.N.schedule(()=>{n.init()}),this.N.schedule(()=>{this.gE.init()}),this.N.schedule(()=>{this.or.init()}),this.N.schedule(()=>{this.mE.init()}),this.N.schedule(()=>{l.init()}),this.N.schedule(()=>{this.xI.init()}),this.N.schedule(()=>{h.init()}),this.N.schedule(()=>{u.init()}),this.N.schedule(()=>{this.LI.init()}),this.N.schedule(()=>{this.w.addListener(this.mE),this.w.addListener(this.wl),this.w.addListener(t),this.w.addListener(this.bn),this.w.addListener(i),this.w.addListener(n),this.w.addListener(this.gE),this.w.addListener(this.or),this.w.addListener(l),this.w.addListener(e),this.w.addListener(u),this.w.addListener(I)}),Li.isRecordingSupported()&&this.N.schedule(()=>{let w=new Gv(y,this.C,this.E,this._t,this.S,this.D,this.L,v,this._e,this.gt,this.pe,this.mt,this.w,this.Y,this.Et,this.Xt,this.Dt,this.Z,this.kr,this.Dd(),this.Qr,A);w.init(),this.w.addListener(w),i.setRecordingService(w.recordingService)}),this.N.schedule(()=>{var w;let B,F}),this.N.schedule(()=>{t.init()}),this.N.schedule(()=>{this.E.isQuotaEnabled()?this.L.onSessionExpired(w=>{this.UI(w)}):this.L.onSessionExpired(w=>{this.VI(w)}),this.hn()})}hn(t=!1,e=!1){var i,n,o;if(this.E.hasTargetingRules()){this.Ko||(this.Ko=new xw(this.E,this.w,this.Rt,this.Y,this.A,this.C,this.as),this.w.addListener(this.Ko),this.Ko.init(),this.Ko.start(),this.S.start(),(i=this.nt)===null||i===void 0||i.start()),this.Ko.maybeStartDataCollection(t);return}this.S.start(),(n=this.nt)===null||n===void 0||n.start(),this.as.tryStartAutomaticDataCollection({fromSessionRenewal:t,isRenewedVisitor:e})}Dd(){if(this.it)return this.it;let t=new Uo;return this.it=new D_(this.E,this.A,t,this.It),this.it.init(),this.it.shouldUseAnonymization()&&G.counters.pageAnonymisation.count("anonymized-on-start"),this.it}}return s})();var Fh=(()=>{class s{constructor(t){this.configuration=t}}return s})(),zw=(()=>{class s extends Fh{constructor(t,e,i,n,o){super(t),this.configuration=t,this.w=e,this.kd=i,this.A=n,this.xd=o,this.Ld=!1}refreshQuota(){}canCollect(t){return!0}init(){this.configuration.malkaUrlEnabled&&this.configuration.hasRecordingUrlRules()&&(this.Ld=!0,this.xd.setRegexRules(this.configuration.recordingUrlRules))}sanitizeSessionCollectState(t){return(t.collectState===k.QUOTA_REACHED||t.collectState===k.RECORDING_RULES_TARGETING||t.collectState===k.RECORDING_TEMPORARILY)&&(t.collectState=k.ANALYTICS_ONLY),t}computeInitialCollectState(){return as.isReplayConsentNeeded(this.configuration)?k.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED:this.$c()}computeInitialCollectStateFromRecordingConsentGranted(){return this.$c()}$c(){if(!Li.isRecordingSupported())return k.ANALYTICS_ONLY;let t=k.ANALYTICS_ONLY,e=re.ETR_OFF;return Ms.percentage()<this.configuration.replayRecordingRate||this.kd.isForceReplayRecorded()?t=k.RECORDING_GLOBAL_SAMPLING:this.Ld&&this.xd.evaluateUrl(this.A.getAnonymizedUrl())&&(t=k.RECORDING_URL_SAMPLING),this.configuration.malkaEtrEnabled&&(e=re.ETR_ON),this.w.emitCollectStateChange(t,e),t}getEligibleCollectState(t){if(!Li.isRecordingSupported())return k.ANALYTICS_ONLY;if(as.isRecordingBlockedByConsent(t))return t.collectState===k.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?k.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN:k.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED;if(t.collectState===k.RECORDING_GLOBAL_SAMPLING)return k.RECORDING_GLOBAL_SAMPLING;let e=this.configuration.malkaEtrEnabled?re.ETR_ON:re.ETR_OFF;return this.Ld&&this.xd.evaluateUrl(this.A.getAnonymizedUrl())?(this.w.emitCollectStateChange(k.RECORDING_URL_SAMPLING,e),k.RECORDING_URL_SAMPLING):(this.w.emitCollectStateChange(k.ANALYTICS_ONLY,e),k.ANALYTICS_ONLY)}isReplayRecorded(t){return as.isRecordingBlockedByConsent(t)?!1:t.collectState===k.RECORDING_TEMPORARILY||t.collectState===k.RECORDING_GLOBAL_SAMPLING||t.collectState===k.RECORDING_URL_SAMPLING||this.configuration.malkaEtrEnabled}getInitialCollectState(){return k.ANALYTICS_ONLY}getRecordingConsentWithdrawn(){return k.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}}return s})(),he="_cs_s",Ao=18e5,Un=".",Gw=13,wr=(()=>{let s;return function(r){r[r.NOT_FOUND=0]="NOT_FOUND",r[r.EXPIRED=1]="EXPIRED",r[r.FOUND=2]="FOUND"}(s||(s={})),s})(),qw=(()=>{class s{constructor(t,e,i){this.E=t,this.O=e,this.J=i,this.ae=null,this.Vd=!1}get(t){let e=this.getRawSession(t);return this.isValid(e)?Ll(e):null}getRawSession(t){if(t){let u=this.Ud();return Jn(u)}let{sessionString:e,status:i}=this.HI(),n=Jn(e);if(i!==wr.EXPIRED)return n;if(this.E.cookielessTrackingEnabled)return null;let o=this.Ud();if(!o)return null;let c=csString.prototype.split.call(o,Un);if(!s.yE(c))return o;let l=c[c.length-1],h=parseInt(l,10);return isNaN(h)||this.BI(h),n}onCookieToSet(t){this.Mi=t}onCookieToRemove(t){this.Di=t}set(t,e=Ao){var i;let n=M.now()+e,o=cg(t);o+=`${Un}${n}`,this.FI(o,n),this.E.cookielessTrackingEnabled?this.J.setItem(he,o):(this.O.set(he,o,e),(i=this.Mi)===null||i===void 0||i.call(this,he,o,e))}remove(){var t;this.E.cookielessTrackingEnabled?this.J.removeItem(he):(this.O.delete(he),(t=this.Di)===null||t===void 0||t.call(this,he)),this.$I()}handleSubdomainChange(){if(this.E.cookielessTrackingEnabled)return;let t=this.get(!0);t&&(this.E.allowSubdomains?this.O.delete(he,Fr.CURRENT_DOMAIN):this.O.delete(he,this.O.getRootDomain()),this.set(t))}isValid(t){return t!==null&&zr(t)}FI(t,e){this.ae={sessionString:t,expires:e}}HI(){return this.ae?this.ae&&M.now()<=this.ae.expires?{sessionString:this.ae.sessionString,status:wr.FOUND}:{sessionString:this.ae.sessionString,status:wr.EXPIRED}:{sessionString:this.Ud(),status:wr.NOT_FOUND}}$I(){this.ae=null}BI(t){this.ae&&(this.ae.expires=t,this.Vd=!0)}isCacheRefreshed(){return this.Vd}resetCacheRefreshed(){this.Vd=!1}Ud(){if(this.E.cookielessTrackingEnabled){let e=this.J.getItem(he);return!e||this.EE(e)?null:e}let t=this.O.get(he);return!t||this.EE(t)?null:t}EE(t){let e=csString.prototype.split.call(t,Un);if(!s.yE(e))return!1;let i=parseInt(e[e.length-1],10);return!isNaN(i)&&M.now()>i}static yE(t){return t[t.length-1].length===Gw}}return s})(),Ww=(()=>{class s extends Fh{constructor(t,e,i){super(t),this.configuration=t,this.Jo=e,this.w=i,this.zI=k.RECORDING_GLOBAL_SAMPLING}refreshQuota(t){this.vE=t,this.Qo=void 0,this.GI()}init(t){this.qI();let e=vt.get(he);if(e!==null&&zr(e)){let i=xl(e);t(this.canCollect(i),i==null?void 0:i.collectState)}else this.refreshQuota(i=>{t(i!==k.QUOTA_REACHED,i)})}sanitizeSessionCollectState(t){return t}canCollect(t){return t!==null&&t.collectState!==k.QUOTA_REACHED}computeInitialCollectState(t){return this.Qo?(this.w.emitCollectStateChange(this.Qo,this.configuration.malkaEtrEnabled?re.ETR_ON:re.ETR_OFF),this.Qo):(H.warn("Quota file error computeInitialCollectState() called before quota answered"),k.QUOTA_REACHED)}getEligibleCollectState(t){return t.collectState===k.QUOTA_REACHED?k.QUOTA_REACHED:!Li.isRecordingSupported()&&this.isReplayRecorded(t)?k.ANALYTICS_ONLY:t.collectState===k.RECORDING_RULES_TARGETING?k.RECORDING_RULES_TARGETING:t.collectState===k.ANALYTICS_ONLY_RULES_TARGETING?k.ANALYTICS_ONLY_RULES_TARGETING:t.collectState===k.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING?k.ANALYTICS_ONLY_RECORDING_PENDING_RULES_TARGETING:t.collectState===k.RECORDING_GLOBAL_SAMPLING?k.RECORDING_GLOBAL_SAMPLING:k.ANALYTICS_ONLY}isReplayRecorded(t){return t.collectState===k.RECORDING_GLOBAL_SAMPLING||t.collectState===k.RECORDING_RULES_TARGETING}getInitialCollectState(){return this.Qo||k.QUOTA_REACHED}computeInitialCollectStateFromRecordingConsentGranted(t){return k.ANALYTICS_ONLY}Zo(t){this.Qo=t,this.vE&&this.vE(t)}qI(){this.Jo.onError(t=>this.quotaServiceErrorHandler(`HTTP:${t.status} - fetching quota file for pid: ${this.configuration.projectId}`)),this.Jo.onTimeout(()=>this.quotaServiceErrorHandler("timeout")),this.Jo.onLoad(t=>this.quotaFileHandler(t))}GI(){this.Jo.isInProgress()||this.Jo.send()}quotaFileHandler(t){var e;if(!(!((e=t==null?void 0:t.quotas)===null||e===void 0)&&e.length)){this.quotaServiceErrorHandler("Quota types missing from config file");return}this.WI(t)}quotaServiceErrorHandler(t){let e=`Quota error - ${t}`;H.warn(e),this.Zo(this.zI)}WI(t){let e=!1,i=!1;for(let n of t.quotas)n.quotaType==="ANALYTICS"&&n.value?e=!0:n.quotaType==="RECORDING"&&n.value&&Ms.boolean(Math.round(n.value*100))&&(i=!0);!e&&i?this.quotaServiceErrorHandler(`Quota types impossible: replay without analytics - ${csJSON.stringify(t)}`):e&&i?Li.isRecordingSupported()?this.Zo(k.RECORDING_GLOBAL_SAMPLING):this.Zo(k.ANALYTICS_ONLY):e&&!i?this.Zo(k.ANALYTICS_ONLY):this.Zo(k.QUOTA_REACHED)}getRecordingConsentWithdrawn(){return k.ANALYTICS_ONLY}}return U([P("Quota File: quotaFileHandler")],s.prototype,"quotaFileHandler",null),U([P("Quota File: onerror")],s.prototype,"quotaServiceErrorHandler",null),s})(),Yw=(()=>{class s{constructor(t,e,i){this.E=t,this.Tn=e,this.YI=i}applyUpToDate(t){this.YI.retrieve(this.E.hostnames,e=>{let i=[this.Tn.get(),...e],n=Il.select(i,this.E.lastTrackingDraw);this.Tn.apply(n),t()})}}return s})(),Xw=(()=>{class s{constructor(t,e,i,n,o){this.M=t,this.C=e,this.ws=i,this.bt=n,this.E=o}get(){return{exclusion:this.ws.getAppliedTrackingDraw(),visitor:this.M.getVisitor(),session:this.C.getSession(),cvars:this.bt.getCustomVariablesSession()}}apply(t){t&&(t.exclusion?this.exclude():this.include(t))}exclude(){this.ws.exclude(this.E),this.M.removeVisitor(),this.C.removeSession(),this.bt.removeCustomVariablesSession()}include(t){this.ws.removeExclusion(),this.M.setVisitor(t.visitor),t.session?this.C.setSession(t.session):this.C.removeSession(),t.cvars?this.bt.setCustomVariableSession(t.cvars):this.bt.removeCustomVariablesSession()}}return s})(),Kw="1.0.0",Jw=(()=>{class s{constructor(t,e){this.Oe=t,this.Mt=e}retrieve(t,e){this.R=e,this.retrievedStates=[],this.jd=csArray.prototype.map.call(csArray.prototype.filter.call(t,i=>this.XI(i)),s.getXdframeOrigin),this.Oe.onMessage(i=>{this.vl(i)}),this.Oe.onTimeout(()=>{this.Sl()}),this.Oe.start(),csArray.prototype.forEach.call(csArray.prototype.map.call(this.jd,s.getXdframeUrl),i=>this.Oe.open(i))}vl(t){if(this._l(t)){let e=t.data;if(Qn.isValid(e))csArray.prototype.push.call(this.retrievedStates,e);else throw this.Oe.stop(),`Invalid domain state: ${csJSON.stringify(t.data)} from ${t.origin}`}this.KI()&&(this.Oe.stop(),this.R(csArray.prototype.map.call(this.retrievedStates,Vl.fromRaw)))}Sl(){H.warn("xdframe: all messages not received")}_l(t){return csArray.prototype.indexOf.call(this.jd,t.origin)>-1}KI(){return this.retrievedStates.length===this.jd.length}XI(t){return!gl(this.Mt.hostname,t)}static getXdframeOrigin(t){return`https://csxd.${t}`}static getXdframeUrl(t){return`${t}/xdframe-${Kw}.html`}}return s})(),Qw=(()=>{class s{constructor(){this.JI=3e3,this.SE=t=>{this.handleMessage(t)}}onMessage(t){this._E=t}onTimeout(t){this.ir=t}start(){window.addEventListener("message",this.SE),this.QI=window.csSetTimeout(()=>{this.ir()},this.JI)}open(t){var e;let i=document.createElement("iframe");return i.src=t,i.setAttribute("hidden",""),i.setAttribute("title","Intentionally blank"),(e=document.body)===null||e===void 0||e.appendChild(i),i}stop(){window.removeEventListener("message",this.SE),window.csClearTimeout(this.QI),this._E=kr,this.ir=kr}handleMessage(t){this._E(t)}}return U([P("XdframeMessage")],s.prototype,"handleMessage",null),s})(),la=60*1e3,Zw=60*la,tA=4*Zw-la,Xs=(()=>{let s;return function(r){r[r.NO=0]="NO",r[r.WITHDRAWN=1]="WITHDRAWN",r[r.GRANTED=2]="GRANTED"}(s||(s={})),s})(),eA=(()=>{class s{constructor(t,e,i,n,o){this.Pe=t,this.Rt=e,this.w=i,this.ZI=n,this.tP=o,this.ta=null,this.Hd=0,this.sa=Xs.NO}setDynamicVariablesService(t){this.eP=t}createOrUpdateSession(){this.Bd(),this.sP=M.now(),this.Hd=0;let t=this.wE();t===null?(t=this.iP(),this.$c(t),this.w.emitSessionCreated()):(t=this.Rt.sanitizeSessionCollectState(t),this.rP(t),t.collectState=this.Rt.getEligibleCollectState(t)),this.setSession(t)}grantReplayRecording(t){t.collectState=this.Rt.getInitialCollectState(),t.collectState=this.Rt.computeInitialCollectStateFromRecordingConsentGranted(t),this.setSession(t)}grantReplayRecordingBeforeSessionStart(){this.sa=Xs.GRANTED}withdrawnReplayRecording(t){t.collectState=this.Rt.getRecordingConsentWithdrawn(),this.setSession(t)}withdrawnReplayRecordingBeforeSessionStart(){this.sa=Xs.WITHDRAWN}$c(t){this.sa===Xs.WITHDRAWN?(t.collectState=this.Rt.getRecordingConsentWithdrawn(),this.setSession(t)):this.sa===Xs.GRANTED?t.collectState=this.Rt.computeInitialCollectStateFromRecordingConsentGranted(t):t.collectState=this.Rt.computeInitialCollectState(t),this.sa=Xs.NO}iP(){return{pageNumber:1,collectState:this.Rt.getInitialCollectState(),replayConsent:this.ZI?Kn.NOT_EXPRESSED:Kn.UNNECESSARY,etrStatus:Kt.ETR_NOT_SAVED_SESSION}}rP(t){t.pageNumber+=1}isReplayRecorded(){let t=this.getSession();return!!t&&this.Rt.isReplayRecorded(t)}isTemporarilyRecorded(){let t=this.getSession();return(t==null?void 0:t.collectState)===k.RECORDING_TEMPORARILY}getRequestParameters(){let t={},e=this.getSession();return e!==null&&(t.pn=`${e.pageNumber}`),t}getSession(){return this.Pe.get()}wE(){return this.Pe.get(!0)}doesSessionExist(){return this.Pe.get()!==null}setSession(t){this.Pe.set(t),this.w.emitSessionRefreshed()}refreshSession(){let t=this.wE();t&&this.setSession(t)}removeSession(){this.Pe.remove(),this.w.emitSessionRemoved()}getRecordingTypes(){let t=this.getSession(),e=this.nP(t);return this.oP(e)}oP(t){let e=[];return csArray.prototype.forEach.call(t,i=>{if(Ml(i)){let n=ag[i]||i;csArray.prototype.push.call(e,n)}}),e}nP(t){let e=[];return(t==null?void 0:t.collectState)!==void 0&&(csArray.prototype.push.call(e,t.collectState),this.tP&&csArray.prototype.push.call(e,k.RECORDING_ETR_SAMPLING)),e}updateCollectState(t){let e=this.getSession();e!==null&&(e.collectState=t,this.setSession(e))}hasValidSession(){let t=this.Pe.getRawSession();return this.Pe.isValid(t)}handleSubdomainChange(){this.Pe.handleSubdomainChange()}pollCacheRefreshEvent(t=!0){let e=this.Pe.isCacheRefreshed();return e&&t&&this.Pe.resetCacheRefreshed(),e}extendSessionPeriodically(){this.ta||this.AE()}extendSession(){let t=this.getSession();return t===null?(H.warn("extendSession is trying to extend an expired session"),this.Bd(),!1):(this.setSession(t),!0)}AE(){if(this.aP()){this.Bd();return}this.extendSession()&&(this.cP(),this.lP())}lP(){this.ta=window.csSetTimeout(()=>{this.AE()},Ao-la)}aP(){return tA-(M.now()+Ao-this.sP)<0}Bd(){this.ta&&(window.csClearTimeout(this.ta),this.ta=null)}cP(){this.Hd+=1,this.eP.trackDynamicVariable("session_expiry_update",this.Hd)}}return s})();var sA=(()=>{class s{constructor(t,e,i){this.M=t,this.C=e,this.yP=i}handle(){this.M.hasAllowSubdomainsChanged()&&(this.M.handleSubdomainChange(),this.C.handleSubdomainChange(),this.yP.handleSubdomainChange())}}return s})(),jn="_cs_inc",iA=(()=>{class s{constructor(t,e){this.Mt=t,this.O=e}isForceIncluded(){return this.EP()||this.vP()}isForceReplayRecorded(){return this.SP(k.RECORDING_GLOBAL_SAMPLING)}EP(){return this.O.get(jn)!==null}SP(t){return this.O.get(jn)===t}vP(){return csString.prototype.indexOf.call(this.Mt.href,jn)>0}}return s})(),rA=(()=>{class s{constructor(t,e,i){this.E=t,this.M=e,this.ws=i}clear(){this._P()&&(this.bE=this.M.getVisitor(),this.M.removeVisitor()),this.wP()&&this.ws.removeExclusion()}_P(){return this.M.doesVisitorExist()&&this.M.getVisitor().appliedTrackingDraw!==this.E.lastTrackingDraw}wP(){return this.ws.getAppliedTrackingDraw()!==this.E.lastTrackingDraw}restoreClearedVisitor(){this.bE&&this.M.setVisitor(this.bE)}}return s})(),nA=(()=>{class s{constructor(t,e,i,n,o,c,l,h){this.E=t,this.M=e,this.ws=i,this.RE=n,this.AP=o,this.TP=c,this.bP=l,this.kd=h}compute(t){var e,i;this.E.crossDomainTracking&&!this.E.cookielessTrackingEnabled?this.E.crossDomainSingleIframeTracking?(e=this.bP)===null||e===void 0||e.start(()=>this.Gd(t)):(i=this.TP)===null||i===void 0||i.applyUpToDate(()=>this.Gd(t)):this.Gd(t)}Gd(t){this.AP.handle(),this.RE.clear(),this.RP()?(this.RE.restoreClearedVisitor(),t(!0)):(this.ws.exclude(this.E),t(!1))}RP(){let t=Ms.boolean(this.E.sampleRate);return this.kd.isForceIncluded()||!this.ws.isExcluded()&&this.M.doesVisitorExist()||!this.ws.isExcluded()&&t}}return s})(),oA=(()=>{class s{constructor(t,e,i,n){this.E=t,this.pt=e,this.w=i,this.C=n,this.CP=10*1e3}createOrUpdateVisitor(){var t;let e=this.getVisitor();e===null&&(e=this.IP(),(t=this.C)===null||t===void 0||t.removeSession()),this.PP(e),this.setVisitor(e)}IP(){return{id:L_.generate(),visitsCount:0,appliedTrackingDraw:this.E.lastTrackingDraw,creationTimestamp:Oa(),lastVisitTimestamp:0,hitTimestamp:0,expires:M.now()+this.E.visitorCookieTimeout,allowSubdomains:this.E.allowSubdomains,identityPrint:null}}PP(t){let e=Oa();this.C&&!this.C.doesSessionExist()&&(t.visitsCount+=1,t.lastVisitTimestamp=e),t.hitTimestamp=e,t.appliedTrackingDraw=this.E.lastTrackingDraw,this.CE=t.visitsCount}getRequestParameters(){let t=this.getVisitor();return t?{uu:t.id,sn:`${t.visitsCount}`,hd:`${t.hitTimestamp}`}:{}}getVisitor(){return this.pt.get()}setVisitor(t){this.pt.set(t)}doesVisitorExist(){return this.pt.get()!==null}resetVisitor(){this.IE(),this.w.emitAfterVisitorCleared()}removeVisitor(){this.pt.remove()}hasAllowSubdomainsChanged(){let t=this.getVisitor();return t?t.allowSubdomains!==this.E.allowSubdomains:!1}handleSubdomainChange(){this.pt.handleSubdomainChange()}isSessionRenewed(){let t=this.getVisitor();return t===null||this.CE===void 0?!1:t.visitsCount!==this.CE}OP(){return!X(this.PE)||M.now()-this.PE>this.CP}renewVisitor(){this.OP()?(this.PE=M.now(),this.IE(),this.w.emitAfterVisitorRenewal()):H.warn("session:start:newVisitor is trying to renew visitor under time limit")}IE(){this.w.emitBeforeVisitorRenewal(),this.removeVisitor()}}return s})(),_e="_cs_id",aA=(()=>{class s{constructor(t,e,i){this.E=t,this.O=e,this.J=i}onCookieToSet(t){this.Mi=t}onCookieToRemove(t){this.Di=t}get(){let t;return this.E.cookielessTrackingEnabled?t=this.J.getItem(_e):t=this.O.get(_e),t?(Nl(t)||H.warn(`Invalid visitor string: ${t}`),Ol(t)):null}set(t){var e;let i=sg(t);if(this.E.cookielessTrackingEnabled)this.J.setItem(_e,i);else{let n=new csDate(t.expires);this.O.set(_e,i,n),(e=this.Mi)===null||e===void 0||e.call(this,_e,i,n)}}remove(){var t;this.E.cookielessTrackingEnabled?this.J.removeItem(_e):(this.O.delete(_e),(t=this.Di)===null||t===void 0||t.call(this,_e))}handleSubdomainChange(){if(this.E.cookielessTrackingEnabled)return;let t=this.get();t&&(t.allowSubdomains=this.E.allowSubdomains,this.E.allowSubdomains?this.O.delete(_e,Fr.CURRENT_DOMAIN):this.O.delete(_e,this.O.getRootDomain()),this.set(t))}}return s})();var cA=(()=>{class s{constructor(t,e,i,n,o,c){this.E=t,this.Ni=e,this.gr=i,this.N=n,this.w=o,this.J=c}initWithQuota(){if(!this.E.collectionEnabled){this.NE();return}let t=new y_(this.E.getSettingsFileUri(),"",{type:"json",cacheMinutes:15});this.Rt=new Ww(this.E,t,this.w),this.Rt.init((e,i)=>{e?this.init():this.NE(),j_(i)&&(U_.set(aa.HJ_DUAL_COLLECT,!0),window.dispatchEvent(new CustomEvent(V_)))})}NP(){this.N.schedule(()=>{var t;this.D=new oi,this.Z=new Sp(this.D),this.A=new B_(window.location,this.Z),this.O=new Fr(this.E,this.A,this.Ni),this.O.init(),this.St=new S_;let e;!((t=this.E.experimental)===null||t===void 0)&&t.checkPIIMigration&&(e=new Up,this.w.addListener(e)),this.S=new Bp([Hp.UXA],e),this.Y=new Fp,this.ht=new G_(e),this.It=new N_(this.E,new O_(this.E,this.O,this.St),this.w)})}NE(){}init(){wi.isSupported()&&wi.setDigestSalt(this.E.projectId.toString());let t,e,i,n,o,c,l,h,u,p,y,m,v,b,I,_,A,x,N,w,B,F,Q,Ct,Ht,oe,S,V,j;this.NP();let z=new o_;this.w.addListener(z),this.N.schedule(()=>{y=new iA(window.location,this.O),new A_().init(),m=Vh.create(),p=new Uh(m),this.Rt===void 0&&(this.Rt=new zw(this.E,this.w,y,this.A,new Uo),this.Rt.init())}),this.N.schedule(()=>{t=new qw(this.E,this.O,this.J),e=new eA(t,this.Rt,this.w,this.E.replayConsentRequiredForSession,this.E.malkaEtrEnabled),i=new aA(this.E,this.O,this.J),n=new oA(this.E,i,this.w,e),this.gr.setContext(n,e)}),this.N.schedule(()=>{c=new sA(n,e,this.It),l=new Ul(this.E,this.O,this.J),h=new pg(window.location,l),u=new fg(h),I=new rA(this.E,n,h),Ht=new Xp(cs,this.E);let pt;w=new Np(Ht,this.E.isChild,pt),B=new Mp(Ht),F=new Dp(Ht),Q=new xp,Ct=new Op(w,B,F,Q),_=new jp(this.S,Ct),A=new yg(this.A),x=new gg(A,this.S);let It=new jl(this.E,this.O,this.J);oe=new M_(this.D,It),N=new wm(this.S,oe);let ae=new Xw(n,e,h,oe,this.E);{let Ce=new Qw,ms=new Jw(Ce,window.location);this.E.crossDomainSingleIframeTracking||(v=new Yw(this.E,ae,ms));{o=new tg(this.E,this.O,t,i,l,It),o.init();let ys=new ug(this.E,Ce);o.setStates(ae,ys)}}}),this.N.schedule(()=>{let pt=new nA(this.E,n,h,I,c,v,o,y);this.E.implementations&&(S=new t_(this.E.implementations,this.S,this.N,this.E.experimental.snippets),S.init(),this.w.addListener(S)),pt.compute(It=>{this.N.schedule(async()=>{var ae,Ce,ms,ys;_.init();let He=new P_(this.E,this.S,this.It,e,this.w),Be=new i_(this.E,this.O,this.St),ce=new r_(this.w,window.location,Be),Mt=new s_(this.S,ce),te=new F_(this.S,this.E),Ki=new H_(this.Z,new Bh),Yr=new Y_(e,n),Xr,Ji,Kr,Qi=new Xc(this.E,n,e,b),Zi=new Xc(this.E,n,e,b,Ji);It?(this.w.emitInitTracking(),new $w(Qi,Zi,m,n,e,Yr,Ki,this.w,this.S,_,this.E,Mt,ce,He,this.It,this.D,Ht,this.Z,this.A,te,this.Y,Ct,oe,N,A,x,this.N,p,this.O,this.St,this.J,this.Rt,this.ht,Kr,Xr,V,j).start()):new dg(this.w,this.S,_,Mt,ce,u,He).start()})})})}}return s})(),Cs=(()=>{let s;return function(r){let t="{domain}/tag/tag.bundle.js?v={version}",e,i={loadBundle(A){let x=A.source,N=A.data;if(c(N)){let w=()=>{let B=n(t,N);y(B,()=>x.postMessage("csBundleLoaded",A.origin))};e=N.token,_(i.loadBundle),l(A.origin)&&w()}}};function n(A,x){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(A,"{version}",x.version),"{token}",x.token),"{domain}",x.domain)}function o(){return e}r.getToken=o;function c(A){return A&&A.type==="csBundleInjection"&&l(A.domain)&&u(A.version)&&h(A.token)}r.isAuthorizedIncomingMessage=c,r.hjDomainRegex=/^https?:\/\/[a-zA-Z0-9\.\-]+\.hotjar\.com$/;function l(A){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com|csq\.io)$/.test(A)||r.hjDomainRegex.test(A)}r.isAuthorizedDomain=l;function h(A){return/^[a-zA-Z0-9]+$/.test(A)}r.isAuthorizedToken=h;function u(A){return/^[a-zA-Z0-9\.]+$/.test(A)}r.isAuthorizedTagVersion=u;function p(){let A=window.opener||window.parent;return window!==A&&window.addEventListener}r.isActivable=p;function y(A,x){let N=document.createElement("script");N.type="text/javascript",N.async=!0,N.src=A,N.onload=x,N.charset="utf-8",document.head.appendChild(N)}r.addScript=y;function m(A){let x=document.createElement("link");x.rel="stylesheet",x.href=A,document.head.appendChild(x)}r.addStyle=m;function v(A){return`${A}?cb=${new csDate().getTime()}`}r.addCacheBusting=v;function b(){I(i.loadBundle)}r.waitForBundleInjection=b;function I(A){window.addEventListener("message",A,!1)}r.listen=I;function _(A){window.removeEventListener("message",A,!1)}r.removeListener=_}(s||(s={})),s})(),Kc="_hp_ved",lA=18e5,hA="/js/ved.js",uA="/css/ved.css",dA="/js/ved.css",fA=(()=>{let s;return function(r){r.StatusUpdate="status"}(s||(s={})),s})(),pA=(()=>{let s;return function(r){r.ReceivedInitMessage="received_init_message"}(s||(s={})),s})();var Hn=(()=>{let s;return function(r){let t=!1,e;function i(y){return e+y}function n(){let y=[i(uA),i(dA)];csArray.prototype.forEach.call(y,m=>{Cs.addStyle(m)})}function o(y){let m=new csRegExp("(^|;)[ ]*"+y+"=([^;]*)"),v=m.exec(document.cookie);return v?decodeURIComponent(v[2]):null}function c(y,m,v){let b=encodeURIComponent(y)+"="+encodeURIComponent(m),I=new csDate;I.setTime(I.getTime()+v);let _=b+"; expires="+I.toUTCString()+"; path=/";document.cookie=_}function l(){c(Kc,"on",lA)}function h(){return o(Kc)==="on"}r.isVLCookieEnabled=h;function u(y){window.heapV=Object.assign({},window.heap,{source:y==null?void 0:y.source,uri:e,loadArgs:y==null?void 0:y.data.args,identify:()=>{},track:()=>{}})}r.initializeHeapV=u;function p(y,m){var v;if(e=y,m){let b={type:fA.StatusUpdate,value:pA.ReceivedInitMessage},I={targetOrigin:m==null?void 0:m.origin};(v=m==null?void 0:m.source)===null||v===void 0||v.postMessage(b,I)}t||(t=!0,l(),u(m),window.heapV&&(Cs.addScript(i(hA)),n()))}r.init=p}(s||(s={})),s})(),gA=(()=>{let s;return function(r){let t=window.opener||window.parent,e="tag",i="https://app.contentsquare.com",n=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/,/^https:\/\/app\.[a-z0-9-]+\.csiab\.[a-z0-9-]+\.csq\.io$/,Cs.hjDomainRegex],o,c,l,h={initHeapVisualLabeler(w){var B;w.origin===l&&((B=w.data)===null||B===void 0?void 0:B.message)==="init"&&w.source&&(Hn.init(l,w),A(h.initHeapVisualLabeler))},ping(w){typeof w.data=="string"&&w.data==="ping"&&y(w.origin)&&(c=w.origin,o=Cs.hjDomainRegex.test(w.origin)?i:w.origin,A(h.ping),_(h.insertMessageScript),m(Cs.addCacheBusting("utils.js")))},insertMessageScript:x(w=>{typeof w.data=="string"&&w.data!=="ping"&&(A(h.insertMessageScript),m(w.data))})};function u(){return Cs.getToken()}r.getToken=u;function p(){return window!==t&&window.addEventListener}r.isActivable=p;function y(w){return csArray.prototype.some.call(n,B=>B.test(w))}r.isAuthorizedDomain=y;function m(w,B){let F=document.createElement("script");F.type="text/javascript",F.async=!0;let Q=o==null?void 0:csString.prototype.replace.call(o,/^https?:/,"");F.src=`${Q}/${e}/${w}`,F.onload=B,F.charset="utf-8",document.getElementsByTagName("head")[0].appendChild(F),v(w)}function v(w){csString.prototype.includes.call(w,"&mode=")&&sessionStorage.setItem("_hjRetakerMode",csString.prototype.split.call(w,"&mode=")[1])}function b(){_(h.ping),Cs.waitForBundleInjection()}r.waitForConnection=b;function I(w){l=w,_(h.initHeapVisualLabeler),Hn.isVLCookieEnabled()&&Hn.init(l)}r.waitForHeapVisualLabeler=I;function _(w){window.addEventListener("message",w,!1)}r.listen=_;function A(w){window.removeEventListener("message",w,!1)}r.removeListener=A;function x(w){return function(B){B.origin===c&&w(B)}}r.secureListener=x;function N(w){c&&t.postMessage(w,c)}r.post=N}(s||(s={})),s})();var Ar=window.CSFrameCommunication||gA,mA=(()=>{class s extends jo{constructor(t){super(),this.N=t;{let e=(i,n)=>{if(typeof n!="string"||!csString.prototype.startsWith.call(n,"on"))return;let o=csString.prototype.substring.call(n,2);return(...c)=>{n==="onInitialDomDone"&&(c=[]),document.dispatchEvent(new CustomEvent("cs-e2e-event",{detail:{type:"lifecycle",name:o,data:c}}))}};this.addListener(new Proxy({},{get:e}))}}emitBeforeNaturalPageView(t){for(let e of this.listeners)e.onBeforeNaturalPageView&&e.onBeforeNaturalPageView(t)}emitAfterNaturalPageView(t){for(let e of this.listeners)e.onAfterNaturalPageView&&e.onAfterNaturalPageView(t)}emitInitTracking(){for(let t of this.listeners)t.onInitTracking&&t.onInitTracking()}emitStartTracking(t){for(let e of this.listeners)e.onStartTracking&&this.N.schedule(()=>e.onStartTracking(t))}emitStartNoTrackingMode(){for(let t of this.listeners)t.onStartNoTrackingMode&&this.N.schedule(()=>t.onStartNoTrackingMode())}emitArtificialPageViewEnd(t=!1){for(let e of this.listeners)if(e.onArtificialPageViewEnd)try{e.onArtificialPageViewEnd(t)}catch(i){H.error(i)}}emitBeforeArtificialPageView(t,e){for(let i of this.listeners)i.onBeforeArtificialPageView&&i.onBeforeArtificialPageView(t,e)}emitAfterArtificialPageView(t=!1){for(let e of this.listeners)e.onAfterArtificialPageView&&e.onAfterArtificialPageView(t)}emitBeforeSessionRenewal(){for(let t of this.listeners)t.onBeforeSessionRenewal&&t.onBeforeSessionRenewal()}emitAfterSessionRenewal(){for(let t of this.listeners)t.onAfterSessionRenewal&&t.onAfterSessionRenewal()}emitOptout(){for(let t of this.listeners)t.onOptout&&t.onOptout()}emitReplayUnanonymizationConsentGranted(){for(let t of this.listeners)t.onReplayUnanonymizationConsentGranted&&t.onReplayUnanonymizationConsentGranted()}emitReplayUnanonymizationConsentWithdrawn(){for(let t of this.listeners)t.onReplayUnanonymizationConsentWithdrawn&&t.onReplayUnanonymizationConsentWithdrawn()}emitAfterReplayRecordingConsentGranted(){for(let t of this.listeners)t.onAfterReplayRecordingConsentGranted&&t.onAfterReplayRecordingConsentGranted()}emitAfterReplayRecordingConsentWithdrawn(){for(let t of this.listeners)t.onAfterReplayRecordingConsentWithdrawn&&t.onAfterReplayRecordingConsentWithdrawn()}emitCollectStateChange(t,e){for(let i of this.listeners)i.onCollectStateChange&&i.onCollectStateChange(t,e)}emitInitialDomStart(){for(let t of this.listeners)t.onInitialDomStart&&t.onInitialDomStart()}emitInitialDomDone(t){for(let e of this.listeners)e.onInitialDomDone&&e.onInitialDomDone(t)}emitRecordingContextChange(){for(let t of this.listeners)t.onRecordingContextChange&&t.onRecordingContextChange()}emitSensitiveStatusChange(){var t;for(let e of this.listeners)(t=e.onSensitiveStatusChange)===null||t===void 0||t.call(e)}emitBeforeVisitorRenewal(){for(let t of this.listeners)t.onBeforeVisitorRenewal&&t.onBeforeVisitorRenewal()}emitAfterVisitorCleared(){for(let t of this.listeners)t.onAfterVisitorCleared&&t.onAfterVisitorCleared()}emitAfterVisitorRenewal(){for(let t of this.listeners)t.onAfterVisitorRenewal&&t.onAfterVisitorRenewal()}emitSessionCreated(){for(let t of this.listeners)t.onSessionCreated&&t.onSessionCreated()}emitSessionRemoved(){for(let t of this.listeners)t.onSessionRemoved&&t.onSessionRemoved()}emitSessionRefreshed(){for(let t of this.listeners)t.onSessionRefreshed&&t.onSessionRefreshed()}emitTargetingRulesMatched(){for(let t of this.listeners)t.onTargetingRulesMatched&&t.onTargetingRulesMatched()}}return U([Nt("emitStartTracking")],s.prototype,"emitStartTracking",null),s})();var yA=(()=>{class s{constructor(t,e,i){this.E=t,this.Ct=e,this.gr=i}start(){var t,e,i,n,o;if(window.CSQ_TAGS=csArray.prototype.concat.call(window.CSQ_TAGS||[],this.E.projectId),window.UXAnalytics)return;window.UXAnalytics={};let c=new Rw,l=new bh(!!(!((t=this.E.taskSchedulerOptions)===null||t===void 0)&&t.enabled),(e=this.E.taskSchedulerOptions)===null||e===void 0?void 0:e.maxProcessingTime,(i=this.E.taskSchedulerOptions)===null||i===void 0?void 0:i.waitDuration),h=new pp(this.Ct,this.E);h.init();let u=new mp(this.E,h);if(this.Ct.isTopWindowTracker()&&u.canTrack()){if(!((n=window.CSProtectnativeFunctionsLogs)===null||n===void 0)&&n.Warning&&H.warn(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Warning}`),!((o=window.CSProtectnativeFunctionsLogs)===null||o===void 0)&&o.Critical){H.error(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Critical}`);return}dp();let y=new mA(l),m=new cA(this.E,h,this.gr,l,y,c);this.E.isQuotaEnabled()?m.initWithQuota():m.init()}let p=csString.prototype.indexOf.call(window.location.href,"csDebug=1")>-1;window.UXAnalytics={Sensitive:{isNodeSensitive(y){return D.isMaskedElement(y)||D.isMaskedElementChild(y)},isAttributeSensitive(y,m){return D.isMaskedAttribute(y,m)},getSensitiveAttributes(y){return Pi(y.attributes,m=>D.isMaskedAttribute(y,m.name))}},Console:{warn(y){p&&console.warn("cs.tracking.warning",y)},error(y){p&&console.error("cs.tracking.error",y)}},Version:yl},window.CSFrameCommunication||(window.CSFrameCommunication=Ar,Ar.isActivable()&&Ar.waitForConnection(),this.E.isCsCrosswritingHeap()&&Ar.waitForHeapVisualLabeler(this.E.getHeapWebAppUri()))}}return U([Nt("main.start"),P("main.start")],s.prototype,"start",null),s})();function EA(){csSetTimeout(()=>{let s=0;typeof CompressionStream!="undefined"&&(s|=1),typeof TransformStream!="undefined"&&(s|=2),typeof performance!="undefined"&&typeof performance.now=="function"&&(s|=4),typeof Worker!="undefined"&&(s|=8),typeof scheduler!="undefined"&&(typeof scheduler.yield=="function"&&(s|=16),typeof scheduler.postTask=="function"&&(s|=32)),G.counters.availableFeatures.set(s)})}var vA=(()=>{class s{constructor(t,e,i){this.K=t,this.D=e,this.xO=i,this.wt=[],this.LO=Lo().v,EA()}flush(){this.wt.length!==0&&(this.K.send({m:csArray.prototype.map.call(this.wt,t=>({n:t.name,p:t.parameter,v:t.value})),p:this.D.anonymizePII(window.location.pathname),pid:this.xO,v:this.LO}),this.wt=[])}push(t){csArray.prototype.push.call(this.wt,...t),this.flush()}}return s.THROTTLE_INTERVAL=5e3,U([Bs({wait:s.THROTTLE_INTERVAL,mode:"trailing"})],s.prototype,"flush",null),s})();function SA(s,r){let t=s.validationRate/10,e=Ms.boolean(t);if((s.environment==="staging"||!1||e)&&!r.isInWebViewContext())try{let o=Vh.create(r.isTopWindowTracker()),l=new Uh(o).create(s.getMetricsUri()),h=new oi,u=new vA(l,h,s.projectId);G.setService(u)}catch(o){H.warn(`Error initializing metrics: ${o.message}`)}}function _A(){var s;Cd();let r=new lp(window.CS_CONF);window._uxa=window._uxa||[],r.processOptionOverrides(window._uxa);let t=new wf(window,r);t.init();let e=new Cf;if(fd(H),Sf(),H.computeIsActive(r.validationRate),t.isTopWindowTracker()){let n=new qf(r,e);H.setStrategy(n)}else if(t.isInWebViewContext()){let n=new Yf;H.setStrategy(n)}!((s=r==null?void 0:r.experimental)===null||s===void 0)&&s.disableMutationObserverProtection&&window.csMutationObserver&&(window.csMutationObserver=Vs(window,"MutationObserver")),mf(),SA(r,t),new yA(r,t,e).start()}window.CSCurrentScript=document.currentScript;csSetTimeout(()=>{try{_f(_A)}catch{}});})();

// signature-c2c65f29039908f10b2d0a5ebceeef578fcd241f67afbd5fc961e853df5a45a7